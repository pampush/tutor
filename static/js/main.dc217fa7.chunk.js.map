{"version":3,"sources":["firebase.js","redux/actions/date.js","redux/actions/user.js","components/CustomInputs.jsx","stylesOverride.js","pages/Schedule.jsx","pages/Pupils.jsx","redux/actions/finance.js","pages/Finance.jsx","pages/HomeworkList.jsx","pages/PrivacyPolicy.jsx","PrivateRoute.jsx","PrivateSignedInRoute.jsx","pages/LessonHomework.jsx","App.js","redux/reducers/lessons.js","redux/reducers/pupils.js","redux/reducers/schedules.js","redux/reducers/scheduledLessons.js","redux/reducers/date.js","redux/reducers/user.js","redux/reducers/index.js","redux/store.js","index.js","redux/actions/lessons.js","redux/actions/scheduledLessons.js","components/InfoPanel/InfoPanelCard.jsx","components/InfoPanel/InfoPanel.jsx","components/Calendar.jsx","components/notesForm/NotesFormInputs.jsx","components/notesForm/initialValues.js","components/notesForm/validationSchema.js","components/notesForm/NotesForm.jsx","components/themeForm/ThemeFormInputs.jsx","components/themeForm/initialValues.js","components/themeForm/validationSchema.js","components/themeForm/ThemeForm.jsx","components/addLessonForm/AddLessonInputs.jsx","components/editLessonForm/EditLessonInputs.jsx","components/editLessonForm/initialValues.js","components/addLessonForm/validationSchema.js","components/editLessonForm/EditLessonForm.jsx","components/Lessons/LessonCard.jsx","components/lessonFromTemplateForm/LessonFromTemplateInputs.jsx","components/lessonFromTemplateForm/formInitialValues.js","components/lessonFromTemplateForm/validationSchema.js","redux/actions/lessonFromTemplate.js","components/lessonFromTemplateForm/LessonFromTemplateForm.jsx","components/editScheduleForm/initialValues.js","components/addScheduleForm/validationSchema.js","components/addScheduleForm/AddScheduleInputs.jsx","components/editScheduleForm/EditScheduleFormInputs.jsx","components/editScheduleForm/EditScheduleForm.jsx","components/Lessons/LessonTemplateCard.jsx","components/addLessonForm/formInitialValues.js","components/addLessonForm/AddLessonForm.jsx","components/Lessons/Lessons.jsx","components/Menu/MenuItem.jsx","components/Menu/MenuHeader.jsx","components/Menu/MenuLgDrawer.jsx","components/Menu/MenuMdDrawer.jsx","components/Menu/MenuSmDrawer.jsx","components/Menu/Menu.jsx","components/addScheduleForm/initialValues.js","components/addScheduleForm/AddScheduleForm.jsx","components/editPupilForm/initialValues.js","components/addPupilForm/validationSchema.js","components/addPupilForm/AddPupilInputs.jsx","components/editPupilForm/EditPupilFormInputs.jsx","components/editPupilForm/EditPupilForm.jsx","components/Pupils/PupilCard.jsx","components/addPupilForm/AddScheduleInputs.jsx","components/addPupilForm/formInitialValues.js","components/addPupilForm/bitlyAPI.js","redux/actions/newPupil.js","components/addPupilForm/AddPupilForm.jsx","components/Pupils/PupilsList.jsx","components/auth/signupForm/initialValues.js","components/auth/signupForm/validationSchema.js","components/auth/signupForm/SignupInputs.jsx","components/auth/ErrorSnack.jsx","components/auth/signupForm/Recaptcha.jsx","components/auth/EmailSnack.jsx","components/auth/Footer.jsx","components/auth/signupForm/Signup.jsx","components/auth/loginForm/initialValues.js","components/auth/loginForm/validationSchema.js","components/auth/loginForm/LoginInputs.jsx","components/auth/loginForm/Login.jsx","assets/img/notfound.svg","components/NotFound.jsx","components/Instruction.jsx","components/MonthPicker.jsx","components/LoadingScreen.jsx","components/homework/HomeworkListItem.jsx","contexts/AuthContext.jsx","redux/actions/schedules.js","redux/actions/pupils.js","components/SnackPopup.jsx"],"names":["app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","languageCode","storage","setDate","date","type","payload","postUser","id","data","dispatch","a","doc","set","fetchUser","get","user","addUser","MyTextField","props","useField","name","field","meta","error","touched","Boolean","helperText","MyCheckBox","MySelect","Fragment","className","theme","createMuiTheme","palette","primary","main","blue","secondary","orange","text","typography","body1","fontSize","overrides","MuiDrawer","paper","backgroundColor","MuiButton","label","color","containedSecondary","MuiIconButton","colorSecondary","MuiCardContent","root","paddingBottom","Schedule","useDispatch","React","useState","anchorCalendar","setAnchorEl","useContext","AuthContext","firstLogin","setFirstLogin","handleCalendarOpen","e","currentTarget","handleCalendarClose","handleCalendarClick","fetchLessons","fetchScheduledLessons","open","handleClose","Container","maxWidth","Grid","container","spacing","Hidden","only","item","xs","anchor","handleClick","mdUp","smDown","Box","Pupils","fetchPrices","prices","lessonsPromises","collection","currentUser","uid","forEach","pupil","sum","push","where","Promise","all","lessonsSnapshot","lessonsSnap","price","console","Chart","register","LinearScale","Tooltip","BarElement","BarController","CategoryScale","PieController","ArcElement","Legend","DoughnutController","Finance","canvas","useRef","Date","setPrices","setSum","useEffect","mounted","formatISO","representation","slice","then","Object","keys","length","values","reduce","accum","next","err","myChart","current","labels","map","datasets","r","Math","floor","random","g","b","colorGen","hoverOffset","options","layout","padding","plugins","legend","position","afterDraw","chart","ctx","font","textAlign","save","fillText","width","height","restore","destroy","initialDate","handleDateChange","ref","HomeworkList","folders","setFolders","useParams","userId","homeworkLink","pupils","useSelector","items","handleSubmit","storageRef","imagesHomeworkRef","child","files","put","snapshot","isLoaded","listAll","res","prefixes","Typography","variant","List","i","useStyles","makeStyles","marginTop","marginBottom","margin","list","listStyle","listItemRoot","display","credentials","foundations","PrivacyPolicy","classes","fontWeight","component","ListItem","PrivateRoute","Component","rest","render","emailVerified","to","PrivateSignedInRoute","LessonHomework","metas","setMetas","urls","setUrls","fileSnapshot","prev","metadata","getDownloadURL","url","log","fullPath","delete","index","findIndex","filter","_","metasPromises","urlPromises","getMetadata","Button","startIcon","onChange","accept","hidden","Link","href","target","IconButton","edge","aria-label","onClick","handleDelete","Settings","lazy","Content","business","fetchPupils","fetchSchedules","exact","path","fallback","App","StylesProvider","injectFirst","ThemeProvider","CssBaseline","Signup","Login","initialState","lessons","state","action","newState","schedules","newLessons","procedure","scheduledLessons","selected","timestamp","email","appReducer","combineReducers","rootReducer","undefined","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","document","getElementById","ISODate","timer","stopwatch","fastRetrieveLessons","query","setLessons","retrievedLessons","orderBy","lessonDoc","postLesson","lesson","preventIsLoaded","addLesson","deleteLesson","deleteLessonAction","resolve","reject","deleteLessonsBySmth","changeLesson","update","updateLesson","fn","before","performance","now","args","apply","result","after","retrieveSchedulesByDay","today","getISODay","localISODate","includes","setScheduledLessons","InfoPanelCard","children","header","Card","CardContent","gutterBottom","days","endingsForm","n","InfoPanel","numLessons","xsDown","getDay","MuiPickersDay","daySelected","MuiPickersStaticWrapper","staticWrapperRoot","boxShadow","borderRadius","RuLocalizedUtils","format","locale","this","DateFnsUtils","MuiCalendar","utils","ruLocale","DatePicker","autoOk","disableToolbar","value","Calendar","forwardRef","NotesFormInputs","autoComplete","multiline","fullWidth","initialValues","note","validationSchema","yup","shape","max","withWidth","handleSnack","actions","setSubmitting","Dialog","onClose","aria-labelledby","fullScreen","isWidthDown","DialogTitle","DialogContent","onSubmit","ThemeFormInputs","initialValue","lessonTheme","menuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","iconComponent","AddLessonInputs","FormControl","InputLabel","labelId","MenuProps","IconComponent","key","MenuItem","sm","inputProps","step","rowsMax","EditLessonInputs","required","typeError","subject","time","matches","min","LessonCard","address","schedule","handleDeleteSnack","handleLessonThemeEditSnack","handleSnackLessonEdit","history","useHistory","anchorEl","viewNotesForm","setViewNotesForm","viewThemeForm","setViewThemeForm","viewEditForm","setViewEditForm","selectedDate","deleteLessonFromSchedule","keepMounted","MenuList","autoFocus","justify","title","LessonFromTemplateInputs","formInitialValues","notes","lessonFromTemplate","batch","lessonRef","schRef","FieldValue","arrayUnion","commit","updateSchedule","pupilId","scheduleId","test","entries","trim","fromEntries","uniqid","day","oneOf","1","2","3","4","5","6","7","AddScheduleInputs","EditScheduleFormInputs","updateScheduleAction","LessonTemplateCard","handleCreateSnack","viewDeleteConsentDialog","setViewDeleteConsentDialog","viewForm","setViewForm","viewEditScheduleForm","setViewEditScheduleForm","deleteScheduleAction","pullScheduleFromPupil","style","tzoffset","getTimezoneOffset","toISOString","Lessons","lessonsLoaded","pupilsLoaded","scheduledLessonsLoaded","viewAddLessonForm","setViewAddLessonForm","snackAddLessonView","setSnackAddLessonView","snackFromTemplateView","setSnackFromTemplateView","snackNotesView","setSnackNotesView","snackDeleteLesson","setSnackDeleteLesson","snackDeleteSchedule","setSnackDeleteSchedule","snackLessonThemeEdit","setSnackLessonThemeEdit","snackLessonEdit","setSnackLessonEdit","calendar","handleSnackAddLessonView","useCallback","handleSnackFromTempalateView","handleSnackNotesView","handleSnackDeleteLesson","handleSnackDeleteSchedule","handleSnackLessonThemeEdit","Popover","SnackPopup","message","Array","fill","Skeleton","handleDrawer","button","NavLink","ListItemIcon","ListItemText","MenuHeader","userName","MenuLgDrawer","Drawer","PaperProps","elevation","Divider","MenuControls","MenuMdDrawer","setOpen","MenuSmDrawer","AppBar","Toolbar","Menu","smUp","mdDown","postSchedule","pushScheduleToPupil","parents","grade","person","contact","of","AddPupilInputs","useFormikContext","InputProps","insert","remove","startAdornment","InputAdornment","size","EditPupilFormInputs","EditPupilForm","updatePupilAction","memo","PupilCard","schedulesId","handleViewEditPupilSnack","viewAddScheduleForm","setViewAddScheduleForm","viewEditPupilForm","setViewEditPupilForm","forParentsMemo","parentsMemo","handleCloseEditPupilForm","deletePupilAction","deleteSchedulesByPupil","CardHeader","avatar","Avatar","subheader","parent","CardActions","arrow","REACT_APP_BITLY_ACCESS_TOKEN","fetch","method","mode","headers","Authorization","redirect","referrerPolicy","cache","body","JSON","stringify","domain","long_url","response","json","link","genHomeworkLink","formHandler","resSchedules","resPupil","pupilRef","addSchedule","addPupil","steps","getForm","activeStep","setActiveStep","currentValidationSchema","isLastStep","onExited","Stepper","Step","StepLabel","submitForm","setTouched","prevActiveStep","PupilsList","schedulesLoaded","viewAddPupilSnack","setViewAddPupilSnack","viewAddScheduleSnack","setViewAddScheduleSnack","viewEditPupilSnack","setViewEditPupilSnack","viewAddPupilForm","setViewAddPupilForm","handleViewAddScheduleSnack","handleViewAddPupilSnack","md","firstName","lastName","password","recaptcha","notOneOf","checkboxRoot","checkBoxButton","SignupInputs","viewPassword","setViewPassword","endAdornment","FormControlLabel","control","Popper","Paper","ErrorSnack","Snackbar","TransitionComponent","Grow","autoHideDuration","Recaptcha","errors","setFieldTouched","setFieldValue","recaptchaVerifier","RecaptchaVerifier","callback","widgetId","mt","mb","EmailSnack","ContentProps","align","signup","verifyEmail","updateUser","loading","setLoading","setError","viewErrorSnack","setViewErrorSnack","viewEmailVerifySnack","setViewEmailVerifySnack","userCredential","bucketId","setTimeout","code","clearTimeout","direction","alignItems","disabled","LoginInputs","_rect","_rect2","_rect3","_rect4","_rect5","_rect6","_rect7","_rect8","_rect9","_rect10","_rect11","_rect12","login","_extends","assign","arguments","source","prototype","hasOwnProperty","call","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgNotfound","_ref","svgRef","titleId","xmlns","x","y","ForwardRef","NotFound","paddingTop","Instruction","p","pt","months","MonthPicker","addMonths","getMonth","getFullYear","LoadingScreen","BackdropProps","CircularProgress","HomeworkListItem","opened","setOpened","fileRef","metadataPromises","urlPromise","metadataPromise","urlArray","metadataArray","ListItemAvatar","ListItemSecondaryAction","Collapse","in","timeout","createContext","AuthProvider","setCurrentUser","setUserName","displayName","onAuthStateChanged","getIdTokenResult","authTime","creationTime","getIdToken","referrer","createUserWithEmailAndPassword","signInWithEmailAndPassword","sendEmailVerification","handleCodeInApp","updateProfile","verifyBeforeUpdateEmail","signout","signOut","updateEmail","updatePassword","reAuth","authCredential","EmailAuthProvider","credential","reauthenticateWithCredential","Provider","retrieveSchedules","setSchedules","schPromises","arrayRemove","schedulesPromises","schedulesSnap","retrievePupils","setPupils","retrievedPupils","pupilDoc","updatePupil","deletePupil"],"mappings":"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","file":"static/js/main.dc217fa7.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\n\r\nconst app = firebase.initializeApp({\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n});\r\n\r\nexport const db = app.firestore();\r\n\r\nexport const auth = app.auth();\r\nauth.languageCode = 'ru';\r\n\r\nexport const storage = app.storage();\r\nexport default app;\r\n","export const setDate = (date) => ({\r\n  type: 'SET_DATE',\r\n  payload: date,\r\n});\r\n","import { db } from '../../firebase';\r\n\r\nexport const postUser = ({id, ...data}) => async (dispatch) => {\r\n  await db.doc(`/users/${id}`).set({ id, ...data });\r\n};\r\n\r\nexport const fetchUser = (id) => async (dispatch) => {\r\n  dispatch({ type: 'SET_USER_LOADED', payload: false });\r\n  const user = await db.doc(`/users/${id}`).get();\r\n  dispatch(addUser(user.data()));\r\n};\r\n\r\nexport const addUser = (data) => ({\r\n  type: 'SET_USER',\r\n  payload: data,\r\n});\r\n","import React from \"react\";\r\nimport { useField } from \"formik\";\r\n\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Select from \"@material-ui/core/Select\";\r\nimport { Checkbox } from \"@material-ui/core\";\r\n\r\nexport const MyTextField = ({ ...props }) => {\r\n  const [field, meta, helpers] = useField(props.name);\r\n  return (\r\n    <TextField\r\n      {...field}\r\n      {...props}\r\n      error={meta.touched && Boolean(meta.error)}\r\n      helperText={meta.touched && meta.error}\r\n    />\r\n  );\r\n};\r\n\r\nexport const MyCheckBox = ({ ...props }) => {\r\n  const [field, meta] = useField(props);\r\n  return <Checkbox {...field} {...props} />;\r\n};\r\n\r\nexport const MySelect = ({ ...props }) => {\r\n  const [field, meta] = useField(props);\r\n  return (\r\n    <React.Fragment>\r\n      <Select\r\n        {...field}\r\n        {...props}\r\n        error={meta.touched && Boolean(meta.error)}\r\n      />\r\n      {meta.touched && meta.error ? (\r\n        <span className=\"lesson-form__select-error\">{meta.error}</span>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport orange from '@material-ui/core/colors/orange';\r\n/**\r\n * Global material ui styles overrides\r\n */\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: blue[500],\r\n    },\r\n    secondary: {\r\n      main: orange[500],\r\n    },\r\n    text: {\r\n      primary: '#000000',\r\n      secondary: '#757575',\r\n    },\r\n  },\r\n  typography: {\r\n    body1: { fontSize: '1.3rem' },\r\n  },\r\n\r\n  overrides: {\r\n    MuiDrawer: {\r\n      paper: {\r\n        backgroundColor: '#F5F5F5',\r\n      },\r\n    },\r\n    MuiButton: {\r\n      label: { color: '#ffffff' },\r\n      containedSecondary: {\r\n        '&:hover': {\r\n          backgroundColor: '#2196F3',\r\n        },\r\n      },\r\n    },\r\n    MuiIconButton: {\r\n      colorSecondary: {\r\n        '&:hover': {\r\n          backgroundColor: '#2196F3',\r\n          color: '#FFFFFF',\r\n          '@media (hover:none)': {\r\n            backgroundColor: orange[500],\r\n          },\r\n        },\r\n      },\r\n    },\r\n    MuiCardContent: {\r\n      root: {\r\n        '&:last-child': { paddingBottom: '16px' },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import React from 'react';\r\nimport { Calendar, Lessons, Instruction } from '../components';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { fetchLessons } from '../redux/actions/lessons';\r\nimport { fetchScheduledLessons } from '../redux/actions/scheduledLessons';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\n\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\n\r\n\r\nfunction Schedule() {\r\n  const dispatch = useDispatch();\r\n  const [anchorCalendar, setAnchorEl] = React.useState(null);\r\n  const { firstLogin, setFirstLogin } = React.useContext(AuthContext);\r\n  \r\n  function handleCalendarOpen(e) {\r\n    setAnchorEl(e.currentTarget);\r\n  }\r\n\r\n  function handleCalendarClose() {\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  function handleCalendarClick(date) {\r\n    dispatch(fetchLessons(date));\r\n    dispatch(fetchScheduledLessons(date));\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {firstLogin && <Instruction open={firstLogin} handleClose={setFirstLogin} />}\r\n      <Container maxWidth=\"xl\" className=\"lessons__container\">\r\n        <Grid container spacing={2}>\r\n          <Hidden only={['xs', 'sm']}>\r\n            <Grid item xs={8}>\r\n              <Lessons\r\n                anchor={anchorCalendar}\r\n                handleClick={handleCalendarOpen}\r\n                handleClose={handleCalendarClose}\r\n                handleCalendarClick={handleCalendarClick}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n\r\n          <Hidden mdUp>\r\n            <Grid item xs={12}>\r\n              <Lessons\r\n                anchor={anchorCalendar}\r\n                handleCalendarOpen={handleCalendarOpen}\r\n                handleCalendarClose={handleCalendarClose}\r\n                handleCalendarClick={handleCalendarClick}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n\r\n          <Hidden smDown>\r\n            <Grid item xs={4} className=\"calendar__container\">\r\n              <Box className=\"calendar--fixed\">\r\n                <Calendar handleClick={handleCalendarClick} />\r\n              </Box>\r\n            </Grid>\r\n          </Hidden>\r\n        </Grid>\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Schedule;\r\n","import React from 'react';\r\n\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport { PupilsList } from '../components';\r\n\r\nfunction Pupils() {\r\n  return (\r\n    <React.Fragment>\r\n      <Container maxWidth=\"xl\" className=\"pupils__container\">\r\n        <PupilsList />\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Pupils;\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\n\r\nexport const fetchPrices = async (date) => {\r\n  const prices = {};\r\n  const lessonsPromises = [];\r\n  try {\r\n    const pupilsSnapshot = await db.collection(`/users/${auth.currentUser.uid}/pupils`).get();\r\n\r\n    pupilsSnapshot.forEach((pupil) => {\r\n      prices[pupil.data().id] = { sum: 0, name: pupil.data().name };\r\n      lessonsPromises.push(\r\n        db\r\n          .collection(`/users/${auth.currentUser.uid}/lessons`)\r\n          .where('pupil', '==', pupil.data().id)\r\n          .where('date', '>=', date + '-00')\r\n          .where('date', '<=', date + '31')\r\n          .get(),\r\n      );\r\n    });\r\n\r\n    const lessonsByPupil = await Promise.all(lessonsPromises);\r\n    lessonsByPupil.forEach((lessonsSnapshot) =>\r\n      lessonsSnapshot.forEach((lessonsSnap) => {\r\n        prices[lessonsSnap.data().pupil].sum =\r\n          prices[lessonsSnap.data().pupil].sum + lessonsSnap.data().price;\r\n      }),\r\n    );\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n  return prices;\r\n};\r\n","import React from \"react\";\r\nimport { fetchPrices } from \"../redux/actions/finance\";\r\nimport { formatISO } from \"date-fns\";\r\n\r\nimport { Container } from \"@material-ui/core\";\r\nimport { MonthPicker } from \"../components\";\r\n\r\nimport {\r\n  Chart,\r\n  BarElement,\r\n  LinearScale,\r\n  BarController,\r\n  CategoryScale,\r\n  PieController,\r\n  ArcElement,\r\n  Tooltip,\r\n  Legend,\r\n  DoughnutController,\r\n} from \"chart.js\";\r\n\r\nChart.register(\r\n  LinearScale,\r\n  Tooltip,\r\n  BarElement,\r\n  BarController,\r\n  CategoryScale,\r\n  PieController,\r\n  ArcElement,\r\n  Legend,\r\n  DoughnutController\r\n);\r\n\r\nfunction colorGen() {\r\n  const r = Math.floor(Math.random() * 256);\r\n  const g = Math.floor(Math.random() * 256);\r\n  const b = Math.floor(Math.random() * 256);\r\n  return `rgb(${r}, ${g}, ${b})`;\r\n}\r\n\r\nfunction Finance() {\r\n  const canvas = React.useRef(null);\r\n\r\n  const [date, setDate] = React.useState(new Date());\r\n  const [prices, setPrices] = React.useState({});\r\n  const [sum, setSum] = React.useState(0);\r\n\r\n  React.useEffect(() => {\r\n    let mounted = true;\r\n    try {\r\n      fetchPrices(\r\n        formatISO(date, { representation: \"date\" }).slice(0, -3)\r\n      ).then((prices) => {\r\n        if (!mounted) return;\r\n\r\n        setPrices(prices);\r\n\r\n        if (Object.keys(prices).length) {\r\n          setSum(\r\n            Object.values(prices).reduce((accum, next) => ({\r\n              sum: accum.sum + next.sum,\r\n            })).sum\r\n          );\r\n        }\r\n      });\r\n    } catch (e) {\r\n      console.err(e);\r\n    }\r\n\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [date]);\r\n\r\n  React.useEffect(() => {\r\n    if (Object.keys(prices).length === 0) return;\r\n\r\n    const myChart = new Chart(canvas.current, {\r\n      type: \"doughnut\",\r\n      data: {\r\n        labels: Object.values(prices).map(({ name }) => name),\r\n        datasets: [\r\n          {\r\n            label: \"first\",\r\n            data: Object.values(prices).map(({ sum }) => sum),\r\n            backgroundColor: Object.keys(prices).map(() => colorGen()),\r\n            hoverOffset: 4,\r\n          },\r\n        ],\r\n      },\r\n      options: {\r\n        layout: {\r\n          padding: 5,\r\n        },\r\n        plugins: {\r\n          legend: {\r\n            position: \"bottom\",\r\n          },\r\n        },\r\n      },\r\n      plugins: [\r\n        {\r\n          afterDraw: (chart) => {\r\n            const ctx = chart.ctx;\r\n            ctx.font = \"bold 48px sans-serif\";\r\n            ctx.textAlign = \"center\";\r\n            ctx.save();\r\n            const imageSize = 200;\r\n            ctx.fillText(\r\n              sum || \"Уроков не найдено\",\r\n              chart.width / 2,\r\n              (chart.height - chart.legend.height) / 2,\r\n              imageSize\r\n            );\r\n            ctx.restore();\r\n          },\r\n        },\r\n      ],\r\n    });\r\n    return () => myChart.destroy();\r\n  }, [sum]);\r\n\r\n  return (\r\n    <Container>\r\n      <MonthPicker initialDate={date} handleDateChange={setDate} />\r\n      {Object.keys(prices).length ? (\r\n        <div className=\"finance__container\">\r\n          <canvas ref={canvas}></canvas>\r\n        </div>\r\n      ) : (\r\n        <div className=\"finance__container\">\r\n          <span>Учеников не найдено</span>\r\n        </div>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Finance;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useParams } from 'react-router-dom';\r\nimport { storage } from '../firebase';\r\n\r\nimport { Container, List, Typography } from '@material-ui/core';\r\n\r\nimport { HomeworkListItem } from '../components';\r\n\r\nfunction HomeworkList({ currentUser }) {\r\n  const [folders, setFolders] = React.useState([]);\r\n  const { userId, pupil } = useParams();\r\n  let homeworkLink = null;\r\n\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const isLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n  if (isLoaded) homeworkLink = pupils[pupil].homeworkLink;\r\n\r\n  React.useEffect(() => {\r\n    const storageRef = storage.ref();\r\n    const folders = [];\r\n    storageRef\r\n      .child(`${userId}/${pupil}`)\r\n      .listAll()\r\n      .then((res) => res.prefixes.forEach((item) => folders.push(item.name)))\r\n      .then(() => setFolders(folders));\r\n  }, []);\r\n\r\n  async function handleSubmit(date, e) {\r\n    const storageRef = storage.ref();\r\n    const imagesHomeworkRef = storageRef.child(\r\n      `${userId}/${pupil}/${date}/${e.currentTarget.files[0].name}`,\r\n    );\r\n    const snapshot = await imagesHomeworkRef.put(e.currentTarget.files[0]);\r\n    return snapshot;\r\n  }\r\n\r\n  return (\r\n    <Container className=\"homework__container\">\r\n      <Typography variant=\"h5\" className=\"pupils__header\">\r\n        Домашняя работа\r\n      </Typography>\r\n      {currentUser && (\r\n        <Typography className=\"homework__lesson-title\" variant=\"body1\">\r\n          {`Ссылка на домашнюю работу для ученика: ${homeworkLink}`}\r\n        </Typography>\r\n      )}\r\n      <List>\r\n        {folders.map((item, i) => (\r\n          <HomeworkListItem\r\n            key={`${item}${i}`}\r\n            date={item}\r\n            pupil={pupil}\r\n            userId={userId}\r\n            handleSubmit={handleSubmit}\r\n          />\r\n        ))}\r\n      </List>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default HomeworkList;\r\n","import React from \"react\";\r\nimport { Container, Typography, Box, List, ListItem } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/styles\";\r\n\r\nconst useStyles = makeStyles({\r\n  container: {\r\n    marginTop: \"20px\",\r\n    marginBottom: \"20px\",\r\n  },\r\n  typography: {\r\n    margin: \"20px 0\",\r\n  },\r\n  list: {\r\n    listStyle: \"disc inside\",\r\n  },\r\n  listItemRoot: {\r\n    display: \"list-item\",\r\n  },\r\n});\r\n\r\nconst credentials = [\r\n  \"Изображение профиля (аватар)\",\r\n  \"Фамилия, имя\",\r\n  \"Адрес электронной почты\",\r\n];\r\n\r\nconst foundations = [\r\n  \"статья 24 Конституции Российской Федерации;\",\r\n  \"пункты 1 и 5 части 1 статьи 6 Федерального закона №152-ФЗ «О персональных данных»;\",\r\n  \"настоящее Согласие.\",\r\n];\r\n\r\nfunction PrivacyPolicy() {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Container maxWidth=\"md\" className={classes.container}>\r\n      <Typography variant=\"h4\" className={classes.typography}>\r\n        Согласие на обработку персональных данных\r\n      </Typography>\r\n      <Typography variant=\"body2\" className={classes.typography}>\r\n        Пользователь, регистрируясь на интернет-сайте \"TutorDeck\"\r\n        (https://tutor-49686.web.app/), принимает настоящее Согласие на\r\n        обработку персональных данных (далее – Согласие). Действуя свободно,\r\n        своей волей и в своем интересе, а также подтверждая свою дееспособность,\r\n        Пользователь дает свое согласие{\" \"}\r\n        <Box fontWeight=\"fontWeightBold\" component=\"span\">\r\n          Иванов И.И. (юрлицо/физлицо/ип)\r\n        </Box>\r\n        , на обработку своих персональных данных со следующими условиями:\r\n      </Typography>\r\n      <Typography variant=\"body2\" className={classes.typography}>\r\n        <b>1.</b> Данное Согласие дается на обработку персональных данных, как\r\n        без использования средств автоматизации, так и с их использованием.\r\n      </Typography>\r\n      <Typography\r\n        variant=\"body2\"\r\n        component=\"div\"\r\n        className={classes.typography}\r\n      >\r\n        <b>2.</b> Согласие дается на обработку следующих моих персональных\r\n        данных, не являющихся специальными или биометрическими:\r\n        <List classes={{ root: classes.list }}>\r\n          {credentials.map((item, i) => (\r\n            <ListItem key={i} classes={{ root: classes.listItemRoot }}>\r\n              {item}\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </Typography>\r\n      <Typography variant=\"body2\" className={classes.typography}>\r\n        <b>3.</b> В случае предоставления персональных данных третьих лиц, я\r\n        подтверждаю, что мною получено согласие третьих лиц, в интересах которых\r\n        я действую, на обработку их персональных данных, в том числе: сбор,\r\n        систематизацию, накопление, хранение, уточнение (обновление или\r\n        изменение), использование, распространение (в том числе, трансграничная\r\n        передача), обезличивание, блокирование, уничтожение, а также\r\n        осуществление любых иных действий с персональными данными в соответствии\r\n        с действующим законодательством.\r\n      </Typography>\r\n      <Typography variant=\"body2\" className={classes.typography}>\r\n        <b>4.</b> Персональные данные не являются общедоступными.\r\n      </Typography>\r\n      <Typography\r\n        variant=\"body2\"\r\n        className={classes.typography}\r\n        component=\"div\"\r\n      >\r\n        <b>5.</b> Основанием для обработки персональных данных является:\r\n        <List classes={{ root: classes.list }}>\r\n          {foundations.map((item, i) => (\r\n            <ListItem key={i} classes={{ root: classes.listItemRoot }}>\r\n              {item}\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </Typography>\r\n      <Typography\r\n        variant=\"body2\"\r\n        component=\"div\"\r\n        className={classes.typography}\r\n      >\r\n        <b>6.</b> В ходе обработки с персональными данными будут совершены\r\n        следующие действия:\r\n        <List classes={{ root: classes.list }}>\r\n          <ListItem classes={{ root: classes.listItemRoot }}>\r\n            сбор; запись; систематизация; накопление; хранение; уточнение\r\n            (обновление, изменение); извлечение; использование; передача\r\n            (распространение, предоставление, доступ); блокирование; удаление;\r\n            уничтожение.\r\n          </ListItem>\r\n        </List>\r\n      </Typography>\r\n      <Typography variant=\"body2\" className={classes.typography}>\r\n        <b>7.</b> Персональные данные обрабатываются до момента удаления\r\n        аккаунта физического лица, либо в момент получения запроса субъекта\r\n        персональных данных на прекращение обработки.\r\n      </Typography>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default PrivacyPolicy;\r\n","/**\r\n * push from content pages if not signed in\r\n */\r\n\r\nimport React from 'react';\r\nimport { Route, Redirect } from 'react-router';\r\n\r\nimport { AuthContext } from './contexts/AuthContext';\r\n\r\nfunction PrivateRoute({ component: Component, ...rest }) {\r\n  const { currentUser } = React.useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return currentUser && currentUser.emailVerified ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect to=\"/login\" />\r\n        );\r\n      }}></Route>\r\n  );\r\n}\r\n\r\nexport default PrivateRoute;\r\n","/**\r\n * push from login/signup if signed in\r\n */\r\n\r\nimport React from 'react';\r\nimport { Route, Redirect } from 'react-router';\r\n\r\nimport { AuthContext } from './contexts/AuthContext';\r\n\r\nfunction PrivateSignedInRoute({ component: Component, ...rest }) {\r\n  const { currentUser } = React.useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return currentUser && currentUser.emailVerified ? (\r\n          <Redirect to=\"/schedule\" />\r\n          ) : (\r\n          <Component {...props} />\r\n        );\r\n      }}></Route>\r\n  );\r\n}\r\n\r\nexport default PrivateSignedInRoute;\r\n","import React from 'react';\r\nimport { useParams } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { storage } from '../firebase';\r\n\r\nimport { Container, List, Typography, Button, ListItem, Link, IconButton } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\n\r\nfunction LessonHomework({ currentUser }) {\r\n  const { userId, pupil, date } = useParams();\r\n  const [metas, setMetas] = React.useState([]);\r\n  const [urls, setUrls] = React.useState([]);\r\n\r\n  let homeworkLink = null;\r\n\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const isLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n  if (isLoaded) homeworkLink = pupils[pupil].homeworkLink;\r\n\r\n  React.useEffect(() => {\r\n    // TODO: replace  arrays to objects\r\n    const storageRef = storage.ref();\r\n    const metasPromises = [];\r\n    const urlPromises = [];\r\n    storageRef\r\n      .child(`${userId}/${pupil}/${date}`)\r\n      .listAll()\r\n      .then((res) =>\r\n        res.items.forEach((item) => {\r\n          urlPromises.push(item.getDownloadURL());\r\n          metasPromises.push(item.getMetadata());\r\n        }),\r\n      )\r\n      .then(() => {\r\n        Promise.all(metasPromises).then((res) => setMetas(res))\r\n        Promise.all(urlPromises).then((res) => setUrls(res));\r\n      });\r\n  }, []);\r\n\r\n  async function handleSubmit(e) {\r\n    const storageRef = storage.ref();\r\n\r\n    const fileSnapshot = await storageRef\r\n      .child(`${userId}/${pupil}/${date}/${e.currentTarget.files[0].name}`)\r\n      .put(e.currentTarget.files[0]);\r\n\r\n    setMetas((prev) => [...prev, fileSnapshot.metadata]);\r\n    fileSnapshot.ref.getDownloadURL().then((url) => setUrls((prev) => [...prev, url]));\r\n  }\r\n\r\n  async function handleDelete(metadata) {\r\n    const storageRef = storage.ref();\r\n    console.log(metadata.fullPath);\r\n    const fileRef = storageRef.child(metadata.fullPath);\r\n    fileRef.delete();\r\n\r\n    const index = metas.findIndex((item) => item.name === metadata.name);\r\n    if (index >= 0) setUrls((prev) => prev.filter((item, i) => i !== index));\r\n    setMetas((prev) => prev.filter((_, i) => i !== index));\r\n  }\r\n\r\n  return (\r\n    <Container className=\"homework__lesson-container\">\r\n      {currentUser && (\r\n        <Typography className=\"homework__lesson-title\" variant=\"body1\">\r\n          Ссылка на домашнюю работу для ученика: {homeworkLink}\r\n        </Typography>\r\n      )}\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"secondary\"\r\n        component=\"label\"\r\n        startIcon={<AddIcon />}\r\n        className=\"lessons__button-text\">\r\n        Загрузить дз\r\n        <input type=\"file\" onChange={handleSubmit} accept=\"\" hidden />\r\n      </Button>\r\n      <List>\r\n        {metas.map((meta, i) => (\r\n          <ListItem key={`${meta.name}${i}`} className=\"homework__lesson-item\">\r\n            <Link href={urls[i]} target=\"_blank\">\r\n              <Typography>{meta.name}</Typography>\r\n            </Link>\r\n            <IconButton\r\n              edge=\"end\"\r\n              aria-label=\"Удалить\"\r\n              onClick={() => {\r\n                handleDelete(meta);\r\n              }}>\r\n              <DeleteIcon />\r\n            </IconButton>\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default LessonHomework;\r\n","import React, { Suspense } from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport theme from \"./stylesOverride\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport { ThemeProvider } from \"@material-ui/core/styles\";\r\nimport StylesProvider from \"@material-ui/styles/StylesProvider\";\r\nimport Container from \"@material-ui/core/Container\";\r\nimport Box from \"@material-ui/core/Box\";\r\n\r\nimport { Menu, InfoPanel, Signup, Login, NotFound } from \"./components\";\r\nimport Schedule from \"./pages/Schedule\";\r\nimport Pupils from \"./pages/Pupils\";\r\nimport Finance from \"./pages/Finance\";\r\nimport HomeworkList from \"./pages/HomeworkList\";\r\nimport PrivacyPolicy from \"./pages/PrivacyPolicy\";\r\nimport PrivateRoute from \"./PrivateRoute\";\r\nimport PrivateSignedInRoute from \"./PrivateSignedInRoute\";\r\nimport { AuthContext } from \"./contexts/AuthContext\";\r\n\r\nimport { fetchLessons } from \"./redux/actions/lessons\";\r\nimport { fetchPupils } from \"./redux/actions/pupils\";\r\nimport { fetchSchedules } from \"./redux/actions/schedules\";\r\nimport { fetchScheduledLessons } from \"./redux/actions/scheduledLessons\";\r\nimport { fetchUser } from \"./redux/actions/user\";\r\nimport { setDate } from \"./redux/actions/date\";\r\nimport LessonHomework from \"./pages/LessonHomework\";\r\n\r\nconst Settings = React.lazy(() => import('./pages/Settings'));\r\n\r\nfunction Content() {\r\n  const dispatch = useDispatch();\r\n  const { currentUser } = React.useContext(AuthContext);\r\n  const business = useSelector(({ user }) => user.business);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(setDate(new Date()));\r\n    dispatch(fetchLessons(new Date()));\r\n    dispatch(fetchScheduledLessons(new Date()));\r\n    dispatch(fetchPupils());\r\n    dispatch(fetchSchedules());\r\n    dispatch(fetchUser(currentUser.uid));\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Menu />\r\n\r\n      <Box className=\"content\">\r\n        <Container maxWidth=\"xl\">\r\n          <InfoPanel />\r\n          <Switch>\r\n            <Route exact path=\"/\">\r\n              <Schedule />\r\n            </Route>\r\n            <Route path=\"/schedule\">\r\n              <Schedule />\r\n            </Route>\r\n            <Route path=\"/pupils\">\r\n              <Pupils />\r\n            </Route>\r\n            <Route path=\"/finance\">{business && <Finance />}</Route>\r\n            <Route path=\"/settings\">\r\n              <Suspense fallback={<div>Loading...</div>}>\r\n                <Settings />\r\n              </Suspense>\r\n            </Route>\r\n            <Route path=\"/homework/:userId/:pupil/:date\">\r\n              <LessonHomework currentUser={currentUser} />\r\n            </Route>\r\n            <Route path=\"/homework/:userId/:pupil\">\r\n              <HomeworkList currentUser={currentUser} />\r\n            </Route>\r\n            <Route path=\"*\">\r\n              <Redirect to=\"/404\" />\r\n            </Route>\r\n          </Switch>\r\n        </Container>\r\n      </Box>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n  const { currentUser } = React.useContext(AuthContext);\r\n\r\n  return (\r\n    <StylesProvider injectFirst>\r\n      <ThemeProvider theme={theme}>\r\n        <CssBaseline />\r\n        <Switch>\r\n          <Route path=\"/404\">\r\n            <NotFound />\r\n          </Route>\r\n          <PrivateSignedInRoute path=\"/signup\" component={Signup} />\r\n          <PrivateSignedInRoute path=\"/login\" component={Login} />\r\n\r\n          {!currentUser && (\r\n            <Route path=\"/homework/:userId/:pupil\">\r\n              <HomeworkList />\r\n            </Route>\r\n          )}\r\n          <Route path=\"/privacy\">\r\n            <PrivacyPolicy />\r\n          </Route>\r\n          <PrivateRoute path=\"/:page\" component={Content} />\r\n          <PrivateRoute exact path=\"/\" component={Content} />\r\n        </Switch>\r\n      </ThemeProvider>\r\n    </StylesProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst lessons = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_LESSONS_BY_DATE':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_LESSONS_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'ADD_LESSON': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_LESSON': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n\r\n    case 'DELETE_LESSON': {\r\n      const newState = { ...state.items };\r\n      delete newState[action.payload];\r\n      return {\r\n        ...state,\r\n        items: newState,\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default lessons;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst pupils = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_PUPILS': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'SET_PUPILS_LOADED': {\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    }\r\n    case 'ADD_PUPIL': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'DELETE_PUPIL': {\r\n      const newState = { ...state.items };\r\n      delete newState[action.payload];\r\n      return {\r\n        ...state,\r\n        items: newState,\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_PUPIL': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default pupils;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst schedules = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_SCHEDULES':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_SCHEDULES_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'ADD_SCHEDULE': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_SCHEDULE': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_LESSONS_FIELD': {\r\n      let newLessons = [...state.items[action.payload.id].lessons];\r\n      if (action.payload.procedure === 'push') newLessons.push(action.payload.date);\r\n      if (action.payload.procedure === 'pop')\r\n        newLessons = newLessons.filter((item) => item !== action.payload.date);\r\n      return {\r\n        ...state,\r\n        items: {\r\n          ...state.items,\r\n          [action.payload.id]: {\r\n            ...state.items[action.payload.id],\r\n            lessons: newLessons,\r\n          },\r\n        },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'DELETE_SCHEDULE': {\r\n      const newState = { ...state.items };\r\n      delete newState[action.payload];\r\n      return {\r\n        items: newState,\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default schedules;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst scheduledLessons = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_SCHEDULED_LESSONS':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_SCHEDULED_LESSONS_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default scheduledLessons;\r\n","const initialState = {\r\n  selected: ' ',\r\n};\r\n\r\nconst date = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_DATE':\r\n      return {\r\n        ...state,\r\n        selected: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default date;\r\n","const initialState = {\r\n  name: '',\r\n  id: '',\r\n  timestamp: '',\r\n  email: '',\r\n  business: false,\r\n  isLoaded: false,\r\n};\r\n\r\nconst user = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_USER_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'SET_USER':\r\n      return { ...action.payload, isLoaded: true };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default user;\r\n","import { combineReducers } from 'redux';\r\n\r\nimport lessons from './lessons';\r\nimport pupils from './pupils';\r\nimport schedules from './schedules';\r\nimport scheduledLessons from './scheduledLessons';\r\nimport date from './date';\r\nimport user from './user';\r\n\r\nconst appReducer = combineReducers({\r\n  user,\r\n  lessons,\r\n  pupils,\r\n  schedules,\r\n  scheduledLessons,\r\n  date,\r\n});\r\n\r\nconst rootReducer = (state, action) => {\r\n  if (action.type === 'USER_SIGNOUT') state = undefined;\r\n  return appReducer(state, action);\r\n};\r\n\r\nexport default rootReducer;\r\n","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { AuthProvider } from './contexts/AuthContext';\n\nimport './sass/styles.sass';\n\nimport store from './redux/store';\n\nReactDOM.render(\n  <Router>\n    <Provider store={store}>\n      <AuthProvider>\n        <App />\n      </AuthProvider>\n    </Provider>\n  </Router>,\n  document.getElementById('root'),\n);\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\nimport { formatISO } from 'date-fns';\r\n/**\r\n * middleware thunk function used for async data fetching and\r\n * dispatching actual event(action) to reducer\r\n * QUERY FORMAT: ['property', '==', 'value']\r\n * @param {date} date\r\n * @returns\r\n */\r\nexport const fetchLessons = (date) => async (dispatch) => {\r\n  const ISODate = formatISO(date, { representation: 'date' });\r\n  dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  const timer = stopwatch(fastRetrieveLessons);\r\n  const query = ['date', '==', `${ISODate}`];\r\n  try {\r\n    const lessons = await timer(query);\r\n    dispatch(setLessons(lessons));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nasync function fastRetrieveLessons(query) {\r\n  let retrievedLessons = {};\r\n  const lessonsSnapshot = await db\r\n    .collection(`/users/${auth.currentUser.uid}/lessons`)\r\n    .where(...query)\r\n    .orderBy('time')\r\n    .get();\r\n  lessonsSnapshot.forEach((lessonDoc) => {\r\n    retrievedLessons = { ...retrievedLessons, [lessonDoc.id]: lessonDoc.data() };\r\n  });\r\n  return retrievedLessons;\r\n}\r\n\r\nexport const postLesson = (lesson, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  try {\r\n    if (!preventIsLoaded) dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/lessons/${lesson.id}`).set(lesson);\r\n    dispatch(addLesson(lesson));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: true });\r\n  }\r\n};\r\n\r\n/**\r\n * retrieve lessons using collectionGroup method\r\n * @param {object} user\r\n * @param {object[]} pupils\r\n * @param {array} query firestore query format array\r\n * @returns {object[]} lesson result array going to be stored in redux store\r\n */\r\n\r\nexport const deleteLesson = (id) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/lessons/${id}`).delete();\r\n\r\n    dispatch(deleteLessonAction(id));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: true });\r\n    return Promise.reject('reject');\r\n  }\r\n};\r\n\r\nexport const deleteLessonsBySmth = ({ field, id }) => async (dispatch) => {\r\n  const lessonsPromises = [];\r\n  try {\r\n    const lessonsSnapshot = await db\r\n      .collection(`/users/${auth.currentUser.uid}/lessons/`)\r\n      .where(`${field}`, '==', id)\r\n      .get();\r\n\r\n    lessonsSnapshot.forEach((lessonsSnap) =>\r\n      lessonsPromises.push(\r\n        db.doc(`/users/${auth.currentUser.uid}/lessons/${lessonsSnap.data().id}`).delete(),\r\n      ),\r\n    );\r\n\r\n    await Promise.all(lessonsPromises);\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nexport const changeLesson = (id, update) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/lessons/${id}`).update(update);\r\n    const lesson = await db.doc(`/users/${auth.currentUser.uid}/lessons/${id}`).get();\r\n    dispatch(updateLesson(lesson.data()));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: true });\r\n  }\r\n};\r\n/**\r\n * @param {object[]} items lessons array\r\n * @returns {object} - send action object to reducer\r\n */\r\nexport const setLessons = (items) => ({\r\n  type: 'SET_LESSONS_BY_DATE',\r\n  payload: items,\r\n});\r\n\r\nexport const addLesson = (item) => ({\r\n  type: 'ADD_LESSON',\r\n  payload: item,\r\n});\r\n\r\nexport const deleteLessonAction = (id) => ({\r\n  type: 'DELETE_LESSON',\r\n  payload: id,\r\n});\r\n\r\nexport const updateLesson = (lesson) => ({\r\n  type: 'UPDATE_LESSON',\r\n  payload: lesson,\r\n});\r\n/**\r\n * util func for performance measuring needs\r\n * @param {*} fn\r\n * @returns\r\n */\r\nfunction stopwatch(fn) {\r\n  return async (...args) => {\r\n    const before = performance.now();\r\n    const result = await fn.apply(this, args);\r\n    const after = performance.now();\r\n    console.log(`finished: ${after - before}`);\r\n    return result;\r\n  };\r\n}\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\nimport { getISODay, formatISO } from 'date-fns';\r\n\r\nasync function retrieveSchedulesByDay(date) {\r\n  let schedules = {};\r\n  const today = getISODay(date);\r\n  const localISODate = formatISO(date, { representation: 'date' });\r\n\r\n  const snapshot = await db\r\n    .collection(`/users/${auth.currentUser.uid}/schedules/`)\r\n    .where('day', '==', today)\r\n    .get();\r\n\r\n  snapshot.forEach((doc) => {\r\n    if (!doc.data().lessons.includes(localISODate))\r\n      schedules = { ...schedules, [doc.id]: doc.data() };\r\n  });\r\n  return schedules;\r\n}\r\n\r\nexport const fetchScheduledLessons = (date, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  try {\r\n    if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULED_LESSONS_LOADED', payload: false });\r\n    const schedules = await retrieveSchedulesByDay(date);\r\n\r\n    dispatch(setScheduledLessons(schedules));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULED_LESSONS_LOADED', payload: false });\r\n  }\r\n};\r\n\r\nexport const setScheduledLessons = (items) => ({\r\n  type: 'SET_SCHEDULED_LESSONS',\r\n  payload: items,\r\n});\r\n\r\nexport const setScheduledLessonsLoaded = (value) => ({\r\n  type: 'SET_SCHEDULED_LESSONS_LOADED',\r\n  payload: value,\r\n});\r\n","import React from 'react';\r\nimport {formatISO} from 'date-fns'\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction InfoPanelCard({ children, header, date }) {\r\n  return (\r\n    <Card className=\"info__card\">\r\n      <Box className=\"info__svg-container\">{children}</Box>\r\n      <CardContent className=\"info__content\">\r\n        <Typography gutterBottom variant=\"h5\" component=\"h2\" className=\"info__title\">\r\n          {header}\r\n        </Typography>\r\n        <Typography variant=\"body2\" component=\"p\" className=\"info__subtitle\">\r\n          {formatISO(date, {representation: 'date'})}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default InfoPanelCard;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\n\r\nimport InfoPanelCard from './InfoPanelCard';\r\n\r\nconst days = ['воскресенье', 'понедельник', 'вторник', 'cреда', 'четверг', 'пятница', 'суббота'];\r\n\r\nfunction endingsForm(n) {\r\n  let a = n % 100;\r\n  let b = a % 10;\r\n  if (a > 10 && a < 20) return 'уроков';\r\n  if (b > 1 && b < 5) return 'урока';\r\n  if (b === 1) return 'урок';\r\n  return 'уроков';\r\n}\r\n\r\nfunction InfoPanel() {\r\n  let numLessons = useSelector(({ lessons }) => lessons.items);\r\n  numLessons = Object.keys(numLessons).length;\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  return (\r\n    <Hidden xsDown>\r\n      <Container maxWidth=\"md\" className=\"info__container\">\r\n        <Grid container spacing={2}>\r\n          <Grid item>\r\n            <InfoPanelCard header={days[new Date().getDay()]} date={new Date()}>\r\n              <CalendarTodayIcon />\r\n            </InfoPanelCard>\r\n          </Grid>\r\n          <Grid item>\r\n            <InfoPanelCard header={endingsForm(numLessons)} date={date}>\r\n              {numLessons}\r\n            </InfoPanelCard>\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n    </Hidden>\r\n  );\r\n}\r\n\r\nexport default InfoPanel;\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport format from 'date-fns/format';\r\nimport ruLocale from 'date-fns/locale/ru';\r\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport orange from '@material-ui/core/colors/orange';\r\n\r\nimport { setDate } from '../redux/actions/date';\r\n\r\nconst theme = createMuiTheme({\r\n  overrides: {\r\n    MuiPickersDay: {\r\n      daySelected: {\r\n        backgroundColor: orange[500],\r\n        '&:hover': {\r\n          backgroundColor: orange[500],\r\n        },\r\n      },\r\n      current: {\r\n        color: orange[500],\r\n      },\r\n    },\r\n    MuiPickersStaticWrapper: {\r\n      staticWrapperRoot: {\r\n        boxShadow:\r\n          '0px 2px 1px -1px rgba(0,0,0,0.2),0px 1px 1px 0px rgba(0,0,0,0.14),0px 1px 3px 0px rgba(0,0,0,0.12)',\r\n        borderRadius: '4px',\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nclass RuLocalizedUtils extends DateFnsUtils {\r\n  getCalendarHeaderText(date) {\r\n    return format(date, 'LLLL', { locale: this.locale });\r\n  }\r\n\r\n  getDatePickerHeaderText(date) {\r\n    return format(date, 'dd MMMM', { locale: this.locale });\r\n  }\r\n}\r\n\r\nfunction MuiCalendar({ handleClick }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  const handleCellClick = (date) => {\r\n    dispatch(setDate(date));\r\n    handleClick(date);\r\n  };\r\n\r\n  return (\r\n    <MuiPickersUtilsProvider utils={RuLocalizedUtils} locale={ruLocale}>\r\n      <ThemeProvider theme={theme}>\r\n        <DatePicker\r\n          autoOk\r\n          disableToolbar\r\n          variant=\"static\"\r\n          value={date}\r\n          onChange={handleCellClick}\r\n        />\r\n      </ThemeProvider>\r\n    </MuiPickersUtilsProvider>\r\n  );\r\n}\r\n\r\nconst Calendar = React.forwardRef((props, ref) => {\r\n  return (\r\n    <MuiCalendar useRef={ref} {...props}>\r\n      {props.children}\r\n    </MuiCalendar>\r\n  );\r\n});\r\n\r\nexport default Calendar;\r\n","import React from 'react';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nfunction NotesFormInputs() {\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField\r\n        margin=\"normal\"\r\n        name=\"note\"\r\n        label=\"Заметки\"\r\n        autoComplete=\"off\"\r\n        multiline\r\n        fullWidth\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default NotesFormInputs;\r\n","const initialValues = (note) => ({\r\n  note,\r\n});\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  note: yup.string('Отредактируйте заметку').max(500, 'Заметка не может быть длиннее 500 символов'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nimport NotesFormInputs from './NotesFormInputs';\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { changeLesson } from '../../redux/actions/lessons';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    width: '600px',\r\n  },\r\n});\r\n\r\nfunction NotesForm({ open, width, handleClose, handleSnack, id, note }) {\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n\r\n  async function handleSubmit(values, actions) {\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n    dispatch(changeLesson(id, { note: values.note }));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      classes={{ paper: classes.paper }}\r\n      maxWidth=\"md\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Заметки об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues(note)}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <NotesFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(NotesForm);\r\n","import React from 'react';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nfunction ThemeFormInputs() {\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField\r\n        margin=\"normal\"\r\n        name=\"theme\"\r\n        label=\"Тема\"\r\n        autoComplete=\"off\"\r\n        multiline\r\n        fullWidth\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ThemeFormInputs;","const initialValues = (initialValue) => ({\r\n  theme: initialValue,\r\n});\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup.string('Отредактируйте тему').max(200, 'Тема не может быть длиннее 200 символов'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nimport ThemeFormInputs from './ThemeFormInputs';\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { changeLesson } from '../../redux/actions/lessons';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    width: '600px',\r\n  },\r\n});\r\n\r\nfunction ThemeForm({ open, width, handleClose, id, lessonTheme, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n\r\n  async function handleSubmit(values, actions) {\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n    handleClose();\r\n    dispatch(changeLesson(id, { theme: values.theme }));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      classes={{ paper: classes.paper }}\r\n      maxWidth=\"md\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Тема урока</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues(lessonTheme)}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <ThemeFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(ThemeForm);\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nimport { MyTextField, MySelect } from '../CustomInputs';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nexport default function AddLessonInputs() {\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const business = useSelector(({ user }) => user.business);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField margin=\"normal\" name=\"theme\" label=\"Тема\" autoComplete=\"off\" fullWidth />\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={6}>\r\n          <FormControl fullWidth>\r\n            <InputLabel id=\"lesson-form__select-label\">Ученик</InputLabel>\r\n            <MySelect\r\n              labelId=\"lesson-form__select-label\"\r\n              name=\"pupil\"\r\n              MenuProps={menuProps}\r\n              IconComponent={iconComponent}>\r\n              {Object.keys(pupils).map((key) => (\r\n                <MenuItem key={key} value={pupils[key].id}>\r\n                  {pupils[key].name}\r\n                </MenuItem>\r\n              ))}\r\n            </MySelect>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <MyTextField margin=\"none\" name=\"subject\" label=\"Предмет\" autoComplete=\"off\" fullWidth />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            margin=\"normal\"\r\n            name=\"date\"\r\n            label=\"Дата\"\r\n            type=\"date\"\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            margin=\"normal\"\r\n            name=\"time\"\r\n            label=\"Время урока\"\r\n            type=\"time\"\r\n            inputProps={{\r\n              step: 300, // 5 min\r\n            }}\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        {business && (\r\n          <Grid item xs={12}>\r\n            <MyTextField\r\n              margin=\"none\"\r\n              type=\"number\"\r\n              name=\"price\"\r\n              label=\"Стоимость занятия\"\r\n              autoComplete=\"off\"\r\n              fullWidth\r\n            />\r\n          </Grid>\r\n        )}\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            margin=\"none\"\r\n            multiline={true}\r\n            rowsMax={10}\r\n            name=\"note\"\r\n            label=\"Заметки\"\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import AddLessonInputs from '../addLessonForm/AddLessonInputs';\r\n\r\nimport React from 'react';\r\n\r\nfunction EditLessonInputs() {\r\n  return <AddLessonInputs />;\r\n}\r\n\r\nexport default EditLessonInputs;\r\n","const initialValues = ({ lessonTheme: theme, ...data }) => ({\r\n  theme,\r\n  ...data,\r\n});\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst MAX_LESSON_PAY = 999999;\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup\r\n    .string('Введите тему урока')\r\n    .max(200, 'Слишком длинная тема, попробуйте сократить')\r\n    .required('Необходимо указать тему урока'),\r\n  pupil: yup.mixed().typeError('Такого ученика не существует').required('Укажите ученика'),\r\n  note: yup.string('Заметки').max(500, 'Заметка не может быть длинее 500 символов'),\r\n  subject: yup\r\n    .string('Укажите предмет')\r\n    .max(100, 'Слишком длинная строка, попробуйте сократить')\r\n    .typeError('Предмет должен быть строкой')\r\n    .required('Укажите ваш предмет'),\r\n  date: yup\r\n    .string('Укажите дату урока')\r\n    .required('Укажите дату урока'),\r\n  time: yup\r\n    .string('Укажите время занятия')\r\n    .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Введите время занятия в формате: \"17:00\"')\r\n    .required('Укажите время урока'),\r\n  price: yup\r\n    .number('Укажите стоимость занятия')\r\n    .typeError('Лучше ввести число')\r\n    .min(0, 'Cтоимость должна быть положительной')\r\n    .max(MAX_LESSON_PAY, 'Возможно вы ошиблись и занятие стоит не так дорого')\r\n    .required('Укажите стоимость занятия'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport EditLessonInputs from './EditLessonInputs';\r\nimport initialValues from './initialValues';\r\nimport validationSchema from '../addLessonForm/validationSchema';\r\nimport { changeLesson } from '../../redux/actions/lessons';\r\n\r\nfunction EditLessonForm({ width, open, id, handleClose, handleSnack, ...data }) {\r\n  const dispatch = useDispatch();\r\n\r\n  function handleSubmit(values, actions) {\r\n    handleSnack(true);\r\n    actions.setSubmitting(false);\r\n    handleClose();\r\n    dispatch(changeLesson(id, values));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Измените данные о внеплановом уроке </DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues(data)}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <EditLessonInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(EditLessonForm);\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nimport Card from \"@material-ui/core/Card\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport MoreVertIcon from \"@material-ui/icons/MoreVert\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Menu from \"@material-ui/core/Menu\";\r\nimport MenuList from \"@material-ui/core/MenuList\";\r\nimport MenuItem from \"@material-ui/core/MenuItem\";\r\nimport SpeedIcon from \"@material-ui/icons/Speed\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\n\r\nimport NotesForm from \"../notesForm/NotesForm\";\r\nimport ThemeForm from \"../themeForm/ThemeForm\";\r\nimport { deleteLesson } from \"../../redux/actions/lessons\";\r\nimport { deleteLessonFromSchedule } from \"../../redux/actions/schedules\";\r\nimport { fetchScheduledLessons } from \"../../redux/actions/scheduledLessons\";\r\nimport EditLessonForm from \"../editLessonForm/EditLessonForm\";\r\n\r\nfunction LessonCard({\r\n  id,\r\n  time,\r\n  date,\r\n  name,\r\n  theme,\r\n  price,\r\n  pupil,\r\n  note = \"\",\r\n  address = \"\",\r\n  subject,\r\n  schedule,\r\n  userId,\r\n  handleSnack,\r\n  handleDeleteSnack,\r\n  handleLessonThemeEditSnack,\r\n  handleSnackLessonEdit,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [viewNotesForm, setViewNotesForm] = React.useState(false);\r\n  const [viewThemeForm, setViewThemeForm] = React.useState(false);\r\n  const [viewEditForm, setViewEditForm] = React.useState(false);\r\n  const selectedDate = useSelector(({ date }) => date.selected);\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n\r\n  /**\r\n   * How does dispatch actually work?\r\n   * Am I supposed to chain dispatches to make sure async requests queuing in sequence?\r\n   */\r\n  async function handleDelete() {\r\n    await dispatch(deleteLesson(id));\r\n    handleDeleteSnack(true);\r\n    if (schedule) {\r\n      await dispatch(deleteLessonFromSchedule({ id: schedule, date }));\r\n      dispatch(fetchScheduledLessons(selectedDate));\r\n    } else dispatch(fetchScheduledLessons(selectedDate));\r\n  }\r\n\r\n  function handleHomework() {\r\n    history.push(`/homework/${userId}/${pupil}/${date}`);\r\n  }\r\n\r\n  const clickNotesForm = () => setViewNotesForm(true);\r\n  const closeNotesForm = () => setViewNotesForm(false);\r\n  return (\r\n    <React.Fragment>\r\n      <NotesForm\r\n        open={viewNotesForm}\r\n        handleSnack={handleSnack}\r\n        note={note}\r\n        id={id}\r\n        handleClose={closeNotesForm}\r\n      />\r\n\r\n      <ThemeForm\r\n        open={viewThemeForm}\r\n        lessonTheme={theme}\r\n        handleSnack={handleLessonThemeEditSnack}\r\n        id={id}\r\n        handleClose={() => setViewThemeForm(false)}\r\n      />\r\n\r\n      <EditLessonForm\r\n        open={viewEditForm}\r\n        lessonTheme={theme}\r\n        id={id}\r\n        time={time}\r\n        date={date}\r\n        pupil={pupil}\r\n        subject={subject}\r\n        price={price}\r\n        note={note}\r\n        handleClose={() => setViewEditForm(false)}\r\n        handleSnack={handleSnackLessonEdit}\r\n      />\r\n      <Card className=\"lesson__container\">\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          getContentAnchorEl={null}\r\n          anchorOrigin={{ vertical: \"bottom\", horizontal: \"center\" }}\r\n          transformOrigin={{ vertical: \"top\", horizontal: \"center\" }}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}\r\n        >\r\n          <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n            <MenuItem onClick={handleHomework}>Домашняя работа</MenuItem>\r\n            <MenuItem onClick={clickNotesForm}>Заметки</MenuItem>\r\n            <MenuItem onClick={handleClose}>push(disabled)</MenuItem>\r\n            {schedule ? (\r\n              <MenuItem onClick={() => setViewThemeForm(true)}>\r\n                Редактировать тему\r\n              </MenuItem>\r\n            ) : (\r\n              <MenuItem onClick={() => setViewEditForm(true)}>\r\n                Редактировать урок\r\n              </MenuItem>\r\n            )}\r\n            <MenuItem onClick={handleDelete}>Удалить</MenuItem>\r\n          </MenuList>\r\n        </Menu>\r\n        <CardContent>\r\n          <Box className=\"lesson__header\">\r\n            <Typography\r\n              gutterBottom\r\n              variant=\"h5\"\r\n              className=\"lesson__header-text\"\r\n            >\r\n              {time} {subject}\r\n            </Typography>\r\n            <IconButton\r\n              aria-label=\"Меню\"\r\n              className=\"lesson__header-more\"\r\n              onClick={handleClick}\r\n            >\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          </Box>\r\n          <Typography\r\n            variant=\"h5\"\r\n            color=\"textPrimary\"\r\n            className=\"lesson__theme\"\r\n            component=\"p\"\r\n          >\r\n            {theme}\r\n          </Typography>\r\n          <Grid container justify=\"space-between\">\r\n            <Grid item>\r\n              <Typography variant=\"subtitle2\" color=\"textPrimary\" component=\"p\">\r\n                {name}, {address}\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              {!schedule && (\r\n                <Tooltip\r\n                  title=\"Доп. урок вне расписания\"\r\n                  aria-label=\"Доп. урок вне расписания\"\r\n                >\r\n                  <SpeedIcon />\r\n                </Tooltip>\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        </CardContent>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nLessonCard.propTypes = {\r\n  time: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  address: PropTypes.string,\r\n  note: PropTypes.string,\r\n  theme: PropTypes.string.isRequired,\r\n  price: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default LessonCard;\r\n","import React from 'react';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nconst LessonFromTemplateInputs = () => {\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField margin=\"normal\" name=\"theme\" label=\"Тема\" autoComplete=\"off\" fullWidth />\r\n      <MyTextField margin=\"normal\" name=\"note\" label=\"Заметки\" autoComplete=\"off\" fullWidth />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default LessonFromTemplateInputs;\r\n","const formInitialValues = {\r\n  theme: '',\r\n  note: '',\r\n};\r\n\r\nexport default formInitialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup\r\n    .string('Введите тему урока')\r\n    .max(200, 'Слишком длинная тема, попробуйте сократить')\r\n    .required('Необходимо указать тему урока'),\r\n  notes: yup\r\n    .string('Для заметок')\r\n    .max(500, 'Заметка не может быть длиннее 500 символов')\r\n});\r\n\r\nexport default validationSchema;\r\n","import { db, auth } from '../../firebase';\r\nimport { updateSchedule } from './schedules';\r\nimport { addLesson } from './lessons';\r\nimport firebase from 'firebase/app';\r\n\r\nconst lessonFromTemplate = (lesson) => async (dispatch) => {\r\n  const batch = db.batch();\r\n\r\n  const lessonRef = db.doc(`/users/${auth.currentUser.uid}/lessons/${lesson.id}`);\r\n  batch.set(lessonRef, lesson);\r\n\r\n  const schRef = db.doc(`/users/${auth.currentUser.uid}/schedules/${lesson.schedule}/`);\r\n  batch.update(schRef, { lessons: firebase.firestore.FieldValue.arrayUnion(lesson.date) });\r\n  try {\r\n    await batch.commit();\r\n\r\n    dispatch(addLesson(lesson));\r\n    const schedule = await db\r\n      .doc(`/users/${auth.currentUser.uid}/schedules/${lesson.schedule}/`)\r\n      .get();\r\n    dispatch(updateSchedule(schedule.data()));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.error(e);\r\n    return Promise.reject('reject');\r\n  }\r\n};\r\n\r\nexport default lessonFromTemplate;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport uniqid from 'uniqid';\r\nimport { formatISO } from 'date-fns'\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport LessonFromTemplateInputs from './LessonFromTemplateInputs';\r\nimport formInitialValues from './formInitialValues';\r\nimport validationSchema from './validationSchema';\r\n\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport lessonFromTemplate from '../../redux/actions/lessonFromTemplate';\r\n\r\nfunction LessonFromTemplateForm({ width, open, handleClose, pupilId, scheduleId, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const schedule = useSelector(({ schedules }) => schedules.items[scheduleId]);\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  async function handleSubmit(values, actions) {\r\n    let test = Object.entries(values).filter(([key, value]) => {\r\n      if (typeof value === 'string') return value.trim();\r\n      return true;\r\n    });\r\n    test = Object.fromEntries(test);\r\n\r\n    const lesson = {\r\n      id: uniqid(),\r\n      date: formatISO(date, {representation: 'date'}),\r\n      time: schedule.time,\r\n      schedule: scheduleId,\r\n      pupil: pupilId,\r\n      subject: schedule.subject,\r\n      price: schedule.price,\r\n      timestamp: Date.now(),\r\n      ...test,\r\n    };\r\n\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n\r\n    await dispatch(lessonFromTemplate(lesson));\r\n    dispatch(fetchScheduledLessons(date));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <LessonFromTemplateInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(LessonFromTemplateForm);\r\n","const initialValues = ({ day, time, subject, price = 0 }) => ({\r\n  day,\r\n  time,\r\n  subject,\r\n  price,\r\n});\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst MAX_LESSON_PAY = 999999;\r\n\r\nconst validationSchema = yup.object().shape({\r\n  day: yup\r\n    .mixed()\r\n    .oneOf(['1', '2', '3', '4', '5', '6', '7'])\r\n    .typeError('День занятия указан неверно')\r\n    .required('Укажите день занятия'),\r\n  time: yup\r\n    .string('Введите время занятия')\r\n    .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Введите время занятия в формате: \"17:00\"')\r\n    .max(5, 'Это поле не может быть длиннее пяти символов')\r\n    .required('Введите время занятия'),\r\n  price: yup\r\n    .number('Укажите стоимость занятия')\r\n    .typeError('Лучше ввести число')\r\n    .min(0, 'Стоимость должна быть положительной')\r\n    .max(MAX_LESSON_PAY, 'Возможно вы ошиблись и занятие стоит не так дорого')\r\n    .required('Укажите стоимость занятия'),\r\n  subject: yup\r\n    .string()\r\n    .max(200, 'Слишком длинная строка, попробуйте сократить')\r\n    .typeError('Предмет должен быть строкой')\r\n    .required('Укажите ваш предмет'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\n\r\nimport { Grid, FormControl, InputLabel, MenuItem } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\nimport { MyTextField, MySelect } from '../CustomInputs';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst days = {\r\n  1: 'Понедельник',\r\n  2: 'Вторник',\r\n  3: 'Среда',\r\n  4: 'Четверг',\r\n  5: 'Пятница',\r\n  6: 'Суббота',\r\n  7: 'Воскресенье',\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nfunction AddScheduleInputs() {\r\n  const business = useSelector(({ user }) => user.business);\r\n  \r\n  return (\r\n    <React.Fragment>\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={12} sm={6}>\r\n          <FormControl fullWidth>\r\n            <InputLabel id=\"pupil-form__select-label\">День занятия</InputLabel>\r\n            <MySelect\r\n              labelId=\"pupil-form__select-label\"\r\n              name=\"day\"\r\n              MenuProps={menuProps}\r\n              IconComponent={iconComponent}>\r\n              {Object.keys(days).map((key) => (\r\n                <MenuItem key={key} value={key}>\r\n                  {days[key]}\r\n                </MenuItem>\r\n              ))}\r\n            </MySelect>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            margin=\"none\"\r\n            name=\"time\"\r\n            type=\"time\"\r\n            label=\"Время занятия\"\r\n            inputProps={{\r\n              step: 300, // 5 min\r\n            }}\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      {business && (\r\n        <MyTextField\r\n          margin=\"normal\"\r\n          name=\"price\"\r\n          type=\"number\"\r\n          label=\"Стоимость занятия\"\r\n          autoComplete=\"off\"\r\n          fullWidth\r\n        />\r\n      )}\r\n      <MyTextField margin=\"normal\" name=\"subject\" label=\"Предмет\" autoComplete=\"off\" fullWidth />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default AddScheduleInputs;\r\n","import React from 'react';\r\nimport AddScheduleInputs from '../addScheduleForm/AddScheduleInputs';\r\n\r\nfunction EditScheduleFormInputs() {\r\n  return <AddScheduleInputs />;\r\n}\r\n\r\nexport default EditScheduleFormInputs;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from '../addScheduleForm/validationSchema';\r\nimport EditScheduleFormInputs from './EditScheduleFormInputs';\r\nimport { updateScheduleAction } from '../../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\n\r\nfunction EditScheduleForm({ open, width, id, handleClose, day, time, subject, price }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  async function handleSubmit(values, actions) {\r\n    actions.setSubmitting(false);\r\n    handleClose();\r\n    await dispatch(\r\n      updateScheduleAction(id, {\r\n        time: values.time,\r\n        day: +values.day,\r\n        subject: values.subject,\r\n        price: +values.price,\r\n      }),\r\n    );\r\n    dispatch(fetchScheduledLessons(date));\r\n  }\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues({ day: `${day}`, time, subject, price })}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <EditScheduleFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(EditScheduleForm);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { Dialog, DialogTitle, DialogContent, Button } from '@material-ui/core';\r\n\r\nimport LessonFromTemplateForm from '../lessonFromTemplateForm/LessonFromTemplateForm';\r\nimport EditScheduleForm from '../editScheduleForm/EditScheduleForm';\r\nimport { deleteScheduleAction } from '../../redux/actions/schedules';\r\nimport { fetchLessons, deleteLessonsBySmth } from '../../redux/actions/lessons';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport { pullScheduleFromPupil } from '../../redux/actions/pupils';\r\n\r\nfunction LessonTemplateCard({\r\n  time,\r\n  pupil,\r\n  id,\r\n  subject,\r\n  name,\r\n  day,\r\n  address,\r\n  price = 0,\r\n  handleCreateSnack,\r\n  handleDeleteSnack,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [viewDeleteConsentDialog, setViewDeleteConsentDialog] = React.useState(false);\r\n  const [viewForm, setViewForm] = React.useState(false);\r\n  const [viewEditScheduleForm, setViewEditScheduleForm] = React.useState(false);\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n\r\n  const handleCloseForm = () => setViewForm(false);\r\n  const handleOpenForm = () => setViewForm(true);\r\n\r\n  const handleCloseEditScheduleForm = () => setViewEditScheduleForm(false);\r\n\r\n  async function handleDeleteSchedule() {\r\n    await Promise.all([\r\n      dispatch(deleteLessonsBySmth({ field: 'schedule', id })),\r\n      dispatch(deleteScheduleAction(id)),\r\n      dispatch(pullScheduleFromPupil(pupil, id)),\r\n    ]);\r\n    handleDeleteSnack(true);\r\n    dispatch(fetchLessons(date));\r\n    dispatch(fetchScheduledLessons(date));\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <LessonFromTemplateForm\r\n        open={viewForm}\r\n        pupilId={pupil}\r\n        scheduleId={id}\r\n        handleClose={handleCloseForm}\r\n        handleSnack={handleCreateSnack}\r\n      />\r\n      <EditScheduleForm\r\n        open={viewEditScheduleForm}\r\n        handleClose={handleCloseEditScheduleForm}\r\n        id={id}\r\n        time={time}\r\n        subject={subject}\r\n        day={day}\r\n        price={price}\r\n      />\r\n\r\n      <Dialog\r\n        open={viewDeleteConsentDialog}\r\n        onClose={() => setViewDeleteConsentDialog(false)}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        maxWidth=\"sm\">\r\n        <DialogTitle>Удаление шаблона приведет к удалению всех его уроков. Вы уверены?</DialogTitle>\r\n        <DialogContent className=\"lesson-form__dialog-content\">\r\n          <Box className=\"lesson-form__controls\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              style={{ fontWeight: '600' }}\r\n              onClick={() => setViewDeleteConsentDialog(false)}>\r\n              Закрыть\r\n            </Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              style={{ fontWeight: '600', backgroundColor: 'red' }}\r\n              onClick={handleDeleteSchedule}>\r\n              Подтвердить\r\n            </Button>\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Card className=\"lesson__container lesson__container--template\">\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          getContentAnchorEl={null}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}>\r\n          <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n            <MenuItem onClick={handleOpenForm}>Добавить урок из шаблона</MenuItem>\r\n            <MenuItem onClick={() => setViewEditScheduleForm(true)}>Редактировать шаблон</MenuItem>\r\n            <MenuItem onClick={() => setViewDeleteConsentDialog(true)}>\r\n              Удалить этот шаблон с уроками\r\n            </MenuItem>\r\n          </MenuList>\r\n        </Menu>\r\n        <CardContent>\r\n          <Box className=\"lesson__header\">\r\n            <Typography gutterBottom variant=\"h5\" className=\"lesson__header-text\">\r\n              {time} {subject} (шаблон урока)\r\n            </Typography>\r\n            <IconButton aria-label=\"Меню\" className=\"lesson__header-more\" onClick={handleClick}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          </Box>\r\n          <Typography variant=\"h5\" color=\"textPrimary\" className=\"lesson__theme\" component=\"p\">\r\n            Введите тему урока, открыв меню справа\r\n          </Typography>\r\n          <Typography variant=\"subtitle2\" color=\"textPrimary\" component=\"p\">\r\n            {name}, {address}\r\n          </Typography>\r\n        </CardContent>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nLessonTemplateCard.propTypes = {\r\n  time: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  subject: PropTypes.string.isRequired,\r\n  address: PropTypes.string,\r\n  pupil: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LessonTemplateCard;\r\n","const tzoffset = new Date().getTimezoneOffset() * 60000;\r\nconst localISOTime = new Date(Date.now() - tzoffset).toISOString().slice(0, 10);\r\n\r\nconst formInitialValues = {\r\n  theme: '',\r\n  pupil: '',\r\n  subject: '',\r\n  note: '',\r\n  date: localISOTime,\r\n  time: '15:00',\r\n  price: 0,\r\n};\r\n\r\nexport default formInitialValues;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport uniqid from 'uniqid';\r\nimport { formatISO } from 'date-fns';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport AddLessonInputs from './AddLessonInputs';\r\nimport formInitialValues from './formInitialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { postLesson } from '../../redux/actions/lessons';\r\n\r\nfunction AddLessonForm({ width, open, handleClose, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n  formInitialValues.date = formatISO(date, { representation: 'date' });\r\n\r\n  function handleSubmit({ price = 0, ...values }, actions) {\r\n    let test = Object.entries(values).filter(([key, value]) => {\r\n      if (typeof value === 'string') return value.trim();\r\n      return true;\r\n    });\r\n    test = Object.fromEntries(test);\r\n\r\n    const lesson = {\r\n      id: uniqid(),\r\n      schedule: null,\r\n      price,\r\n      timestamp: Date.now(),\r\n      ...test,\r\n    };\r\n    handleSnack(true);\r\n    handleClose();\r\n    actions.setSubmitting(false);\r\n    dispatch(postLesson(lesson));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <AddLessonInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddLessonForm);\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport Box from '@material-ui/core/Box';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport Calendar from '../Calendar';\r\nimport LessonCard from './LessonCard';\r\nimport LessonTemplateCard from './LessonTemplateCard';\r\nimport AddLessonForm from '../addLessonForm/AddLessonForm';\r\nimport SnackPopup from '../SnackPopup';\r\nimport { Popover } from '@material-ui/core';\r\n\r\nfunction Lessons({ anchor, handleCalendarOpen, handleCalendarClose, handleCalendarClick }) {\r\n  const lessons = useSelector(({ lessons }) => lessons.items);\r\n  const lessonsLoaded = useSelector(({ lessons }) => lessons.isLoaded);\r\n\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const pupilsLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n\r\n  const scheduledLessons = useSelector(({ scheduledLessons }) => scheduledLessons.items);\r\n  const scheduledLessonsLoaded = useSelector(({ scheduledLessons }) => scheduledLessons.isLoaded);\r\n\r\n  const userId = useSelector(({ user }) => user.id);\r\n\r\n  const isLoaded = lessonsLoaded && pupilsLoaded && scheduledLessonsLoaded;\r\n\r\n  const [viewAddLessonForm, setViewAddLessonForm] = React.useState(false);\r\n  const [snackAddLessonView, setSnackAddLessonView] = React.useState(false);\r\n  const [snackFromTemplateView, setSnackFromTemplateView] = React.useState(false);\r\n  const [snackNotesView, setSnackNotesView] = React.useState(false);\r\n  const [snackDeleteLesson, setSnackDeleteLesson] = React.useState(false);\r\n  const [snackDeleteSchedule, setSnackDeleteSchedule] = React.useState(false);\r\n  const [snackLessonThemeEdit, setSnackLessonThemeEdit] = React.useState(false);\r\n  const [snackLessonEdit, setSnackLessonEdit] = React.useState(false);\r\n\r\n  const calendar = React.useRef(null);\r\n\r\n  const handleAddLessonFormClick = () => setViewAddLessonForm(true);\r\n  const handleCloseAddLessonForm = () => setViewAddLessonForm(false);\r\n\r\n  const handleSnackAddLessonView = React.useCallback(() => setSnackAddLessonView(false), []);\r\n  const handleSnackFromTempalateView = React.useCallback(() => setSnackFromTemplateView(false), []);\r\n  const handleSnackNotesView = React.useCallback(() => setSnackNotesView(false), []);\r\n  const handleSnackDeleteLesson = React.useCallback(() => setSnackDeleteLesson(false), []);\r\n  const handleSnackDeleteSchedule = React.useCallback(() => setSnackDeleteSchedule(false), []);\r\n  const handleSnackLessonThemeEdit = React.useCallback(() => setSnackLessonThemeEdit(false), []);\r\n  const handleSnackLessonEdit = React.useCallback(() => setSnackLessonEdit(false), []);\r\n\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h5\" className=\"lessons__header\">\r\n        Уроки\r\n      </Typography>\r\n\r\n      <Box className=\"lessons__buttons-container\">\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          startIcon={<AddIcon />}\r\n          className=\"lessons__button-text\"\r\n          onClick={handleAddLessonFormClick}>\r\n          Новый урок\r\n        </Button>\r\n        <Hidden mdUp>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={handleCalendarOpen}\r\n            startIcon={<CalendarTodayIcon />}\r\n            className=\"lessons__button-text\">\r\n            Выбрать день\r\n          </Button>\r\n          <Popover\r\n            id=\"simple-menu\"\r\n            anchorEl={anchor}\r\n            keepMounted\r\n            getContentAnchorEl={null}\r\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n            transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n            open={Boolean(anchor)}\r\n            onClose={handleCalendarClose}>\r\n            <Calendar ref={calendar} handleClick={handleCalendarClick} />\r\n          </Popover>\r\n        </Hidden>\r\n      </Box>\r\n\r\n      <AddLessonForm\r\n        open={viewAddLessonForm}\r\n        handleClose={handleCloseAddLessonForm}\r\n        handleSnack={setSnackAddLessonView}\r\n      />\r\n\r\n      <SnackPopup\r\n        open={snackAddLessonView}\r\n        message=\"Урок добавлен\"\r\n        onClose={handleSnackAddLessonView}\r\n      />\r\n      <SnackPopup\r\n        open={snackFromTemplateView}\r\n        message=\"Урок из шаблона добавлен\"\r\n        onClose={handleSnackFromTempalateView}\r\n      />\r\n      <SnackPopup open={snackNotesView} message=\"Заметка изменена\" onClose={handleSnackNotesView} />\r\n      <SnackPopup\r\n        open={snackDeleteLesson}\r\n        message=\"Урок удален\"\r\n        onClose={handleSnackDeleteLesson}\r\n      />\r\n      <SnackPopup\r\n        open={snackDeleteSchedule}\r\n        message=\"Шаблон удален\"\r\n        onClose={handleSnackDeleteSchedule}\r\n      />\r\n      <SnackPopup\r\n        open={snackLessonThemeEdit}\r\n        message=\"Тема изменена\"\r\n        onClose={handleSnackLessonThemeEdit}\r\n      />\r\n      <SnackPopup\r\n        open={snackLessonEdit}\r\n        message=\"Внеплановый урок изменен\"\r\n        onClose={handleSnackLessonEdit}\r\n      />\r\n\r\n      <Container className=\"lessons__items-container\">\r\n        {isLoaded ? (\r\n          <React.Fragment>\r\n            {Object.entries(lessons).map(([key, value]) => (\r\n              <LessonCard\r\n                key={key}\r\n                name={pupils[value.pupil].name}\r\n                userId={userId}\r\n                address={pupils[value.pupil].address}\r\n                handleSnack={setSnackNotesView}\r\n                handleDeleteSnack={setSnackDeleteLesson}\r\n                handleLessonThemeEditSnack={setSnackLessonThemeEdit}\r\n                handleSnackLessonEdit={setSnackLessonEdit}\r\n                {...value}\r\n              />\r\n            ))}\r\n            {Object.entries(scheduledLessons).map(([key, value]) => {\r\n              return (\r\n                <LessonTemplateCard\r\n                  key={key}\r\n                  pupilId={pupils[value.pupil].id}\r\n                  name={pupils[value.pupil].name}\r\n                  address={pupils[value.pupil].address}\r\n                  handleCreateSnack={setSnackFromTemplateView}\r\n                  handleDeleteSnack={setSnackDeleteSchedule}\r\n                  {...value}\r\n                />\r\n              );\r\n            })}\r\n            {!(Object.keys(lessons).length || Object.keys(scheduledLessons).length) ? (\r\n              <Typography>На текущий день уроков не запланировано</Typography>\r\n            ) : null}\r\n          </React.Fragment>\r\n        ) : (\r\n          Array(4)\r\n            .fill(0)\r\n            .map((_, index) => (\r\n              <Skeleton key={index} variant=\"rect\" className=\"lessons__skeleton\" />\r\n            ))\r\n        )}\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Lessons;\r\n","import React from 'react';\r\n\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nfunction MenuItem({ children, name, to, handleDrawer }) {\r\n  return (\r\n    <ListItem\r\n      button\r\n      className=\"menu__button menu__button--center\"\r\n      component={NavLink}\r\n      to={to}\r\n      onClick={handleDrawer}>\r\n      <ListItemIcon className=\"menu--center\">{children}</ListItemIcon>\r\n      <ListItemText primary={name} />\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nexport default MenuItem;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { AuthContext } from '../../contexts/AuthContext';\r\n\r\nfunction MenuHeader() {\r\n  const { userName } = React.useContext(AuthContext);\r\n  return (\r\n    <Grid container className=\"menu__header\">\r\n      <Grid item xs={8} className=\"menu__avatar\">\r\n        <AccountCircleIcon />\r\n      </Grid>\r\n      <Grid item xs={4} className=\"menu__button menu__settings\" component={NavLink} to=\"/settings\">\r\n        <IconButton>\r\n          <SettingsIcon />\r\n        </IconButton>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <Typography variant=\"h5\">{userName}</Typography>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default MenuHeader;\r\n","import List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\n\r\nimport React from 'react';\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader';\r\nimport { useSelector } from 'react-redux';\r\n\r\nfunction MenuLgDrawer() {\r\n  const business = useSelector(({ user }) => user.business);\r\n\r\n  return (\r\n    <Drawer variant=\"permanent\" anchor=\"left\" PaperProps={{ elevation: 2 }}>\r\n      <List className={'menu__list'}>\r\n        <ListItem>\r\n          <MenuHeader />\r\n        </ListItem>\r\n\r\n        <Divider />\r\n\r\n        <Box className=\"menu__nav-container\">\r\n          <MenuItem open={false} name=\"Расписание\" to=\"/schedule\">\r\n            <CalendarTodayIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={false} name=\"Ученики\" to=\"/pupils\">\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          {business && (\r\n            <MenuItem open={false} name=\"Финансы\" to=\"/finance\">\r\n              <ShowChartIcon className=\"menu--svg\" />\r\n            </MenuItem>\r\n          )}\r\n          {/* <MenuItem open={false} name=\"Домашняя работа\" to=\"/homework\">\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem> */}\r\n        </Box>\r\n      </List>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nexport default MenuLgDrawer;\r\n","import React from 'react';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader';\r\nimport { useSelector } from 'react-redux';\r\n\r\nfunction MenuControls({ handleDrawer }) {\r\n  const business = useSelector(({ user }) => user.business);\r\n  return (\r\n    <Box className=\"menu__nav-container\">\r\n      <MenuItem handleDrawer={() => handleDrawer(false)} name=\"Расписание\" to=\"/schedule\">\r\n        <CalendarTodayIcon className=\"menu--svg\" />\r\n      </MenuItem>\r\n      <MenuItem handleDrawer={() => handleDrawer(false)} name=\"Ученики\" to=\"/pupils\">\r\n        <FaceIcon className=\"menu--svg\" />\r\n      </MenuItem>\r\n      {business && (\r\n        <MenuItem handleDrawer={() => handleDrawer(false)} name=\"Финансы\" to=\"/finance\">\r\n          <ShowChartIcon className=\"menu--svg\" />\r\n        </MenuItem>\r\n      )}\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction MenuMdDrawer() {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleDrawer = () => setOpen((prev) => !prev);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Drawer variant=\"permanent\" anchor=\"left\" PaperProps={{ elevation: 2 }}>\r\n        <List className=\"menu__list\">\r\n          <ListItem button className=\"menu--center\" onClick={handleDrawer}>\r\n            <ListItemIcon className=\"menu--center\">\r\n              <MenuIcon className=\"menu--svg\" />\r\n            </ListItemIcon>\r\n          </ListItem>\r\n\r\n          <Divider />\r\n          <MenuControls open={false} handleDrawer={() => {}} />\r\n        </List>\r\n      </Drawer>\r\n      <Drawer variant=\"temporary\" anchor=\"left\" open={open} onClose={handleDrawer}>\r\n        <List className=\"menu__list--opened\">\r\n          <ListItem button onClick={handleDrawer}>\r\n            <ListItemIcon className=\"menu--center\">\r\n              <MenuIcon className=\"menu--svg\" />\r\n            </ListItemIcon>\r\n          </ListItem>\r\n\r\n          <ListItem>\r\n            <MenuHeader />\r\n          </ListItem>\r\n\r\n          <Divider />\r\n          <MenuControls handleDrawer={setOpen} />\r\n        </List>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default MenuMdDrawer;\r\n","import List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\n\r\nimport React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader';\r\n\r\nfunction MenuSmDrawer() {\r\n  const [open, setOpen] = React.useState(false);\r\n  const business = useSelector(({ user }) => user.business);\r\n\r\n  const handleDrawer = () => setOpen((prev) => !prev);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton\r\n            edge=\"start\"\r\n            color=\"inherit\"\r\n            aria-label=\"Открыть панель навигации\"\r\n            onClick={handleDrawer}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      <Drawer variant=\"temporary\" open={open} onClose={handleDrawer}>\r\n        <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <IconButton\r\n              edge=\"start\"\r\n              color=\"inherit\"\r\n              aria-label=\"Открыть панель навигации\"\r\n              onClick={handleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <List className={'menu__list--opened'}>\r\n          <ListItem>\r\n            <MenuHeader />\r\n          </ListItem>\r\n\r\n          <MenuItem name=\"Расписание\" to=\"/schedule\" handleDrawer={() => setOpen(false)}>\r\n            <CalendarTodayIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem name=\"Ученики\" to=\"/pupils\" handleDrawer={() => setOpen(false)}>\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          {business && (\r\n            <MenuItem name=\"Финансы\" to=\"/finance\" handleDrawer={() => setOpen(false)}>\r\n              <ShowChartIcon className=\"menu--svg\" />\r\n            </MenuItem>\r\n          )}\r\n          {/* <MenuItem name=\"Домашняя работа\" to=\"/homework\" handleDrawer={() => setOpen(false)}>\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem> */}\r\n        </List>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default MenuSmDrawer;\r\n","import React from 'react';\r\nimport Hidden from '@material-ui/core/Hidden';\r\n\r\nimport MenuLgDrawer from './MenuLgDrawer';\r\nimport MenuMdDrawer from './MenuMdDrawer';\r\nimport MenuSmDrawer from './MenuSmDrawer';\r\n\r\nconst Menu = () => {\r\n  return (\r\n    <React.Fragment>\r\n      <Hidden smUp>\r\n        <MenuSmDrawer />\r\n      </Hidden>\r\n      <Hidden only={['xs', 'lg', 'xl']}>\r\n        <MenuMdDrawer />\r\n      </Hidden>\r\n      <Hidden mdDown>\r\n        <MenuLgDrawer />\r\n      </Hidden>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","const initialValues = {\r\n  day: '',\r\n  time: '15:00',\r\n  price: 0,\r\n  subject: '',\r\n};\r\n\r\nexport default initialValues;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport uniqid from 'uniqid';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport AddScheduleInputs from './AddScheduleInputs';\r\nimport { postSchedule } from '../../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport { pushScheduleToPupil } from '../../redux/actions/pupils';\r\n\r\nfunction AddScheduleForm({ open, id, handleClose, width, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n  async function handleSubmit({ price = 0, ...values }, actions) {\r\n    const schedule = {\r\n      id: uniqid(),\r\n      day: +values.day,\r\n      lessons: [],\r\n      price,\r\n      pupil: id,\r\n      subject: values.subject,\r\n      time: values.time,\r\n      timestamp: Date.now(),\r\n    };\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n    handleClose();\r\n    await Promise.all[\r\n      dispatch(postSchedule([schedule]), dispatch(pushScheduleToPupil(id, schedule.id)))\r\n    ];\r\n    dispatch(fetchScheduledLessons(date));\r\n  }\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <AddScheduleInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddScheduleForm);\r\n","const initialValues = ({ name, address, parents, grade }) => {\r\n  if (parents.length === 0) parents = [{ person: '', contact: '' }];\r\n  return {\r\n    name,\r\n    address,\r\n    parents,\r\n    grade,\r\n  };\r\n};\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst MAX_LESSON_PAY = 999999;\r\n\r\nconst validationSchema = [\r\n  yup.object().shape({\r\n    name: yup\r\n      .string('Укажите имя ученика')\r\n      .typeError('Имя должно быть строкой')\r\n      .max(100, 'Имя длиннее 100 символов?')\r\n      .required('Необходимо указать имя ученика'),\r\n    grade: yup // number?\r\n      .string('В каком классе ребенок учится?')\r\n      .typeError('Класс должен быть строкой')\r\n      .matches(/^([1-9]?|1[0-9])$/, 'Укажите класс от 1 до 11')\r\n      .max(2, 'Слишком большое значение, возможно вы ошиблись')\r\n      .required('Укажите класс, в котором учится ребенок'),\r\n    address: yup\r\n      .string('Укажите адрес')\r\n      .max(200, 'Попробуйте написать адрес короче')\r\n      .typeError('Адрес должен быть строкой'),\r\n\r\n    parents: yup.array().of(\r\n      yup.object().shape({\r\n        contact: yup\r\n          .string('Укажите телефонный номер')\r\n          .matches(/^[[0-9]+$/, 'Введите номер телефона')\r\n          .typeError('Номер должен быть строкой')\r\n          .max(20, 'Строка должна быть короче'),\r\n\r\n        person: yup\r\n          .string('Укажите информацию о родителе')\r\n          .max(100, 'Cтрока должна быть короче')\r\n          .typeError('Информация о родителе должна быть строкой'),\r\n      }),\r\n    ),\r\n  }),\r\n\r\n  yup.object().shape({\r\n    schedules: yup.array().of(\r\n      yup.object().shape({\r\n        day: yup\r\n          .mixed()\r\n          .oneOf(['1', '2', '3', '4', '5', '6', '7'])\r\n          .typeError('День занятия указан неверно')\r\n          .required('Укажите день занятия'),\r\n        time: yup\r\n          .string('Введите время занятия')\r\n          .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Введите время занятия в формате: \"17:00\"')\r\n          .max(5, 'Это поле не может быть длиннее пяти символов')\r\n          .required('Введите время занятия'),\r\n        price: yup\r\n          .number('Укажите стоимость занятия')\r\n          .typeError('Лучше ввести число')\r\n          .min(0, 'Стоимость должна быть положительной')\r\n          .max(MAX_LESSON_PAY, 'Возможно вы ошиблись и занятие стоит не так дорого')\r\n          .required('Укажите стоимость занятия'),\r\n        subject: yup\r\n          .string()\r\n          .max(300, 'Слишком длинная строка, попробуйте сократить')\r\n          .typeError('Предмет должен быть строкой')\r\n          .required('Укажите ваш предмет'),\r\n      }),\r\n    ),\r\n  }),\r\n];\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { FieldArray, useFormikContext } from 'formik';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nfunction AddPupilInputs() {\r\n  const { values } = useFormikContext();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField\r\n        autoFocus\r\n        margin=\"normal\"\r\n        name=\"name\"\r\n        label=\"Имя*\"\r\n        autoComplete=\"off\"\r\n        fullWidth\r\n      />\r\n      <MyTextField\r\n        margin=\"normal\"\r\n        name=\"grade\"\r\n        label=\"Класс*\"\r\n        type=\"number\"\r\n        InputProps={{\r\n          inputProps: { min: 1, max: 20 },\r\n        }}\r\n        autoComplete=\"off\"\r\n        fullWidth\r\n      />\r\n      <MyTextField margin=\"normal\" name=\"address\" label=\"Адрес\" autoComplete=\"off\" fullWidth />\r\n\r\n      <FieldArray name=\"parents\">\r\n        {({ insert, remove, push }) => (\r\n          <React.Fragment>\r\n            {values.parents.length > 0 &&\r\n              values.parents.map((contact, index) => (\r\n                <React.Fragment key={index}>\r\n                  <MyTextField\r\n                    margin=\"normal\"\r\n                    name={`parents[${index}].person`}\r\n                    label=\"Родитель\"\r\n                    autoComplete=\"off\"\r\n                    fullWidth\r\n                  />\r\n\r\n                  <MyTextField\r\n                    margin=\"normal\"\r\n                    name={`parents[${index}].contact`}\r\n                    label=\"Контакты\"\r\n                    autoComplete=\"off\"\r\n                    InputProps={{\r\n                      startAdornment: <InputAdornment position=\"start\">+7</InputAdornment>,\r\n                    }}\r\n                    fullWidth\r\n                  />\r\n\r\n                  {values.parents.length > 1 && (\r\n                    <Tooltip title=\"Удалить номер\">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\"Удалить номер\"\r\n                        className=\"pupil-form__btn\"\r\n                        color=\"secondary\"\r\n                        onClick={() => remove(index)}>\r\n                        <ClearIcon />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  )}\r\n                </React.Fragment>\r\n              ))}\r\n            {values.parents.length < 5 && (\r\n              <Tooltip title=\"Добавить номер\">\r\n                <IconButton\r\n                  size=\"small\"\r\n                  color=\"secondary\"\r\n                  aria-label=\"Добавить номер\"\r\n                  className=\"pupil-form__btn pupil-form__btn-add-contact\"\r\n                  onClick={() => push({ person: '', contact: '' })}>\r\n                  <AddIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            )}\r\n          </React.Fragment>\r\n        )}\r\n      </FieldArray>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default AddPupilInputs;\r\n","import React from 'react'\r\nimport AddPupilInputs from '../addPupilForm/AddPupilInputs'\r\n\r\nfunction EditPupilFormInputs() {\r\n  return (\r\n    <AddPupilInputs />\r\n  )\r\n}\r\n\r\nexport default EditPupilFormInputs\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from '../addPupilForm/validationSchema';\r\nimport EditPupilFormInputs from './EditPupilFormInputs';\r\nimport { updatePupilAction } from '../../redux/actions/pupils';\r\n\r\nfunction EditPupilForm({\r\n  width,\r\n  open,\r\n  handleClose,\r\n  handleSnack,\r\n  id,\r\n  name,\r\n  address,\r\n  parents,\r\n  grade,\r\n}) {\r\n  const dispatch = useDispatch();\r\n\r\n  function handleSubmit(values, actions) {\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n    dispatch(updatePupilAction(id, values));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues({ name, address, parents, grade })}\r\n          validationSchema={validationSchema[0]}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <EditPupilFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(React.memo(EditPupilForm));\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\r\nimport { Dialog, DialogContent, DialogTitle, Box, Button, Tooltip } from '@material-ui/core';\r\n\r\nimport { deleteLessonsBySmth, fetchLessons } from '../../redux/actions/lessons';\r\nimport { deletePupilAction } from '../../redux/actions/pupils';\r\nimport { deleteSchedulesByPupil, fetchSchedules } from '../../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport AddScheduleForm from '../addScheduleForm/AddScheduleForm';\r\nimport EditPupilForm from '../editPupilForm/EditPupilForm';\r\n\r\nconst days = ['Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота', 'Воскресенье'];\r\n\r\nfunction PupilCard({\r\n  id,\r\n  name,\r\n  schedulesId,\r\n  grade,\r\n  parents = [],\r\n  address = '',\r\n  schedules,\r\n  userId,\r\n  handleSnack,\r\n  handleViewEditPupilSnack,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [viewAddScheduleForm, setViewAddScheduleForm] = React.useState(false);\r\n  const [viewDeleteConsentDialog, setViewDeleteConsentDialog] = React.useState(false);\r\n  const [viewEditPupilForm, setViewEditPupilForm] = React.useState(false);\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  const forParentsMemo = React.useRef([]);\r\n  const parentsMemo = parents.length ? parents : forParentsMemo.current;\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n  const handleCloseEditPupilForm = React.useCallback(() => setViewEditPupilForm(false), []);\r\n\r\n  async function handleDelete() {\r\n    await Promise.all([\r\n      dispatch(deleteLessonsBySmth({ field: 'pupil', id })),\r\n      dispatch(deletePupilAction(id)),\r\n      dispatch(deleteSchedulesByPupil(id)),\r\n    ]);\r\n    dispatch(fetchLessons(date));\r\n    dispatch(fetchSchedules({ preventIsLoaded: true }));\r\n    dispatch(fetchScheduledLessons(date, { preventIsLoaded: true }));\r\n  }\r\n\r\n  function handleHomework() {\r\n    history.push(`/homework/${userId}/${id}`);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <AddScheduleForm\r\n        open={viewAddScheduleForm}\r\n        handleSnack={handleSnack}\r\n        handleClose={() => {\r\n          setViewAddScheduleForm(false);\r\n        }}\r\n        id={id}\r\n      />\r\n\r\n      <EditPupilForm\r\n        open={viewEditPupilForm}\r\n        handleClose={handleCloseEditPupilForm}\r\n        handleSnack={handleViewEditPupilSnack}\r\n        id={id}\r\n        name={name}\r\n        grade={grade}\r\n        parents={parentsMemo}\r\n        address={address}\r\n      />\r\n\r\n      <Dialog\r\n        open={viewDeleteConsentDialog}\r\n        onClose={() => setViewDeleteConsentDialog(false)}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        maxWidth=\"sm\">\r\n        <DialogTitle>\r\n          Удаление ученика приведет к удалению всех его уроков и шаблонов. Вы уверены?\r\n        </DialogTitle>\r\n        <DialogContent className=\"lesson-form__dialog-content\">\r\n          <Box className=\"lesson-form__controls\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              style={{ fontWeight: '600' }}\r\n              onClick={() => setViewDeleteConsentDialog(false)}>\r\n              Закрыть\r\n            </Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              style={{ fontWeight: '600', backgroundColor: 'red' }}\r\n              onClick={handleDelete}>\r\n              Подтвердить\r\n            </Button>\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Card className=\"pupils__card\">\r\n        <CardHeader\r\n          className=\"pupils__card-header\"\r\n          avatar={\r\n            <Avatar aria-label=\"Ученик\" className=\"pupils__card-avatar\">\r\n              {name[0]}\r\n            </Avatar>\r\n          }\r\n          action={\r\n            <IconButton aria-label=\"Меню\" onClick={handleClick}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          }\r\n          title={name}\r\n          subheader={`Класс: ${grade}`}\r\n        />\r\n\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          getContentAnchorEl={null}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}>\r\n          <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n            <MenuItem onClick={() => setViewAddScheduleForm(true)}>\r\n              Добавить пункт расписания\r\n            </MenuItem>\r\n            <MenuItem onClick={() => setViewEditPupilForm(true)}>Редактировать</MenuItem>\r\n            <MenuItem onClick={() => setViewDeleteConsentDialog(true)}>Удалить</MenuItem>\r\n          </MenuList>\r\n        </Menu>\r\n\r\n        <CardContent className=\"pupils__card-content\">\r\n          <Typography component=\"p\">\r\n            {schedulesId.map((id) => `${days[schedules[id].day - 1]}-${schedules[id].time} `)}\r\n          </Typography>\r\n          {parents.map((parent, i) => (\r\n            <Typography component=\"p\" key={i}>\r\n              {parent.person}: {parent.contact}\r\n            </Typography>\r\n          ))}\r\n          <Typography component=\"p\">{address && `Адрес: ${address}`}</Typography>\r\n        </CardContent>\r\n        <CardActions className=\"pupils__homework\">\r\n          <Tooltip title=\"Домашняя работа\" aria-label=\"Домашняя работа\" arrow>\r\n            <IconButton color=\"secondary\" aria-label=\"Домашняя работа\" onClick={handleHomework}>\r\n              <MenuBookIcon aria-label=\"homework\" />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </CardActions>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nPupilCard.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  schedulesId: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n  schedules: PropTypes.object.isRequired,\r\n  grade: PropTypes.number.isRequired,\r\n  parents: PropTypes.PropTypes.arrayOf(PropTypes.object),\r\n  address: PropTypes.string,\r\n};\r\n\r\nexport default PupilCard;\r\n","import React from 'react';\r\nimport { FieldArray, useFormikContext } from 'formik';\r\n\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport { MyTextField, MySelect } from '../CustomInputs';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nconst days = {\r\n  1: 'Понедельник',\r\n  2: 'Вторник',\r\n  3: 'Среда',\r\n  4: 'Четверг',\r\n  5: 'Пятница',\r\n  6: 'Суббота',\r\n  7: 'Воскресенье',\r\n};\r\n\r\nfunction AddScheduleInputs() {\r\n  const business = useSelector(({ user }) => user.business);\r\n  const { values } = useFormikContext();\r\n  return (\r\n    <FieldArray name=\"schedules\">\r\n      {({ insert, remove, push }) => (\r\n        <React.Fragment>\r\n          {values.schedules.length > 0 &&\r\n            values.schedules.map((schedule, index) => (\r\n              <React.Fragment key={index}>\r\n                <Grid container spacing={4}>\r\n                  <Grid item xs={12} sm={6}>\r\n                    <FormControl fullWidth>\r\n                      <InputLabel id=\"pupil-form__select-label\">День занятия*</InputLabel>\r\n                      <MySelect\r\n                        labelId=\"pupil-form__select-label\"\r\n                        name={`schedules[${index}].day`}\r\n                        MenuProps={menuProps}\r\n                        IconComponent={iconComponent}>\r\n                        {Object.keys(days).map((key) => (\r\n                          <MenuItem key={key} value={key}>\r\n                            {days[key]}\r\n                          </MenuItem>\r\n                        ))}\r\n                      </MySelect>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={6}>\r\n                    <MyTextField\r\n                      margin=\"none\"\r\n                      name={`schedules[${index}].time`}\r\n                      type=\"time\"\r\n                      label=\"Время занятия*\"\r\n                      inputProps={{\r\n                        step: 300, // 5 min\r\n                      }}\r\n                      fullWidth\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n                {business && (\r\n                  <MyTextField\r\n                    margin=\"normal\"\r\n                    name={`schedules[${index}].price`}\r\n                    type=\"number\"\r\n                    label=\"Стоимость занятия*\"\r\n                    autoComplete=\"off\"\r\n                    fullWidth\r\n                  />\r\n                )}\r\n                <MyTextField\r\n                  margin=\"normal\"\r\n                  name={`schedules[${index}].subject`}\r\n                  label=\"Предмет*\"\r\n                  autoComplete=\"off\"\r\n                  fullWidth\r\n                />\r\n                {values.schedules.length > 1 && (\r\n                  <Tooltip title=\"Удалить расписание\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      aria-label=\"Удалить расписание\"\r\n                      className=\"pupil-form__btn\"\r\n                      color=\"secondary\"\r\n                      onClick={() => remove(index)}>\r\n                      <ClearIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                )}\r\n              </React.Fragment>\r\n            ))}\r\n          <Tooltip title=\"Добавить расписание\">\r\n            <IconButton\r\n              size=\"small\"\r\n              color=\"secondary\"\r\n              aria-label=\"Добавить расписание\"\r\n              className=\"pupil-form__btn pupil-form__btn-add-contact\"\r\n              onClick={() => push({ day: '', price: 0, subject: '', time: '15:00' })}>\r\n              <AddIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </React.Fragment>\r\n      )}\r\n    </FieldArray>\r\n  );\r\n}\r\n\r\nexport default AddScheduleInputs;\r\n","const formInitialValues = {\r\n  name: '',\r\n  grade: '',\r\n  address: '',\r\n  parents: [{ person: '', contact: '' }],\r\n\r\n  schedules: [\r\n    {\r\n      day: '',\r\n      time: '15:00',\r\n      price: 0,\r\n      subject: '',\r\n    },\r\n  ],\r\n};\r\n\r\nexport default formInitialValues;\r\n","async function genHomeworkLink(uid, pupilId) {\r\n  console.log(process.env.REACT_APP_BITLY_ACCESS_TOKEN);\r\n  const response = await fetch(\"https://api-ssl.bitly.com/v4/shorten\", {\r\n    method: \"POST\",\r\n    mode: \"cors\",\r\n    headers: {\r\n      Authorization: `Bearer ${process.env.REACT_APP_BITLY_ACCESS_TOKEN}`,\r\n      \"Content-Type\": \"application/json\",\r\n      \"Accept-Encoding\": \"gzip, deflate, br\",\r\n    },\r\n    redirect: \"follow\",\r\n    referrerPolicy: \"no-referrer\",\r\n    credentials: \"same-origin\",\r\n    cache: \"no-cache\",\r\n    body: JSON.stringify({\r\n      domain: \"bit.ly\",\r\n      long_url: `https://tutor-49686.web.app/homework/${uid}/${pupilId}`,\r\n    }),\r\n  });\r\n  const data = await response.json();\r\n  return Promise.resolve(data.link);\r\n}\r\n\r\nexport default genHomeworkLink;\r\n","import uniqid from \"uniqid\";\r\nimport { addPupil } from \"./pupils\";\r\nimport { addSchedule } from \"./schedules\";\r\nimport { db, auth } from \"../../firebase\";\r\nimport genHomeworkLink from \"../../components/addPupilForm/bitlyAPI\";\r\n\r\nconst formHandler =\r\n  ({ ...data }) =>\r\n  async (dispatch) => {\r\n    const pupilId = uniqid();\r\n\r\n    let test = Object.entries(data).filter(([key, value]) => {\r\n      if (typeof value === \"string\") return value.trim();\r\n      if (typeof value === \"number\") return value;\r\n      return true;\r\n    });\r\n\r\n    test = Object.fromEntries(test);\r\n    test.parents = test.parents\r\n      .filter((parent) => parent.person || parent.contact)\r\n      .map((parent) => ({ person: parent.person, contact: parent.contact }));\r\n\r\n    if (!test.parents.length) delete test.parents;\r\n    const { schedules, ...pupil } = test;\r\n\r\n    let resSchedules = schedules.map(({ price = 0, ...schedule }) => ({\r\n      id: uniqid(),\r\n      subject: schedule.subject,\r\n      time: schedule.time,\r\n      price: +price,\r\n      day: +schedule.day,\r\n      pupil: pupilId,\r\n      lessons: [],\r\n      timestamp: Date.now(),\r\n    }));\r\n\r\n    const homeworkLink = await genHomeworkLink(auth.currentUser.uid, pupilId);\r\n    console.log(homeworkLink);\r\n    const resPupil = {\r\n      id: pupilId,\r\n      timestamp: Date.now(),\r\n      schedulesId: resSchedules.map((schedule) => schedule.id),\r\n      homeworkLink,\r\n      ...pupil,\r\n    };\r\n\r\n    const batch = db.batch();\r\n\r\n    resSchedules.forEach((schedule) => {\r\n      const schRef = db.doc(\r\n        `/users/${auth.currentUser.uid}/schedules/${schedule.id}`\r\n      );\r\n      batch.set(schRef, { ...schedule });\r\n    });\r\n\r\n    const pupilRef = db.doc(\r\n      `/users/${auth.currentUser.uid}/pupils/${resPupil.id}/`\r\n    );\r\n    batch.set(pupilRef, { ...resPupil });\r\n\r\n    try {\r\n      await batch.commit();\r\n      resSchedules.forEach((schedule) => dispatch(addSchedule(schedule)));\r\n      dispatch(addPupil(resPupil));\r\n      return Promise.resolve(pupilId);\r\n    } catch (e) {\r\n      console.error(e);\r\n      return Promise.reject(\"error\");\r\n    }\r\n  };\r\n\r\nexport default formHandler;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\n\r\nimport AddPupilInputs from './AddPupilInputs';\r\nimport AddScheduleInputs from './AddScheduleInputs';\r\nimport validationSchema from './validationSchema';\r\nimport formInitialValues from './formInitialValues';\r\nimport formHandler from '../../redux/actions/newPupil';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\n\r\nconst steps = ['Информация об ученике', 'Расписание'];\r\nfunction getForm(step) {\r\n  switch (step) {\r\n    case 0:\r\n      return <AddPupilInputs />;\r\n    case 1:\r\n      return <AddScheduleInputs />;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction AddPupilForm({ open, handleClose, width, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const today = useSelector(({ date }) => date.selected);\r\n  const [activeStep, setActiveStep] = React.useState(0);\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n  const isLastStep = activeStep === steps.length - 1;\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  const handleSubmit = (values, actions) => {\r\n    if (isLastStep) {\r\n      handleSnack(true);\r\n      handleClose();\r\n      submitForm(values, actions);\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n      actions.setTouched({});\r\n      actions.setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  async function submitForm(values, actions) {\r\n    actions.setSubmitting(false);\r\n\r\n    await dispatch(formHandler(values));\r\n    dispatch(fetchScheduledLessons(today));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      onExited={() => {\r\n        setActiveStep(0);\r\n      }}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об ученике</DialogTitle>\r\n      <DialogContent className=\"pupil-form__dialog-content\">\r\n        <Stepper activeStep={activeStep}>\r\n          {steps.map((label, index) => {\r\n            return (\r\n              <Step key={label}>\r\n                <StepLabel>{label}</StepLabel>\r\n              </Step>\r\n            );\r\n          })}\r\n        </Stepper>\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={currentValidationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            {getForm(activeStep)}\r\n\r\n            <Box className=\"pupil-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              {activeStep !== 0 && (\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={handleBack}>\r\n                  Назад\r\n                </Button>\r\n              )}\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                {isLastStep ? 'Подтвердить' : 'Далее'}\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddPupilForm);\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Skeleton from \"@material-ui/lab/Skeleton\";\r\n\r\nimport PupilCard from \"./PupilCard\";\r\nimport AddPupilForm from \"../addPupilForm/AddPupilForm\";\r\nimport SnackPopup from \"../SnackPopup\";\r\n\r\nfunction PupilsList() {\r\n  const userId = useSelector(({ user }) => user.id);\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const pupilsLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n  const schedules = useSelector(({ schedules }) => schedules.items);\r\n  const schedulesLoaded = useSelector(({ schedules }) => schedules.isLoaded);\r\n  const [viewAddPupilSnack, setViewAddPupilSnack] = React.useState(false);\r\n  const [viewAddScheduleSnack, setViewAddScheduleSnack] = React.useState(false);\r\n  const [viewEditPupilSnack, setViewEditPupilSnack] = React.useState(false);\r\n\r\n  // React.useEffect(() => {\r\n  //   let timer;\r\n  //   timer = setTimeout(() => {\r\n  //     setViewAddPupilSnack(false);\r\n  //   }, 5000);\r\n  //   return () => {\r\n  //     clearTimeout(timer);\r\n  //   };\r\n  // }, [viewAddPupilSnack]);\r\n\r\n  const isLoaded = pupilsLoaded && schedulesLoaded;\r\n\r\n  const [viewAddPupilForm, setViewAddPupilForm] = React.useState(false);\r\n\r\n  function handleAddLessonClick() {\r\n    setViewAddPupilForm(true);\r\n  }\r\n\r\n  function handleCloseAddLessonForm() {\r\n    setViewAddPupilForm(false);\r\n  }\r\n\r\n  function handleSnack(state) {\r\n    setViewAddPupilSnack(state);\r\n  }\r\n\r\n  const handleViewAddScheduleSnack = React.useCallback(\r\n    () => setViewAddScheduleSnack(false),\r\n    []\r\n  );\r\n  const handleViewAddPupilSnack = React.useCallback(\r\n    () => setViewAddPupilSnack(false),\r\n    []\r\n  );\r\n  const handleViewEditPupilSnack = React.useCallback(\r\n    () => setViewEditPupilSnack(false),\r\n    []\r\n  );\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <SnackPopup\r\n        open={viewAddScheduleSnack}\r\n        message=\"Шаблон для урока добавлен\"\r\n        onClose={handleViewAddScheduleSnack}\r\n      />\r\n      <SnackPopup\r\n        open={viewAddPupilSnack}\r\n        message=\"Ученик добавлен\"\r\n        onClose={handleViewAddPupilSnack}\r\n      />\r\n      <SnackPopup\r\n        open={viewEditPupilSnack}\r\n        message=\"Информация об ученике изменена\"\r\n        onClose={handleViewEditPupilSnack}\r\n      />\r\n\r\n      <AddPupilForm\r\n        open={viewAddPupilForm}\r\n        handleClose={handleCloseAddLessonForm}\r\n        handleSnack={handleSnack}\r\n      />\r\n\r\n      <div>\r\n        <Box className=\"pupils__header-container\">\r\n          <Typography variant=\"h5\" className=\"pupils__header\">\r\n            Ученики\r\n          </Typography>\r\n\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<AddIcon />}\r\n            className=\"pupils__button-text\"\r\n            onClick={handleAddLessonClick}\r\n          >\r\n            Новый ученик\r\n          </Button>\r\n        </Box>\r\n\r\n        <Grid container spacing={2} className=\"pupils__card-container\">\r\n          {isLoaded\r\n            ? Object.keys(pupils).map((key) => (\r\n                <Grid key={key} item md={4} sm={6} xs={12}>\r\n                  <PupilCard\r\n                    {...pupils[key]}\r\n                    schedules={schedules}\r\n                    userId={userId}\r\n                    handleSnack={setViewAddScheduleSnack}\r\n                    handleViewEditPupilSnack={setViewEditPupilSnack}\r\n                  />\r\n                </Grid>\r\n              ))\r\n            : new Array(6).fill(0).map((_, i) => (\r\n                <Grid key={i} item md={4} sm={6} xs={12}>\r\n                  <Skeleton\r\n                    key={i}\r\n                    variant=\"rect\"\r\n                    className=\"pupils__skeleton\"\r\n                  />\r\n                </Grid>\r\n              ))}\r\n        </Grid>\r\n        {Object.keys(pupils).length === 0 && (\r\n          <Typography>Ученики отсутствуют</Typography>\r\n        )}\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default PupilsList;\r\n","const initialValues = {\r\n  firstName: '',\r\n  lastName: '',\r\n  password: '',\r\n  email: '',\r\n  recaptcha: '',\r\n  business: false,\r\n};\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  firstName: yup\r\n    .string('Введите имя')\r\n    .max(100, 'Имя не может быть длиннее 100 символов')\r\n    .required('Необходимо указать имя'),\r\n  lastName: yup\r\n    .string('Введите фамилию')\r\n    .max(100, 'Фамилия не может быть длиннее 100 символов')\r\n    .required('Необходимо указать фамилию'),\r\n  email: yup\r\n    .string('Введите адрес электронной почты')\r\n    .email('Введите адрес электронной почты')\r\n    .max(254, 'Максимальная длина адреса 254 символа')\r\n    .required('Необходимо указать адрес эл. почты'),\r\n  password: yup\r\n    .string('Введите пароль')\r\n    .min(6, 'Минимальная длина пароля 6 символов')\r\n    .max(30, 'Максимальная длина пароля 30 символов')\r\n    .required('Введите пароль'),\r\n  recaptcha: yup\r\n    .mixed()\r\n    .notOneOf([''], 'Выполните проверку Recaptcha')\r\n    .required('Выполните проверку Recaptcha'),\r\n  business: yup.boolean(),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from \"react\";\r\n\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport Visibility from \"@material-ui/icons/Visibility\";\r\nimport VisibilityOff from \"@material-ui/icons/VisibilityOff\";\r\nimport FormControlLabel from \"@material-ui/core/FormControlLabel\";\r\nimport HelpOutlineIcon from \"@material-ui/icons/HelpOutline\";\r\n\r\nimport { MyTextField, MyCheckBox } from \"../../CustomInputs\";\r\nimport { Popper, Typography, Paper, makeStyles } from \"@material-ui/core\";\r\n\r\nimport orange from \"@material-ui/core/colors/orange\";\r\nconst useStyles = makeStyles({\r\n  checkboxRoot: {\r\n    \"&:hover\": {\r\n      backgroundColor: \"transparent\",\r\n      color: orange[500],\r\n    },\r\n  },\r\n  checkBoxButton: {\r\n    \"&:hover\": {\r\n      color: orange[500],\r\n    },\r\n  },\r\n});\r\n\r\nfunction SignupInputs() {\r\n  const classes = useStyles();\r\n  const [viewPassword, setViewPassword] = React.useState(false);\r\n  const handleClickShowPassword = () => setViewPassword((prev) => !prev);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  function handleBusiness(e) {\r\n    setAnchorEl(anchorEl ? null : e.currentTarget);\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={3} className=\"auth__inputs\">\r\n      <Grid item xs={12} sm={6}>\r\n        <MyTextField\r\n          autoComplete=\"fname\"\r\n          name=\"firstName\"\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          label=\"Имя\"\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12} sm={6}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          label=\"Фамилия\"\r\n          name=\"lastName\"\r\n          autoComplete=\"lname\"\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          label=\"Email адрес\"\r\n          name=\"email\"\r\n          autoComplete=\"email\"\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          name=\"password\"\r\n          label=\"Пароль\"\r\n          type={viewPassword ? \"text\" : \"password\"}\r\n          autoComplete=\"current-password\"\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={handleClickShowPassword}\r\n                >\r\n                  {viewPassword ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <FormControlLabel\r\n          control={\r\n            <MyCheckBox\r\n              name=\"business\"\r\n              classes={{ root: classes.checkboxRoot }}\r\n            />\r\n          }\r\n          label=\"Статус ИП\"\r\n        />\r\n\r\n        <IconButton onClick={handleBusiness} className={classes.checkBoxButton}>\r\n          <HelpOutlineIcon />\r\n        </IconButton>\r\n        <Popper open={anchorEl ? true : false} anchorEl={anchorEl}>\r\n          <Paper elevation={3}>\r\n            <Typography>\r\n              Оставляя поле пустым, вы лишаетесь доступа к ведению финансовой\r\n              статистики\r\n            </Typography>\r\n          </Paper>\r\n        </Popper>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default SignupInputs;\r\n","import React from 'react';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport Grow from '@material-ui/core/Grow';\r\n\r\nfunction ErrorSnack({ open, message, onClose }) {\r\n  return (\r\n    <Snackbar\r\n      open={open}\r\n      message={\r\n        <React.Fragment>\r\n          <ErrorOutlineIcon />\r\n          <Typography variant=\"body1\">{message}</Typography>\r\n        </React.Fragment>\r\n      }\r\n      TransitionComponent={Grow}\r\n      anchorOrigin={{ horizontal: 'center', vertical: 'top' }}\r\n      autoHideDuration={3000}\r\n      onClose={() => onClose(false)}\r\n      className=\"auth__snackbar\"\r\n    />\r\n  );\r\n}\r\n\r\nexport default ErrorSnack;\r\n","import React from 'react';\r\nimport firebase from 'firebase/app';\r\nimport { useFormikContext } from 'formik';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction Recaptcha() {\r\n  const { errors, setFieldTouched, setFieldValue, touched } = useFormikContext();\r\n  React.useEffect(() => {\r\n    let recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha', {\r\n      size: 'normal',\r\n      callback: (response) => {\r\n        setFieldTouched('recaptcha', true);\r\n        setFieldValue('recaptcha', response);\r\n      },\r\n      'expired-callback': () => {\r\n        setFieldValue('recaptcha', '');\r\n      },\r\n    });\r\n\r\n    recaptchaVerifier.render().then((widgetId) => (recaptchaVerifier = widgetId));\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Box id=\"recaptcha\" mt={2} mb={2} />\r\n      {errors.recaptcha && touched.recaptcha && (\r\n        <Typography color=\"error\">{errors.recaptcha}</Typography>\r\n      )}\r\n      <input type=\"hidden\" name=\"recaptcha\"></input>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Recaptcha;\r\n","import React from 'react';\r\nimport { Snackbar, Typography } from '@material-ui/core';\r\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\r\nimport Grow from '@material-ui/core/Grow';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    backgroundColor: '#4caf50',\r\n  },\r\n});\r\n\r\nfunction EmailSnack({ open, message, onClose }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'center',\r\n      }}\r\n      message={\r\n        <React.Fragment>\r\n          <CheckCircleOutlineIcon />\r\n          <Typography variant=\"body1\">{message}</Typography>\r\n        </React.Fragment>\r\n      }\r\n      ContentProps={{ classes: { root: classes.paper } }}\r\n      open={open}\r\n      TransitionComponent={Grow}\r\n      autoHideDuration={3000}\r\n      onClose={onClose}\r\n    />\r\n  );\r\n}\r\n\r\nexport default EmailSnack;\r\n","import React from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nfunction Footer({ width }) {\r\n  return (\r\n    <Box mb={2} mt={4}>\r\n      <Typography variant={isWidthDown('md', width) ? 'body2' : 'body1'} align=\"center\">\r\n        🍪 2021{' '}\r\n        <Link href=\"https://github.com/pampush\" target=\"_blank\">\r\n          github.com/pampush\r\n        </Link>\r\n      </Typography>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default withWidth()(Footer);\r\n","import React from \"react\";\r\nimport { Formik, Form } from \"formik\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Link as RouterLink } from \"react-router-dom\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport uniqid from \"uniqid\";\r\n\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\r\nimport Grid from \"@material-ui/core/Grid\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Container from \"@material-ui/core/Container\";\r\n\r\nimport initialValues from \"./initialValues\";\r\nimport validationSchema from \"./validationSchema\";\r\nimport SignupInputs from \"./SignupInputs\";\r\nimport { AuthContext } from \"../../../contexts/AuthContext\";\r\nimport ErrorSnack from \"../ErrorSnack\";\r\nimport Recaptcha from \"./Recaptcha\";\r\nimport EmailSnack from \"../EmailSnack\";\r\nimport { postUser } from \"../../../redux/actions/user\";\r\nimport Footer from \"../Footer\";\r\n\r\nfunction Signup() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { signup, verifyEmail, updateUser } = React.useContext(AuthContext);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState(\"\");\r\n  const [viewErrorSnack, setViewErrorSnack] = React.useState(false);\r\n  const [viewEmailVerifySnack, setViewEmailVerifySnack] = React.useState(false);\r\n\r\n  const handleSubmit = async (values, actions) => {\r\n    actions.setSubmitting(false);\r\n    setLoading(true);\r\n\r\n    try {\r\n      const name = values.firstName + \" \" + values.lastName;\r\n      const userCredential = await signup(values.email, values.password);\r\n      await updateUser(name);\r\n      await verifyEmail(userCredential.user);\r\n\r\n      setViewEmailVerifySnack(true);\r\n\r\n      dispatch(\r\n        postUser({\r\n          id: userCredential.user.uid,\r\n          name,\r\n          timestamp: Date.now(),\r\n          business: values.business,\r\n          bucketId: uniqid(),\r\n        })\r\n      );\r\n\r\n      setTimeout(() => history.push(\"/login\"), 3000);\r\n    } catch (e) {\r\n      switch (e.code) {\r\n        case \"auth/email-already-in-use\": {\r\n          setError(\"Почта уже используется\");\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n\r\n      setViewErrorSnack(true);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setLoading(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [loading]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <EmailSnack\r\n        open={viewEmailVerifySnack}\r\n        message={\r\n          \"Спасибо! Мы отправили вам письмо на указанный email с ссылкой для подтверждения регистрации.\"\r\n        }\r\n        onClose={() => setViewEmailVerifySnack(false)}\r\n      />\r\n      <Container component=\"main\" maxWidth=\"sm\" className=\"auth__main\">\r\n        <ErrorSnack\r\n          open={viewErrorSnack}\r\n          message={error}\r\n          onClose={setViewErrorSnack}\r\n        />\r\n        <CssBaseline />\r\n        <Grid container className=\"auth__container\">\r\n          <Grid\r\n            container\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n            spacing={1}\r\n            className=\"auth__header-container\"\r\n          >\r\n            <Grid item>\r\n              <Avatar className=\"auth__avatar\">\r\n                <LockOutlinedIcon />\r\n              </Avatar>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography\r\n                component=\"h1\"\r\n                variant=\"h5\"\r\n                className=\"auth__header-title\"\r\n              >\r\n                Регистрация\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Formik\r\n            initialValues={initialValues}\r\n            validationSchema={validationSchema}\r\n            onSubmit={handleSubmit}\r\n          >\r\n            {({ setFieldValue, errors, touched }) => (\r\n              <Form>\r\n                <SignupInputs />\r\n                <Recaptcha />\r\n                <Box mb={2}>\r\n                  <Typography align=\"justify\">\r\n                    Авторизуясь, вы даёте{\" \"}\r\n                    <RouterLink to=\"/privacy\">\r\n                      {\" \"}\r\n                      согласие на обработку персональных данных{\" \"}\r\n                    </RouterLink>\r\n                  </Typography>\r\n                </Box>\r\n                <Button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  className=\"auth__submit\"\r\n                >\r\n                  Зарегистрироваться\r\n                </Button>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n          <Box mt={5}>\r\n            <RouterLink to=\"/login\">Войти в аккаунт</RouterLink>\r\n          </Box>\r\n        </Grid>\r\n        <Footer />\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Signup;\r\n","const initialValues = {\r\n  email: '',\r\n  password: '',\r\n  recaptcha: false\r\n}\r\n\r\nexport default initialValues;","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  email: yup\r\n    .string('Введите адрес электронной почты')\r\n    .email('Введите адрес электронной почты')\r\n    .max(245, 'Максимальная длина адреса 254 символа')\r\n    .required('Необходимо указать адрес эл. почты'),\r\n  password: yup\r\n    .string('Введите пароль')\r\n    .min(6, 'Минимальная длина пароля 6 символов')\r\n    .max(30, 'Максимальная длина пароля 30 символов')\r\n    .required('Введите пароль'),\r\n    \r\n});\r\nexport default validationSchema;\r\n","import React from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\n\r\nimport { MyTextField } from '../../CustomInputs';\r\n\r\nfunction LoginInputs() {\r\n  const [viewPassword, setViewPassword] = React.useState(false);\r\n  const handleClickShowPassword = () => setViewPassword((prev) => !prev);\r\n  return (\r\n      <Grid container spacing={3} className=\"auth__inputs\">\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            label=\"Email адрес\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Пароль\"\r\n            type={viewPassword ? 'text' : 'password'}\r\n            autoComplete=\"current-password\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    aria-label=\"показать пароль\"\r\n                    onClick={handleClickShowPassword}>\r\n                    {viewPassword ? <Visibility /> : <VisibilityOff />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n  );\r\n}\r\n\r\nexport default LoginInputs;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useHistory, Link } from 'react-router-dom';\r\n\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport LoginInputs from './LoginInputs';\r\nimport { AuthContext } from '../../../contexts/AuthContext';\r\nimport ErrorSnack from '../ErrorSnack';\r\nimport Footer from '../Footer';\r\n\r\nfunction Login() {\r\n  const history = useHistory();\r\n  const { login } = React.useContext(AuthContext);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState('');\r\n  const [viewErrorSnack, setViewErrorSnack] = React.useState(false);\r\n\r\n  const handleSubmit = async (values, actions) => {\r\n    actions.setSubmitting(false);\r\n    setLoading(true);\r\n    try {\r\n      await login(values.email, values.password);\r\n      history.push('/schedule');\r\n    } catch (e) {\r\n      switch (e.code) {\r\n        case 'auth/user-not-found': {\r\n          setError('Пользователя с таким email не существует');\r\n          break;\r\n        }\r\n        case 'auth/wrong-password': {\r\n          setError('Неверный пароль');\r\n          break;\r\n        }\r\n        case 'auth/too-many-requests': {\r\n          setError('Слишком много попыток войти. Попробуйте снова через пять минут');\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n\r\n      setViewErrorSnack(true);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setLoading(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [loading]);\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"sm\" className=\"auth__main\">\r\n      {error && <ErrorSnack open={viewErrorSnack} message={error} onClose={setViewErrorSnack} />}\r\n      <CssBaseline />\r\n\r\n      <Grid container className=\"auth__container\">\r\n        <Grid\r\n          container\r\n          direction=\"column\"\r\n          alignItems=\"center\"\r\n          spacing={1}\r\n          className=\"auth__header-container\">\r\n          <Grid item>\r\n            <Avatar className=\"auth__avatar\">\r\n              <LockOutlinedIcon />\r\n            </Avatar>\r\n          </Grid>\r\n          <Grid item>\r\n            <Typography component=\"h1\" variant=\"h5\" className=\"auth__header-title\">\r\n              Вход в личный кабинет\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Formik\r\n          initialValues={initialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          {({ values }) => (\r\n            <Form>\r\n              <LoginInputs />\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                className=\"auth__submit\">\r\n                Вход\r\n              </Button>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n        <Box mt={5}>\r\n          У вас нет учетной записи? <Link to=\"/signup\">Зарегистрироваться</Link>\r\n        </Box>\r\n      </Grid>\r\n      <Footer />\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","var _rect, _rect2, _rect3, _rect4, _rect5, _rect6, _rect7, _rect8, _rect9, _rect10, _rect11, _rect12;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNotfound(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 80,\n    x: 0,\n    y: 0\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 50,\n    x: 60,\n    y: 40\n  })), _rect3 || (_rect3 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 80,\n    y: 10\n  })), _rect4 || (_rect4 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 90,\n    y: 20\n  })), _rect5 || (_rect5 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 110,\n    width: 10,\n    x: 0,\n    y: 0\n  })), _rect6 || (_rect6 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 50,\n    width: 10,\n    x: 60,\n    y: 0\n  })), _rect7 || (_rect7 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 20,\n    width: 10,\n    x: 30,\n    y: 30\n  })), _rect8 || (_rect8 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 110,\n    x: 0,\n    y: 110\n  })), _rect9 || (_rect9 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 30,\n    x: 40,\n    y: 70\n  })), _rect10 || (_rect10 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 30,\n    y: 80\n  })), _rect11 || (_rect11 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 70,\n    y: 80\n  })), _rect12 || (_rect12 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 80,\n    width: 10,\n    x: 100,\n    y: 30\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNotfound);\nexport default __webpack_public_path__ + \"static/media/notfound.8312485b.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport { ReactComponent as NonFoundIcon } from '../assets/img/notfound.svg';\r\n\r\nfunction NotFound() {\r\n  return (\r\n    <Box className=\"notfound__container\">\r\n      <NonFoundIcon className=\"notfound__svg\" />\r\n      <Typography variant=\"h2\" align=\"center\">\r\n        404\r\n      </Typography>\r\n      <Typography variant=\"h3\" align=\"center\">\r\n        Страница не найдена\r\n      </Typography>\r\n\r\n      <Button size=\"large\" variant=\"contained\" color=\"secondary\" component={Link} to=\"/schedule\">\r\n        Домой\r\n      </Button>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    height: '500px',\r\n  },\r\n  container: {\r\n    marginBottom: '20px',\r\n  },\r\n  main: {\r\n    paddingTop: '20px',\r\n  },\r\n  button: {\r\n    backgroundColor: '#ff9800',\r\n    color: '#FFFFFF',\r\n    fontWeight: '600',\r\n    borderRadius: '4px',\r\n  },\r\n});\r\n\r\nfunction Instruction({ open, handleClose }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      className={`instruction__container`}\r\n      classes={{\r\n        paper: classes.paper,\r\n      }}\r\n      maxWidth=\"md\">\r\n      <Box p={5} pt={5}>\r\n        <Typography variant=\"h4\">Знакомство с приложением</Typography>\r\n        <Box mb={5} mt={2}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<AddIcon />}\r\n            className=\"lessons__button-text\"\r\n            disabled>\r\n            Новый урок\r\n          </Button>\r\n          <Typography variant=\"body1\">используется для создания уроков вне расписания</Typography>\r\n        </Box>\r\n        <Box mb={5}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<AddIcon />}\r\n            className=\"pupils__button-text\"\r\n            disabled>\r\n            Новый ученик\r\n          </Button>\r\n          <Typography variant=\"body1\">\r\n            используется для создания ученика и расписания уроков\r\n          </Typography>\r\n        </Box>\r\n        <Box>\r\n          <ListItem\r\n            button\r\n            component={Link}\r\n            to=\"/schedule\"\r\n            className={classes.button}\r\n            onClick={() => handleClose(false)}>\r\n            Далее\r\n          </ListItem>\r\n        </Box>\r\n      </Box>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default Instruction;\r\n","import { addMonths } from 'date-fns';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nimport { Grid, Typography, IconButton } from '@material-ui/core';\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\r\n\r\nconst months = [\r\n  'Январь',\r\n  'Февраль',\r\n  'Март',\r\n  'Апрель',\r\n  'Май',\r\n  'Июнь',\r\n  'Июль',\r\n  'Август',\r\n  'Сентябрь',\r\n  'Октябрь',\r\n  'Ноябрь',\r\n  'Декабрь',\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    marginTop: '20px',\r\n  },\r\n});\r\n\r\nfunction MonthPicker({ initialDate, handleDateChange }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Grid container alignItems=\"center\" justify=\"center\" className={classes.root}>\r\n      <Grid item>\r\n        <IconButton onClick={() => handleDateChange(addMonths(initialDate, -1))}>\r\n          <NavigateBeforeIcon />\r\n        </IconButton>\r\n      </Grid>\r\n      <Grid item align=\"center\">\r\n        <Typography>{`${months[initialDate.getMonth()]} ${initialDate.getFullYear()}`}</Typography>\r\n      </Grid>\r\n      <Grid item>\r\n        <IconButton onClick={() => handleDateChange(addMonths(initialDate, 1))}>\r\n          <NavigateNextIcon />\r\n        </IconButton>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default MonthPicker;\r\n","import React from 'react';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    backgroundColor: 'transparent',\r\n    width: '100px',\r\n    height: '100px',\r\n  },\r\n});\r\n\r\nfunction LoadingScreen({ open }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      classes={{\r\n        paper: classes.paper,\r\n      }}\r\n      BackdropProps={{ style: { backgroundColor: '#fafafa' } }}\r\n      PaperProps={{ elevation: 0 }}>\r\n      <DialogContent>\r\n        <CircularProgress />\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default LoadingScreen;\r\n","import React from \"react\";\r\nimport { storage } from \"../../firebase\";\r\n\r\nimport {\r\n  Button,\r\n  List,\r\n  ListItem,\r\n  ListItemSecondaryAction,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  IconButton,\r\n  Avatar,\r\n  Collapse,\r\n  Link,\r\n  Typography,\r\n  Box,\r\n} from \"@material-ui/core\";\r\n\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport FolderIcon from \"@material-ui/icons/Folder\";\r\nimport ExpandLessIcon from \"@material-ui/icons/ExpandLess\";\r\nimport ExpandMoreIcon from \"@material-ui/icons/ExpandMore\";\r\n\r\nfunction HomeworkListItem({ date, pupil, userId, handleSubmit }) {\r\n  const [opened, setOpened] = React.useState(false);\r\n  const [metas, setMetas] = React.useState([]);\r\n  const [urls, setUrls] = React.useState([]);\r\n\r\n  React.useEffect(() => {\r\n    const storageRef = storage.ref();\r\n    const metadataPromises = [];\r\n    const urlPromises = [];\r\n\r\n    storageRef\r\n      .child(`${userId}/${pupil}/${date}`)\r\n      .listAll()\r\n      .then((res) => {\r\n        res.items.forEach((item) => {\r\n          const urlPromise = item.getDownloadURL();\r\n          urlPromises.push(urlPromise);\r\n          const metadataPromise = item.getMetadata();\r\n          metadataPromises.push(metadataPromise);\r\n        });\r\n      })\r\n      .then(() => {\r\n        Promise.all(urlPromises).then((urlArray) => {\r\n          setUrls(urlArray);\r\n        });\r\n        Promise.all(metadataPromises).then((metadataArray) => {\r\n          setMetas(metadataArray);\r\n        });\r\n      });\r\n  }, []);\r\n\r\n  async function handleSubmitDecorator(e) {\r\n    if (!e.currentTarget.files.length) return;\r\n    const fileRef = await handleSubmit(date, e);\r\n    const meta = fileRef.metadata;\r\n    const url = await fileRef.ref.getDownloadURL();\r\n    setUrls((prev) => [...prev, url]);\r\n    setMetas((prev) => [...prev, meta]);\r\n  }\r\n\r\n  async function handleDelete(metadata) {\r\n    const storageRef = storage.ref();\r\n    const fileRef = storageRef.child(metadata.fullPath);\r\n    fileRef.delete();\r\n\r\n    const index = metas.findIndex((item) => item.name === metadata.name);\r\n    if (index >= 0) setUrls((prev) => prev.filter((item, i) => i !== index));\r\n    setMetas((prev) => prev.filter((_, i) => i !== index));\r\n  }\r\n\r\n  return (\r\n    <Box mb={3}>\r\n      <ListItem button>\r\n        <ListItemAvatar>\r\n          <Avatar>\r\n            <FolderIcon />\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText primary={date} />\r\n        <ListItemSecondaryAction>\r\n          <IconButton\r\n            edge=\"end\"\r\n            aria-label=\"Раскрыть\"\r\n            onClick={() => {\r\n              setOpened((prev) => !prev);\r\n            }}\r\n          >\r\n            {opened ? <ExpandLessIcon /> : <ExpandMoreIcon />}\r\n          </IconButton>\r\n        </ListItemSecondaryAction>\r\n      </ListItem>\r\n      <Collapse in={opened} timeout=\"auto\">\r\n        <List>\r\n          {metas.map((meta, i) => (\r\n            <ListItem key={meta.name}>\r\n              <Link href={urls[i]} target=\"_blank\">\r\n                <Typography>{meta.name}</Typography>\r\n              </Link>\r\n              <ListItemSecondaryAction>\r\n                <IconButton\r\n                  edge=\"end\"\r\n                  aria-label=\"Удалить\"\r\n                  onClick={() => {\r\n                    handleDelete(meta);\r\n                  }}\r\n                >\r\n                  <DeleteIcon />\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          component=\"label\"\r\n          size=\"medium\"\r\n          startIcon={<AddIcon />}\r\n          className=\"lessons__button-text\"\r\n        >\r\n          Загрузить дз\r\n          <input\r\n            type=\"file\"\r\n            onChange={handleSubmitDecorator}\r\n            accept=\"\"\r\n            hidden\r\n          />\r\n        </Button>\r\n      </Collapse>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default HomeworkListItem;\r\n","import React from 'react';\r\nimport { auth } from '../firebase';\r\nimport firebase from 'firebase/app';\r\n\r\nimport { LoadingScreen } from '../components';\r\n\r\nexport const AuthContext = React.createContext();\r\n\r\nfunction AuthProvider({ children }) {\r\n  const [currentUser, setCurrentUser] = React.useState(null);\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [firstLogin, setFirstLogin] = React.useState(false);\r\n  const [userName, setUserName] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    currentUser && setUserName(currentUser.displayName);\r\n  }, [currentUser]);\r\n\r\n  const signup = (email, password) => auth.createUserWithEmailAndPassword(email, password);\r\n  const login = (email, password) => auth.signInWithEmailAndPassword(email, password);\r\n  const updateUser = (name) => {\r\n    auth.currentUser.updateProfile({ displayName: name });\r\n    setUserName(name);\r\n  };\r\n  const updateEmail = (email) => auth.currentUser.updateEmail(email);\r\n  const updatePassword = (password) => auth.currentUser.updatePassword(password);\r\n  const signout = () => auth.signOut();\r\n\r\n  const verifyEmail = (user) =>\r\n    user.sendEmailVerification({\r\n      url:\r\n        !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\r\n          ? 'https://localhost:3000/schedule/'\r\n          : 'https://tutor-49686.web.app/schedule/',\r\n      handleCodeInApp: true,\r\n    });\r\n\r\n  const verifyBeforeUpdateEmail = (email) =>\r\n    auth.currentUser.verifyBeforeUpdateEmail(email, {\r\n      url:\r\n        !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\r\n          ? 'https://localhost:3000/schedule/'\r\n          : 'https://tutor-49686.web.app/schedule/',\r\n      handleCodeInApp: true,\r\n    });\r\n\r\n  const reAuth = (password) => {\r\n    const authCredential = firebase.auth.EmailAuthProvider.credential(currentUser.email, password);\r\n    return auth.currentUser.reauthenticateWithCredential(authCredential);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        user.getIdTokenResult().then((res) => {\r\n          // force token refresh on first login\r\n          // https://github.com/firebase/firebase-js-sdk/issues/2529\r\n          if (res.authTime === user.metadata.creationTime) {\r\n            user.getIdToken(true);\r\n            if (document.referrer === 'https://tutor-49686.web.app/') setFirstLogin(true);\r\n          }\r\n        });\r\n\r\n        setCurrentUser(user);\r\n        setLoading(false);\r\n      } else {\r\n        setCurrentUser(user);\r\n        setLoading(false);\r\n      }\r\n    });\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const value = {\r\n    currentUser,\r\n    userName,\r\n    signup,\r\n    login,\r\n    verifyEmail,\r\n    updateUser,\r\n    verifyBeforeUpdateEmail,\r\n    signout,\r\n    updateEmail,\r\n    updatePassword,\r\n    firstLogin,\r\n    setFirstLogin,\r\n    reAuth,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading ? children : <LoadingScreen open={loading} />}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport { AuthProvider };\r\n","import { db, auth } from '../../firebase';\r\nimport firebase from 'firebase/app';\r\n\r\nexport const fetchSchedules = ({ preventIsLoaded } = {}) => async (dispatch) => {\r\n  try {\r\n    if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n\r\n    const schedules = await retrieveSchedules();\r\n\r\n    dispatch(setSchedules(schedules));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nasync function retrieveSchedules() {\r\n  let schedules = {};\r\n  const snapshot = await db.collection(`/users/${auth.currentUser.uid}/schedules/`).get();\r\n  snapshot.forEach((doc) => (schedules = { ...schedules, [doc.id]: doc.data() }));\r\n  return schedules;\r\n}\r\n\r\nexport const postSchedule = (schedules) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n    const schPromises = schedules.map((schedule) =>\r\n      db.doc(`/users/${auth.currentUser.uid}/schedules/${schedule.id}`).set({ ...schedule }),\r\n    );\r\n    await Promise.all(schPromises);\r\n    schedules.forEach((schedule) => dispatch(addSchedule(schedule)));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.log(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n    return Promise.reject('reject');\r\n  }\r\n};\r\n\r\nexport const addLessonToSchedule = ({ id, date }, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  try {\r\n    if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n    await db\r\n      .doc(`/users/${auth.currentUser.uid}/schedules/${id}/`)\r\n      .update({ lessons: firebase.firestore.FieldValue.arrayUnion(date) });\r\n\r\n    const schedule = await db.doc(`/users/${auth.currentUser.uid}/schedules/${id}/`).get();\r\n    dispatch(updateSchedule(schedule.data()));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nexport const deleteLessonFromSchedule = ({ date, id }) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n    await db\r\n      .doc(`/users/${auth.currentUser.uid}/schedules/${id}/`)\r\n      .update({ lessons: firebase.firestore.FieldValue.arrayRemove(date) });\r\n\r\n    const schedule = await db.doc(`/users/${auth.currentUser.uid}/schedules/${id}/`).get();\r\n    dispatch(updateSchedule(schedule.data()));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n    return Promise.reject('reject');\r\n  }\r\n};\r\n\r\nexport const deleteSchedulesByPupil = (id) => async (dispatch) => {\r\n  const schedulesPromises = [];\r\n  try {\r\n    const schedulesSnapshot = await db\r\n      .collection(`/users/${auth.currentUser.uid}/schedules/`)\r\n      .where('pupil', '==', id)\r\n      .get();\r\n\r\n    schedulesSnapshot.forEach((schedulesSnap) =>\r\n      schedulesPromises.push(\r\n        db.doc(`/users/${auth.currentUser.uid}/schedules/${schedulesSnap.data().id}`).delete(),\r\n      ),\r\n    );\r\n\r\n    await Promise.all(schedulesPromises);\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nexport const deleteScheduleAction = (id) => async (dispatch) => {\r\n  try {\r\n    await db.doc(`/users/${auth.currentUser.uid}/schedules/${id}`).delete();\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nexport const updateScheduleAction = (id, data) => async (dispatch) => {\r\n  try {\r\n    await db.doc(`/users/${auth.currentUser.uid}/schedules/${id}/`).update(data);\r\n\r\n    const schedule = await db.doc(`/users/${auth.currentUser.uid}/schedules/${id}/`).get();\r\n\r\n    dispatch(updateSchedule(schedule));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n    return Promise.reject('reject');\r\n  }\r\n};\r\n\r\nexport const setSchedules = (items) => ({\r\n  type: 'SET_SCHEDULES',\r\n  payload: items,\r\n});\r\n\r\nexport const addSchedule = (data) => ({\r\n  type: 'ADD_SCHEDULE',\r\n  payload: data,\r\n});\r\n\r\nexport const updateSchedule = (schedule) => ({\r\n  type: 'UPDATE_SCHEDULE',\r\n  payload: schedule,\r\n});\r\n\r\nexport const deleteSchedule = (id) => ({\r\n  type: 'DELETE_SCHEDULE',\r\n  payload: id,\r\n});\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\nimport firebase from 'firebase/app';\r\n\r\nexport const fetchPupils = () => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n\r\n    const pupils = await retrievePupils();\r\n\r\n    dispatch(setPupils(pupils));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nasync function retrievePupils() {\r\n  let retrievedPupils = {};\r\n  const pupilsSnapshot = await db.collection(`/users/${auth.currentUser.uid}/pupils/`).get();\r\n  pupilsSnapshot.forEach(\r\n    (pupilDoc) => (retrievedPupils = { ...retrievedPupils, [pupilDoc.id]: pupilDoc.data() }),\r\n  );\r\n\r\n  return retrievedPupils;\r\n}\r\n\r\nexport const postPupil = ({ id, ...data }) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/pupils/${id}/`).set({ id, ...data });\r\n    dispatch(addPupil({ id, ...data }));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nexport const pullScheduleFromPupil = (pupilId, scheduleId) => async (dispatch) => {\r\n  try {\r\n    await db\r\n      .doc(`/users/${auth.currentUser.uid}/pupils/${pupilId}/`)\r\n      .update({ schedulesId: firebase.firestore.FieldValue.arrayRemove(scheduleId) });\r\n    const pupil = await db.doc(`/users/${auth.currentUser.uid}/pupils/${pupilId}/`).get();\r\n    dispatch(updatePupil(pupil.data()));\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nexport const pushScheduleToPupil = (pupilId, scheduleId) => async (dispatch) => {\r\n  try {\r\n    await db\r\n      .doc(`/users/${auth.currentUser.uid}/pupils/${pupilId}/`)\r\n      .update({ schedulesId: firebase.firestore.FieldValue.arrayUnion(scheduleId) });\r\n    const pupil = await db.doc(`/users/${auth.currentUser.uid}/pupils/${pupilId}/`).get();\r\n    dispatch(updatePupil(pupil.data()));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.error(e);\r\n    return Promise.resolve('reject');\r\n  }\r\n};\r\n\r\n// delete all empty fields\r\nexport const updatePupilAction = (id, data) => async (dispatch) => {\r\n  let test = Object.entries(data).map(([key, value]) => {\r\n    if (typeof value === 'string')\r\n      if (value.trim()) return [key, value];\r\n      else return [key, firebase.firestore.FieldValue.delete()];\r\n    if (typeof value === 'number')\r\n      if (value) return [key, value];\r\n      else return [key, firebase.firestore.FieldValue.delete()];\r\n\r\n    return [key, value];\r\n  });\r\n\r\n  test = Object.fromEntries(test);\r\n  test.parents = test.parents\r\n    .filter((parent) => parent.person || parent.contact)\r\n    .map((parent) => ({ person: parent.person, contact: parent.contact }));\r\n\r\n  if (!test.parents.length) test.parents = firebase.firestore.FieldValue.delete();\r\n\r\n  try {\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/pupils/${id}/`).update(test);\r\n    const pupil = await db.doc(`/users/${auth.currentUser.uid}/pupils/${id}/`).get();\r\n    dispatch(updatePupil(pupil.data()));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nexport const deletePupilAction = (id) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/pupils/${id}/`).delete();\r\n    dispatch(deletePupil(id));\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nexport const setPupils = (items) => ({\r\n  type: 'SET_PUPILS',\r\n  payload: items,\r\n});\r\n\r\nexport const addPupil = (data) => ({\r\n  type: 'ADD_PUPIL',\r\n  payload: data,\r\n});\r\n\r\nexport const deletePupil = (id) => ({\r\n  type: 'DELETE_PUPIL',\r\n  payload: id,\r\n});\r\n\r\nexport const updatePupil = (pupil) => ({\r\n  type: 'UPDATE_PUPIL',\r\n  payload: pupil,\r\n});\r\n","import React from 'react';\r\nimport { IconButton, Snackbar, Button } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Grow from '@material-ui/core/Grow';\r\n\r\nfunction SnackPopup({ open, message, onClose }) {\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'center',\r\n      }}\r\n      open={open}\r\n      message={message}\r\n      TransitionComponent={Grow}\r\n      autoHideDuration={3000}\r\n      onClose={onClose}\r\n      action={\r\n        <React.Fragment>\r\n          <Button color=\"secondary\" size=\"small\">\r\n            Отменить\r\n          </Button>\r\n          <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\">\r\n            <CloseIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </React.Fragment>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default React.memo(SnackPopup);\r\n"],"sourceRoot":""}
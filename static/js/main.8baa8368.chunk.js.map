{"version":3,"sources":["firebase.js","stylesOverride.js","components/InfoPanel/InfoPanelCard.jsx","components/InfoPanel/InfoPanel.jsx","redux/actions/date.js","components/Calendar.jsx","components/CustomInputs.jsx","components/notesForm/NotesFormInputs.jsx","components/notesForm/initialValues.js","components/notesForm/validationSchema.js","redux/actions/lessons.js","components/notesForm/NotesForm.jsx","components/themeForm/ThemeFormInputs.jsx","components/themeForm/initialValues.js","components/themeForm/validationSchema.js","components/themeForm/ThemeForm.jsx","redux/actions/schedules.js","redux/actions/scheduledLessons.js","components/addLessonForm/AddLessonInputs.jsx","components/editLessonForm/EditLessonInputs.jsx","components/editLessonForm/initialValues.js","components/addLessonForm/validationSchema.js","components/editLessonForm/EditLessonForm.jsx","components/Lessons/LessonCard.jsx","components/lessonFromTemplateForm/LessonFromTemplateInputs.jsx","components/lessonFromTemplateForm/formInitialValues.js","components/lessonFromTemplateForm/validationSchema.js","redux/actions/lessonFromTemplate.js","components/lessonFromTemplateForm/LessonFromTemplateForm.jsx","components/editScheduleForm/initialValues.js","components/addScheduleForm/validationSchema.js","components/addScheduleForm/AddScheduleInputs.jsx","components/editScheduleForm/EditScheduleFormInputs.jsx","components/editScheduleForm/EditScheduleForm.jsx","redux/actions/pupils.js","components/Lessons/LessonTemplateCard.jsx","components/addLessonForm/formInitialValues.js","components/addLessonForm/AddLessonForm.jsx","components/SnackPopup.jsx","components/Lessons/Lessons.jsx","components/Menu/MenuItem.jsx","contexts/AuthContext.jsx","components/Menu/MenuHeader.jsx","components/Menu/MenuLgDrawer.jsx","components/Menu/MenuMdDrawer.jsx","components/Menu/MenuSmDrawer.jsx","components/Menu/Menu.jsx","components/addScheduleForm/initialValues.js","components/addScheduleForm/AddScheduleForm.jsx","components/editPupilForm/initialValues.js","components/addPupilForm/validationSchema.js","components/addPupilForm/AddPupilInputs.jsx","components/editPupilForm/EditPupilFormInputs.jsx","components/editPupilForm/EditPupilForm.jsx","components/Pupils/PupilCard.jsx","components/addPupilForm/AddScheduleInputs.jsx","components/addPupilForm/formInitialValues.js","redux/actions/newPupil.js","components/addPupilForm/AddPupilForm.jsx","components/Pupils/PupilsList.jsx","components/auth/signupForm/initialValues.js","components/auth/signupForm/validationSchema.js","components/auth/signupForm/SignupInputs.jsx","components/auth/ErrorSnack.jsx","components/auth/signupForm/Recaptcha.jsx","components/auth/EmailSnack.jsx","redux/actions/user.js","components/auth/Footer.jsx","components/auth/signupForm/Signup.jsx","components/auth/loginForm/initialValues.js","components/auth/loginForm/validationSchema.js","components/auth/loginForm/LoginInputs.jsx","components/auth/loginForm/Login.jsx","assets/img/notfound.svg","components/NotFound.jsx","components/Instruction.jsx","components/MonthPicker.jsx","components/LoadingScreen.jsx","pages/Schedule.jsx","pages/Pupils.jsx","redux/actions/finance.js","pages/Finance.jsx","redux/actions/signout.js","components/auth/editEmailForm/initialValues.js","components/auth/editEmailForm/validationSchema.js","components/auth/editEmailForm/EditEmailFormInputs.jsx","components/auth/editEmailForm/EditEmailForm.jsx","components/auth/editPasswordForm/EditPasswordFormInputs.jsx","components/auth/editPasswordForm/initialValues.js","components/auth/editPasswordForm/validationSchema.js","components/auth/editPasswordForm/EditPasswordForm.jsx","components/auth/editUserForm/EditUserFormInputs.jsx","components/auth/editUserForm/initialValues.js","components/auth/editUserForm/validationSchema.js","components/auth/editUserForm/EditUserForm.jsx","pages/Settings.jsx","pages/Homework.jsx","PrivateRoute.jsx","PrivateSignedInRoute.jsx","App.js","redux/reducers/lessons.js","redux/reducers/pupils.js","redux/reducers/schedules.js","redux/reducers/scheduledLessons.js","redux/reducers/date.js","redux/reducers/user.js","redux/reducers/index.js","redux/store.js","index.js"],"names":["app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","storage","theme","createMuiTheme","palette","primary","main","blue","secondary","orange","text","typography","body1","fontSize","overrides","MuiDrawer","paper","backgroundColor","MuiButton","label","color","containedSecondary","MuiIconButton","colorSecondary","root","MuiCardContent","paddingBottom","InfoPanelCard","children","header","date","Card","className","Box","CardContent","Typography","gutterBottom","variant","component","formatISO","representation","days","endingsForm","n","a","b","InfoPanel","numLessons","useSelector","lessons","items","Object","keys","length","selected","Container","maxWidth","Grid","container","spacing","Hidden","xsDown","item","Date","getDay","setDate","type","payload","MuiPickersDay","daySelected","current","MuiCalendar","handleClick","dispatch","useDispatch","utils","DateFnsUtils","locale","ruLocale","ThemeProvider","DatePicker","autoOk","disableToolbar","openTo","value","onChange","Calendar","React","forwardRef","props","ref","useRef","MyTextField","useField","name","field","meta","TextField","error","touched","Boolean","helperText","MyCheckBox","Fragment","Checkbox","MySelect","Select","NotesFormInputs","margin","autoComplete","multiline","fullWidth","initialValues","note","validationSchema","yup","shape","max","fetchLessons","ISODate","timer","stopwatch","fastRetrieveLessons","query","setLessons","console","retrievedLessons","collection","currentUser","uid","where","orderBy","get","forEach","lessonDoc","id","data","deleteLesson","doc","delete","deleteLessonAction","Promise","resolve","reject","deleteLessonsBySmth","lessonsPromises","lessonsSnap","push","all","changeLesson","update","lesson","updateLesson","addLesson","fn","before","performance","now","args","apply","result","after","log","useStyles","makeStyles","width","withWidth","open","handleClose","handleSnack","classes","values","actions","setSubmitting","Dialog","onClose","aria-labelledby","fullScreen","isWidthDown","DialogTitle","DialogContent","onSubmit","Button","onClick","ThemeFormInputs","initialValue","lessonTheme","fetchSchedules","preventIsLoaded","retrieveSchedules","schedules","setSchedules","postSchedule","schPromises","map","schedule","set","addSchedule","deleteLessonFromSchedule","FieldValue","arrayRemove","updateSchedule","deleteSchedulesByPupil","schedulesPromises","schedulesSnap","deleteScheduleAction","updateScheduleAction","retrieveSchedulesByDay","today","getISODay","localISODate","includes","fetchScheduledLessons","setScheduledLessons","menuProps","anchorOrigin","vertical","horizontal","transformOrigin","getContentAnchorEl","iconComponent","AddLessonInputs","pupils","business","user","xs","FormControl","InputLabel","labelId","MenuProps","IconComponent","key","MenuItem","sm","inputProps","step","rowsMax","EditLessonInputs","required","pupil","typeError","subject","time","matches","price","min","LessonCard","address","handleDeleteSnack","handleLessonThemeEditSnack","handleSnackLessonEdit","history","useHistory","useState","anchorEl","setAnchorEl","viewNotesForm","setViewNotesForm","viewThemeForm","setViewThemeForm","viewEditForm","setViewEditForm","selectedDate","keepMounted","MenuList","autoFocus","IconButton","aria-label","e","currentTarget","justify","Tooltip","title","LessonFromTemplateInputs","formInitialValues","notes","lessonFromTemplate","batch","lessonRef","schRef","arrayUnion","commit","pupilId","scheduleId","test","entries","filter","trim","fromEntries","uniqid","timestamp","day","oneOf","1","2","3","4","5","6","7","AddScheduleInputs","EditScheduleFormInputs","retrievePupils","retrievedPupils","pupilDoc","pullScheduleFromPupil","schedulesId","updatePupil","pushScheduleToPupil","deletePupilAction","deletePupil","setPupils","addPupil","LessonTemplateCard","handleCreateSnack","viewDeleteConsentDialog","setViewDeleteConsentDialog","viewForm","setViewForm","viewEditScheduleForm","setViewEditScheduleForm","style","fontWeight","tzoffset","getTimezoneOffset","toISOString","slice","postLesson","SnackPopup","message","Snackbar","TransitionComponent","Grow","autoHideDuration","action","size","memo","Lessons","anchor","handleCalendarOpen","handleCalendarClose","handleCalendarClick","lessonsLoaded","isLoaded","pupilsLoaded","scheduledLessons","scheduledLessonsLoaded","viewAddLessonForm","setViewAddLessonForm","snackAddLessonView","setSnackAddLessonView","snackFromTemplateView","setSnackFromTemplateView","snackNotesView","setSnackNotesView","snackDeleteLesson","setSnackDeleteLesson","snackDeleteSchedule","setSnackDeleteSchedule","snackLessonThemeEdit","setSnackLessonThemeEdit","snackLessonEdit","setSnackLessonEdit","calendar","handleSnackAddLessonView","useCallback","handleSnackFromTempalateView","handleSnackNotesView","handleSnackDeleteLesson","handleSnackDeleteSchedule","handleSnackLessonThemeEdit","startIcon","mdUp","Array","fill","_","index","Skeleton","to","handleDrawer","ListItem","button","NavLink","ListItemIcon","ListItemText","languageCode","AuthContext","createContext","AuthProvider","setCurrentUser","loading","setLoading","firstLogin","setFirstLogin","userName","setUserName","useEffect","displayName","onAuthStateChanged","getIdTokenResult","then","res","authTime","metadata","creationTime","getIdToken","document","referrer","signup","email","password","createUserWithEmailAndPassword","login","signInWithEmailAndPassword","verifyEmail","sendEmailVerification","url","handleCodeInApp","updateUser","updateProfile","verifyBeforeUpdateEmail","signout","signOut","updateEmail","updatePassword","reAuth","authCredential","EmailAuthProvider","credential","reauthenticateWithCredential","Provider","LoadingScreen","MenuHeader","useContext","MenuLgDrawer","Drawer","List","Divider","MenuControls","MenuMdDrawer","setOpen","prev","drawerPaper","position","top","MenuSmDrawer","AppBar","Toolbar","edge","Menu","smUp","only","mdDown","parents","grade","person","contact","of","AddPupilInputs","useFormikContext","InputProps","insert","remove","startAdornment","InputAdornment","EditPupilFormInputs","EditPupilForm","parent","updatePupilAction","PupilCard","handleViewEditPupilSnack","viewAddScheduleForm","setViewAddScheduleForm","viewEditPupilForm","setViewEditPupilForm","forParentsMemo","parentsMemo","handleCloseEditPupilForm","CardHeader","avatar","Avatar","subheader","i","CardActions","formHandler","resSchedules","resPupil","pupilRef","steps","getForm","activeStep","setActiveStep","currentValidationSchema","isLastStep","onExited","Stepper","Step","StepLabel","submitForm","setTouched","prevActiveStep","PupilsList","schedulesLoaded","viewAddPupilSnack","setViewAddPupilSnack","viewAddScheduleSnack","setViewAddScheduleSnack","viewEditPupilSnack","setViewEditPupilSnack","viewAddPupilForm","setViewAddPupilForm","handleViewAddScheduleSnack","handleViewAddPupilSnack","state","md","firstName","lastName","recaptcha","notOneOf","SignupInputs","viewPassword","setViewPassword","endAdornment","FormControlLabel","control","Popper","Paper","elevation","ErrorSnack","Recaptcha","errors","setFieldTouched","setFieldValue","recaptchaVerifier","RecaptchaVerifier","callback","response","render","widgetId","mt","mb","EmailSnack","ContentProps","postUser","addUser","align","Link","href","target","Signup","setError","viewErrorSnack","setViewErrorSnack","viewEmailVerifySnack","setViewEmailVerifySnack","handleSubmit","userCredential","setTimeout","code","clearTimeout","CssBaseline","direction","alignItems","disabled","LoginInputs","Login","_rect","_rect2","_rect3","_rect4","_rect5","_rect6","_rect7","_rect8","_rect9","_rect10","_rect11","_rect12","_extends","assign","arguments","source","prototype","hasOwnProperty","call","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgNotfound","_ref","svgRef","titleId","xmlns","height","x","y","ForwardRef","NotFound","marginBottom","paddingTop","borderRadius","Instruction","p","pt","months","marginTop","MonthPicker","initialDate","handleDateChange","addMonths","getMonth","getFullYear","LoadindScreen","PaperProps","CircularProgress","Schedule","anchorCalendar","smDown","Pupils","fetchPrices","prices","sum","lessonsSnapshot","Chart","register","LinearScale","BarElement","BarController","CategoryScale","PieController","ArcElement","Legend","DoughnutController","Finance","canvas","setPrices","mounted","myChart","labels","datasets","r","Math","floor","random","g","colorGen","hoverOffset","options","plugins","legend","destroy","reduce","accum","next","signoutAction","EditEmailFormInputs","EditPasswordFormInputs","handleClickShowPassword","hidden","oldpassword","passwordConfirmation","EditUserFormInputs","split","Settings","viewEditEmailForm","setViewEditEmailForm","viewEditPasswordForm","setViewEditPasswordForm","viewEditUserForm","setViewEditUserForm","viewEditEmailSnack","setViewEditEmailSnack","viewEditPasswordSnack","setViewEditPasswordSnack","viewEditUserSnack","setViewEditUserSnack","handleEditEmailForm","handleEditPasswordForm","handleEditUserForm","handleCloseEditEmailSnack","handleCloseEditPasswordSnack","handleCloseEditUserSnack","ListItemAvatar","Homework","useParams","files","setFiles","storageRef","imagesHomeworkRef","child","put","snapshot","metadataPromises","listAll","promise","getMetadata","metadataArray","accept","multiple","file","ListItemSecondaryAction","PrivateRoute","Component","rest","emailVerified","PrivateSignedInRoute","Content","path","exact","App","StylesProvider","injectFirst","initialState","newState","newLessons","procedure","appReducer","combineReducers","rootReducer","undefined","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","getElementById"],"mappings":"0LAKMA,G,qBAAMC,IAASC,cAAc,CACjCC,OAAQC,0CACRC,WAAYD,8BACZE,UAAWF,cACXG,cAAeH,0BACfI,kBAAmBJ,eACnBK,MAAOL,+CAGIM,EAAKV,EAAIW,YACTC,EAAOZ,EAAIY,OACXC,EAAUb,EAAIa,U,6CCwCZC,EAlDDC,YAAe,CAC3BC,QAAS,CACPC,QAAS,CACPC,KAAMC,IAAK,MAEbC,UAAW,CACTF,KAAMG,IAAO,MAEfC,KAAM,CACJL,QAAS,UACTG,UAAW,YAGfG,WAAY,CACVC,MAAO,CAAEC,SAAU,WAGrBC,UAAW,CACTC,UAAW,CACTC,MAAO,CACLC,gBAAiB,YAGrBC,UAAW,CACTC,MAAO,CAAEC,MAAO,WAChBC,mBAAoB,CAClB,UAAW,CACTJ,gBAAiB,6BAIvBK,cAAe,CACbC,eAAgB,CACd,UAAW,CACTN,gBAAiB,0BACjB,sBAAuB,CACrBA,gBAAiB,iBAIvBO,KAAM,IAERC,eAAgB,CACdD,KAAM,CACJ,eAAgB,CAAEE,cAAe,a,0HC1B1BC,MAhBf,YAAoD,IAA3BC,EAA0B,EAA1BA,SAAUC,EAAgB,EAAhBA,OAAQC,EAAQ,EAARA,KACzC,OACE,eAACC,EAAA,EAAD,CAAMC,UAAU,aAAhB,UACE,cAACC,EAAA,EAAD,CAAKD,UAAU,sBAAf,SAAsCJ,IACtC,eAACM,EAAA,EAAD,CAAaF,UAAU,gBAAvB,UACE,cAACG,EAAA,EAAD,CAAYC,cAAY,EAACC,QAAQ,KAAKC,UAAU,KAAKN,UAAU,cAA/D,SACGH,IAEH,cAACM,EAAA,EAAD,CAAYE,QAAQ,QAAQC,UAAU,IAAIN,UAAU,iBAApD,SACGO,YAAUT,EAAM,CAACU,eAAgB,kBCPtCC,EAAO,CAAC,qEAAe,qEAAe,6CAAW,4BAAS,6CAAW,6CAAW,8CAEtF,SAASC,EAAYC,GACnB,IAAIC,EAAID,EAAI,IACRE,EAAID,EAAI,GACZ,OAAIA,EAAI,IAAMA,EAAI,GAAW,uCACzBC,EAAI,GAAKA,EAAI,EAAU,iCACjB,IAANA,EAAgB,2BACb,uCA+BMC,MA5Bf,WACE,IAAIC,EAAaC,aAAY,qBAAGC,QAAsBC,SACtDH,EAAaI,OAAOC,KAAKL,GAAYM,OACrC,IAAMvB,EAAOkB,aAAY,qBAAGlB,KAAgBwB,YAE5C,OACE,cAACC,EAAA,EAAD,CAAWC,SAAS,KAAKxB,UAAU,kBAAnC,SACE,cAACyB,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,SACE,eAACC,EAAA,EAAD,CAAQC,QAAM,EAAd,UACE,cAACJ,EAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAAC,EAAD,CAAejC,OAAQY,GAAK,IAAIsB,MAAOC,UAAWlC,KAAM,IAAIiC,KAA5D,SACE,cAAC,IAAD,QAGJ,cAACN,EAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAAC,EAAD,CAAejC,OAAQa,EAAYK,GAAajB,KAAMA,EAAtD,SACGiB,MAGL,cAACU,EAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAAC,EAAD,CAAehC,KAAMA,c,0CCzCpBmC,EAAU,SAACnC,GAAD,MAAW,CAChCoC,KAAM,WACNC,QAASrC,ICQL5B,EAAQC,YAAe,CAC3BW,UAAW,CACTsD,cAAe,CACbC,YAAa,CACXpD,gBAAiBR,IAAO,KACxB,UAAW,CACTQ,gBAAiBR,IAAO,OAG5B6D,QAAS,CACPlD,MAAOX,IAAO,UAMtB,SAAS8D,EAAT,GAAuC,IAAhBC,EAAe,EAAfA,YACfC,EAAWC,cACX5C,EAAOkB,aAAY,qBAAGlB,KAAgBwB,YAO5C,OACE,cAAC,IAAD,CAAyBqB,MAAOC,IAAcC,OAAQC,IAAtD,SACE,cAACC,EAAA,EAAD,CAAe7E,MAAOA,EAAtB,SACE,cAAC8E,EAAA,EAAD,CACEC,QAAM,EACNC,gBAAc,EACd7C,QAAQ,SACR8C,OAAO,OACPC,MAAOtD,EACPuD,SAdgB,SAACvD,GACvB2C,EAASR,EAAQnC,IACjB0C,EAAY1C,UAmBhB,IAQewD,EAREC,IAAMC,YAAW,SAACC,EAAOC,GACxC,OACE,cAACnB,EAAD,yBAAaoB,OAAQD,GAASD,GAA9B,aACGA,EAAM7D,e,yPC/CAgE,GAAc,SAAC,GAAkB,IAAbH,EAAY,sBACZI,aAASJ,EAAMK,MADH,mBACpCC,EADoC,KAC7BC,EAD6B,UAE3C,OACE,cAACC,GAAA,EAAD,uCACMF,GACAN,GAFN,IAGES,MAAOF,EAAKG,SAAWC,QAAQJ,EAAKE,OACpCG,WAAYL,EAAKG,SAAWH,EAAKE,UAK1BI,GAAa,SAAC,GAAkB,IAAbb,EAAY,sBACpBI,aAASJ,GADW,mBACnCM,EADmC,UAE1C,OACE,cAAC,IAAMQ,SAAP,UACE,cAACC,GAAA,EAAD,2BAAcT,GAAWN,OAKlBgB,GAAW,SAAC,GAAkB,IAAbhB,EAAY,sBAClBI,aAASJ,GADS,mBACjCM,EADiC,KAC1BC,EAD0B,KAExC,OACE,eAAC,IAAMO,SAAP,WACE,cAACG,GAAA,EAAD,uCAAYX,GAAWN,GAAvB,IAA8BS,MAAOF,EAAKG,SAAWC,QAAQJ,EAAKE,UACjEF,EAAKG,SAAWH,EAAKE,MACpB,sBAAMlE,UAAU,4BAAhB,SAA6CgE,EAAKE,QAChD,SChBKS,OAff,WACE,OACE,cAAC,IAAMJ,SAAP,UACE,cAAC,GAAD,CACEK,OAAO,SACPd,KAAK,OACL3E,MAAM,6CACN0F,aAAa,MACbC,WAAS,EACTC,WAAS,OCTFC,GAJO,SAACC,GAAD,MAAW,CAC/BA,S,SCKaC,GAJUC,OAAaC,MAAM,CAC1CH,KAAME,KAAW,mIAA0BE,IAAI,IAAK,qN,kBCOzCC,GAAe,SAACxF,GAAD,gDAAU,WAAO2C,GAAP,sBAAA7B,EAAA,6DAC9B2E,EAAUhF,YAAUT,EAAM,CAAEU,eAAgB,SAClDiC,EAAS,CAAEP,KAAM,qBAAsBC,SAAS,IAC1CqD,EAAQC,GAAUC,IAClBC,EAAQ,CAAC,OAAQ,KAAT,UAAkBJ,IAJI,kBAMZC,EAAMG,GANM,OAM5B1E,EAN4B,OAOlCwB,EAASmD,GAAW3E,IAPc,kDASlC4E,QAAQ3B,MAAR,MACAzB,EAAS,CAAEP,KAAM,qBAAsBC,SAAS,IAVd,0DAAV,uD,SAcbuD,G,mFAAf,WAAmCC,GAAnC,kBAAA/E,EAAA,6DACMkF,EAAmB,GADzB,UAEgC,EAAAhI,EAC3BiI,WAD2B,iBACN/H,EAAKgI,YAAYC,IADX,cAE3BC,MAF2B,qBAElBP,IACTQ,QAAQ,QACRC,MANL,qBAOkBC,SAAQ,SAACC,GACvBR,EAAgB,2BAAQA,GAAR,mBAA2BQ,EAAUC,GAAKD,EAAUE,YARxE,kBAUSV,GAVT,4C,sBAaO,IAmBMW,GAAe,SAACF,GAAD,gDAAQ,WAAO9D,GAAP,UAAA7B,EAAA,sEAEhC6B,EAAS,CAAEP,KAAM,qBAAsBC,SAAS,IAFhB,SAG1BrE,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,oBAAiDM,IAAMI,SAH7B,cAKhClE,EAASmE,GAAmBL,IALI,kBAMzBM,QAAQC,QAAQ,YANS,uCAQhCjB,QAAQ3B,MAAR,MACAzB,EAAS,CAAEP,KAAM,qBAAsBC,SAAS,IAThB,kBAUzB0E,QAAQE,OAAO,WAVU,yDAAR,uDAcfC,GAAsB,SAAC,GAAD,IAAGjD,EAAH,EAAGA,MAAOwC,EAAV,EAAUA,GAAV,gDAAmB,WAAO9D,GAAP,gBAAA7B,EAAA,6DAC9CqG,EAAkB,GAD4B,kBAGpBnJ,EAC3BiI,WAD2B,iBACN/H,EAAKgI,YAAYC,IADX,cAE3BC,MAF2B,UAElBnC,GAAS,KAAMwC,GACxBH,MAN+C,qBAQlCC,SAAQ,SAACa,GAAD,OACtBD,EAAgBE,KACdrJ,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,oBAAiDiB,EAAYV,OAAOD,KAAMI,aAV5B,SAc5CE,QAAQO,IAAIH,GAdgC,yDAgBlDpB,QAAQ3B,MAAR,MAhBkD,0DAAnB,uDAoBtBmD,GAAe,SAACd,EAAIe,GAAL,gDAAgB,WAAO7E,GAAP,gBAAA7B,EAAA,sEAExC6B,EAAS,CAAEP,KAAM,qBAAsBC,SAAS,IAFR,SAGlCrE,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,oBAAiDM,IAAMe,OAAOA,GAH5B,uBAInBxJ,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,oBAAiDM,IAAMH,MAJpC,OAIlCmB,EAJkC,OAKxC9E,EAAS+E,GAAaD,EAAOf,SALW,kDAOxCX,QAAQ3B,MAAR,MACAzB,EAAS,CAAEP,KAAM,qBAAsBC,SAAS,IARR,0DAAhB,uDAefyD,GAAa,SAAC1E,GAAD,MAAY,CACpCgB,KAAM,sBACNC,QAASjB,IAGEuG,GAAY,SAAC3F,GAAD,MAAW,CAClCI,KAAM,aACNC,QAASL,IAGE8E,GAAqB,SAACL,GAAD,MAAS,CACzCrE,KAAM,gBACNC,QAASoE,IAGEiB,GAAe,SAACD,GAAD,MAAa,CACvCrF,KAAM,gBACNC,QAASoF,IAOX,SAAS9B,GAAUiC,GAAK,IAAD,OACrB,+BAAO,mDAAA9G,EAAA,0DACC+G,EAASC,YAAYC,MADtB,WAAUC,EAAV,yBAAUA,EAAV,wBAEgBJ,EAAGK,MAAM,EAAMD,GAF/B,cAECE,EAFD,OAGCC,EAAQL,YAAYC,MAC1BhC,QAAQqC,IAAR,oBAAyBD,EAAQN,IAJ5B,kBAKEK,GALF,2CCjHT,IAAMG,GAAYC,aAAW,CAC3BpJ,MAAO,CACLqJ,MAAO,WA8CIC,uBA1Cf,YAAyE,IAApDC,EAAmD,EAAnDA,KAAMF,EAA6C,EAA7CA,MAAOG,EAAsC,EAAtCA,YAAaC,EAAyB,EAAzBA,YAAalC,EAAY,EAAZA,GAAItB,EAAQ,EAARA,KACxDxC,EAAWC,cACXgG,EAAUP,KAFsD,8CAItE,WAA4BQ,EAAQC,GAApC,UAAAhI,EAAA,sDACEgI,EAAQC,eAAc,GACtBJ,GAAY,GACZhG,EAAS4E,GAAad,EAAI,CAAEtB,KAAM0D,EAAO1D,QAH3C,4CAJsE,sBAUtE,OACE,eAAC6D,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTQ,kBAAgB,oBAChBhJ,UAAU,qBACV0I,QAAS,CAAE1J,MAAO0J,EAAQ1J,OAC1BwC,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GAPhC,UAQE,cAACc,GAAA,EAAD,qGACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,cAAC,KAAD,CACEgF,cAAeA,GAAcC,GAC7BC,iBAAkBA,GAClBmE,SAxB8D,8CAqBhE,SAIE,eAAC,KAAD,WACE,cAAC,GAAD,IACA,eAACpJ,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGA,cAACc,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAAnD,gGCnCCsH,OAff,WACE,OACE,cAAC,IAAMjF,SAAP,UACE,cAAC,GAAD,CACEK,OAAO,SACPd,KAAK,QACL3E,MAAM,2BACN0F,aAAa,MACbC,WAAS,EACTC,WAAS,OCTFC,GAJO,SAACyE,GAAD,MAAmB,CACvCvL,MAAOuL,ICKMvE,GAJUC,OAAaC,MAAM,CAC1ClH,MAAOiH,KAAW,iHAAuBE,IAAI,IAAK,mMCc9C8C,GAAYC,aAAW,CAC3BpJ,MAAO,CACLqJ,MAAO,WA+CIC,uBA3Cf,YAAgF,IAA3DC,EAA0D,EAA1DA,KAAMF,EAAoD,EAApDA,MAAOG,EAA6C,EAA7CA,YAAajC,EAAgC,EAAhCA,GAAImD,EAA4B,EAA5BA,YAAajB,EAAe,EAAfA,YACxDhG,EAAWC,cACXgG,EAAUP,KAF6D,8CAI7E,WAA4BQ,EAAQC,GAApC,UAAAhI,EAAA,sDACEgI,EAAQC,eAAc,GACtBJ,GAAY,GACZD,IACA/F,EAAS4E,GAAad,EAAI,CAAErI,MAAOyK,EAAOzK,SAJ5C,4CAJ6E,sBAW7E,OACE,eAAC4K,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTQ,kBAAgB,oBAChBhJ,UAAU,qBACV0I,QAAS,CAAE1J,MAAO0J,EAAQ1J,OAC1BwC,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GAPhC,UAQE,cAACc,GAAA,EAAD,qGACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,cAAC,KAAD,CACEgF,cAAeA,GAAc0E,GAC7BxE,iBAAkBA,GAClBmE,SAzBqE,8CAsBvE,SAIE,eAAC,KAAD,WACE,cAAC,GAAD,IACA,eAACpJ,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGA,cAACc,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAAnD,gGCpDDyH,GAAiB,wEAAuB,GAApBC,EAAH,EAAGA,gBAAH,gDAA8B,WAAOnH,GAAP,gBAAA7B,EAAA,sEAEnDgJ,GAAiBnH,EAAS,CAAEP,KAAM,uBAAwBC,SAAS,IAFhB,SAIhC0H,KAJgC,OAIlDC,EAJkD,OAMxDrH,EAASsH,GAAaD,IANkC,gDAQxDjE,QAAQ3B,MAAR,MACAzB,EAAS,CAAEP,KAAM,uBAAwBC,SAAS,IATM,yDAA9B,uD,SAaf0H,K,gFAAf,6BAAAjJ,EAAA,6DACMkJ,EAAY,GADlB,SAEyBhM,EAAGiI,WAAH,iBAAwB/H,EAAKgI,YAAYC,IAAzC,gBAA2DG,MAFpF,qBAGWC,SAAQ,SAACK,GAAD,OAAUoD,EAAS,2BAAQA,GAAR,mBAAoBpD,EAAIH,GAAKG,EAAIF,YAHvE,kBAISsD,GAJT,4C,sBAOO,IAAME,GAAe,SAACF,GAAD,gDAAe,WAAOrH,GAAP,gBAAA7B,EAAA,sEAEvC6B,EAAS,CAAEP,KAAM,uBAAwBC,SAAS,IAC5C8H,EAAcH,EAAUI,KAAI,SAACC,GAAD,OAChCrM,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,sBAAmDkE,EAAS5D,KAAM6D,IAAlE,eAA2ED,OAJtC,SAMjCtD,QAAQO,IAAI6C,GANqB,cAOvCH,EAAUzD,SAAQ,SAAC8D,GAAD,OAAc1H,EAAS4H,GAAYF,OAPd,kBAQhCtD,QAAQC,QAAQ,YARgB,uCAUvCjB,QAAQqC,IAAR,MACAzF,EAAS,CAAEP,KAAM,uBAAwBC,SAAS,IAXX,kBAYhC0E,QAAQE,OAAO,WAZiB,yDAAf,uDA+BfuD,GAA2B,SAAC,GAAD,IAAGxK,EAAH,EAAGA,KAAMyG,EAAT,EAASA,GAAT,gDAAkB,WAAO9D,GAAP,gBAAA7B,EAAA,sEAEtD6B,EAAS,CAAEP,KAAM,uBAAwBC,SAAS,IAFI,SAGhDrE,EACH4I,IADG,iBACW1I,EAAKgI,YAAYC,IAD5B,sBAC6CM,EAD7C,MAEHe,OAAO,CAAErG,QAAS5D,IAASU,UAAUwM,WAAWC,YAAY1K,KALT,uBAO/BhC,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,sBAAmDM,EAAnD,MAA0DH,MAP3B,cAOhD+D,EAPgD,OAQtD1H,EAASgI,GAAeN,EAAS3D,SARqB,kBAS/CK,QAAQC,QAAQ,YAT+B,yCAWtDjB,QAAQ3B,MAAR,MACAzB,EAAS,CAAEP,KAAM,uBAAwBC,SAAS,IAZI,kBAa/C0E,QAAQE,OAAO,WAbgC,0DAAlB,uDAiB3B2D,GAAyB,SAACnE,GAAD,gDAAQ,WAAO9D,GAAP,gBAAA7B,EAAA,6DACtC+J,EAAoB,GADkB,kBAGV7M,EAC7BiI,WAD6B,iBACR/H,EAAKgI,YAAYC,IADT,gBAE7BC,MAAM,QAAS,KAAMK,GACrBH,MANuC,qBAQxBC,SAAQ,SAACuE,GAAD,OACxBD,EAAkBxD,KAChBrJ,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,sBAAmD2E,EAAcpE,OAAOD,KAAMI,aAVxC,SAcpCE,QAAQO,IAAIuD,GAdwB,yDAgB1C9E,QAAQ3B,MAAR,MAhB0C,0DAAR,uDAoBzB2G,GAAuB,SAACtE,GAAD,gDAAQ,WAAO9D,GAAP,UAAA7B,EAAA,+EAElC9C,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,sBAAmDM,IAAMI,SAFvB,sDAIxCd,QAAQ3B,MAAR,MACAzB,EAAS,CAAEP,KAAM,uBAAwBC,SAAS,IALV,wDAAR,uDASvB2I,GAAuB,SAACvE,EAAIC,GAAL,gDAAc,WAAO/D,GAAP,gBAAA7B,EAAA,+EAExC9C,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,sBAAmDM,EAAnD,MAA0De,OAAOd,GAFzB,uBAIvB1I,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,sBAAmDM,EAAnD,MAA0DH,MAJnC,cAIxC+D,EAJwC,OAM9C1H,EAASgI,GAAeN,IANsB,kBAOvCtD,QAAQC,QAAQ,YAPuB,yCAS9CjB,QAAQ3B,MAAR,MACAzB,EAAS,CAAEP,KAAM,uBAAwBC,SAAS,IAVJ,kBAWvC0E,QAAQE,OAAO,WAXwB,0DAAd,uDAevBgD,GAAe,SAAC7I,GAAD,MAAY,CACtCgB,KAAM,gBACNC,QAASjB,IAGEmJ,GAAc,SAAC7D,GAAD,MAAW,CACpCtE,KAAM,eACNC,QAASqE,IAGEiE,GAAiB,SAACN,GAAD,MAAe,CAC3CjI,KAAM,kBACNC,QAASgI,I,mBC3HIY,G,mFAAf,WAAsCjL,GAAtC,oBAAAc,EAAA,6DACMkJ,EAAY,GACVkB,EAAQC,aAAUnL,GAClBoL,EAAe3K,YAAUT,EAAM,CAAEU,eAAgB,SAHzD,SAKyB1C,EACpBiI,WADoB,iBACC/H,EAAKgI,YAAYC,IADlB,gBAEpBC,MAAM,MAAO,KAAM8E,GACnB5E,MARL,qBAUWC,SAAQ,SAACK,GACXA,EAAIF,OAAOvF,QAAQkK,SAASD,KAC/BpB,EAAS,2BAAQA,GAAR,mBAAoBpD,EAAIH,GAAKG,EAAIF,aAZhD,kBAcSsD,GAdT,4C,sBAiBO,IAAMsB,GAAwB,SAACtL,GAAD,6DAA6B,GAApB8J,EAAT,EAASA,gBAAT,gDAAoC,WAAOnH,GAAP,gBAAA7B,EAAA,sEAEhEgJ,GAAiBnH,EAAS,CAAEP,KAAM,+BAAgCC,SAAS,IAFX,SAG7C4I,GAAuBjL,GAHsB,OAG/DgK,EAH+D,OAKrErH,EAAS4I,GAAoBvB,IALwC,gDAOrEjE,QAAQ3B,MAAR,MACAzB,EAAS,CAAEP,KAAM,+BAAgCC,SAAS,IARW,yDAApC,uDAYxBkJ,GAAsB,SAACnK,GAAD,MAAY,CAC7CgB,KAAM,wBACNC,QAASjB,I,kDCxBLoK,GAAY,CAChBC,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,QAEdE,mBAAoB,MAGhBC,GAAgB,SAACnI,GAAD,OAAW,cAAC,KAAD,eAAoBA,KAEtC,SAASoI,KACtB,IAAMC,EAAS9K,aAAY,qBAAG8K,OAAoB5K,SAC5C6K,EAAW/K,aAAY,qBAAGgL,KAAgBD,YAEhD,OACE,eAAC,IAAMxH,SAAP,WACE,cAAC,GAAD,CAAaK,OAAO,SAASd,KAAK,QAAQ3E,MAAM,2BAAO0F,aAAa,MAAME,WAAS,IACnF,eAACtD,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,cAACF,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,EAAf,SACE,eAACC,GAAA,EAAD,CAAanH,WAAS,EAAtB,UACE,cAACoH,GAAA,EAAD,CAAY5F,GAAG,4BAAf,kDACA,cAAC,GAAD,CACE6F,QAAQ,4BACRtI,KAAK,QACLuI,UAAWf,GACXgB,cAAeV,GAJjB,SAKGzK,OAAOC,KAAK0K,GAAQ5B,KAAI,SAACqC,GAAD,OACvB,cAACC,GAAA,EAAD,CAAoBpJ,MAAO0I,EAAOS,GAAKhG,GAAvC,SACGuF,EAAOS,GAAKzI,MADAyI,aAOvB,cAAC9K,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,EAAf,SACE,cAAC,GAAD,CAAarH,OAAO,OAAOd,KAAK,UAAU3E,MAAM,6CAAU0F,aAAa,MAAME,WAAS,MAExF,cAACtD,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAIQ,GAAI,EAAvB,SACE,cAAC,GAAD,CACE7H,OAAO,SACPd,KAAK,OACL3E,MAAM,2BACN+C,KAAK,OACL2C,aAAa,MACbE,WAAS,MAGb,cAACtD,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAIQ,GAAI,EAAvB,SACE,cAAC,GAAD,CACE7H,OAAO,SACPd,KAAK,OACL3E,MAAM,gEACN+C,KAAK,OACLwK,WAAY,CACVC,KAAM,KAER9H,aAAa,MACbE,WAAS,MAGZgH,GACC,cAACtK,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACErH,OAAO,OACP1C,KAAK,SACL4B,KAAK,QACL3E,MAAM,oGACN0F,aAAa,MACbE,WAAS,MAIf,cAACtD,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACErH,OAAO,OACPE,WAAW,EACX8H,QAAS,GACT9I,KAAK,OACL3E,MAAM,6CACN0F,aAAa,MACbE,WAAS,YCvFN8H,OAJf,WACE,OAAO,cAAChB,GAAD,KCAM7G,GALO,SAAC,GAAD,IAAgB9G,EAAhB,EAAGwL,YAAuBlD,EAA1B,oDACpBtI,SACGsI,IC6BUtB,GA3BUC,OAAaC,MAAM,CAC1ClH,MAAOiH,KACG,sGACPE,IAAI,IAAK,uOACTyH,SAAS,mKACZC,MAAO5H,OAAY6H,UAAU,6JAAgCF,SAAS,yFACtE7H,KAAME,KAAW,8CAAWE,IAAI,IAAK,6MACrC4H,QAAS9H,KACC,yFACPE,IAAI,IAAK,mPACT2H,UAAU,uJACVF,SAAS,4GACZhN,KAAMqF,KACI,sGACP2H,SAAS,sGACZI,KAAM/H,KACI,wHACPgI,QAAQ,oCAAqC,mLAC7CL,SAAS,4GACZM,MAAOjI,KACG,gJACP6H,UAAU,sGACVK,IAAI,EAAG,kMACPhI,IAzBkB,OAyBE,wQACpByH,SAAS,kJC6BCxE,uBAzCf,YAAiF,IAAvDD,EAAsD,EAAtDA,MAAOE,EAA+C,EAA/CA,KAAMhC,EAAyC,EAAzCA,GAAIiC,EAAqC,EAArCA,YAAaC,EAAwB,EAAxBA,YAAgBjC,EAAQ,kEACxE/D,EAAWC,cASjB,OACE,eAACoG,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTQ,kBAAgB,oBAChBhJ,UAAU,qBACVwB,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GANhC,UAOE,cAACc,GAAA,EAAD,8MACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,cAAC,KAAD,CACEgF,cAAeA,GAAcwB,GAC7BtB,iBAAkBA,GAClBmE,SApBR,SAAsBV,EAAQC,GAC5BH,GAAY,GACZG,EAAQC,eAAc,GACtBL,IACA/F,EAAS4E,GAAad,EAAIoC,KAatB,SAIE,eAAC,KAAD,WACE,cAAC,GAAD,IACA,eAAC1I,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGA,cAACc,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAAnD,gGCwHCoL,OA7If,YAgBI,IAfF/G,EAeC,EAfDA,GACA2G,EAcC,EAdDA,KACApN,EAaC,EAbDA,KACAgE,EAYC,EAZDA,KACA5F,EAWC,EAXDA,MACAkP,EAUC,EAVDA,MACAL,EASC,EATDA,MASC,IARD9H,YAQC,MARM,GAQN,MAPDsI,eAOC,MAPS,GAOT,EANDN,EAMC,EANDA,QACA9C,EAKC,EALDA,SACA1B,EAIC,EAJDA,YACA+E,EAGC,EAHDA,kBACAC,EAEC,EAFDA,2BACAC,EACC,EADDA,sBAEMjL,EAAWC,cACXiL,EAAUC,cAFf,EAG+BrK,IAAMsK,SAAS,MAH9C,mBAGMC,EAHN,KAGgBC,EAHhB,OAIyCxK,IAAMsK,UAAS,GAJxD,mBAIMG,EAJN,KAIqBC,EAJrB,OAKyC1K,IAAMsK,UAAS,GALxD,mBAKMK,EALN,KAKqBC,EALrB,OAMuC5K,IAAMsK,UAAS,GANtD,mBAMMO,EANN,KAMoBC,EANpB,KAOKC,EAAetN,aAAY,qBAAGlB,KAAgBwB,YAG9CkH,EAAc,kBAAMuF,EAAY,OAVrC,8CAgBD,uBAAAnN,EAAA,sEACQ6B,EAASgE,GAAaF,IAD9B,UAEEiH,GAAkB,IACdrD,EAHN,gCAIU1H,EAAS6H,GAAyB,CAAE/D,GAAI4D,EAAUrK,UAJ5D,OAKI2C,EAAS2I,GAAsBkD,IALnC,uBAMS7L,EAAS2I,GAAsBkD,IANxC,6CAhBC,sBA+BD,OACE,eAAC,IAAM/J,SAAP,WACE,cAAC,GAAD,CACEgE,KAAMyF,EACNvF,YAAaA,EACbxD,KAAMA,EACNsB,GAAIA,EACJiC,YARiB,kBAAMyF,GAAiB,MAW1C,cAAC,GAAD,CACE1F,KAAM2F,EACNxE,YAAaxL,EACbuK,YAAagF,EACblH,GAAIA,EACJiC,YAAa,kBAAM2F,GAAiB,MAGtC,cAAC,GAAD,CACE5F,KAAM6F,EACN1E,YAAaxL,EACbqI,GAAIA,EACJ2G,KAAMA,EACNpN,KAAMA,EACNiN,MAAOA,EACPE,QAASA,EACTG,MAAOA,EACPnI,KAAMA,EACNuD,YAAa,kBAAM6F,GAAgB,IACnC5F,YAAaiF,IAEf,eAAC3N,EAAA,EAAD,CAAMC,UAAU,oBAAhB,UACE,cAAC,IAAD,CACEuG,GAAG,cACHuH,SAAUA,EACVS,aAAW,EACX5C,mBAAoB,KACpBJ,aAAc,CAAEC,SAAU,SAAUC,WAAY,UAChDC,gBAAiB,CAAEF,SAAU,MAAOC,WAAY,UAChDlD,KAAMnE,QAAQ0J,GACd/E,QAASP,EARX,SASE,eAACgG,GAAA,EAAD,CAAUC,WAAW,EAAMzO,UAAU,yBAArC,UACE,cAACwM,GAAA,EAAD,CAAUjD,QAhDpB,WACEoE,EAAQxG,KAAR,oBAA0BZ,KA+ClB,mGACA,cAACiG,GAAA,EAAD,CAAUjD,QA7CG,kBAAM0E,GAAiB,IA6CpC,wDACA,cAACzB,GAAA,EAAD,CAAUjD,QAASf,EAAnB,4BACC2B,EACC,cAACqC,GAAA,EAAD,CAAUjD,QAAS,kBAAM4E,GAAiB,IAA1C,qHAEA,cAAC3B,GAAA,EAAD,CAAUjD,QAAS,kBAAM8E,GAAgB,IAAzC,qHAEF,cAAC7B,GAAA,EAAD,CAAUjD,QAjFnB,2CAiFS,6DAGJ,eAACrJ,EAAA,EAAD,WACE,eAACD,EAAA,EAAD,CAAKD,UAAU,iBAAf,UACE,eAACG,EAAA,EAAD,CAAYC,cAAY,EAACC,QAAQ,KAAKL,UAAU,sBAAhD,UACGkN,EADH,IACUD,KAEV,cAACyB,GAAA,EAAD,CAAYC,aAAW,OAAO3O,UAAU,sBAAsBuJ,QAhFpD,SAACqF,GAAD,OAAOb,EAAYa,EAAEC,gBAgF/B,SACE,cAAC,KAAD,SAGJ,cAAC1O,EAAA,EAAD,CAAYE,QAAQ,KAAKjB,MAAM,cAAcY,UAAU,gBAAgBM,UAAU,IAAjF,SACGpC,IAEH,eAACuD,EAAA,EAAD,CAAMC,WAAS,EAACoN,QAAQ,gBAAxB,UACE,cAACrN,EAAA,EAAD,CAAMK,MAAI,EAAV,SACE,eAAC3B,EAAA,EAAD,CAAYE,QAAQ,YAAYjB,MAAM,cAAckB,UAAU,IAA9D,UACGwD,EADH,KACWyJ,OAGb,cAAC9L,EAAA,EAAD,CAAMK,MAAI,EAAV,UACIqI,GACA,cAAC4E,GAAA,EAAD,CAASC,MAAM,+HAA2BL,aAAW,+HAArD,SACE,cAAC,KAAD,qB,oBCrIHM,GATkB,WAC/B,OACE,eAAC,IAAM1K,SAAP,WACE,cAAC,GAAD,CAAaK,OAAO,SAASd,KAAK,QAAQ3E,MAAM,2BAAO0F,aAAa,MAAME,WAAS,IACnF,cAAC,GAAD,CAAaH,OAAO,SAASd,KAAK,OAAO3E,MAAM,6CAAU0F,aAAa,MAAME,WAAS,QCH5EmK,GALW,CACxBhR,MAAO,GACP+G,KAAM,ICUOC,GAVUC,OAAaC,MAAM,CAC1ClH,MAAOiH,KACG,sGACPE,IAAI,IAAK,uOACTyH,SAAS,mKACZqC,MAAOhK,KACG,iEACPE,IAAI,IAAK,qNCmBC+J,GAvBY,SAAC7H,GAAD,gDAAY,WAAO9E,GAAP,sBAAA7B,EAAA,6DAC/ByO,EAAQvR,EAAGuR,QAEXC,EAAYxR,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,oBAAiDsB,EAAOhB,KAC1E8I,EAAMjF,IAAIkF,EAAW/H,GAEfgI,EAASzR,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,sBAAmDsB,EAAO4C,SAA1D,MACfkF,EAAM/H,OAAOiI,EAAQ,CAAEtO,QAAS5D,IAASU,UAAUwM,WAAWiF,WAAWjI,EAAOzH,QAP3C,kBAS7BuP,EAAMI,SATuB,cAWnChN,EAASgF,GAAUF,IAXgB,UAYZzJ,EACpB4I,IADoB,iBACN1I,EAAKgI,YAAYC,IADX,sBAC4BsB,EAAO4C,SADnC,MAEpB/D,MAdgC,eAY7B+D,EAZ6B,OAenC1H,EAASgI,GAAeN,EAAS3D,SAfE,kBAgB5BK,QAAQC,QAAQ,YAhBY,yCAkBnCjB,QAAQ3B,MAAR,MAlBmC,kBAmB5B2C,QAAQE,OAAO,WAnBa,0DAAZ,uDC8EZuB,uBA/Df,YAAiG,IAA/DD,EAA8D,EAA9DA,MAAOE,EAAuD,EAAvDA,KAAMC,EAAiD,EAAjDA,YAAakH,EAAoC,EAApCA,QAASC,EAA2B,EAA3BA,WAAYlH,EAAe,EAAfA,YACzEhG,EAAWC,cAEXyH,EAAWnJ,aAAY,qBAAG8I,UAA0B5I,MAAMyO,MAC1D7P,EAAOkB,aAAY,qBAAGlB,KAAgBwB,YAJkD,8CAM9F,WAA4BqH,EAAQC,GAApC,kBAAAhI,EAAA,6DACMgP,EAAOzO,OAAO0O,QAAQlH,GAAQmH,QAAO,YAAmB,IAAD,mBAAX1M,GAAW,WACzD,MAAqB,kBAAVA,GAA2BA,EAAM2M,UAG9CH,EAAOzO,OAAO6O,YAAYJ,GAEpBrI,EAPR,aAQIhB,GAAI0J,OACJnQ,KAAMS,YAAUT,EAAM,CAACU,eAAgB,SACvC0M,KAAM/C,EAAS+C,KACf/C,SAAUwF,EACV5C,MAAO2C,EACPzC,QAAS9C,EAAS8C,QAClBG,MAAOjD,EAASiD,MAChB8C,UAAWnO,KAAK8F,OACb+H,GAGLhH,EAAQC,eAAc,GACtBJ,GAAY,GApBd,SAsBQhG,EAAS2M,GAAmB7H,IAtBpC,OAuBE9E,EAAS2I,GAAsBtL,IAvBjC,4CAN8F,sBAgC9F,OACE,eAACgJ,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTQ,kBAAgB,oBAChBhJ,UAAU,qBACVwB,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GANhC,UAOE,cAACc,GAAA,EAAD,kKACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,cAAC,KAAD,CACEgF,cAAekK,GACfhK,iBAAkBA,GAClBmE,SA7CsF,8CA0CxF,SAIE,eAAC,KAAD,WACE,cAAC,GAAD,IACA,eAACpJ,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGA,cAACc,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAAnD,gGCjEC8C,GAPO,SAAC,GAAD,IAAGmL,EAAH,EAAGA,IAAKjD,EAAR,EAAQA,KAAMD,EAAd,EAAcA,QAAd,IAAuBG,MAAvB,MAAwC,CAC5D+C,MACAjD,OACAD,UACAG,WAJoB,MAA+B,EAA/B,IC4BPlI,GAxBUC,OAAaC,MAAM,CAC1C+K,IAAKhL,OAEFiL,MAAM,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MACrCpD,UAAU,uJACVF,SAAS,kHACZI,KAAM/H,KACI,wHACPgI,QAAQ,oCAAqC,mLAC7C9H,IAAI,EAAG,yOACPyH,SAAS,wHACZM,MAAOjI,KACG,gJACP6H,UAAU,sGACVK,IAAI,EAAG,uMACPhI,IAjBkB,OAiBE,wQACpByH,SAAS,gJACZG,QAAS9H,OAENE,IAAI,IAAK,mPACT2H,UAAU,uJACVF,SAAS,8GCjBRxB,GAAY,CAChBC,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,QAEdE,mBAAoB,MAGhBlL,GAAO,CACX4P,EAAG,qEACHC,EAAG,6CACHC,EAAG,iCACHC,EAAG,6CACHC,EAAG,6CACHC,EAAG,6CACHC,EAAG,sEAGC/E,GAAgB,SAACnI,GAAD,OAAW,cAAC,KAAD,eAAoBA,KAoDtCmN,OAlDf,WACE,IAAM7E,EAAW/K,aAAY,qBAAGgL,KAAgBD,YAEhD,OACE,eAAC,IAAMxH,SAAP,WACE,eAAC9C,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,cAACF,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAIQ,GAAI,EAAvB,SACE,eAACP,GAAA,EAAD,CAAanH,WAAS,EAAtB,UACE,cAACoH,GAAA,EAAD,CAAY5F,GAAG,2BAAf,iFACA,cAAC,GAAD,CACE6F,QAAQ,2BACRtI,KAAK,MACLuI,UAAWf,GACXgB,cAAeV,GAJjB,SAKGzK,OAAOC,KAAKX,IAAMyJ,KAAI,SAACqC,GAAD,OACrB,cAACC,GAAA,EAAD,CAAoBpJ,MAAOmJ,EAA3B,SACG9L,GAAK8L,IADOA,aAOvB,cAAC9K,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAIQ,GAAI,EAAvB,SACE,cAAC,GAAD,CACE7H,OAAO,OACPd,KAAK,OACL5B,KAAK,OACL/C,MAAM,4EACNuN,WAAY,CACVC,KAAM,KAER5H,WAAS,SAIdgH,GACC,cAAC,GAAD,CACEnH,OAAO,SACPd,KAAK,QACL5B,KAAK,SACL/C,MAAM,oGACN0F,aAAa,MACbE,WAAS,IAGb,cAAC,GAAD,CAAaH,OAAO,SAASd,KAAK,UAAU3E,MAAM,6CAAU0F,aAAa,MAAME,WAAS,QCtE/E8L,OAJf,WACE,OAAO,cAAC,GAAD,KC6DMvI,uBAhDf,YAAwF,IAA5DC,EAA2D,EAA3DA,KAAMF,EAAqD,EAArDA,MAAO9B,EAA8C,EAA9CA,GAAIiC,EAA0C,EAA1CA,YAAa2H,EAA6B,EAA7BA,IAAKjD,EAAwB,EAAxBA,KAAMD,EAAkB,EAAlBA,QAASG,EAAS,EAATA,MACtE3K,EAAWC,cACX5C,EAAOkB,aAAY,qBAAGlB,KAAgBwB,YAFyC,8CAIrF,WAA4BqH,EAAQC,GAApC,UAAAhI,EAAA,6DACEgI,EAAQC,eAAc,GACtBL,IAFF,SAGQ/F,EACJqI,GAAqBvE,EAAI,CACvB2G,KAAMvE,EAAOuE,KACbiD,KAAMxH,EAAOwH,IACblD,QAAStE,EAAOsE,QAChBG,OAAQzE,EAAOyE,SARrB,OAWE3K,EAAS2I,GAAsBtL,IAXjC,4CAJqF,sBAiBrF,OACE,eAACgJ,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTQ,kBAAgB,oBAChBhJ,UAAU,qBACVwB,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GANhC,UAOE,cAACc,GAAA,EAAD,kKACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,cAAC,KAAD,CACEgF,cAAeA,GAAc,CAAEmL,IAAI,GAAD,OAAKA,GAAOjD,OAAMD,UAASG,UAC7DlI,iBAAkBA,GAClBmE,SA9B6E,8CA2B/E,SAIE,eAAC,KAAD,WACE,cAAC,GAAD,IACA,eAACpJ,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGA,cAACc,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAAnD,gG,SCrCC4O,K,gFAAf,6BAAAlQ,EAAA,6DACMmQ,EAAkB,GADxB,SAE+BjT,EAAGiI,WAAH,iBAAwB/H,EAAKgI,YAAYC,IAAzC,aAAwDG,MAFvF,qBAGiBC,SACb,SAAC2K,GAAD,OAAeD,EAAe,2BAAQA,GAAR,mBAA0BC,EAASzK,GAAKyK,EAASxK,YAJnF,kBAOSuK,GAPT,4C,sBAUO,IAWME,GAAwB,SAACvB,EAASC,GAAV,gDAAyB,WAAOlN,GAAP,gBAAA7B,EAAA,+EAEpD9C,EACH4I,IADG,iBACW1I,EAAKgI,YAAYC,IAD5B,mBAC0CyJ,EAD1C,MAEHpI,OAAO,CAAE4J,YAAa7T,IAASU,UAAUwM,WAAWC,YAAYmF,KAJT,uBAKtC7R,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,mBAAgDyJ,EAAhD,MAA4DtJ,MALtB,OAKpD2G,EALoD,OAM1DtK,EAAS0O,GAAYpE,EAAMvG,SAN+B,gDAQ1DX,QAAQ3B,MAAR,MAR0D,yDAAzB,uDAYxBkN,GAAsB,SAAC1B,EAASC,GAAV,gDAAyB,WAAOlN,GAAP,gBAAA7B,EAAA,+EAElD9C,EACH4I,IADG,iBACW1I,EAAKgI,YAAYC,IAD5B,mBAC0CyJ,EAD1C,MAEHpI,OAAO,CAAE4J,YAAa7T,IAASU,UAAUwM,WAAWiF,WAAWG,KAJV,uBAKpC7R,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,mBAAgDyJ,EAAhD,MAA4DtJ,MALxB,cAKlD2G,EALkD,OAMxDtK,EAAS0O,GAAYpE,EAAMvG,SAN6B,kBAOjDK,QAAQC,QAAQ,YAPiC,yCASxDjB,QAAQ3B,MAAR,MATwD,kBAUjD2C,QAAQC,QAAQ,WAViC,0DAAzB,uDA6CtBuK,GAAoB,SAAC9K,GAAD,gDAAQ,WAAO9D,GAAP,UAAA7B,EAAA,sEAErC6B,EAAS,CAAEP,KAAM,oBAAqBC,SAAS,IAFV,SAG/BrE,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,mBAAgDM,EAAhD,MAAuDI,SAHxB,OAIrClE,EAAS6O,GAAY/K,IAJgB,gDAMrCV,QAAQ3B,MAAR,MANqC,yDAAR,uDAUpBqN,GAAY,SAACrQ,GAAD,MAAY,CACnCgB,KAAM,aACNC,QAASjB,IAGEsQ,GAAW,SAAChL,GAAD,MAAW,CACjCtE,KAAM,YACNC,QAASqE,IAGE8K,GAAc,SAAC/K,GAAD,MAAS,CAClCrE,KAAM,eACNC,QAASoE,IAGE4K,GAAc,SAACpE,GAAD,MAAY,CACrC7K,KAAM,eACNC,QAAS4K,IC6BI0E,OAjIf,YAWI,IAVFvE,EAUC,EAVDA,KACAH,EASC,EATDA,MACAxG,EAQC,EARDA,GACA0G,EAOC,EAPDA,QACAnJ,EAMC,EANDA,KACAqM,EAKC,EALDA,IACA5C,EAIC,EAJDA,QAIC,IAHDH,aAGC,MAHO,EAGP,EAFDsE,EAEC,EAFDA,kBACAlE,EACC,EADDA,kBAEM/K,EAAWC,cACX5C,EAAOkB,aAAY,qBAAGlB,KAAgBwB,YAF3C,EAG+BiC,IAAMsK,SAAS,MAH9C,mBAGMC,EAHN,KAGgBC,EAHhB,OAI6DxK,IAAMsK,UAAS,GAJ5E,mBAIM8D,EAJN,KAI+BC,EAJ/B,OAK+BrO,IAAMsK,UAAS,GAL9C,mBAKMgE,EALN,KAKgBC,EALhB,OAMuDvO,IAAMsK,UAAS,GANtE,mBAMMkE,EANN,KAM4BC,EAN5B,mDAgBD,uBAAApR,EAAA,sEACQiG,QAAQO,IAAI,CAChB3E,EAASuE,GAAoB,CAAEjD,MAAO,WAAYwC,QAClD9D,EAASoI,GAAqBtE,IAC9B9D,EAASwO,GAAsBlE,EAAOxG,MAJ1C,OAMEiH,GAAkB,GAClB/K,EAAS6C,GAAaxF,IACtB2C,EAAS2I,GAAsBtL,IARjC,4CAhBC,sBA2BD,OACE,eAAC,IAAMyE,SAAP,WACE,cAAC,GAAD,CACEgE,KAAMsJ,EACNnC,QAAS3C,EACT4C,WAAYpJ,EACZiC,YAtBkB,kBAAMsJ,GAAY,IAuBpCrJ,YAAaiJ,IAEf,cAAC,GAAD,CACEnJ,KAAMwJ,EACNvJ,YAxB8B,kBAAMwJ,GAAwB,IAyB5DzL,GAAIA,EACJ2G,KAAMA,EACND,QAASA,EACTkD,IAAKA,EACL/C,MAAOA,IAGT,eAACtE,GAAA,EAAD,CACEP,KAAMoJ,EACN5I,QAAS,kBAAM6I,GAA2B,IAC1C5I,kBAAgB,oBAChBxH,SAAS,KAJX,UAKE,cAAC2H,GAAA,EAAD,8VACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,eAACC,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CACEjJ,QAAQ,YACRjB,MAAM,YACN6S,MAAO,CAAEC,WAAY,OACrB3I,QAAS,kBAAMqI,GAA2B,IAJ5C,wDAOA,cAACtI,EAAA,EAAD,CACEjJ,QAAQ,YACR4R,MAAO,CAAEC,WAAY,MAAOjT,gBAAiB,OAC7CsK,QAhEX,2CA6DS,wFAUN,eAACxJ,EAAA,EAAD,CAAMC,UAAU,gDAAhB,UACE,cAAC,IAAD,CACEuG,GAAG,cACHuH,SAAUA,EACVS,aAAW,EACX5C,mBAAoB,KACpBJ,aAAc,CAAEC,SAAU,SAAUC,WAAY,UAChDC,gBAAiB,CAAEF,SAAU,MAAOC,WAAY,UAChDlD,KAAMnE,QAAQ0J,GACd/E,QAvEY,kBAAMgF,EAAY,OA+DhC,SASE,eAACS,GAAA,EAAD,CAAUC,WAAW,EAAMzO,UAAU,yBAArC,UACE,cAACwM,GAAA,EAAD,CAAUjD,QAtEG,kBAAMuI,GAAY,IAsE/B,+IACA,cAACtF,GAAA,EAAD,CAAUjD,QAAS,kBAAMyI,GAAwB,IAAjD,iIACA,cAACxF,GAAA,EAAD,CAAUjD,QAAS,kBAAMqI,GAA2B,IAApD,6KAKJ,eAAC1R,EAAA,EAAD,WACE,eAACD,EAAA,EAAD,CAAKD,UAAU,iBAAf,UACE,eAACG,EAAA,EAAD,CAAYC,cAAY,EAACC,QAAQ,KAAKL,UAAU,sBAAhD,UACGkN,EADH,IACUD,EADV,4EAGA,cAACyB,GAAA,EAAD,CAAYC,aAAW,OAAO3O,UAAU,sBAAsBuJ,QAtFpD,SAACqF,GAAD,OAAOb,EAAYa,EAAEC,gBAsF/B,SACE,cAAC,KAAD,SAGJ,cAAC1O,EAAA,EAAD,CAAYE,QAAQ,KAAKjB,MAAM,cAAcY,UAAU,gBAAgBM,UAAU,IAAjF,oNAGA,eAACH,EAAA,EAAD,CAAYE,QAAQ,YAAYjB,MAAM,cAAckB,UAAU,IAA9D,UACGwD,EADH,KACWyJ,eCvIf4E,GAA4C,KAAjC,IAAIpQ,MAAOqQ,oBAablD,GAVW,CACxBhR,MAAO,GACP6O,MAAO,GACPE,QAAS,GACThI,KAAM,GACNnF,KAPmB,IAAIiC,KAAKA,KAAK8F,MAAQsK,IAAUE,cAAcC,MAAM,EAAG,IAQ1EpF,KAAM,QACNE,MAAO,GCgEM9E,uBAxDf,YAAmE,IAA1CD,EAAyC,EAAzCA,MAAOE,EAAkC,EAAlCA,KAAMC,EAA4B,EAA5BA,YAAaC,EAAe,EAAfA,YAC3ChG,EAAWC,cACX5C,EAAOkB,aAAY,qBAAGlB,KAAgBwB,YAuB5C,OAtBA4N,GAAkBpP,KAAOS,YAAUT,EAAM,CAAEU,eAAgB,SAuBzD,eAACsI,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTQ,kBAAgB,oBAChBhJ,UAAU,qBACVwB,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GANhC,UAOE,cAACc,GAAA,EAAD,kKACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,cAAC,KAAD,CACEgF,cAAekK,GACfhK,iBAAkBA,GAClBmE,SAjCR,WAAgDT,GAAU,IAAD,IAAjCwE,aAAiC,MAAzB,EAAyB,EAAnBzE,EAAmB,0BACnDiH,EAAOzO,OAAO0O,QAAQlH,GAAQmH,QAAO,YAAmB,IAAD,mBAAX1M,GAAW,WACzD,MAAqB,kBAAVA,GAA2BA,EAAM2M,UAG9CH,EAAOzO,OAAO6O,YAAYJ,GAE1B,IAAMrI,EAAM,aACVhB,GAAI0J,OACJ9F,SAAU,KACViD,QACA8C,UAAWnO,KAAK8F,OACb+H,GAELnH,GAAY,GACZD,IACAI,EAAQC,eAAc,GACtBpG,E3BHsB,SAAC8E,GAAD,IAAWqC,GAAX,uDAA+B,IAApBA,gBAAX,gDAAsC,WAAOnH,GAAP,UAAA7B,EAAA,sEAEvDgJ,GAAiBnH,EAAS,CAAEP,KAAM,qBAAsBC,SAAS,IAFV,SAGtDrE,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,oBAAiDsB,EAAOhB,KAAM6D,IAAI7C,GAHZ,OAI5D9E,EAASgF,GAAUF,IAJyC,gDAM5D1B,QAAQ3B,MAAR,MACAzB,EAAS,CAAEP,KAAM,qBAAsBC,SAAS,IAPY,yDAAtC,sD2BGboQ,CAAWhL,KAahB,SAIE,eAAC,KAAD,WACE,cAACsE,GAAD,IACA,eAAC5L,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGA,cAACc,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAAnD,gG,yCC1Dd,SAASsQ,GAAT,GAAiD,IAA3BjK,EAA0B,EAA1BA,KAAMkK,EAAoB,EAApBA,QAAS1J,EAAW,EAAXA,QACnC,OACE,cAAC2J,GAAA,EAAD,CACEnH,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdlD,KAAMA,EACNkK,QAASA,EACTE,oBAAqBC,KACrBC,iBAAkB,IAClB9J,QAASA,EACT+J,OACE,eAAC,IAAMvO,SAAP,WACE,cAAC+E,EAAA,EAAD,CAAQlK,MAAM,YAAY2T,KAAK,QAA/B,8DAGA,cAACrE,GAAA,EAAD,CAAYqE,KAAK,QAAQpE,aAAW,QAAQvP,MAAM,UAAlD,SACE,cAAC,KAAD,CAAWP,SAAS,iBAQjB0E,WAAMyP,KAAKR,IC8IXS,OA1Jf,YAA4F,IAAzEC,EAAwE,EAAxEA,OAAQC,EAAgE,EAAhEA,mBAAoBC,EAA4C,EAA5CA,oBAAqBC,EAAuB,EAAvBA,oBAC5DpS,EAAUD,aAAY,qBAAGC,QAAsBC,SAC/CoS,EAAgBtS,aAAY,qBAAGC,QAAsBsS,YAErDzH,EAAS9K,aAAY,qBAAG8K,OAAoB5K,SAC5CsS,EAAexS,aAAY,qBAAG8K,OAAoByH,YAElDE,EAAmBzS,aAAY,qBAAGyS,iBAAwCvS,SAC1EwS,EAAyB1S,aAAY,qBAAGyS,iBAAwCF,YAEhFA,EAAWD,GAAiBE,GAAgBE,EAVuC,EAYvCnQ,IAAMsK,UAAS,GAZwB,mBAYlF8F,EAZkF,KAY/DC,EAZ+D,OAarCrQ,IAAMsK,UAAS,GAbsB,mBAalFgG,EAbkF,KAa9DC,EAb8D,OAc/BvQ,IAAMsK,UAAS,GAdgB,mBAclFkG,EAdkF,KAc3DC,EAd2D,OAe7CzQ,IAAMsK,UAAS,GAf8B,mBAelFoG,EAfkF,KAelEC,EAfkE,OAgBvC3Q,IAAMsK,UAAS,GAhBwB,mBAgBlFsG,EAhBkF,KAgB/DC,EAhB+D,OAiBnC7Q,IAAMsK,UAAS,GAjBoB,mBAiBlFwG,EAjBkF,KAiB7DC,EAjB6D,OAkBjC/Q,IAAMsK,UAAS,GAlBkB,mBAkBlF0G,EAlBkF,KAkB5DC,GAlB4D,QAmB3CjR,IAAMsK,UAAS,GAnB4B,qBAmBlF4G,GAnBkF,MAmBjEC,GAnBiE,MAqBnFC,GAAWpR,IAAMI,OAAO,MAKxBiR,GAA2BrR,IAAMsR,aAAY,kBAAMf,GAAsB,KAAQ,IACjFgB,GAA+BvR,IAAMsR,aAAY,kBAAMb,GAAyB,KAAQ,IACxFe,GAAuBxR,IAAMsR,aAAY,kBAAMX,GAAkB,KAAQ,IACzEc,GAA0BzR,IAAMsR,aAAY,kBAAMT,GAAqB,KAAQ,IAC/Ea,GAA4B1R,IAAMsR,aAAY,kBAAMP,GAAuB,KAAQ,IACnFY,GAA6B3R,IAAMsR,aAAY,kBAAML,IAAwB,KAAQ,IACrF9G,GAAwBnK,IAAMsR,aAAY,kBAAMH,IAAmB,KAAQ,IAEjF,OACE,gCACE,cAACvU,EAAA,EAAD,CAAYE,QAAQ,KAAKL,UAAU,kBAAnC,4CAIA,eAACC,EAAA,EAAD,CAAKD,UAAU,6BAAf,UACE,cAACsJ,EAAA,EAAD,CACEjJ,QAAQ,YACRjB,MAAM,YACN+V,UAAW,cAAC,IAAD,IACXnV,UAAU,uBACVuJ,QAvByB,kBAAMqK,GAAqB,IAkBtD,qEAQA,eAAChS,EAAA,EAAD,CAAQwT,MAAI,EAAZ,UACE,cAAC9L,EAAA,EAAD,CACEjJ,QAAQ,YACRjB,MAAM,YACNmK,QAAS4J,EACTgC,UAAW,cAAC,IAAD,IACXnV,UAAU,uBALZ,iFAQA,cAAC,IAAD,CACEuG,GAAG,cACHuH,SAAUoF,EACV3E,aAAW,EACX5C,mBAAoB,KACpBJ,aAAc,CAAEC,SAAU,SAAUC,WAAY,UAChDC,gBAAiB,CAAEF,SAAU,MAAOC,WAAY,UAChDlD,KAAMnE,QAAQ8O,GACdnK,QAASqK,EARX,SASE,cAAC,EAAD,CAAU1P,IAAKiR,GAAUnS,YAAa6Q,YAK5C,cAAC,GAAD,CACE9K,KAAMoL,EACNnL,YAlD2B,kBAAMoL,GAAqB,IAmDtDnL,YAAaqL,IAGf,cAAC,GAAD,CACEvL,KAAMsL,EACNpB,QAAQ,4EACR1J,QAAS6L,KAEX,cAAC,GAAD,CACErM,KAAMwL,EACNtB,QAAQ,oIACR1J,QAAS+L,KAEX,cAAC,GAAD,CAAYvM,KAAM0L,EAAgBxB,QAAQ,8FAAmB1J,QAASgM,KACtE,cAAC,GAAD,CACExM,KAAM4L,EACN1B,QAAQ,gEACR1J,QAASiM,KAEX,cAAC,GAAD,CACEzM,KAAM8L,EACN5B,QAAQ,4EACR1J,QAASkM,KAEX,cAAC,GAAD,CACE1M,KAAMgM,EACN9B,QAAQ,4EACR1J,QAASmM,KAEX,cAAC,GAAD,CACE3M,KAAMkM,GACNhC,QAAQ,yIACR1J,QAAS2E,KAGX,cAACnM,EAAA,EAAD,CAAWvB,UAAU,2BAArB,SACGuT,EACC,eAAC,IAAMhP,SAAP,WACGpD,OAAO0O,QAAQ5O,GAASiJ,KAAI,mCAAEqC,EAAF,KAAOnJ,EAAP,YAC3B,cAAC,GAAD,aAEEU,KAAMgI,EAAO1I,EAAM2J,OAAOjJ,KAC1ByJ,QAASzB,EAAO1I,EAAM2J,OAAOQ,QAC7B9E,YAAayL,EACb1G,kBAAmB4G,EACnB3G,2BAA4B+G,GAC5B9G,sBAAuBgH,IACnBtR,GAPCmJ,MAURpL,OAAO0O,QAAQ4D,GAAkBvJ,KAAI,YAAmB,IAAD,mBAAhBqC,EAAgB,KAAXnJ,EAAW,KACtD,OACE,cAAC,GAAD,aAEEsM,QAAS5D,EAAO1I,EAAM2J,OAAOxG,GAC7BzC,KAAMgI,EAAO1I,EAAM2J,OAAOjJ,KAC1ByJ,QAASzB,EAAO1I,EAAM2J,OAAOQ,QAC7BmE,kBAAmBsC,EACnBxG,kBAAmB8G,GACflR,GANCmJ,MAURpL,OAAOC,KAAKH,GAASI,QAAUF,OAAOC,KAAKqS,GAAkBpS,OAE5D,KADF,cAAClB,EAAA,EAAD,mOAIJkV,MAAM,GACHC,KAAK,GACLpL,KAAI,SAACqL,EAAGC,GAAJ,OACH,cAACC,EAAA,EAAD,CAAsBpV,QAAQ,OAAOL,UAAU,qBAAhCwV,Y,8GC/IdhJ,OAdf,YAAyD,IAArC5M,EAAoC,EAApCA,SAAUkE,EAA0B,EAA1BA,KAAM4R,EAAoB,EAApBA,GAAIC,EAAgB,EAAhBA,aACtC,OACE,eAACC,GAAA,EAAD,CACEC,QAAM,EACN7V,UAAU,oCACVM,UAAWwV,KACXJ,GAAIA,EACJnM,QAASoM,EALX,UAME,cAACI,GAAA,EAAD,CAAc/V,UAAU,eAAxB,SAAwCJ,IACxC,cAACoW,GAAA,EAAD,CAAc3X,QAASyF,Q,0CCX7B9F,EAAKiY,aAAe,KACb,IAAMC,GAAc3S,IAAM4S,gBAEjC,SAASC,GAAT,GAAqC,IAAbxW,EAAY,EAAZA,SAAY,EACI2D,IAAMsK,SAAS,MADnB,mBAC3B7H,EAD2B,KACdqQ,EADc,OAEJ9S,IAAMsK,UAAS,GAFX,mBAE3ByI,EAF2B,KAElBC,EAFkB,OAGEhT,IAAMsK,UAAS,GAHjB,mBAG3B2I,EAH2B,KAGfC,EAHe,OAIFlT,IAAMsK,SAAS,IAJb,mBAI3B6I,EAJ2B,KAIjBC,EAJiB,KAMlCpT,IAAMqT,WAAU,WACd5Q,GAAe2Q,EAAY3Q,EAAY6Q,eACtC,CAAC7Q,IAmCJzC,IAAMqT,WAAU,WAmBd,OAlBoB5Y,EAAK8Y,oBAAmB,SAAC9K,GACvCA,GACFA,EAAK+K,mBAAmBC,MAAK,SAACC,GAGxBA,EAAIC,WAAalL,EAAKmL,SAASC,eACjCpL,EAAKqL,YAAW,GACU,yCAAtBC,SAASC,UAAqDd,GAAc,OAIpFJ,EAAerK,GACfuK,GAAW,KAEXF,EAAerK,GACfuK,GAAW,SAId,IAEH,IAAMnT,EAAQ,CACZ4C,cACA0Q,WACAc,OA1Da,SAACC,EAAOC,GAAR,OAAqB1Z,EAAK2Z,+BAA+BF,EAAOC,IA2D7EE,MA1DY,SAACH,EAAOC,GAAR,OAAqB1Z,EAAK6Z,2BAA2BJ,EAAOC,IA2DxEI,YAlDkB,SAAC9L,GAAD,OAClBA,EAAK+L,sBAAsB,CACzBC,IAGM,mCACNC,iBAAiB,KA6CnBC,WA3DiB,SAACpU,GAClB9F,EAAKgI,YAAYmS,cAAc,CAAEtB,YAAa/S,IAC9C6S,EAAY7S,IA0DZsU,wBA3C8B,SAACX,GAAD,OAC9BzZ,EAAKgI,YAAYoS,wBAAwBX,EAAO,CAC9CO,IAGM,mCACNC,iBAAiB,KAsCnBI,QAvDc,kBAAMra,EAAKsa,WAwDzBC,YA1DkB,SAACd,GAAD,OAAWzZ,EAAKgI,YAAYuS,YAAYd,IA2D1De,eA1DqB,SAACd,GAAD,OAAc1Z,EAAKgI,YAAYwS,eAAed,IA2DnElB,aACAC,gBACAgC,OAxCa,SAACf,GACd,IAAMgB,EAAiBrb,IAASW,KAAK2a,kBAAkBC,WAAW5S,EAAYyR,MAAOC,GACrF,OAAO1Z,EAAKgI,YAAY6S,6BAA6BH,KAyCvD,OACE,cAACxC,GAAY4C,SAAb,CAAsB1V,MAAOA,EAA7B,SACIkT,EAAqB,cAACyC,GAAD,CAAexQ,KAAM+N,IAAhC1W,IC7DHoZ,OApBf,WAAsB,IAEZtC,EAAanT,IAAM0V,WAAW/C,IAA9BQ,SACR,OACE,eAACjV,EAAA,EAAD,CAAMC,WAAS,EAAC1B,UAAU,eAA1B,UACE,cAACyB,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,EAAGjM,UAAU,eAA5B,SACE,cAAC,KAAD,MAEF,cAACyB,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,EAAGjM,UAAU,8BAA8BM,UAAWwV,KAASJ,GAAG,YAAjF,SACE,cAAChH,GAAA,EAAD,UACE,cAAC,KAAD,QAGJ,cAACjN,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC9L,EAAA,EAAD,CAAYE,QAAQ,KAApB,SAA0BqW,UCuBnBwC,OAjCf,WACE,IAAMnN,EAAW/K,aAAY,qBAAGgL,KAAgBD,YAEhD,OACE,cAACoN,GAAA,EAAD,CAAQ9Y,QAAQ,YAAY6S,OAAO,OAAnC,SACE,eAACkG,GAAA,EAAD,CAAMpZ,UAAW,aAAjB,UACE,cAAC4V,GAAA,EAAD,UACE,cAAC,GAAD,MAGF,cAACyD,GAAA,EAAD,IAEA,eAACpZ,EAAA,EAAD,CAAKD,UAAU,sBAAf,UACE,cAAC,GAAD,CAAUuI,MAAM,EAAOzE,KAAK,+DAAa4R,GAAG,YAA5C,SACE,cAAC,IAAD,CAAmB1V,UAAU,gBAE/B,cAAC,GAAD,CAAUuI,MAAM,EAAOzE,KAAK,6CAAU4R,GAAG,UAAzC,SACE,cAAC,KAAD,CAAU1V,UAAU,gBAErB+L,GACC,cAAC,GAAD,CAAUxD,MAAM,EAAOzE,KAAK,6CAAU4R,GAAG,UAAzC,SACE,cAAC,KAAD,CAAe1V,UAAU,gBAG7B,cAAC,GAAD,CAAUuI,MAAM,EAAOzE,KAAK,wFAAkB4R,GAAG,YAAjD,SACE,cAAC,KAAD,CAAU1V,UAAU,yB,qBCtBhC,SAASsZ,GAAT,GAAyC,IAAjB3D,EAAgB,EAAhBA,aAChB5J,EAAW/K,aAAY,qBAAGgL,KAAgBD,YAChD,OACE,eAAC9L,EAAA,EAAD,CAAKD,UAAU,sBAAf,UACE,cAAC,GAAD,CAAU2V,aAAc,kBAAMA,GAAa,IAAQ7R,KAAK,+DAAa4R,GAAG,YAAxE,SACE,cAAC,IAAD,CAAmB1V,UAAU,gBAE/B,cAAC,GAAD,CAAU2V,aAAc,kBAAMA,GAAa,IAAQ7R,KAAK,6CAAU4R,GAAG,UAArE,SACE,cAAC,KAAD,CAAU1V,UAAU,gBAErB+L,GACC,cAAC,GAAD,CAAU4J,aAAc,kBAAMA,GAAa,IAAQ7R,KAAK,6CAAU4R,GAAG,WAArE,SACE,cAAC,KAAD,CAAe1V,UAAU,gBAG7B,cAAC,GAAD,CAAU2V,aAAc,kBAAMA,GAAa,IAAQ7R,KAAK,wFAAkB4R,GAAG,YAA7E,SACE,cAAC,KAAD,CAAU1V,UAAU,mBA8CbuZ,OAxCf,WAAyB,IAAD,EACEhW,IAAMsK,UAAS,GADjB,mBACftF,EADe,KACTiR,EADS,KAGhB7D,EAAe,kBAAM6D,GAAQ,SAACC,GAAD,OAAWA,MAE9C,OACE,eAAC,IAAMlV,SAAP,WACE,cAAC4U,GAAA,EAAD,CAAQ9Y,QAAQ,YAAY6S,OAAO,OAAnC,SACE,eAACkG,GAAA,EAAD,CAAMpZ,UAAU,aAAhB,UACE,cAAC4V,GAAA,EAAD,CAAUC,QAAM,EAAC7V,UAAU,eAAeuJ,QAASoM,EAAnD,SACE,cAACI,GAAA,EAAD,CAAc/V,UAAU,eAAxB,SACE,cAAC,KAAD,CAAUA,UAAU,kBAIxB,cAACqZ,GAAA,EAAD,IACA,cAACC,GAAD,CAAc/Q,MAAM,EAAOoN,aAAc,oBAG7C,cAACwD,GAAA,EAAD,CAAQ9Y,QAAQ,YAAY6S,OAAO,OAAO3K,KAAMA,EAAMQ,QAAS4M,EAA/D,SACE,eAACyD,GAAA,EAAD,CAAMpZ,UAAU,qBAAhB,UACE,cAAC4V,GAAA,EAAD,CAAUC,QAAM,EAACtM,QAASoM,EAA1B,SACE,cAACI,GAAA,EAAD,CAAc/V,UAAU,eAAxB,SACE,cAAC,KAAD,CAAUA,UAAU,kBAIxB,cAAC4V,GAAA,EAAD,UACE,cAAC,GAAD,MAGF,cAACyD,GAAA,EAAD,IACA,cAACC,GAAD,CAAc3D,aAAc6D,SA1BlC,Q,8BC5BErR,GAAYC,aAAW,CAC3BsR,YAAa,CACXC,SAAU,QACVC,IAAK,UAgEMC,OA5Df,WAAyB,IAAD,EACEtW,IAAMsK,UAAS,GADjB,mBACftF,EADe,KACTiR,EADS,KAEhBzN,EAAW/K,aAAY,qBAAGgL,KAAgBD,YAE1C4J,EAAe,kBAAM6D,GAAQ,SAACC,GAAD,OAAWA,MAExC/Q,EAAUP,KAChB,OACE,eAAC,IAAM5D,SAAP,WACE,cAACuV,GAAA,EAAD,CAAQH,SAAS,SAAjB,SACE,cAACI,GAAA,EAAD,UACE,cAACrL,GAAA,EAAD,CAAYsL,KAAK,QAAQ5a,MAAM,UAAUuP,aAAW,cAAcpF,QAASoM,EAA3E,SACE,cAAC,KAAD,UAKN,eAACwD,GAAA,EAAD,CACE9Y,QAAQ,YACRkI,KAAMA,EACNQ,QAAS4M,EACTjN,QAAS,CACP1J,MAAO0J,EAAQgR,aALnB,UAOE,cAACI,GAAA,EAAD,CAAQH,SAAS,SAAjB,SACE,cAACI,GAAA,EAAD,UACE,cAACrL,GAAA,EAAD,CACEsL,KAAK,QACL5a,MAAM,UACNuP,aAAW,cACXpF,QAASoM,EAJX,SAKE,cAAC,KAAD,UAIN,eAACyD,GAAA,EAAD,CAAMpZ,UAAW,qBAAjB,UACE,cAAC4V,GAAA,EAAD,UACE,cAAC,GAAD,MAGF,cAAC,GAAD,CAAU9R,KAAK,+DAAa4R,GAAG,YAAYC,aAAc,kBAAM6D,GAAQ,IAAvE,SACE,cAAC,IAAD,CAAmBxZ,UAAU,gBAE/B,cAAC,GAAD,CAAU8D,KAAK,6CAAU4R,GAAG,UAAUC,aAAc,kBAAM6D,GAAQ,IAAlE,SACE,cAAC,KAAD,CAAUxZ,UAAU,gBAErB+L,GACC,cAAC,GAAD,CAAUjI,KAAK,6CAAU4R,GAAG,WAAWC,aAAc,kBAAM6D,GAAQ,IAAnE,SACE,cAAC,KAAD,CAAexZ,UAAU,gBAG7B,cAAC,GAAD,CAAU8D,KAAK,wFAAkB4R,GAAG,YAAYC,aAAc,kBAAM6D,GAAQ,IAA5E,SACE,cAAC,KAAD,CAAUxZ,UAAU,0BCtDjBia,GAhBF,WACX,OACE,eAAC,IAAM1V,SAAP,WACE,cAAC3C,EAAA,EAAD,CAAQsY,MAAI,EAAZ,SACE,cAAC,GAAD,MAEF,cAACtY,EAAA,EAAD,CAAQuY,KAAM,CAAC,KAAM,KAAM,MAA3B,SACE,cAAC,GAAD,MAEF,cAACvY,EAAA,EAAD,CAAQwY,QAAM,EAAd,SACE,cAAC,GAAD,U,mDCVOpV,GAPO,CACpBmL,IAAK,GACLjD,KAAM,QACNE,MAAO,EACPH,QAAS,ICoEI3E,uBArDf,YAAyE,IAA9CC,EAA6C,EAA7CA,KAAMhC,EAAuC,EAAvCA,GAAIiC,EAAmC,EAAnCA,YAAaH,EAAsB,EAAtBA,MAAOI,EAAe,EAAfA,YACjDhG,EAAWC,cACX5C,EAAOkB,aAAY,qBAAGlB,KAAgBwB,YAF0B,8CAGtE,aAAsDsH,GAAtD,sBAAAhI,EAAA,iEAA8BwM,aAA9B,MAAsC,EAAtC,EAA4CzE,EAA5C,0BACQwB,EAAW,CACf5D,GAAI0J,OACJE,KAAMxH,EAAOwH,IACblP,QAAS,GACTmM,QACAL,MAAOxG,EACP0G,QAAStE,EAAOsE,QAChBC,KAAMvE,EAAOuE,KACbgD,UAAWnO,KAAK8F,OAElBe,EAAQC,eAAc,GACtBJ,GAAY,GACZD,IAbF,SAcQ3B,QAAQO,IACZ3E,EAASuH,GAAa,CAACG,IAAY1H,EAAS2O,GAAoB7K,EAAI4D,EAAS5D,OAfjF,OAiBE9D,EAAS2I,GAAsBtL,IAjBjC,4CAHsE,sBAsBtE,OACE,eAACgJ,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTQ,kBAAgB,oBAChBhJ,UAAU,qBACVwB,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GANhC,UAOE,cAACc,GAAA,EAAD,kKACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,cAAC,KAAD,CACEgF,cAAeA,GACfE,iBAAkBA,GAClBmE,SAnC8D,8CAgChE,SAIE,eAAC,KAAD,WACE,cAAC,GAAD,IACA,eAACpJ,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGA,cAACc,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAAnD,gGCnDC8C,GAVO,SAAC,GAAuC,IAArClB,EAAoC,EAApCA,KAAMyJ,EAA8B,EAA9BA,QAAS8M,EAAqB,EAArBA,QAASC,EAAY,EAAZA,MAE/C,OADuB,IAAnBD,EAAQhZ,SAAcgZ,EAAU,CAAC,CAAEE,OAAQ,GAAIC,QAAS,MACrD,CACL1W,OACAyJ,UACA8M,UACAC,UC6DWpV,GA/DU,CACvBC,OAAaC,MAAM,CACjBtB,KAAMqB,KACI,4GACP6H,UAAU,+HACV3H,IAAI,IAAK,uHACTyH,SAAS,yKACZwN,MAAOnV,KACG,+JACP6H,UAAU,2IACVG,QAAQ,oBAAqB,4GAC7B9H,IAAI,EAAG,0PACPyH,SAAS,gNACZS,QAASpI,KACC,6EACPE,IAAI,IAAK,qLACT2H,UAAU,2IAEbqN,QAASlV,OAAYsV,GACnBtV,OAAaC,MAAM,CACjBoV,QAASrV,KACC,0IACPgI,QAAQ,YAAa,8HACrBH,UAAU,2IACV3H,IAAI,GAAI,2IAEXkV,OAAQpV,KACE,mKACPE,IAAI,IAAK,sIACT2H,UAAU,sOAKnB7H,OAAaC,MAAM,CACjB0E,UAAW3E,OAAYsV,GACrBtV,OAAaC,MAAM,CACjB+K,IAAKhL,OAEFiL,MAAM,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,MACrCpD,UAAU,uJACVF,SAAS,kHACZI,KAAM/H,KACI,wHACPgI,QAAQ,oCAAqC,mLAC7C9H,IAAI,EAAG,yOACPyH,SAAS,wHACZM,MAAOjI,KACG,gJACP6H,UAAU,sGACVK,IAAI,EAAG,uMACPhI,IArDY,OAqDQ,wQACpByH,SAAS,gJACZG,QAAS9H,OAENE,IAAI,IAAK,mPACT2H,UAAU,uJACVF,SAAS,kH,+BCiCL4N,OApFf,WAA2B,IACjB/R,EAAWgS,eAAXhS,OAER,OACE,eAAC,IAAMpE,SAAP,WACE,cAAC,GAAD,CACEkK,WAAS,EACT7J,OAAO,SACPd,KAAK,OACL3E,MAAM,sBACN0F,aAAa,MACbE,WAAS,IAEX,cAAC,GAAD,CACEH,OAAO,SACPd,KAAK,QACL3E,MAAM,kCACN+C,KAAK,SACL0Y,WAAY,CACVlO,WAAY,CAAEW,IAAK,EAAGhI,IAAK,KAE7BR,aAAa,MACbE,WAAS,IAEX,cAAC,GAAD,CAAaH,OAAO,SAASd,KAAK,UAAU3E,MAAM,iCAAQ0F,aAAa,MAAME,WAAS,IAEtF,cAAC,KAAD,CAAYjB,KAAK,UAAjB,SACG,cAAG+W,OAAH,IAAWC,EAAX,EAAWA,OAAQ3T,EAAnB,EAAmBA,KAAnB,OACC,eAAC,IAAM5C,SAAP,WACGoE,EAAO0R,QAAQhZ,OAAS,GACvBsH,EAAO0R,QAAQnQ,KAAI,SAACsQ,EAAShF,GAAV,OACjB,eAAC,IAAMjR,SAAP,WACE,cAAC,GAAD,CACEK,OAAO,SACPd,KAAI,kBAAa0R,EAAb,YACJrW,MAAM,mDACN0F,aAAa,MACbE,WAAS,IAGX,cAAC,GAAD,CACEH,OAAO,SACPd,KAAI,kBAAa0R,EAAb,aACJrW,MAAM,mDACN0F,aAAa,MACb+V,WAAY,CACVG,eAAgB,cAACC,GAAA,EAAD,CAAgBrB,SAAS,QAAzB,iBAElB5U,WAAS,IAGV4D,EAAO0R,QAAQhZ,OAAS,GACvB,cAAC0N,GAAA,EAAD,CAASC,MAAM,4EAAf,SACE,cAACN,GAAA,EAAD,CACEqE,KAAK,QACLpE,aAAW,4EACX3O,UAAU,kBACVZ,MAAM,YACNmK,QAAS,kBAAMuR,EAAOtF,IALxB,SAME,cAAC,KAAD,UA5BaA,MAkCxB7M,EAAO0R,QAAQhZ,OAAS,GACvB,cAAC0N,GAAA,EAAD,CAASC,MAAM,kFAAf,SACE,cAACN,GAAA,EAAD,CACEqE,KAAK,QACL3T,MAAM,YACNuP,aAAW,kFACX3O,UAAU,8CACVuJ,QAAS,kBAAMpC,EAAK,CAAEoT,OAAQ,GAAIC,QAAS,MAL7C,SAME,cAAC,IAAD,kBC1EHS,OANf,WACE,OACE,cAAC,GAAD,KCWJ,SAASC,GAAT,GAUI,IATF7S,EASC,EATDA,MACAE,EAQC,EARDA,KACAC,EAOC,EAPDA,YACAC,EAMC,EANDA,YACAlC,EAKC,EALDA,GACAzC,EAIC,EAJDA,KACAyJ,EAGC,EAHDA,QACA8M,EAEC,EAFDA,QACAC,EACC,EADDA,MAEM7X,EAAWC,cAQjB,OACE,eAACoG,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTQ,kBAAgB,oBAChBhJ,UAAU,qBACVwB,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GANhC,UAOE,cAACc,GAAA,EAAD,kKACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,cAAC,KAAD,CACEgF,cAAeA,GAAc,CAAElB,OAAMyJ,UAAS8M,UAASC,UACvDpV,iBAAkBA,GAAiB,GACnCmE,SAnBR,SAAsBV,EAAQC,GAC5BA,EAAQC,eAAc,GACtBJ,GAAY,GACZhG,EnBiC6B,SAAC8D,EAAIC,GAAL,gDAAc,WAAO/D,GAAP,kBAAA7B,EAAA,6DACzCgP,EAAOzO,OAAO0O,QAAQrJ,GAAM0D,KAAI,YAAmB,IAAD,mBAAhBqC,EAAgB,KAAXnJ,EAAW,KACpD,MAAqB,kBAAVA,EACLA,EAAM2M,OAAe,CAACxD,EAAKnJ,GACnB,CAACmJ,EAAKlP,IAASU,UAAUwM,WAAW5D,UAC7B,kBAAVvD,EACLA,EAAc,CAACmJ,EAAKnJ,GACZ,CAACmJ,EAAKlP,IAASU,UAAUwM,WAAW5D,UAE3C,CAAC4F,EAAKnJ,OAGfwM,EAAOzO,OAAO6O,YAAYJ,IACrByK,QAAUzK,EAAKyK,QACjBvK,QAAO,SAACqL,GAAD,OAAYA,EAAOZ,QAAUY,EAAOX,WAC3CtQ,KAAI,SAACiR,GAAD,MAAa,CAAEZ,OAAQY,EAAOZ,OAAQC,QAASW,EAAOX,YAExD5K,EAAKyK,QAAQhZ,SAAQuO,EAAKyK,QAAUhd,IAASU,UAAUwM,WAAW5D,UAjB1B,SAoB3ClE,EAAS,CAAEP,KAAM,oBAAqBC,SAAS,IApBJ,SAqBrCrE,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,mBAAgDM,EAAhD,MAAuDe,OAAOsI,GArBzB,wBAsBvB9R,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,mBAAgDM,EAAhD,MAAuDH,MAtBhC,QAsBrC2G,EAtBqC,OAuB3CtK,EAAS0O,GAAYpE,EAAMvG,SAvBgB,kDAyB3CX,QAAQ3B,MAAR,MACAzB,EAAS,CAAEP,KAAM,oBAAqBC,SAAS,IA1BJ,0DAAd,sDmBjCpBiZ,CAAkB7U,EAAIoC,KAa3B,SAIE,eAAC,KAAD,WACE,cAAC,GAAD,IACA,eAAC1I,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGA,cAACc,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAAnD,6FAWCoG,sBAAY/E,IAAMyP,KAAKkI,KCzChCza,GAAO,CAAC,qEAAe,6CAAW,iCAAS,6CAAW,6CAAW,6CAAW,sEAwJnE4a,OAtJf,YAUI,IATF9U,EASC,EATDA,GACAzC,EAQC,EARDA,KACAoN,EAOC,EAPDA,YACAoJ,EAMC,EANDA,MAMC,IALDD,eAKC,MALS,GAKT,MAJD9M,eAIC,MAJS,GAIT,EAHDzD,EAGC,EAHDA,UACArB,EAEC,EAFDA,YACA6S,EACC,EADDA,yBAEM7Y,EAAWC,cADhB,EAE+Ba,IAAMsK,SAAS,MAF9C,mBAEMC,EAFN,KAEgBC,EAFhB,OAGqDxK,IAAMsK,UAAS,GAHpE,mBAGM0N,EAHN,KAG2BC,EAH3B,OAI6DjY,IAAMsK,UAAS,GAJ5E,mBAIM8D,EAJN,KAI+BC,EAJ/B,OAKiDrO,IAAMsK,UAAS,GALhE,mBAKM4N,EALN,KAKyBC,EALzB,KAMK5b,EAAOkB,aAAY,qBAAGlB,KAAgBwB,YAN3C,EAQ2CiC,IAAMsK,SAAS,IAR1D,mBAQM8N,EARN,KASKC,GATL,KASmBvB,EAAQhZ,OAASgZ,EAAUsB,GAIzCE,EAA2BtY,IAAMsR,aAAY,kBAAM6G,GAAqB,KAAQ,IAbrF,8CAeD,uBAAA9a,EAAA,sEACQiG,QAAQO,IAAI,CAChB3E,EAASuE,GAAoB,CAAEjD,MAAO,QAASwC,QAC/C9D,EAAS4O,GAAkB9K,IAC3B9D,EAASiI,GAAuBnE,MAJpC,OAME9D,EAAS6C,GAAaxF,IACtB2C,EAASkH,GAAe,CAAEC,iBAAiB,KAC3CnH,EAAS2I,GAAsBtL,EAAM,CAAE8J,iBAAiB,KAR1D,4CAfC,sBA0BD,OACE,eAAC,IAAMrF,SAAP,WACE,cAAC,GAAD,CACEgE,KAAMgT,EACN9S,YAAaA,EACbD,YAAa,WACXgT,GAAuB,IAEzBjV,GAAIA,IAGN,cAAC,GAAD,CACEgC,KAAMkT,EACNjT,YAAaqT,EACbpT,YAAa6S,EACb/U,GAAIA,EACJzC,KAAMA,EACNwW,MAAOA,EACPD,QAASuB,EACTrO,QAASA,IAGX,eAACzE,GAAA,EAAD,CACEP,KAAMoJ,EACN5I,QAAS,kBAAM6I,GAA2B,IAC1C5I,kBAAgB,oBAChBxH,SAAS,KAJX,UAKE,cAAC2H,GAAA,EAAD,sZAGA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,eAACC,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CACEjJ,QAAQ,YACRjB,MAAM,YACN6S,MAAO,CAAEC,WAAY,OACrB3I,QAAS,kBAAMqI,GAA2B,IAJ5C,wDAOA,cAACtI,EAAA,EAAD,CACEjJ,QAAQ,YACR4R,MAAO,CAAEC,WAAY,MAAOjT,gBAAiB,OAC7CsK,QApEX,2CAiES,wFAUN,eAACxJ,EAAA,EAAD,CAAMC,UAAU,eAAhB,UACE,cAAC8b,GAAA,EAAD,CACE9b,UAAU,sBACV+b,OACE,cAACC,GAAA,EAAD,CAAQrN,aAAW,QAAQ3O,UAAU,sBAArC,eAIF8S,OACE,cAACpE,GAAA,EAAD,CAAYC,aAAW,2BAAOpF,QAzEpB,SAACqF,GAAD,OAAOb,EAAYa,EAAEC,gBAyE/B,SACE,cAAC,KAAD,MAGJG,MAAOlL,EACPmY,UAAS,0CAAY3B,KAGvB,cAAC,IAAD,CACE/T,GAAG,cACHuH,SAAUA,EACVS,aAAW,EACX5C,mBAAoB,KACpBJ,aAAc,CAAEC,SAAU,SAAUC,WAAY,UAChDC,gBAAiB,CAAEF,SAAU,MAAOC,WAAY,UAChDlD,KAAMnE,QAAQ0J,GACd/E,QAxFY,kBAAMgF,EAAY,OAgFhC,SASE,eAACS,GAAA,EAAD,CAAUC,WAAW,EAAMzO,UAAU,yBAArC,UACE,cAACwM,GAAA,EAAD,CAAUjD,QAAS,kBAAMiS,GAAuB,IAAhD,0JAGA,cAAChP,GAAA,EAAD,CAAUjD,QAAS,kBAAMmS,GAAqB,IAA9C,4FACA,cAAClP,GAAA,EAAD,CAAUjD,QAAS,kBAAMqI,GAA2B,IAApD,6DAIJ,eAAC1R,EAAA,EAAD,CAAaF,UAAU,uBAAvB,UACE,cAACG,EAAA,EAAD,CAAYG,UAAU,IAAtB,SACG4Q,EAAYhH,KAAI,SAAC3D,GAAD,gBAAW9F,GAAKqJ,EAAUvD,GAAI4J,IAAM,GAApC,YAA0CrG,EAAUvD,GAAI2G,KAAxD,UAElBmN,EAAQnQ,KAAI,SAACiR,EAAQe,GAAT,OACX,eAAC/b,EAAA,EAAD,CAAYG,UAAU,IAAtB,UACG6a,EAAOZ,OADV,KACoBY,EAAOX,UADI0B,MAIjC,cAAC/b,EAAA,EAAD,CAAYG,UAAU,IAAtB,SAA2BiN,GAAO,0CAAcA,QAElD,cAAC4O,GAAA,EAAD,CAAanc,UAAU,mBAAvB,SACE,cAAC0O,GAAA,EAAD,CAAYtP,MAAM,YAAYuP,aAAW,wFAAzC,SACE,cAAC,KAAD,CAAcA,aAAW,wB,8BChJ/BrD,GAAY,CAChBC,aAAc,CACZC,SAAU,SACVC,WAAY,QAEdC,gBAAiB,CACfF,SAAU,MACVC,WAAY,QAEdE,mBAAoB,MAGhBC,GAAgB,SAACnI,GAAD,OAAW,cAAC,KAAD,eAAoBA,KAE/ChD,GAAO,CACX4P,EAAG,qEACHC,EAAG,6CACHC,EAAG,iCACHC,EAAG,6CACHC,EAAG,6CACHC,EAAG,6CACHC,EAAG,sEA0FUC,OAvFf,WACE,IAAM7E,EAAW/K,aAAY,qBAAGgL,KAAgBD,YACxCpD,EAAWgS,eAAXhS,OACR,OACE,cAAC,KAAD,CAAY7E,KAAK,YAAjB,SACG,cAAG+W,OAAH,IAAWC,EAAX,EAAWA,OAAQ3T,EAAnB,EAAmBA,KAAnB,OACC,eAAC,IAAM5C,SAAP,WACGoE,EAAOmB,UAAUzI,OAAS,GACzBsH,EAAOmB,UAAUI,KAAI,SAACC,EAAUqL,GAAX,OACnB,eAAC,IAAMjR,SAAP,WACE,eAAC9C,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,cAACF,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAIQ,GAAI,EAAvB,SACE,eAACP,GAAA,EAAD,CAAanH,WAAS,EAAtB,UACE,cAACoH,GAAA,EAAD,CAAY5F,GAAG,2BAAf,kFACA,cAAC,GAAD,CACE6F,QAAQ,2BACRtI,KAAI,oBAAe0R,EAAf,SACJnJ,UAAWf,GACXgB,cAAeV,GAJjB,SAKGzK,OAAOC,KAAKX,IAAMyJ,KAAI,SAACqC,GAAD,OACrB,cAACC,GAAA,EAAD,CAAoBpJ,MAAOmJ,EAA3B,SACG9L,GAAK8L,IADOA,aAOvB,cAAC9K,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAIQ,GAAI,EAAvB,SACE,cAAC,GAAD,CACE7H,OAAO,OACPd,KAAI,oBAAe0R,EAAf,UACJtT,KAAK,OACL/C,MAAM,6EACNuN,WAAY,CACVC,KAAM,KAER5H,WAAS,SAIdgH,GACC,cAAC,GAAD,CACEnH,OAAO,SACPd,KAAI,oBAAe0R,EAAf,WACJtT,KAAK,SACL/C,MAAM,qGACN0F,aAAa,MACbE,WAAS,IAGb,cAAC,GAAD,CACEH,OAAO,SACPd,KAAI,oBAAe0R,EAAf,aACJrW,MAAM,8CACN0F,aAAa,MACbE,WAAS,IAEV4D,EAAOmB,UAAUzI,OAAS,GACzB,cAAC0N,GAAA,EAAD,CAASC,MAAM,0GAAf,SACE,cAACN,GAAA,EAAD,CACEqE,KAAK,QACLpE,aAAW,0GACX3O,UAAU,kBACVZ,MAAM,YACNmK,QAAS,kBAAMuR,EAAOtF,IALxB,SAME,cAAC,KAAD,UAxDaA,MA8DzB,cAACzG,GAAA,EAAD,CAASC,MAAM,gHAAf,SACE,cAACN,GAAA,EAAD,CACEqE,KAAK,QACL3T,MAAM,YACNuP,aAAW,gHACX3O,UAAU,8CACVuJ,QAAS,kBAAMpC,EAAK,CAAEgJ,IAAK,GAAI/C,MAAO,EAAGH,QAAS,GAAIC,KAAM,WAL9D,SAME,cAAC,IAAD,eCtGCgC,GAhBW,CACxBpL,KAAM,GACNwW,MAAO,GACP/M,QAAS,GACT8M,QAAS,CAAC,CAAEE,OAAQ,GAAIC,QAAS,KAEjC1Q,UAAW,CACT,CACEqG,IAAK,GACLjD,KAAM,QACNE,MAAO,EACPH,QAAS,MCkDAmP,GAxDK,SAAC,GAAD,IAAM5V,EAAN,oEAAiB,WAAO/D,GAAP,gCAAA7B,EAAA,6DAC7B8O,EAAUO,OAEZL,EAAOzO,OAAO0O,QAAQrJ,GAAMsJ,QAAO,YAAmB,IAAD,mBAAX1M,GAAW,WACvD,MAAqB,kBAAVA,EAA2BA,EAAM2M,OACvB,kBAAV3M,GAA2BA,MAIxCwM,EAAOzO,OAAO6O,YAAYJ,IACrByK,QAAUzK,EAAKyK,QACjBvK,QAAO,SAACqL,GAAD,OAAYA,EAAOZ,QAAUY,EAAOX,WAC3CtQ,KAAI,SAACiR,GAAD,MAAa,CAAEZ,OAAQY,EAAOZ,OAAQC,QAASW,EAAOX,YAExD5K,EAAKyK,QAAQhZ,eAAeuO,EAAKyK,QAC9BvQ,GAf2B,EAeH8F,GAAxB9F,UAAciD,EAfa,8BAiB/BsP,EAAevS,EAAUI,KAAI,oBAAGkD,aAAH,MAAW,EAAX,EAAiBjD,EAAjB,gCAAiC,CAChE5D,GAAI0J,OACJhD,QAAS9C,EAAS8C,QAClBC,KAAM/C,EAAS+C,KACfE,OAAQA,EACR+C,KAAMhG,EAASgG,IACfpD,MAAO2C,EACPzO,QAAS,GACTiP,UAAWnO,KAAK8F,UAGZyU,EA5B6B,aA6BjC/V,GAAImJ,EACJQ,UAAWnO,KAAK8F,MAChBqJ,YAAamL,EAAanS,KAAI,SAACC,GAAD,OAAcA,EAAS5D,OAClDwG,GAGCsC,EAAQvR,EAAGuR,QAEjBgN,EAAahW,SAAQ,SAAC8D,GACpB,IAAMoF,EAASzR,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,sBAAmDkE,EAAS5D,KAC3E8I,EAAMjF,IAAImF,EAAV,eAAuBpF,OAGnBoS,EAAWze,EAAG4I,IAAH,iBAAiB1I,EAAKgI,YAAYC,IAAlC,mBAAgDqW,EAAS/V,GAAzD,MACjB8I,EAAMjF,IAAImS,EAAV,eAAyBD,IA3CU,oBA8C3BjN,EAAMI,SA9CqB,eA+CjC4M,EAAahW,SAAQ,SAAC8D,GAAD,OAAc1H,EAAS4H,GAAYF,OACxD1H,EAAS+O,GAAS8K,IAhDe,kBAiD1BzV,QAAQC,QAAQ,YAjDU,0CAmDjCjB,QAAQ3B,MAAR,MAnDiC,kBAoD1B2C,QAAQE,OAAO,UApDW,2DAAjB,uDCiBdyV,GAAQ,CAAC,uHAAyB,gEACxC,SAASC,GAAQ9P,GACf,OAAQA,GACN,KAAK,EACH,OAAO,cAAC,GAAD,IACT,KAAK,EACH,OAAO,cAAC,GAAD,IACT,QACE,OAAO,MAmFErE,uBA/Ef,YAAkE,IAA1CC,EAAyC,EAAzCA,KAAMC,EAAmC,EAAnCA,YAAaH,EAAsB,EAAtBA,MAAOI,EAAe,EAAfA,YAC1ChG,EAAWC,cACXsI,EAAQhK,aAAY,qBAAGlB,KAAgBwB,YAFkB,EAG3BiC,IAAMsK,SAAS,GAHY,mBAGxD6O,EAHwD,KAG5CC,EAH4C,KAIzDC,EAA0B1X,GAAiBwX,GAC3CG,EAAaH,IAAeF,GAAMnb,OAAS,EALc,8CAuB/D,WAA0BsH,EAAQC,GAAlC,UAAAhI,EAAA,6DACEgI,EAAQC,eAAc,GADxB,SAGQpG,EAAS2Z,GAAYzT,IAH7B,OAIElG,EAAS2I,GAAsBJ,IAJjC,4CAvB+D,sBA8B/D,OACE,eAAClC,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTsU,SAAU,WACRH,EAAc,IAEhB3T,kBAAgB,oBAChBhJ,UAAU,qBACVwB,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GAThC,UAUE,cAACc,GAAA,EAAD,8KACA,eAACC,GAAA,EAAD,CAAepJ,UAAU,6BAAzB,UACE,cAAC+c,GAAA,EAAD,CAASL,WAAYA,EAArB,SACGF,GAAMtS,KAAI,SAAC/K,EAAOqW,GACjB,OACE,cAACwH,GAAA,EAAD,UACE,cAACC,GAAA,EAAD,UAAY9d,KADHA,QAMjB,cAAC,KAAD,CACE6F,cAAekK,GACfhK,iBAAkB0X,EAClBvT,SA5Ca,SAACV,EAAQC,GACxBiU,GACFpU,GAAY,GACZD,IAd2D,sCAe3D0U,CAAWvU,EAAQC,KAEnB+T,EAAcD,EAAa,GAC3B9T,EAAQuU,WAAW,IACnBvU,EAAQC,eAAc,KAiCpB,SAIE,eAAC,KAAD,WACG4T,GAAQC,GAET,eAACzc,EAAA,EAAD,CAAKD,UAAU,uBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGgB,IAAfkU,GACC,cAACpT,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAzDzC,WACjBoT,GAAc,SAACS,GAAD,OAAoBA,EAAiB,MAwDvC,4CAIF,cAAC9T,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAAnD,SACG2a,EAAa,qEAAgB,oDCc/BQ,OAvGf,WACE,IAAMvR,EAAS9K,aAAY,qBAAG8K,OAAoB5K,SAC5CsS,EAAexS,aAAY,qBAAG8K,OAAoByH,YAClDzJ,EAAY9I,aAAY,qBAAG8I,UAA0B5I,SACrDoc,EAAkBtc,aAAY,qBAAG8I,UAA0ByJ,YAJ7C,EAK8BhQ,IAAMsK,UAAS,GAL7C,mBAKb0P,EALa,KAKMC,EALN,OAMoCja,IAAMsK,UAAS,GANnD,mBAMb4P,EANa,KAMSC,EANT,OAOgCna,IAAMsK,UAAS,GAP/C,mBAOb8P,EAPa,KAOOC,EAPP,KAmBdrK,EAAWC,GAAgB8J,EAnBb,EAqB4B/Z,IAAMsK,UAAS,GArB3C,mBAqBbgQ,EArBa,KAqBKC,EArBL,KAmCdC,EAA6Bxa,IAAMsR,aAAY,kBAAM6I,GAAwB,KAAQ,IACrFM,EAA0Bza,IAAMsR,aAAY,kBAAM2I,GAAqB,KAAQ,IAC/ElC,EAA2B/X,IAAMsR,aAAY,kBAAM+I,GAAsB,KAAQ,IAEvF,OACE,eAAC,IAAMrZ,SAAP,WACE,cAAC,GAAD,CACEgE,KAAMkV,EACNhL,QAAQ,0IACR1J,QAASgV,IAEX,cAAC,GAAD,CACExV,KAAMgV,EACN9K,QAAQ,wFACR1J,QAASiV,IAEX,cAAC,GAAD,CACEzV,KAAMoV,EACNlL,QAAQ,wKACR1J,QAASuS,IAGX,cAAC,GAAD,CACE/S,KAAMsV,EACNrV,YAhCN,WACEsV,GAAoB,IAgChBrV,YA7BN,SAAqBwV,GACnBT,EAAqBS,MA+BnB,gCACE,eAAChe,EAAA,EAAD,CAAKD,UAAU,2BAAf,UACE,cAACG,EAAA,EAAD,CAAYE,QAAQ,KAAKL,UAAU,iBAAnC,wDAIA,cAACsJ,EAAA,EAAD,CACEjJ,QAAQ,YACRjB,MAAM,YACN+V,UAAW,cAAC,IAAD,IACXnV,UAAU,sBACVuJ,QAnDV,WACEuU,GAAoB,IA6Cd,oFAUF,cAACrc,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAG3B,UAAU,yBAAtC,SACGuT,EACGpS,OAAOC,KAAK0K,GAAQ5B,KAAI,SAACqC,GAAD,OACtB,cAAC9K,EAAA,EAAD,CAAgBK,MAAI,EAACoc,GAAI,EAAGzR,GAAI,EAAGR,GAAI,GAAvC,SACE,cAAC,GAAD,2BACMH,EAAOS,IADb,IAEEzC,UAAWA,EACXrB,YAAaiV,EACbpC,yBAA0BsC,MALnBrR,MASb,IAAI8I,MAAM,GAAGC,KAAK,GAAGpL,KAAI,SAACqL,EAAG2G,GAAJ,OACvB,cAACza,EAAA,EAAD,CAAcK,MAAI,EAACoc,GAAI,EAAGzR,GAAI,EAAGR,GAAI,GAArC,SACE,cAACwJ,EAAA,EAAD,CAAkBpV,QAAQ,OAAOL,UAAU,oBAA5Bkc,IADNA,QAKa,IAA/B/a,OAAOC,KAAK0K,GAAQzK,QAAgB,cAAClB,EAAA,EAAD,mI,qBCtG9B6E,GATO,CACpBmZ,UAAW,GACXC,SAAU,GACV1G,SAAU,GACVD,MAAO,GACP4G,UAAW,GACXtS,UAAU,GCsBG7G,GA1BUC,OAAaC,MAAM,CAC1C+Y,UAAWhZ,KACD,iEACPE,IAAI,IAAK,2LACTyH,SAAS,8HACZsR,SAAUjZ,KACA,yFACPE,IAAI,IAAK,mNACTyH,SAAS,sJACZ2K,MAAOtS,KACG,+KACPsS,MAAM,+KACNpS,IAAI,IAAK,+LACTyH,SAAS,uLACZ4K,SAAUvS,KACA,mFACPkI,IAAI,EAAG,6LACPhI,IAAI,GAAI,oMACRyH,SAAS,mFACZuR,UAAWlZ,OAERmZ,SAAS,CAAC,IAAK,qHACfxR,SAAS,qHACZf,SAAU5G,S,2FCkEGoZ,OA9Ef,WAAyB,IAAD,EACkBhb,IAAMsK,UAAS,GADjC,mBACf2Q,EADe,KACDC,EADC,OAGUlb,IAAMsK,SAAS,MAHzB,mBAGfC,EAHe,KAGLC,EAHK,KAStB,OACE,eAACtM,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAG3B,UAAU,eAAtC,UACE,cAACyB,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAIQ,GAAI,EAAvB,SACE,cAAC,GAAD,CACE5H,aAAa,QACbf,KAAK,YACLzD,QAAQ,WACR0E,WAAS,EACT5F,MAAM,qBACNsP,WAAS,MAGb,cAAChN,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAIQ,GAAI,EAAvB,SACE,cAAC,GAAD,CACEpM,QAAQ,WACR0E,WAAS,EACT5F,MAAM,6CACN2E,KAAK,WACLe,aAAa,YAGjB,cAACpD,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACE5L,QAAQ,WACR0E,WAAS,EACT5F,MAAM,uCACN2E,KAAK,QACLe,aAAa,YAGjB,cAACpD,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACE5L,QAAQ,WACR0E,WAAS,EACTjB,KAAK,WACL3E,MAAM,uCACN+C,KAAMsc,EAAe,OAAS,WAC9B3Z,aAAa,mBACb+V,WAAY,CACV8D,aACE,cAAC1D,GAAA,EAAD,CAAgBrB,SAAS,MAAzB,SACE,cAACjL,GAAA,EAAD,CACEC,aAAW,6BACXpF,QAlDgB,kBAAMkV,GAAgB,SAAChF,GAAD,OAAWA,MAgDnD,SAGG+E,EAAe,cAAC,KAAD,IAAiB,cAAC,KAAD,aAO7C,eAAC/c,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,UACE,cAAC0S,GAAA,EAAD,CAAkBC,QAAS,cAAC,GAAD,CAAY9a,KAAK,aAAe3E,MAAM,sDAEjE,cAACuP,GAAA,EAAD,CAAYnF,QA1DlB,SAAwBqF,GACtBb,EAAYD,EAAW,KAAOc,EAAEC,gBAyD5B,SACE,cAAC,KAAD,MAEF,cAACgQ,GAAA,EAAD,CAAQtW,OAAMuF,EAAyBA,SAAUA,EAAjD,SACE,cAACgR,GAAA,EAAD,CAAOC,UAAW,EAAlB,SACE,cAAC5e,EAAA,EAAD,oa,qBCvDG6e,OAnBf,YAAiD,IAA3BzW,EAA0B,EAA1BA,KAAMkK,EAAoB,EAApBA,QAAS1J,EAAW,EAAXA,QACnC,OACE,cAAC2J,GAAA,EAAD,CACEnK,KAAMA,EACNkK,QACE,eAAC,IAAMlO,SAAP,WACE,cAAC,KAAD,IACA,cAACpE,EAAA,EAAD,CAAYE,QAAQ,QAApB,SAA6BoS,OAGjCE,oBAAqBC,KACrBrH,aAAc,CAAEE,WAAY,SAAUD,SAAU,OAChDqH,iBAAkB,IAClB9J,QAAS,kBAAMA,GAAQ,IACvB/I,UAAU,oBCaDif,OA5Bf,WAAsB,IAAD,EACyCtE,eAApDuE,EADW,EACXA,OAAQC,EADG,EACHA,gBAAiBC,EADd,EACcA,cAAejb,EAD7B,EAC6BA,QAgBhD,OAfAZ,IAAMqT,WAAU,WACd,IAAIyI,EAAoB,IAAIhiB,IAASW,KAAKshB,kBAAkB,YAAa,CACvEvM,KAAM,SACNwM,SAAU,SAACC,GACTL,EAAgB,aAAa,GAC7BC,EAAc,YAAaI,IAE7B,mBAAoB,WAClBJ,EAAc,YAAa,OAI/BC,EAAkBI,SAASzI,MAAK,SAAC0I,GAAD,OAAeL,EAAoBK,OAClE,IAGD,eAAC,IAAMnb,SAAP,WACE,cAACtE,EAAA,EAAD,CAAKsG,GAAG,YAAYoZ,GAAI,EAAGC,GAAI,IAC9BV,EAAOb,WAAala,EAAQka,WAC3B,cAACle,EAAA,EAAD,CAAYf,MAAM,QAAlB,SAA2B8f,EAAOb,YAEpC,uBAAOnc,KAAK,SAAS4B,KAAK,kB,qBCvB1BqE,GAAYC,aAAW,CAC3BpJ,MAAO,CACLC,gBAAiB,aA4BN4gB,OAxBf,YAAiD,IAA3BtX,EAA0B,EAA1BA,KAAMkK,EAAoB,EAApBA,QAAS1J,EAAW,EAAXA,QAC7BL,EAAUP,KAEhB,OACE,cAACuK,GAAA,EAAD,CACEnH,aAAc,CACZC,SAAU,SACVC,WAAY,UAEdgH,QACE,eAAC,IAAMlO,SAAP,WACE,cAAC,KAAD,IACA,cAACpE,EAAA,EAAD,CAAYE,QAAQ,QAApB,SAA6BoS,OAGjCqN,aAAc,CAAEpX,QAAS,CAAElJ,KAAMkJ,EAAQ1J,QACzCuJ,KAAMA,EACNoK,oBAAqBC,KACrBC,iBAAkB,IAClB9J,QAASA,KC7BFgX,GAAW,SAAC,GAAD,IAAGxZ,EAAH,EAAGA,GAAIzC,EAAP,EAAOA,KAAMoM,EAAb,EAAaA,UAAWnE,EAAxB,EAAwBA,SAAxB,gDAAuC,WAAOtJ,GAAP,UAAA7B,EAAA,sEACvD9C,EAAG4I,IAAH,iBAAiBH,IAAM6D,IAAI,CAAE7D,KAAIzC,OAAMoM,YAAWnE,aADK,2CAAvC,uDAUXiU,GAAU,SAACxZ,GAAD,MAAW,CAChCtE,KAAM,WACNC,QAASqE,I,UCMI8B,uBAbf,YAA4B,IAAVD,EAAS,EAATA,MAChB,OACE,cAACpI,EAAA,EAAD,CAAK2f,GAAI,EAAGD,GAAI,EAAhB,SACE,eAACxf,EAAA,EAAD,CAAYE,QAAS6I,aAAY,KAAMb,GAAS,QAAU,QAAS4X,MAAM,SAAzE,8BACU,IACR,cAACC,GAAA,EAAD,CAAMC,KAAK,6BAA6BC,OAAO,SAA/C,wCCwIOC,OA1Hf,WACE,IAAM5d,EAAWC,cACXiL,EAAUC,cAFA,EAG4BrK,IAAM0V,WAAW/C,IAArDsB,EAHQ,EAGRA,OAAQM,EAHA,EAGAA,YAAaI,EAHb,EAGaA,WAHb,EAIc3U,IAAMsK,UAAS,GAJ7B,mBAITyI,EAJS,KAIAC,EAJA,OAKUhT,IAAMsK,SAAS,IALzB,mBAKT3J,EALS,KAKFoc,EALE,OAM4B/c,IAAMsK,UAAS,GAN3C,mBAMT0S,EANS,KAMOC,EANP,OAOwCjd,IAAMsK,UAAS,GAPvD,mBAOT4S,EAPS,KAOaC,EAPb,KASVC,EAAY,yCAAG,WAAOhY,EAAQC,GAAf,kBAAAhI,EAAA,6DACnBgI,EAAQC,eAAc,GACtB0N,GAAW,GAFQ,SAKXzS,EAAO6E,EAAOwV,UAAY,IAAMxV,EAAOyV,SAL5B,SAMY5G,EAAO7O,EAAO8O,MAAO9O,EAAO+O,UANxC,cAMXkJ,EANW,gBAOX1I,EAAWpU,GAPA,wBAQXgU,EAAY8I,EAAe5U,MARhB,QAUjB0U,GAAwB,GAExBje,EACEsd,GAAS,CACPxZ,GAAIqa,EAAe5U,KAAK/F,IACxBnC,OACAoM,UAAWnO,KAAK8F,MAChBkE,SAAUpD,EAAOoD,YAIrB8U,YAAW,kBAAMlT,EAAQxG,KAAK,YAAW,KArBxB,uDAuBT,KAAE2Z,KAvBO,OAwBV,8BAxBU,gCAyBbR,EAAS,8HAzBI,iEAgCjBE,GAAkB,GAhCD,0DAAH,wDA6ClB,OATAjd,IAAMqT,WAAU,WACd,IAAMpR,EAAQqb,YAAW,WACvBtK,GAAW,KACV,KACH,OAAO,WACLwK,aAAavb,MAEd,CAAC8Q,IAGF,eAAC,IAAM/R,SAAP,WACE,cAAC,GAAD,CACEgE,KAAMkY,EACNhO,QACE,4cAEF1J,QAAS,kBAAM2X,GAAwB,MAEzC,eAACnf,EAAA,EAAD,CAAWjB,UAAU,OAAOkB,SAAS,KAAKxB,UAAU,aAApD,UACE,cAAC,GAAD,CAAYuI,KAAMgY,EAAgB9N,QAASvO,EAAO6E,QAASyX,IAC3D,cAACQ,EAAA,EAAD,IACA,eAACvf,EAAA,EAAD,CAAMC,WAAS,EAAC1B,UAAU,kBAA1B,UACE,eAACyB,EAAA,EAAD,CACEC,WAAS,EACTuf,UAAU,SACVC,WAAW,SACXvf,QAAS,EACT3B,UAAU,yBALZ,UAME,cAACyB,EAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAACka,GAAA,EAAD,CAAQhc,UAAU,eAAlB,SACE,cAAC,KAAD,QAGJ,cAACyB,EAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAAC3B,EAAA,EAAD,CAAYG,UAAU,KAAKD,QAAQ,KAAKL,UAAU,qBAAlD,qFAMJ,cAAC,KAAD,CACEgF,cAAeA,GACfE,iBAAkBA,GAClBmE,SAAUsX,EAHZ,SAIG,cAAGvB,cAAH,EAAkBF,OAAlB,EAA0B/a,QAA1B,OACC,eAAC,KAAD,WACE,cAAC,GAAD,IACA,cAAC,GAAD,IACA,cAAClE,EAAA,EAAD,CAAK2f,GAAI,EAAT,SACE,eAACzf,EAAA,EAAD,CAAY8f,MAAM,UAAlB,qTAEE,cAACC,GAAA,EAAD,sJAFF,UAE2C,IACzC,cAACA,GAAA,EAAD,wLAGJ,cAAC5W,EAAA,EAAD,CACEpH,KAAK,SACLif,SAAU7K,EACVvR,WAAS,EACT1E,QAAQ,YACRjB,MAAM,YACNY,UAAU,eANZ,gIAYN,cAACC,EAAA,EAAD,CAAK0f,GAAI,EAAT,SACE,cAAC,KAAD,CAAYjK,GAAG,SAAf,mGAGJ,cAAC,GAAD,WCxIO1Q,GANO,CACpByS,MAAO,GACPC,SAAU,GACV2G,WAAW,GCYEnZ,GAbUC,OAAaC,MAAM,CAC1CqS,MAAOtS,KACG,+KACPsS,MAAM,+KACNpS,IAAI,IAAK,+LACTyH,SAAS,uLACZ4K,SAAUvS,KACA,mFACPkI,IAAI,EAAG,6LACPhI,IAAI,GAAI,oMACRyH,SAAS,qFCqCCsU,OAvCf,WAAwB,IAAD,EACmB7d,IAAMsK,UAAS,GADlC,mBACd2Q,EADc,KACAC,EADA,KAGrB,OACI,eAAChd,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAG3B,UAAU,eAAtC,UACE,cAACyB,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACE5L,QAAQ,WACR0E,WAAS,EACT5F,MAAM,uCACN2E,KAAK,QACLe,aAAa,YAGjB,cAACpD,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACE5L,QAAQ,WACR0E,WAAS,EACTjB,KAAK,WACL3E,MAAM,uCACN+C,KAAMsc,EAAe,OAAS,WAC9B3Z,aAAa,mBACb+V,WAAY,CACV8D,aACE,cAAC1D,GAAA,EAAD,CAAgBrB,SAAS,MAAzB,SACE,cAACjL,GAAA,EAAD,CACEC,aAAW,6BACXpF,QAzBc,kBAAMkV,GAAgB,SAAChF,GAAD,OAAWA,MAuBjD,SAGG+E,EAAe,cAAC,KAAD,IAAiB,cAAC,KAAD,iBC+EtC6C,ICrHXC,GAAOC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAAQC,GAASC,GAASC,GDqH9EZ,GAjGf,WACE,IAAM1T,EAAUC,cACRgK,EAAUrU,IAAM0V,WAAW/C,IAA3B0B,MAFO,EAGerU,IAAMsK,UAAS,GAH9B,mBAGRyI,EAHQ,KAGCC,EAHD,OAIWhT,IAAMsK,SAAS,IAJ1B,mBAIR3J,EAJQ,KAIDoc,EAJC,OAK6B/c,IAAMsK,UAAS,GAL5C,mBAKR0S,EALQ,KAKQC,EALR,KAOTG,EAAY,yCAAG,WAAOhY,EAAQC,GAAf,UAAAhI,EAAA,6DACnBgI,EAAQC,eAAc,GACtB0N,GAAW,GAFQ,kBAIXqB,EAAMjP,EAAO8O,MAAO9O,EAAO+O,UAJhB,OAKjB/J,EAAQxG,KAAK,UALI,qDAOT,KAAE2Z,KAPO,OAQV,wBARU,QAYV,wBAZU,QAgBV,2BAhBU,gCASbR,EAAS,kMATI,oCAabA,EAAS,yFAbI,oCAiBbA,EAAS,2UAjBI,iEAwBjBE,GAAkB,GAxBD,yDAAH,wDAqClB,OATAjd,IAAMqT,WAAU,WACd,IAAMpR,EAAQqb,YAAW,WACvBtK,GAAW,KACV,KACH,OAAO,WACLwK,aAAavb,MAEd,CAAC8Q,IAGF,eAAC/U,EAAA,EAAD,CAAWjB,UAAU,OAAOkB,SAAS,KAAKxB,UAAU,aAApD,UACGkE,GAAS,cAAC,GAAD,CAAYqE,KAAMgY,EAAgB9N,QAASvO,EAAO6E,QAASyX,IACrE,cAACQ,EAAA,EAAD,IAEA,eAACvf,EAAA,EAAD,CAAMC,WAAS,EAAC1B,UAAU,kBAA1B,UACE,eAACyB,EAAA,EAAD,CACEC,WAAS,EACTuf,UAAU,SACVC,WAAW,SACXvf,QAAS,EACT3B,UAAU,yBALZ,UAME,cAACyB,EAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAACka,GAAA,EAAD,CAAQhc,UAAU,eAAlB,SACE,cAAC,KAAD,QAGJ,cAACyB,EAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAAC3B,EAAA,EAAD,CAAYG,UAAU,KAAKD,QAAQ,KAAKL,UAAU,qBAAlD,kIAMJ,cAAC,KAAD,CACEgF,cAAeA,GACfE,iBAAkBA,GAClBmE,SAAUsX,EAHZ,SAIG,cAAGhY,OAAH,OACC,eAAC,KAAD,WACE,cAAC,GAAD,IAEA,cAACW,EAAA,EAAD,CACEpH,KAAK,SACLif,SAAU7K,EACVvR,WAAS,EACT1E,QAAQ,YACRjB,MAAM,YACNY,UAAU,eANZ,4CAYN,eAACC,EAAA,EAAD,CAAK0f,GAAI,EAAT,2IAC4B,cAAC,KAAD,CAAMjK,GAAG,UAAT,gIAG9B,cAAC,GAAD,QC9GN,SAASwM,KAA2Q,OAA9PA,GAAW/gB,OAAOghB,QAAU,SAAU/B,GAAU,IAAK,IAAIlE,EAAI,EAAGA,EAAIkG,UAAU/gB,OAAQ6a,IAAK,CAAE,IAAImG,EAASD,UAAUlG,GAAI,IAAK,IAAI3P,KAAO8V,EAAclhB,OAAOmhB,UAAUC,eAAeC,KAAKH,EAAQ9V,KAAQ6T,EAAO7T,GAAO8V,EAAO9V,IAAY,OAAO6T,IAA2BrY,MAAM0a,KAAML,WAEhT,SAASM,GAAyBL,EAAQM,GAAY,GAAc,MAAVN,EAAgB,MAAO,GAAI,IAAkE9V,EAAK2P,EAAnEkE,EAEzF,SAAuCiC,EAAQM,GAAY,GAAc,MAAVN,EAAgB,MAAO,GAAI,IAA2D9V,EAAK2P,EAA5DkE,EAAS,GAAQwC,EAAazhB,OAAOC,KAAKihB,GAAqB,IAAKnG,EAAI,EAAGA,EAAI0G,EAAWvhB,OAAQ6a,IAAO3P,EAAMqW,EAAW1G,GAAQyG,EAASE,QAAQtW,IAAQ,IAAa6T,EAAO7T,GAAO8V,EAAO9V,IAAQ,OAAO6T,EAFxM0C,CAA8BT,EAAQM,GAAuB,GAAIxhB,OAAO4hB,sBAAuB,CAAE,IAAIC,EAAmB7hB,OAAO4hB,sBAAsBV,GAAS,IAAKnG,EAAI,EAAGA,EAAI8G,EAAiB3hB,OAAQ6a,IAAO3P,EAAMyW,EAAiB9G,GAAQyG,EAASE,QAAQtW,IAAQ,GAAkBpL,OAAOmhB,UAAUW,qBAAqBT,KAAKH,EAAQ9V,KAAgB6T,EAAO7T,GAAO8V,EAAO9V,IAAU,OAAO6T,EAMne,SAAS8C,GAAYC,EAAMC,GACzB,IAAIpU,EAAQmU,EAAKnU,MACbqU,EAAUF,EAAKE,QACf5f,EAAQif,GAAyBS,EAAM,CAAC,QAAS,YAErD,OAAoB,gBAAoB,MAAOjB,GAAS,CACtDoB,MAAO,6BACP5f,IAAK0f,EACL,kBAAmBC,GAClB5f,GAAQuL,EAAqB,gBAAoB,QAAS,CAC3DzI,GAAI8c,GACHrU,GAAS,KAAMsS,KAAUA,GAAqB,gBAAoB,OAAQ,CAC3EiC,OAAQ,GACRlb,MAAO,GACPmb,EAAG,EACHC,EAAG,KACAlC,KAAWA,GAAsB,gBAAoB,OAAQ,CAChEgC,OAAQ,GACRlb,MAAO,GACPmb,EAAG,GACHC,EAAG,MACAjC,KAAWA,GAAsB,gBAAoB,OAAQ,CAChE+B,OAAQ,GACRlb,MAAO,GACPmb,EAAG,GACHC,EAAG,MACAhC,KAAWA,GAAsB,gBAAoB,OAAQ,CAChE8B,OAAQ,GACRlb,MAAO,GACPmb,EAAG,GACHC,EAAG,MACA/B,KAAWA,GAAsB,gBAAoB,OAAQ,CAChE6B,OAAQ,IACRlb,MAAO,GACPmb,EAAG,EACHC,EAAG,KACA9B,KAAWA,GAAsB,gBAAoB,OAAQ,CAChE4B,OAAQ,GACRlb,MAAO,GACPmb,EAAG,GACHC,EAAG,KACA7B,KAAWA,GAAsB,gBAAoB,OAAQ,CAChE2B,OAAQ,GACRlb,MAAO,GACPmb,EAAG,GACHC,EAAG,MACA5B,KAAWA,GAAsB,gBAAoB,OAAQ,CAChE0B,OAAQ,GACRlb,MAAO,IACPmb,EAAG,EACHC,EAAG,OACA3B,KAAWA,GAAsB,gBAAoB,OAAQ,CAChEyB,OAAQ,GACRlb,MAAO,GACPmb,EAAG,GACHC,EAAG,MACA1B,KAAYA,GAAuB,gBAAoB,OAAQ,CAClEwB,OAAQ,GACRlb,MAAO,GACPmb,EAAG,GACHC,EAAG,MACAzB,KAAYA,GAAuB,gBAAoB,OAAQ,CAClEuB,OAAQ,GACRlb,MAAO,GACPmb,EAAG,GACHC,EAAG,MACAxB,KAAYA,GAAuB,gBAAoB,OAAQ,CAClEsB,OAAQ,GACRlb,MAAO,GACPmb,EAAG,IACHC,EAAG,OAIP,IAAIC,GAA0B,aAAiBR,IAChC,IC3DAS,OAlBf,WACE,OACE,eAAC1jB,EAAA,EAAD,CAAKD,UAAU,sBAAf,UACE,cAAC,GAAD,CAAcA,UAAU,kBACxB,cAACG,EAAA,EAAD,CAAYE,QAAQ,KAAK4f,MAAM,SAA/B,iBAGA,cAAC9f,EAAA,EAAD,CAAYE,QAAQ,KAAK4f,MAAM,SAA/B,sHAIA,cAAC3W,EAAA,EAAD,CAAQyJ,KAAK,QAAQ1S,QAAQ,YAAYjB,MAAM,YAAYkB,UAAW4f,KAAMxK,GAAG,YAA/E,gDCRAvN,GAAYC,aAAW,CAC3BpJ,MAAO,CACLukB,OAAQ,SAEV7hB,UAAW,CACTkiB,aAAc,QAEhBtlB,KAAM,CACJulB,WAAY,QAEdhO,OAAQ,CACN5W,gBAAiB,UACjBG,MAAO,UACP8S,WAAY,MACZ4R,aAAc,SAuDHC,OAnDf,YAA6C,IAAtBxb,EAAqB,EAArBA,KAAMC,EAAe,EAAfA,YACrBE,EAAUP,KAChB,OACE,cAACW,GAAA,EAAD,CACEP,KAAMA,EACNvI,UAAS,yBACT0I,QAAS,CACP1J,MAAO0J,EAAQ1J,OAEjBwC,SAAS,KANX,SAOE,eAACvB,EAAA,EAAD,CAAK+jB,EAAG,EAAGC,GAAI,EAAf,UACE,cAAC9jB,EAAA,EAAD,CAAYE,QAAQ,KAApB,oJACA,eAACJ,EAAA,EAAD,CAAK2f,GAAI,EAAGD,GAAI,EAAhB,UACE,cAACrW,EAAA,EAAD,CACEjJ,QAAQ,YACRjB,MAAM,YACN+V,UAAW,cAAC,IAAD,IACXnV,UAAU,uBACVmhB,UAAQ,EALV,qEAQA,cAAChhB,EAAA,EAAD,CAAYE,QAAQ,QAApB,kRAEF,eAACJ,EAAA,EAAD,CAAK2f,GAAI,EAAT,UACE,cAACtW,EAAA,EAAD,CACEjJ,QAAQ,YACRjB,MAAM,YACN+V,UAAW,cAAC,IAAD,IACXnV,UAAU,sBACVmhB,UAAQ,EALV,iFAQA,cAAChhB,EAAA,EAAD,CAAYE,QAAQ,QAApB,iTAIF,cAACJ,EAAA,EAAD,UACE,cAAC2V,GAAA,EAAD,CACEC,QAAM,EACNvV,UAAW4f,KACXxK,GAAG,YACH1V,UAAW0I,EAAQmN,OACnBtM,QAAS,kBAAMf,GAAY,IAL7B,oD,oDC3DJ0b,GAAS,CACb,uCACA,6CACA,2BACA,uCACA,qBACA,2BACA,2BACA,uCACA,mDACA,6CACA,uCACA,8CAGI/b,GAAYC,aAAW,CAC3B5I,KAAM,CACJ2kB,UAAW,UAyBAC,OArBf,YAAyD,IAAlCC,EAAiC,EAAjCA,YAAaC,EAAoB,EAApBA,iBAC5B5b,EAAUP,KAChB,OACE,eAAC1G,EAAA,EAAD,CAAMC,WAAS,EAACwf,WAAW,SAASlhB,UAAW0I,EAAQlJ,KAAvD,UACE,cAACiC,EAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAAC4M,GAAA,EAAD,CAAYnF,QAAS,kBAAM+a,EAAiBC,aAAUF,GAAc,KAApE,SACE,cAAC,KAAD,QAGJ,cAAC5iB,EAAA,EAAD,CAAMK,MAAI,EAACme,MAAM,SAAjB,SACE,cAAC9f,EAAA,EAAD,oBAAgB+jB,GAAOG,EAAYG,YAAnC,YAAkDH,EAAYI,mBAEhE,cAAChjB,EAAA,EAAD,CAAMK,MAAI,EAAV,SACE,cAAC4M,GAAA,EAAD,CAAYnF,QAAS,kBAAM+a,EAAiBC,aAAUF,EAAa,KAAnE,SACE,cAAC,KAAD,Y,UCnCJlc,GAAYC,aAAW,CAC3BpJ,MAAO,CACLC,gBAAiB,cACjBoJ,MAAO,QACPkb,OAAQ,WAoBGmB,OAhBf,YAAkC,IAATnc,EAAQ,EAARA,KACjBG,EAAUP,KAChB,OACE,cAACW,GAAA,EAAD,CACEP,KAAMA,EACNG,QAAS,CACP1J,MAAO0J,EAAQ1J,OAEjB2lB,WAAY,CAAE5F,UAAW,GAL3B,SAME,cAAC3V,GAAA,EAAD,UACE,cAACwb,GAAA,EAAD,SC+COC,OA1Df,WACE,IAAMpiB,EAAWC,cADC,EAEoBa,IAAMsK,SAAS,MAFnC,mBAEXiX,EAFW,KAEK/W,EAFL,OAGoBxK,IAAM0V,WAAW/C,IAA/CM,EAHU,EAGVA,WAAYC,EAHF,EAGEA,cACpB,SAAStD,EAAmBvE,GAC1Bb,EAAYa,EAAEC,eAGhB,SAASuE,IACPrF,EAAY,MAGd,SAASsF,EAAoBvT,GAC3B2C,EAAS6C,GAAaxF,IACtB2C,EAAS2I,GAAsBtL,IAC/BiO,EAAY,MAGd,OACE,eAAC,IAAMxJ,SAAP,WACGiS,GAAc,cAAC,GAAD,CAAajO,KAAMiO,EAAYhO,YAAaiO,IAC3D,cAAClV,EAAA,EAAD,CAAWC,SAAS,KAAKxB,UAAU,qBAAnC,SACE,eAACyB,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAzB,UACE,cAACC,EAAA,EAAD,CAAQuY,KAAM,CAAC,KAAM,MAArB,SACE,cAAC1Y,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,EAAf,SACE,cAAC,GAAD,CACEiH,OAAQ4R,EACRtiB,YAAa2Q,EACb3K,YAAa4K,EACbC,oBAAqBA,QAK3B,cAACzR,EAAA,EAAD,CAAQwT,MAAI,EAAZ,SACE,cAAC3T,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACEiH,OAAQ4R,EACR3R,mBAAoBA,EACpBC,oBAAqBA,EACrBC,oBAAqBA,QAK3B,cAACzR,EAAA,EAAD,CAAQmjB,QAAM,EAAd,SACE,cAACtjB,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,EAAGjM,UAAU,sBAA5B,SACE,cAACC,EAAA,EAAD,CAAKD,UAAU,kBAAf,SACE,cAAC,EAAD,CAAUwC,YAAa6Q,mBC9CxB2R,OAVf,WACE,OACE,cAAC,IAAMzgB,SAAP,UACE,cAAChD,EAAA,EAAD,CAAWC,SAAS,KAAKxB,UAAU,oBAAnC,SACE,cAAC,GAAD,SCPKilB,GAAW,yCAAG,WAAOnlB,GAAP,kBAAAc,EAAA,6DACnBskB,EAAS,GACTje,EAAkB,GAFC,kBAIMnJ,EAAGiI,WAAH,iBAAwB/H,EAAKgI,YAAYC,IAAzC,YAAuDG,MAJ7D,qBAMRC,SAAQ,SAAC0G,GACtBmY,EAAOnY,EAAMvG,OAAOD,IAAM,CAAE4e,IAAK,EAAGrhB,KAAMiJ,EAAMvG,OAAO1C,MACvDmD,EAAgBE,KACdrJ,EACGiI,WADH,iBACwB/H,EAAKgI,YAAYC,IADzC,aAEGC,MAAM,QAAS,KAAM6G,EAAMvG,OAAOD,IAClCL,MAAM,OAAQ,KAAMpG,EAAO,OAC3BoG,MAAM,OAAQ,KAAMpG,EAAO,MAC3BsG,UAdgB,SAkBMS,QAAQO,IAAIH,GAlBlB,cAmBRZ,SAAQ,SAAC+e,GAAD,OACrBA,EAAgB/e,SAAQ,SAACa,GACvBge,EAAOhe,EAAYV,OAAOuG,OAAOoY,IAC/BD,EAAOhe,EAAYV,OAAOuG,OAAOoY,IAAMje,EAAYV,OAAO4G,YAtBzC,kDA0BvBvH,QAAQ3B,MAAR,MA1BuB,iCA4BlBghB,GA5BkB,0DAAH,sD,SCiBxBG,KAAMC,SACJC,KACAxW,KACAyW,KACAC,KACAC,KACAC,KACAC,KACAC,KACAC,MAgFaC,OAtEf,WACE,IAAMC,EAASziB,IAAMI,OAAO,MADX,EAGOJ,IAAMsK,SAAS,IAAI9L,MAH1B,mBAGVjC,EAHU,KAGJmC,EAHI,OAKWsB,IAAMsK,SAAS,IAL1B,mBAKVqX,EALU,KAKFe,EALE,KAkDjB,OA3CA1iB,IAAMqT,WAAU,WACd,IAAIsP,GAAU,EACd,IACEjB,GAAY1kB,YAAUT,EAAM,CAAEU,eAAgB,SAAU8R,MAAM,GAAI,IAAI0E,MACpE,SAACkO,GAAD,OAAYgB,GAAWD,EAAUf,MAEnC,MAAOtW,GACP/I,QAAQqC,IAAI0G,GAGd,OAAO,WACLsX,GAAU,KAEX,CAACpmB,IAEJyD,IAAMqT,WAAU,WACd,GAAmC,IAA/BzV,OAAOC,KAAK8jB,GAAQ7jB,OAAxB,CAEA,IAAM8kB,EAAU,IAAId,KAAMW,EAAO1jB,QAAS,CACxCJ,KAAM,WACNsE,KAAM,CACJ4f,OAAQjlB,OAAOwH,OAAOuc,GAAQhb,KAAI,qBAAGpG,QACrCuiB,SAAU,CACR,CACElnB,MAAO,QACPqH,KAAMrF,OAAOwH,OAAOuc,GAAQhb,KAAI,qBAAGib,OACnClmB,gBAAiBkC,OAAOC,KAAK8jB,GAAQhb,KAAI,kBAxCrD,WACE,IAAMoc,EAAIC,KAAKC,MAAsB,IAAhBD,KAAKE,UACpBC,EAAIH,KAAKC,MAAsB,IAAhBD,KAAKE,UACpB5lB,EAAI0lB,KAAKC,MAAsB,IAAhBD,KAAKE,UAC1B,MAAM,OAAN,OAAcH,EAAd,aAAoBI,EAApB,aAA0B7lB,EAA1B,KAoCyD8lB,MAE/CC,YAAa,KAInBC,QAAS,CACPC,QAAS,CACPC,OAAQ,CACNpN,SAAU,cAKlB,OAAO,kBAAMwM,EAAQa,cACpB,CAAC9B,IAGF,eAAC3jB,EAAA,EAAD,WACE,cAAC,GAAD,CAAa8iB,YAAavkB,EAAMwkB,iBAAkBriB,IACjDd,OAAOC,KAAK8jB,GAAQ7jB,OACnB,sBAAKrB,UAAU,qBAAf,UACE,sBAAMA,UAAU,kBAAhB,SACGmB,OAAOwH,OAAOuc,GAAQ+B,QAAO,SAACC,EAAOC,GAAR,MAAkB,CAAEhC,IAAK+B,EAAM/B,IAAMgC,EAAKhC,QAAQA,KAC9E,iGAEJ,wBAAQzhB,IAAKsiB,OAGf,qBAAKhmB,UAAU,qBAAf,SACE,kJ,8FClGKonB,GAJO,iBAAO,CAC3BllB,KAAM,iBCIO8C,GALO,CACpByS,MAAO,GACPC,SAAU,ICaGxS,GAbUC,OAAaC,MAAM,CAC1CqS,MAAOtS,OAEJsS,MAAM,+KACNpS,IAAI,IAAK,+LACTyH,SAAS,uLACZ4K,SAAUvS,KACA,mFACPkI,IAAI,EAAG,6LACPhI,IAAI,GAAI,oMACRyH,SAAS,qFCsCCua,OAzCf,WAAgC,IAAD,EACW9jB,IAAMsK,UAAS,GAD1B,mBACtB2Q,EADsB,KACRC,EADQ,KAK7B,OACE,eAAChd,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAG3B,UAAU,eAAtC,UACE,cAACyB,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACE5L,QAAQ,WACR0E,WAAS,EACT5F,MAAM,uCACN2E,KAAK,QACLe,aAAa,YAGjB,cAACpD,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACE5L,QAAQ,WACR0E,WAAS,EACTjB,KAAK,WACL3E,MAAM,uCACN+C,KAAMsc,EAAe,OAAS,WAC9B3Z,aAAa,mBACb+V,WAAY,CACV8D,aACE,cAAC1D,GAAA,EAAD,CAAgBrB,SAAS,MAAzB,SACE,cAACjL,GAAA,EAAD,CACEC,aAAW,6BACXpF,QA1BgB,kBAAMkV,GAAgB,SAAChF,GAAD,OAAWA,MAwBnD,SAGG+E,EAAe,cAAC,KAAD,IAAiB,cAAC,KAAD,iBCqBpClW,uBA7Cf,YAAmE,IAA1CD,EAAyC,EAAzCA,MAAOE,EAAkC,EAAlCA,KAAMC,EAA4B,EAA5BA,YAAaC,EAAe,EAAfA,YAAe,EACpBlF,IAAM0V,WAAW/C,IAArDuC,EADwD,EACxDA,OAAQL,EADgD,EAChDA,wBADgD,EAElC7U,IAAMsK,UAAS,GAFmB,mBAEzDyI,EAFyD,KAEhDC,EAFgD,mDAIhE,WAA4B5N,EAAQC,GAApC,UAAAhI,EAAA,6DACE2V,GAAW,GACX9N,GAAY,GACZD,IACAI,EAAQC,eAAc,GAJxB,SAKQ4P,EAAO9P,EAAO+O,UALtB,uBAMQU,EAAwBzP,EAAO8O,OANvC,4CAJgE,sBAchE,OACE,eAAC3O,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTQ,kBAAgB,oBAChBhJ,UAAU,qBACVwB,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GANhC,UAOE,cAACc,GAAA,EAAD,yNACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,cAAC,KAAD,CACEgF,cAAeA,GACfE,iBAAkBA,GAClBmE,SA3BwD,8CAwB1D,SAIE,eAAC,KAAD,WACE,cAAC,GAAD,IACA,eAACpJ,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGA,cAACc,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAASif,SAAU7K,EAAtE,gGCoCCgR,OA7Ef,WAAmC,IAAD,EACQ/jB,IAAMsK,UAAS,GADvB,mBACzB2Q,EADyB,KACXC,EADW,KAG1B8I,EAA0B,WAC9B9I,GAAgB,SAAChF,GAAD,OAAWA,MAG7B,OACE,eAAChY,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAG3B,UAAU,eAAtC,UACE,uBAAOkC,KAAK,OAAO2C,aAAa,WAAW2iB,QAAQ,IACnD,cAAC/lB,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACE5L,QAAQ,WACR0E,WAAS,EACTjB,KAAK,cACL3E,MAAM,4EACN+C,KAAMsc,EAAe,OAAS,WAC9B3Z,aAAa,mBACb+V,WAAY,CACV8D,aACE,cAAC1D,GAAA,EAAD,CAAgBrB,SAAS,MAAzB,SACE,cAACjL,GAAA,EAAD,CACEC,aAAW,6BACXpF,QAASge,EAFX,SAGG/I,EAAe,cAAC,KAAD,IAAiB,cAAC,KAAD,aAO7C,cAAC/c,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACE5L,QAAQ,WACR0E,WAAS,EACTjB,KAAK,WACL3E,MAAM,sEACN+C,KAAMsc,EAAe,OAAS,WAC9B3Z,aAAa,eACb+V,WAAY,CACV8D,aACE,cAAC1D,GAAA,EAAD,CAAgBrB,SAAS,MAAzB,SACE,cAACjL,GAAA,EAAD,CACEC,aAAW,6BACXpF,QAASge,EAFX,SAGG/I,EAAe,cAAC,KAAD,IAAiB,cAAC,KAAD,aAO7C,cAAC/c,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACE5L,QAAQ,WACR0E,WAAS,EACTjB,KAAK,uBACL3E,MAAM,8FACN+C,KAAMsc,EAAe,OAAS,WAC9B3Z,aAAa,eACb+V,WAAY,CACV8D,aACE,cAAC1D,GAAA,EAAD,CAAgBrB,SAAS,MAAzB,SACE,cAACjL,GAAA,EAAD,CACEC,aAAW,6BACXpF,QAASge,EAFX,SAGG/I,EAAe,cAAC,KAAD,IAAiB,cAAC,KAAD,iBCpEpCxZ,GANO,CACpByiB,YAAa,GACb/P,SAAU,GACVgQ,qBAAsB,ICkBTxiB,GAnBUC,OAAaC,MAAM,CAC1CqiB,YAAatiB,OAEVkI,IAAI,EAAG,6LACPhI,IAAI,GAAI,oMACRyH,SAAS,mFACZ4K,SAAUvS,OAEPkI,IAAI,EAAG,6LACPhI,IAAI,GAAI,oMACRyH,SAAS,mFACZ4a,qBAAsBviB,OAEnBiL,MAAM,CAACjL,KAAQ,YAAa,MAAO,oIACnCkI,IAAI,EAAG,6LACPhI,IAAI,GAAI,oMACRyH,SAAS,qFCwCCxE,uBA3Cf,YAAsE,IAA1CD,EAAyC,EAAzCA,MAAOE,EAAkC,EAAlCA,KAAMC,EAA4B,EAA5BA,YAAaC,EAAe,EAAfA,YAAe,EAChClF,IAAM0V,WAAW/C,IAA5CuC,EAD2D,EAC3DA,OAAQD,EADmD,EACnDA,eADmD,8CAGnE,WAA4B7P,EAAQC,GAApC,UAAAhI,EAAA,6DACEgI,EAAQC,eAAc,GACtBJ,GAAY,GACZD,IAHF,SAKQiQ,EAAO9P,EAAO8e,aALtB,OAMEjP,EAAe7P,EAAO+e,sBANxB,4CAHmE,sBAYnE,OACE,eAAC5e,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTQ,kBAAgB,oBAChBhJ,UAAU,qBACVwB,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GANhC,UAOE,cAACc,GAAA,EAAD,yNACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,cAAC,KAAD,CACEgF,cAAeA,GACfE,iBAAkBA,GAClBmE,SAzB2D,8CAsB7D,SAIE,eAAC,KAAD,WACE,cAAC,GAAD,IACA,eAACpJ,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGA,cAACc,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAAnD,gGCfCylB,OA1Bf,WACE,OACE,eAAClmB,EAAA,EAAD,CAAMC,WAAS,EAACC,QAAS,EAAG3B,UAAU,eAAtC,UACE,cAACyB,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACEpH,aAAa,QACbf,KAAK,YACLzD,QAAQ,WACR0E,WAAS,EACT5F,MAAM,qBACNsP,WAAS,MAGb,cAAChN,EAAA,EAAD,CAAMK,MAAI,EAACmK,GAAI,GAAf,SACE,cAAC,GAAD,CACE5L,QAAQ,WACR0E,WAAS,EACT5F,MAAM,6CACN2E,KAAK,WACLe,aAAa,gBCpBRG,GALO,SAAClB,GAAU,IAAD,EACAA,EAAK8jB,MAAM,KADX,mBAE9B,MAAO,CAAEzJ,UAFqB,KAEVC,SAFU,OCajBlZ,GAXUC,OAAaC,MAAM,CAC1C+Y,UAAWhZ,KACD,iEACPE,IAAI,IAAK,2LACTyH,SAAS,8HACZsR,SAAUjZ,KACA,yFACPE,IAAI,IAAK,mNACTyH,SAAS,wJCiDCxE,uBA3Cf,YAAkE,IAA1CD,EAAyC,EAAzCA,MAAOE,EAAkC,EAAlCA,KAAMC,EAA4B,EAA5BA,YAAaC,EAAe,EAAfA,YAAe,EAC3BlF,IAAM0V,WAAW/C,IAA7ClQ,EADuD,EACvDA,YAAakS,EAD0C,EAC1CA,WAWrB,OACE,eAACpP,GAAA,EAAD,CACEP,KAAMA,EACNQ,QAASP,EACTQ,kBAAgB,oBAChBhJ,UAAU,qBACVwB,SAAS,KACTyH,aAAYC,aAAY,KAAMb,GANhC,UAOE,cAACc,GAAA,EAAD,oIACA,cAACC,GAAA,EAAD,CAAepJ,UAAU,8BAAzB,SACE,cAAC,KAAD,CACEgF,cAAeA,GAAcgB,EAAY6Q,aACzC3R,iBAAkBA,GAClBmE,SAtBR,SAAsBV,EAAQC,GAC5BA,EAAQC,eAAc,GACtBJ,GAAY,GACZD,IAEA,IAAM1E,EAAO6E,EAAOwV,UAAY,IAAMxV,EAAOyV,SAC7ClG,EAAWpU,IAaP,SAIE,eAAC,KAAD,WACE,cAAC,GAAD,IACA,eAAC7D,EAAA,EAAD,CAAKD,UAAU,wBAAf,UACE,cAACsJ,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAYmK,QAASf,EAAvD,wDAGA,cAACc,EAAA,EAAD,CAAQjJ,QAAQ,YAAYjB,MAAM,YAAY8C,KAAK,SAAnD,gGC2EC2lB,OAvGf,WACE,IAAMplB,EAAWC,cADC,EAEgCa,IAAMsK,UAAS,GAF/C,mBAEXia,EAFW,KAEQC,EAFR,OAGsCxkB,IAAMsK,UAAS,GAHrD,mBAGXma,EAHW,KAGWC,EAHX,OAI8B1kB,IAAMsK,UAAS,GAJ7C,mBAIXqa,EAJW,KAIOC,EAJP,OAMkC5kB,IAAMsK,UAAS,GANjD,mBAMXua,EANW,KAMSC,EANT,OAOwC9kB,IAAMsK,UAAS,GAPvD,mBAOXya,EAPW,KAOYC,EAPZ,OAQgChlB,IAAMsK,UAAS,GAR/C,mBAQX2a,EARW,KAQQC,EARR,OAUellB,IAAM0V,WAAW/C,IAA1CmC,EAVU,EAUVA,QAASrS,EAVC,EAUDA,YAEX0iB,EAAsBnlB,IAAMsR,aAAY,kBAAMkT,GAAqB,KAAQ,IAC3EY,EAAyBplB,IAAMsR,aAAY,kBAAMoT,GAAwB,KAAQ,IACjFW,EAAqBrlB,IAAMsR,aAAY,kBAAMsT,GAAoB,KAAQ,IACzEU,EAA4BtlB,IAAMsR,aAAY,kBAAMwT,GAAsB,KAAQ,IAClFS,EAA+BvlB,IAAMsR,aAAY,kBAAM0T,GAAyB,KAAQ,IACxFQ,EAA2BxlB,IAAMsR,aAAY,kBAAM4T,MAAwB,IAjB/D,8CAmBlB,uBAAA7nB,EAAA,sEACQyX,IADR,OAEE5V,EAAS2kB,MAFX,4CAnBkB,sBAwBlB,OACE,eAAC,IAAM7iB,SAAP,WACE,cAAC,GAAD,CACEgE,KAAMuf,EACNtf,YAAakgB,EACbjgB,YAAa4f,IAGf,cAAC,GAAD,CACE9f,KAAMyf,EACNxf,YAAamgB,EACblgB,YAAa8f,IAGf,cAAC,GAAD,CACEhgB,KAAM2f,EACN1f,YAAaogB,EACbngB,YAAaggB,IAGf,cAAC,GAAD,CACElgB,KAAM6f,EACN3V,QAAS,oUACT1J,QAAS8f,IAGX,cAAC,GAAD,CACEtgB,KAAM+f,EACN7V,QAAS,6HACT1J,QAAS+f,IAGX,cAAC,GAAD,CACEvgB,KAAMigB,EACN/V,QAAS,oUACT1J,QAASggB,IAGX,eAAC3P,GAAA,EAAD,CAAMpZ,UAAU,sBAAhB,UACE,cAAC4V,GAAA,EAAD,UACE,eAACI,GAAA,EAAD,qBAAsBhQ,EAAYyR,WAEpC,eAAC7B,GAAA,EAAD,CAAUC,QAAM,EAACtM,QAAS,kBAAM4e,GAAoB,IAApD,UACE,cAACa,GAAA,EAAD,UACE,cAAChN,GAAA,EAAD,CAAQhc,UAAU,mBAAlB,SACE,cAAC,KAAD,QAGJ,cAACgW,GAAA,EAAD,CAAc3X,QAAQ,iIAExB,eAACuX,GAAA,EAAD,CAAUC,QAAM,EAACtM,QAAS,kBAAM0e,GAAwB,IAAxD,UACE,cAACe,GAAA,EAAD,UACE,cAAChN,GAAA,EAAD,CAAQhc,UAAU,mBAAlB,SACE,cAAC,KAAD,QAGJ,cAACgW,GAAA,EAAD,CAAc3X,QAAQ,6FAExB,eAACuX,GAAA,EAAD,CAAUC,QAAM,EAACtM,QAAS,kBAAMwe,GAAqB,IAArD,UACE,cAACiB,GAAA,EAAD,UACE,cAAChN,GAAA,EAAD,CAAQhc,UAAU,mBAAlB,SACE,cAAC,KAAD,QAGJ,cAACgW,GAAA,EAAD,CAAc3X,QAAQ,8DAExB,eAACuX,GAAA,EAAD,CAAUC,QAAM,EAACtM,QA1FL,2CA0FZ,UACE,cAACyf,GAAA,EAAD,UACE,cAAChN,GAAA,EAAD,CAAQhc,UAAU,mBAAlB,SACE,cAAC,KAAD,QAGJ,cAACgW,GAAA,EAAD,CAAc3X,QAAQ,2G,oDCrBjB4qB,OAxEf,WAAqB,IACX1iB,EAAO2iB,cAAP3iB,GADU,EAEQhD,IAAMsK,SAAS,IAFvB,mBAEXsb,EAFW,KAEJC,EAFI,KAIZ7hB,EAASvG,aAAY,qBAAGC,QAAsBC,MAAMqF,MAClDP,EAAgBzC,IAAM0V,WAAW/C,IAAjClQ,YALU,8CAwBlB,WAA4B4I,GAA5B,oBAAAhO,EAAA,yDACQyoB,EAAaprB,EAAQyF,OACvBkL,EAAEC,cAAcsa,MAAM9nB,OAF5B,uBAGUioB,EAAoBD,EAAWE,MAAX,UACrBvjB,EAAYC,IADS,YACFsB,EAAOwF,MADL,YACcxF,EAAOzH,KADrB,YAC6B8O,EAAEC,cAAcsa,MAAM,GAAGrlB,OAJpF,SAM2BwlB,EAAkBE,IAAI5a,EAAEC,cAAcsa,MAAM,IANvE,OAMUM,EANV,OAOIL,EAAS,GAAD,oBAAKD,GAAL,CAAYM,EAAStS,YAPjC,4CAxBkB,sBAmClB,OA5BA5T,IAAMqT,WAAU,WACd,IAAMyS,EAAaprB,EAAQyF,MACrBgmB,EAAmB,GACzBL,EACGE,MADH,UACYvjB,EAAYC,IADxB,YAC+BsB,EAAOwF,MADtC,YAC+CxF,EAAOzH,OACnD6pB,UACA3S,MAAK,SAACC,GACLA,EAAI/V,MAAMmF,SAAQ,SAACvE,GACjB,IAAM8nB,EAAU9nB,EAAK+nB,cACrBH,EAAiBviB,KAAKyiB,SAGzB5S,MAAK,WACJnQ,QAAQO,IAAIsiB,GAAkB1S,MAAK,SAAC8S,GAAD,OAAmBV,EAASU,WAElE,IAcD,sBAAK9pB,UAAU,sBAAf,UACE,eAACsJ,EAAA,EAAD,CACEjJ,QAAQ,YACRjB,MAAM,YACNkB,UAAU,QACV6U,UAAW,cAAC,IAAD,IACXnV,UAAU,uBALZ,gFAOE,uBAAOkC,KAAK,OAAOmB,SA5CP,4CA4C+B0mB,OAAO,GAAGvC,QAAM,EAACwC,UAAQ,OAEtE,cAAC7pB,EAAA,EAAD,CAAYE,QAAQ,KAAKL,UAAU,mBAAnC,SACGuH,EAAOrJ,QAEV,cAACqD,EAAA,EAAD,CAAWC,SAAS,KAApB,SACE,cAAC4X,GAAA,EAAD,UACG+P,EAAMjf,KAAI,SAAC+f,EAAM/N,GAAP,OACT,eAACtG,GAAA,EAAD,WACE,cAACoT,GAAA,EAAD,UACE,cAAChN,GAAA,EAAD,UACE,cAAC,KAAD,QAGJ,cAAChG,GAAA,EAAD,CAAc3X,QAAS4rB,EAAKnmB,OAC5B,cAAComB,GAAA,EAAD,UACE,cAACxb,GAAA,EAAD,CAAYsL,KAAK,MAAMrL,aAAW,SAAlC,SACE,cAAC,KAAD,UATN,UAAkBsb,EAAKnmB,MAAvB,OAA8BoY,eCnD3BiO,OAff,YAA0D,IAAvBC,EAAsB,EAAjC9pB,UAAyB+pB,EAAQ,8BAC/CrkB,EAAgBzC,IAAM0V,WAAW/C,IAAjClQ,YACR,OACE,cAAC,IAAD,2BACMqkB,GADN,IAEE5K,OAAQ,SAAChc,GACP,OAAOuC,GAAeA,EAAYskB,cAChC,cAACF,EAAD,eAAe3mB,IAEf,cAAC,IAAD,CAAUiS,GAAG,gBCMR6U,OAff,YAAkE,IAAvBH,EAAsB,EAAjC9pB,UAAyB+pB,EAAQ,8BACvDrkB,EAAgBzC,IAAM0V,WAAW/C,IAAjClQ,YACR,OACE,cAAC,IAAD,2BACMqkB,GADN,IAEE5K,OAAQ,SAAChc,GACP,OAAOuC,GAAeA,EAAYskB,cAChC,cAAC,IAAD,CAAU5U,GAAG,cAEb,cAAC0U,EAAD,eAAe3mB,SCWzB,SAAS+mB,KACP,IAAM/nB,EAAWC,cACTsD,EAAgBzC,IAAM0V,WAAW/C,IAAjClQ,YACF+F,EAAW/K,aAAY,qBAAGgL,KAAgBD,YAWhD,OATAxI,IAAMqT,WAAU,WjC5BO,IAACrQ,EiC6BtB9D,EAASR,EAAQ,IAAIF,OACrBU,EAAS6C,GAAa,IAAIvD,OAC1BU,EAAS2I,GAAsB,IAAIrJ,OACnCU,EjElCuB,yCAAM,WAAOA,GAAP,gBAAA7B,EAAA,sEAE7B6B,EAAS,CAAEP,KAAM,oBAAqBC,SAAS,IAFlB,SAIR2O,KAJQ,OAIvBhF,EAJuB,OAM7BrJ,EAAS8O,GAAUzF,IANU,gDAQ7BjG,QAAQ3B,MAAR,MACAzB,EAAS,CAAEP,KAAM,oBAAqBC,SAAS,IATlB,yDAAN,uDiEmCvBM,EAASkH,MACTlH,GjClCsB8D,EiCkCHvI,EAAKgI,YAAYC,IjClCf,yCAAQ,WAAOxD,GAAP,gBAAA7B,EAAA,6DAC/B6B,EAAS,CAAEP,KAAM,kBAAmBC,SAAS,IADd,SAEZrE,EAAG4I,IAAH,iBAAiBH,IAAMH,MAFX,OAEzB4F,EAFyB,OAG/BvJ,EAASud,GAAQhU,EAAKxF,SAHS,2CAAR,0DiCmCpB,CAACR,IAGF,eAAC,IAAMzB,SAAP,WACE,cAAC,GAAD,IAEA,cAACtE,EAAA,EAAD,CAAKD,UAAU,UAAf,SACE,eAACuB,EAAA,EAAD,CAAWC,SAAS,KAApB,UACE,cAAC,EAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOipB,KAAK,SAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,YAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,UAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOC,OAAK,EAACD,KAAK,YAAlB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,gBAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,WAAZ,SAAwB1e,GAAY,cAAC,GAAD,MACpC,cAAC,IAAD,CAAO0e,KAAK,YAAZ,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,IAAZ,SACE,cAAC,IAAD,CAAU/U,GAAG,sBA2BZiV,OAlBf,WACE,OACE,cAACC,EAAA,EAAD,CAAgBC,aAAW,EAA3B,SACE,eAAC9nB,EAAA,EAAD,CAAe7E,MAAOA,EAAtB,UACE,cAAC8iB,EAAA,EAAD,IACA,eAAC,IAAD,WACE,cAAC,IAAD,CAAOyJ,KAAK,OAAZ,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,CAAsBA,KAAK,UAAUnqB,UAAW+f,KAChD,cAAC,GAAD,CAAsBoK,KAAK,SAASnqB,UAAW+gB,KAC/C,cAAC,GAAD,CAAcoJ,KAAK,SAASnqB,UAAWkqB,c,6BC3F3CM,GAAe,CACnB5pB,MAAO,GACPqS,UAAU,GA6CGtS,GA1CC,WAAmC,IAAlCgd,EAAiC,uDAAzB6M,GAAchY,EAAW,uCAChD,OAAQA,EAAO5Q,MACb,IAAK,sBACH,OAAO,2BACF+b,GADL,IAEE/c,MAAM,eAAM4R,EAAO3Q,SACnBoR,UAAU,IAEd,IAAK,qBACH,OAAO,2BACF0K,GADL,IAEE1K,SAAUT,EAAO3Q,UAErB,IAAK,aAOL,IAAK,gBACH,OAAO,2BACF8b,GADL,IAEE/c,MAAM,2BAAM+c,EAAM/c,OAAb,mBAAqB4R,EAAO3Q,QAAQoE,GAAKuM,EAAO3Q,UACrDoR,UAAU,IAId,IAAK,gBACH,IAAMwX,EAAQ,eAAQ9M,EAAM/c,OAE5B,cADO6pB,EAASjY,EAAO3Q,SAChB,2BACF8b,GADL,IAEE/c,MAAO6pB,EACPxX,UAAU,IAGd,QACE,OAAO0K,IC3CP6M,GAAe,CACnB5pB,MAAO,GACPqS,UAAU,GA8CGzH,GA3CA,WAAmC,IAAlCmS,EAAiC,uDAAzB6M,GAAchY,EAAW,uCAC/C,OAAQA,EAAO5Q,MACb,IAAK,aACH,OAAO,2BACF+b,GADL,IAEE/c,MAAM,2BAAM+c,EAAM/c,OAAU4R,EAAO3Q,SACnCoR,UAAU,IAGd,IAAK,oBACH,OAAO,2BACF0K,GADL,IAEE1K,SAAUT,EAAO3Q,UAGrB,IAAK,YACH,OAAO,2BACF8b,GADL,IAEE/c,MAAM,2BAAM+c,EAAM/c,OAAb,mBAAqB4R,EAAO3Q,QAAQoE,GAAKuM,EAAO3Q,UACrDoR,UAAU,IAGd,IAAK,eACH,IAAMwX,EAAQ,eAAQ9M,EAAM/c,OAE5B,cADO6pB,EAASjY,EAAO3Q,SAChB,2BACF8b,GADL,IAEE/c,MAAO6pB,EACPxX,UAAU,IAGd,IAAK,eACH,OAAO,2BACF0K,GADL,IAEE/c,MAAM,2BAAM+c,EAAM/c,OAAb,mBAAqB4R,EAAO3Q,QAAQoE,GAAKuM,EAAO3Q,UACrDoR,UAAU,IAGd,QACE,OAAO0K,IC5CP6M,GAAe,CACnB5pB,MAAO,GACPqS,UAAU,GA4DGzJ,GAzDG,WAAmC,IAAlCmU,EAAiC,uDAAzB6M,GAAchY,EAAW,uCAClD,OAAQA,EAAO5Q,MACb,IAAK,gBACH,OAAO,2BACF+b,GADL,IAEE/c,MAAM,eAAM4R,EAAO3Q,SACnBoR,UAAU,IAEd,IAAK,uBACH,OAAO,2BACF0K,GADL,IAEE1K,SAAUT,EAAO3Q,UAErB,IAAK,eAOL,IAAK,kBACH,OAAO,2BACF8b,GADL,IAEE/c,MAAM,2BAAM+c,EAAM/c,OAAb,mBAAqB4R,EAAO3Q,QAAQoE,GAAKuM,EAAO3Q,UACrDoR,UAAU,IAGd,IAAK,uBACH,IAAIyX,EAAU,aAAO/M,EAAM/c,MAAM4R,EAAO3Q,QAAQoE,IAAItF,SAIpD,MAHiC,SAA7B6R,EAAO3Q,QAAQ8oB,WAAsBD,EAAW7jB,KAAK2L,EAAO3Q,QAAQrC,MACvC,QAA7BgT,EAAO3Q,QAAQ8oB,YACjBD,EAAaA,EAAWlb,QAAO,SAAChO,GAAD,OAAUA,IAASgR,EAAO3Q,QAAQrC,SAC5D,2BACFme,GADL,IAEE/c,MAAM,2BACD+c,EAAM/c,OADN,mBAEF4R,EAAO3Q,QAAQoE,GAFb,2BAGE0X,EAAM/c,MAAM4R,EAAO3Q,QAAQoE,KAH7B,IAIDtF,QAAS+pB,MAGbzX,UAAU,IAGd,IAAK,kBACH,IAAMwX,EAAQ,eAAQ9M,EAAM/c,OAE5B,cADO6pB,EAASjY,EAAO3Q,SAChB,CACLjB,MAAO6pB,EACPxX,UAAU,GAGd,QACE,OAAO0K,IC1DP6M,GAAe,CACnB5pB,MAAO,GACPqS,UAAU,GAqBGE,GAlBU,WAAmC,IAAlCwK,EAAiC,uDAAzB6M,GAAchY,EAAW,uCACzD,OAAQA,EAAO5Q,MACb,IAAK,wBACH,OAAO,2BACF+b,GADL,IAEE/c,MAAM,eAAM4R,EAAO3Q,SACnBoR,UAAU,IAEd,IAAK,+BACH,OAAO,2BACF0K,GADL,IAEE1K,SAAUT,EAAO3Q,UAErB,QACE,OAAO8b,ICnBP6M,GAAe,CACnBxpB,SAAU,KAeGxB,GAZF,WAAmC,IAAlCme,EAAiC,uDAAzB6M,GAAchY,EAAW,uCAC7C,OAAQA,EAAO5Q,MACb,IAAK,WACH,OAAO,2BACF+b,GADL,IAEE3c,SAAUwR,EAAO3Q,UAErB,QACE,OAAO8b,ICZP6M,GAAe,CACnBhnB,KAAM,GACNyC,GAAI,GACJ2J,UAAW,GACXuH,MAAO,GACP1L,UAAU,EACVwH,UAAU,GAiBGvH,GAdF,WAAmC,IAAlCiS,EAAiC,uDAAzB6M,GAAchY,EAAW,uCAC7C,OAAQA,EAAO5Q,MACb,IAAK,kBACH,OAAO,2BACF+b,GADL,IAEE1K,SAAUT,EAAO3Q,UAErB,IAAK,WACH,OAAO,2BAAK2Q,EAAO3Q,SAAnB,IAA4BoR,UAAU,IACxC,QACE,OAAO0K,ICVPiN,GAAaC,aAAgB,CACjCnf,QACA/K,WACA6K,UACAhC,aACA2J,oBACA3T,UAQasrB,GALK,SAACnN,EAAOnL,GAE1B,MADoB,iBAAhBA,EAAO5Q,OAAyB+b,OAAQoN,GACrCH,GAAWjN,EAAOnL,IChBrBwY,GAAmBC,OAAOC,sCAAwCC,KAIzDC,GAFDC,aAAYP,GAAaE,GAAiBM,aAAgBC,QCKxEC,IAASrM,OACP,cAAC,KAAD,UACE,cAAC,IAAD,CAAUiM,MAAOA,GAAjB,SACE,cAACtV,GAAD,UACE,cAAC,GAAD,UAINkB,SAASyU,eAAe,W","file":"static/js/main.8baa8368.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\nimport 'firebase/storage';\r\n\r\nconst app = firebase.initializeApp({\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n});\r\n\r\nexport const db = app.firestore();\r\nexport const auth = app.auth();\r\nexport const storage = app.storage();\r\nexport default app;\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport orange from '@material-ui/core/colors/orange';\r\n/**\r\n * Global material ui styles overrides\r\n */\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: blue[500],\r\n    },\r\n    secondary: {\r\n      main: orange[500],\r\n    },\r\n    text: {\r\n      primary: '#000000',\r\n      secondary: '#9E9E9E',\r\n    },\r\n  },\r\n  typography: {\r\n    body1: { fontSize: '1.3rem' },\r\n  },\r\n\r\n  overrides: {\r\n    MuiDrawer: {\r\n      paper: {\r\n        backgroundColor: '#F5F5F5',\r\n      },\r\n    },\r\n    MuiButton: {\r\n      label: { color: '#ffffff' },\r\n      containedSecondary: {\r\n        '&:hover': {\r\n          backgroundColor: 'rgba(255, 192, 70, 0.5)',\r\n        },\r\n      },\r\n    },\r\n    MuiIconButton: {\r\n      colorSecondary: {\r\n        '&:hover': {\r\n          backgroundColor: 'rgba(255, 192, 70, 0.5)',\r\n          '@media (hover:none)': {\r\n            backgroundColor: 'transparent',\r\n          },\r\n        },\r\n      },\r\n      root: {},\r\n    },\r\n    MuiCardContent: {\r\n      root: {\r\n        '&:last-child': { paddingBottom: '16px' },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import React from 'react';\r\nimport {formatISO} from 'date-fns'\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction InfoPanelCard({ children, header, date }) {\r\n  return (\r\n    <Card className=\"info__card\">\r\n      <Box className=\"info__svg-container\">{children}</Box>\r\n      <CardContent className=\"info__content\">\r\n        <Typography gutterBottom variant=\"h5\" component=\"h2\" className=\"info__title\">\r\n          {header}\r\n        </Typography>\r\n        <Typography variant=\"body2\" component=\"p\" className=\"info__subtitle\">\r\n          {formatISO(date, {representation: 'date'})}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default InfoPanelCard;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\n\r\nimport InfoPanelCard from './InfoPanelCard';\r\n\r\nconst days = ['воскресенье', 'понедельник', 'вторник', 'cреда', 'четверг', 'пятница', 'суббота'];\r\n\r\nfunction endingsForm(n) {\r\n  let a = n % 100;\r\n  let b = a % 10;\r\n  if (a > 10 && a < 20) return 'уроков';\r\n  if (b > 1 && b < 5) return 'урока';\r\n  if (b === 1) return 'урок';\r\n  return 'уроков';\r\n}\r\n\r\nfunction InfoPanel() {\r\n  let numLessons = useSelector(({ lessons }) => lessons.items);\r\n  numLessons = Object.keys(numLessons).length;\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  return (\r\n    <Container maxWidth=\"md\" className=\"info__container\">\r\n      <Grid container spacing={2}>\r\n        <Hidden xsDown>\r\n          <Grid item>\r\n            <InfoPanelCard header={days[new Date().getDay()]} date={new Date()}>\r\n              <CalendarTodayIcon />\r\n            </InfoPanelCard>\r\n          </Grid>\r\n          <Grid item>\r\n            <InfoPanelCard header={endingsForm(numLessons)} date={date}>\r\n              {numLessons}\r\n            </InfoPanelCard>\r\n          </Grid>\r\n          <Grid item>\r\n            <InfoPanelCard date={date} />\r\n          </Grid>\r\n        </Hidden>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default InfoPanel;\r\n","export const setDate = (date) => ({\r\n  type: 'SET_DATE',\r\n  payload: date,\r\n});\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport ruLocale from 'date-fns/locale/ru';\r\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport orange from '@material-ui/core/colors/orange';\r\n\r\nimport { setDate } from '../redux/actions/date';\r\n\r\nconst theme = createMuiTheme({\r\n  overrides: {\r\n    MuiPickersDay: {\r\n      daySelected: {\r\n        backgroundColor: orange[500],\r\n        '&:hover': {\r\n          backgroundColor: orange[500],\r\n        },\r\n      },\r\n      current: {\r\n        color: orange[500],\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nfunction MuiCalendar({ handleClick }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  const handleCellClick = (date) => {\r\n    dispatch(setDate(date));\r\n    handleClick(date);\r\n  };\r\n\r\n  return (\r\n    <MuiPickersUtilsProvider utils={DateFnsUtils} locale={ruLocale}>\r\n      <ThemeProvider theme={theme}>\r\n        <DatePicker\r\n          autoOk\r\n          disableToolbar\r\n          variant=\"static\"\r\n          openTo=\"date\"\r\n          value={date}\r\n          onChange={handleCellClick}\r\n        />\r\n      </ThemeProvider>\r\n    </MuiPickersUtilsProvider>\r\n  );\r\n}\r\n\r\nconst Calendar = React.forwardRef((props, ref) => {\r\n  return (\r\n    <MuiCalendar useRef={ref} {...props}>\r\n      {props.children}\r\n    </MuiCalendar>\r\n  );\r\n});\r\n\r\nexport default Calendar;\r\n","import React from 'react';\r\nimport { useField } from 'formik';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\nimport { Checkbox } from '@material-ui/core';\r\n\r\nexport const MyTextField = ({ ...props }) => {\r\n  const [field, meta, helpers] = useField(props.name);\r\n  return (\r\n    <TextField\r\n      {...field}\r\n      {...props}\r\n      error={meta.touched && Boolean(meta.error)}\r\n      helperText={meta.touched && meta.error}\r\n    />\r\n  );\r\n};\r\n\r\nexport const MyCheckBox = ({ ...props }) => {\r\n  const [field, meta] = useField(props);\r\n  return (\r\n    <React.Fragment>\r\n      <Checkbox {...field} {...props} />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport const MySelect = ({ ...props }) => {\r\n  const [field, meta] = useField(props);\r\n  return (\r\n    <React.Fragment>\r\n      <Select {...field} {...props} error={meta.touched && Boolean(meta.error)} />\r\n      {meta.touched && meta.error ? (\r\n        <span className=\"lesson-form__select-error\">{meta.error}</span>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import React from 'react';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nfunction NotesFormInputs() {\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField\r\n        margin=\"normal\"\r\n        name=\"note\"\r\n        label=\"Заметки\"\r\n        autoComplete=\"off\"\r\n        multiline\r\n        fullWidth\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default NotesFormInputs;\r\n","const initialValues = (note) => ({\r\n  note,\r\n});\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  note: yup.string('Отредактируйте заметку').max(500, 'Заметка не может быть длиннее 500 символов'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\nimport { formatISO } from 'date-fns';\r\n/**\r\n * middleware thunk function used for async data fetching and\r\n * dispatching actual event(action) to reducer\r\n * QUERY FORMAT: ['property', '==', 'value']\r\n * @param {date} date\r\n * @returns\r\n */\r\nexport const fetchLessons = (date) => async (dispatch) => {\r\n  const ISODate = formatISO(date, { representation: 'date' });\r\n  dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  const timer = stopwatch(fastRetrieveLessons);\r\n  const query = ['date', '==', `${ISODate}`];\r\n  try {\r\n    const lessons = await timer(query);\r\n    dispatch(setLessons(lessons));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nasync function fastRetrieveLessons(query) {\r\n  let retrievedLessons = {};\r\n  const lessonsSnapshot = await db\r\n    .collection(`/users/${auth.currentUser.uid}/lessons`)\r\n    .where(...query)\r\n    .orderBy('time')\r\n    .get();\r\n  lessonsSnapshot.forEach((lessonDoc) => {\r\n    retrievedLessons = { ...retrievedLessons, [lessonDoc.id]: lessonDoc.data() };\r\n  });\r\n  return retrievedLessons;\r\n}\r\n\r\nexport const postLesson = (lesson, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  try {\r\n    if (!preventIsLoaded) dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/lessons/${lesson.id}`).set(lesson);\r\n    dispatch(addLesson(lesson));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: true });\r\n  }\r\n};\r\n\r\n/**\r\n * retrieve lessons using collectionGroup method\r\n * @param {object} user\r\n * @param {object[]} pupils\r\n * @param {array} query firestore query format array\r\n * @returns {object[]} lesson result array going to be stored in redux store\r\n */\r\n\r\nexport const deleteLesson = (id) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/lessons/${id}`).delete();\r\n\r\n    dispatch(deleteLessonAction(id));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: true });\r\n    return Promise.reject('reject');\r\n  }\r\n};\r\n\r\nexport const deleteLessonsBySmth = ({ field, id }) => async (dispatch) => {\r\n  const lessonsPromises = [];\r\n  try {\r\n    const lessonsSnapshot = await db\r\n      .collection(`/users/${auth.currentUser.uid}/lessons/`)\r\n      .where(`${field}`, '==', id)\r\n      .get();\r\n\r\n    lessonsSnapshot.forEach((lessonsSnap) =>\r\n      lessonsPromises.push(\r\n        db.doc(`/users/${auth.currentUser.uid}/lessons/${lessonsSnap.data().id}`).delete(),\r\n      ),\r\n    );\r\n\r\n    await Promise.all(lessonsPromises);\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nexport const changeLesson = (id, update) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/lessons/${id}`).update(update);\r\n    const lesson = await db.doc(`/users/${auth.currentUser.uid}/lessons/${id}`).get();\r\n    dispatch(updateLesson(lesson.data()));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_LESSONS_LOADED', payload: true });\r\n  }\r\n};\r\n/**\r\n * @param {object[]} items lessons array\r\n * @returns {object} - send action object to reducer\r\n */\r\nexport const setLessons = (items) => ({\r\n  type: 'SET_LESSONS_BY_DATE',\r\n  payload: items,\r\n});\r\n\r\nexport const addLesson = (item) => ({\r\n  type: 'ADD_LESSON',\r\n  payload: item,\r\n});\r\n\r\nexport const deleteLessonAction = (id) => ({\r\n  type: 'DELETE_LESSON',\r\n  payload: id,\r\n});\r\n\r\nexport const updateLesson = (lesson) => ({\r\n  type: 'UPDATE_LESSON',\r\n  payload: lesson,\r\n});\r\n/**\r\n * util func for performance measuring needs\r\n * @param {*} fn\r\n * @returns\r\n */\r\nfunction stopwatch(fn) {\r\n  return async (...args) => {\r\n    const before = performance.now();\r\n    const result = await fn.apply(this, args);\r\n    const after = performance.now();\r\n    console.log(`finished: ${after - before}`);\r\n    return result;\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nimport NotesFormInputs from './NotesFormInputs';\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { changeLesson } from '../../redux/actions/lessons';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    width: '600px',\r\n  },\r\n});\r\n\r\nfunction NotesForm({ open, width, handleClose, handleSnack, id, note }) {\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n\r\n  async function handleSubmit(values, actions) {\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n    dispatch(changeLesson(id, { note: values.note }));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      classes={{ paper: classes.paper }}\r\n      maxWidth=\"md\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Заметки об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues(note)}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <NotesFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(NotesForm);\r\n","import React from 'react';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nfunction ThemeFormInputs() {\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField\r\n        margin=\"normal\"\r\n        name=\"theme\"\r\n        label=\"Тема\"\r\n        autoComplete=\"off\"\r\n        multiline\r\n        fullWidth\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default ThemeFormInputs;","const initialValues = (initialValue) => ({\r\n  theme: initialValue,\r\n});\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup.string('Отредактируйте тему').max(200, 'Тема не может быть длиннее 200 символов'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nimport ThemeFormInputs from './ThemeFormInputs';\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { changeLesson } from '../../redux/actions/lessons';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    width: '600px',\r\n  },\r\n});\r\n\r\nfunction ThemeForm({ open, width, handleClose, id, lessonTheme, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n\r\n  async function handleSubmit(values, actions) {\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n    handleClose();\r\n    dispatch(changeLesson(id, { theme: values.theme }));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      classes={{ paper: classes.paper }}\r\n      maxWidth=\"md\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Заметки об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues(lessonTheme)}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <ThemeFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(ThemeForm);\r\n","import { db, auth } from '../../firebase';\r\nimport firebase from 'firebase/app';\r\n\r\nexport const fetchSchedules = ({ preventIsLoaded } = {}) => async (dispatch) => {\r\n  try {\r\n    if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n\r\n    const schedules = await retrieveSchedules();\r\n\r\n    dispatch(setSchedules(schedules));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nasync function retrieveSchedules() {\r\n  let schedules = {};\r\n  const snapshot = await db.collection(`/users/${auth.currentUser.uid}/schedules/`).get();\r\n  snapshot.forEach((doc) => (schedules = { ...schedules, [doc.id]: doc.data() }));\r\n  return schedules;\r\n}\r\n\r\nexport const postSchedule = (schedules) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n    const schPromises = schedules.map((schedule) =>\r\n      db.doc(`/users/${auth.currentUser.uid}/schedules/${schedule.id}`).set({ ...schedule }),\r\n    );\r\n    await Promise.all(schPromises);\r\n    schedules.forEach((schedule) => dispatch(addSchedule(schedule)));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.log(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n    return Promise.reject('reject');\r\n  }\r\n};\r\n\r\nexport const addLessonToSchedule = ({ id, date }, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  try {\r\n    if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n    await db\r\n      .doc(`/users/${auth.currentUser.uid}/schedules/${id}/`)\r\n      .update({ lessons: firebase.firestore.FieldValue.arrayUnion(date) });\r\n\r\n    const schedule = await db.doc(`/users/${auth.currentUser.uid}/schedules/${id}/`).get();\r\n    dispatch(updateSchedule(schedule.data()));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nexport const deleteLessonFromSchedule = ({ date, id }) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n    await db\r\n      .doc(`/users/${auth.currentUser.uid}/schedules/${id}/`)\r\n      .update({ lessons: firebase.firestore.FieldValue.arrayRemove(date) });\r\n\r\n    const schedule = await db.doc(`/users/${auth.currentUser.uid}/schedules/${id}/`).get();\r\n    dispatch(updateSchedule(schedule.data()));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n    return Promise.reject('reject');\r\n  }\r\n};\r\n\r\nexport const deleteSchedulesByPupil = (id) => async (dispatch) => {\r\n  const schedulesPromises = [];\r\n  try {\r\n    const schedulesSnapshot = await db\r\n      .collection(`/users/${auth.currentUser.uid}/schedules/`)\r\n      .where('pupil', '==', id)\r\n      .get();\r\n\r\n    schedulesSnapshot.forEach((schedulesSnap) =>\r\n      schedulesPromises.push(\r\n        db.doc(`/users/${auth.currentUser.uid}/schedules/${schedulesSnap.data().id}`).delete(),\r\n      ),\r\n    );\r\n\r\n    await Promise.all(schedulesPromises);\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nexport const deleteScheduleAction = (id) => async (dispatch) => {\r\n  try {\r\n    await db.doc(`/users/${auth.currentUser.uid}/schedules/${id}`).delete();\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nexport const updateScheduleAction = (id, data) => async (dispatch) => {\r\n  try {\r\n    await db.doc(`/users/${auth.currentUser.uid}/schedules/${id}/`).update(data);\r\n\r\n    const schedule = await db.doc(`/users/${auth.currentUser.uid}/schedules/${id}/`).get();\r\n\r\n    dispatch(updateSchedule(schedule));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULES_LOADED', payload: true });\r\n    return Promise.reject('reject');\r\n  }\r\n};\r\n\r\nexport const setSchedules = (items) => ({\r\n  type: 'SET_SCHEDULES',\r\n  payload: items,\r\n});\r\n\r\nexport const addSchedule = (data) => ({\r\n  type: 'ADD_SCHEDULE',\r\n  payload: data,\r\n});\r\n\r\nexport const updateSchedule = (schedule) => ({\r\n  type: 'UPDATE_SCHEDULE',\r\n  payload: schedule,\r\n});\r\n\r\nexport const deleteSchedule = (id) => ({\r\n  type: 'DELETE_SCHEDULE',\r\n  payload: id,\r\n});\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\nimport { getISODay, formatISO } from 'date-fns';\r\n\r\nasync function retrieveSchedulesByDay(date) {\r\n  let schedules = {};\r\n  const today = getISODay(date);\r\n  const localISODate = formatISO(date, { representation: 'date' });\r\n\r\n  const snapshot = await db\r\n    .collection(`/users/${auth.currentUser.uid}/schedules/`)\r\n    .where('day', '==', today)\r\n    .get();\r\n\r\n  snapshot.forEach((doc) => {\r\n    if (!doc.data().lessons.includes(localISODate))\r\n      schedules = { ...schedules, [doc.id]: doc.data() };\r\n  });\r\n  return schedules;\r\n}\r\n\r\nexport const fetchScheduledLessons = (date, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  try {\r\n    if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULED_LESSONS_LOADED', payload: false });\r\n    const schedules = await retrieveSchedulesByDay(date);\r\n\r\n    dispatch(setScheduledLessons(schedules));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_SCHEDULED_LESSONS_LOADED', payload: false });\r\n  }\r\n};\r\n\r\nexport const setScheduledLessons = (items) => ({\r\n  type: 'SET_SCHEDULED_LESSONS',\r\n  payload: items,\r\n});\r\n\r\nexport const setScheduledLessonsLoaded = (value) => ({\r\n  type: 'SET_SCHEDULED_LESSONS_LOADED',\r\n  payload: value,\r\n});\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nimport { MyTextField, MySelect } from '../CustomInputs';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nexport default function AddLessonInputs() {\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const business = useSelector(({ user }) => user.business);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField margin=\"normal\" name=\"theme\" label=\"Тема\" autoComplete=\"off\" fullWidth />\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={6}>\r\n          <FormControl fullWidth>\r\n            <InputLabel id=\"lesson-form__select-label\">Ученик</InputLabel>\r\n            <MySelect\r\n              labelId=\"lesson-form__select-label\"\r\n              name=\"pupil\"\r\n              MenuProps={menuProps}\r\n              IconComponent={iconComponent}>\r\n              {Object.keys(pupils).map((key) => (\r\n                <MenuItem key={key} value={pupils[key].id}>\r\n                  {pupils[key].name}\r\n                </MenuItem>\r\n              ))}\r\n            </MySelect>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <MyTextField margin=\"none\" name=\"subject\" label=\"Предмет\" autoComplete=\"off\" fullWidth />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            margin=\"normal\"\r\n            name=\"date\"\r\n            label=\"Дата\"\r\n            type=\"date\"\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            margin=\"normal\"\r\n            name=\"time\"\r\n            label=\"Время урока\"\r\n            type=\"time\"\r\n            inputProps={{\r\n              step: 300, // 5 min\r\n            }}\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        {business && (\r\n          <Grid item xs={12}>\r\n            <MyTextField\r\n              margin=\"none\"\r\n              type=\"number\"\r\n              name=\"price\"\r\n              label=\"Стоимость занятия\"\r\n              autoComplete=\"off\"\r\n              fullWidth\r\n            />\r\n          </Grid>\r\n        )}\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            margin=\"none\"\r\n            multiline={true}\r\n            rowsMax={10}\r\n            name=\"note\"\r\n            label=\"Заметки\"\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","import AddLessonInputs from '../addLessonForm/AddLessonInputs';\r\n\r\nimport React from 'react';\r\n\r\nfunction EditLessonInputs() {\r\n  return <AddLessonInputs />;\r\n}\r\n\r\nexport default EditLessonInputs;\r\n","const initialValues = ({ lessonTheme: theme, ...data }) => ({\r\n  theme,\r\n  ...data,\r\n});\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst MAX_LESSON_PAY = 999999;\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup\r\n    .string('Введите тему урока')\r\n    .max(200, 'Слишком длинная тема, попробуйте сократить')\r\n    .required('Необходимо указать тему урока'),\r\n  pupil: yup.mixed().typeError('Такого ученика не существует').required('Укажите ученика'),\r\n  note: yup.string('Заметки').max(500, 'Заметка не может быть длинее 500 символов'),\r\n  subject: yup\r\n    .string('Укажите предмет')\r\n    .max(100, 'Слишком длинная строка, попробуйте сократить')\r\n    .typeError('Предмет должен быть строкой')\r\n    .required('Укажите ваш предмет'),\r\n  date: yup\r\n    .string('Укажите дату урока')\r\n    .required('Укажите дату урока'),\r\n  time: yup\r\n    .string('Укажите время занятия')\r\n    .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Введите время занятия в формате: \"17:00\"')\r\n    .required('Укажите время урока'),\r\n  price: yup\r\n    .number('Укажите стоимость занятия')\r\n    .typeError('Лучше ввести число')\r\n    .min(0, 'Cтоимость должна быть положительной')\r\n    .max(MAX_LESSON_PAY, 'Возможно вы ошиблись и занятие стоит не так дорого')\r\n    .required('Укажите стоимость занятия'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport EditLessonInputs from './EditLessonInputs';\r\nimport initialValues from './initialValues';\r\nimport validationSchema from '../addLessonForm/validationSchema';\r\nimport { changeLesson } from '../../redux/actions/lessons';\r\n\r\nfunction EditLessonForm({ width, open, id, handleClose, handleSnack, ...data }) {\r\n  const dispatch = useDispatch();\r\n\r\n  function handleSubmit(values, actions) {\r\n    handleSnack(true);\r\n    actions.setSubmitting(false);\r\n    handleClose();\r\n    dispatch(changeLesson(id, values));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Измените данные о внеплановом уроке </DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues(data)}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <EditLessonInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(EditLessonForm);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport SpeedIcon from '@material-ui/icons/Speed';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport NotesForm from '../notesForm/NotesForm';\r\nimport ThemeForm from '../themeForm/ThemeForm';\r\nimport { deleteLesson } from '../../redux/actions/lessons';\r\nimport { deleteLessonFromSchedule } from '../../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport EditLessonForm from '../editLessonForm/EditLessonForm';\r\n\r\nfunction LessonCard({\r\n  id,\r\n  time,\r\n  date,\r\n  name,\r\n  theme,\r\n  price,\r\n  pupil,\r\n  note = '',\r\n  address = '',\r\n  subject,\r\n  schedule,\r\n  handleSnack,\r\n  handleDeleteSnack,\r\n  handleLessonThemeEditSnack,\r\n  handleSnackLessonEdit,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [viewNotesForm, setViewNotesForm] = React.useState(false);\r\n  const [viewThemeForm, setViewThemeForm] = React.useState(false);\r\n  const [viewEditForm, setViewEditForm] = React.useState(false);\r\n  const selectedDate = useSelector(({ date }) => date.selected);\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n\r\n  /**\r\n   * How does dispatch actually work?\r\n   * Am I supposed to chain dispatches to make sure async requests queuing in sequence?\r\n   */\r\n  async function handleDelete() {\r\n    await dispatch(deleteLesson(id));\r\n    handleDeleteSnack(true);\r\n    if (schedule) {\r\n      await dispatch(deleteLessonFromSchedule({ id: schedule, date }));\r\n      dispatch(fetchScheduledLessons(selectedDate));\r\n    } else dispatch(fetchScheduledLessons(selectedDate));\r\n  }\r\n\r\n  function handleHomework() {\r\n    history.push(`/homework/${id}`);\r\n  }\r\n\r\n  const clickNotesForm = () => setViewNotesForm(true);\r\n  const closeNotesForm = () => setViewNotesForm(false);\r\n  return (\r\n    <React.Fragment>\r\n      <NotesForm\r\n        open={viewNotesForm}\r\n        handleSnack={handleSnack}\r\n        note={note}\r\n        id={id}\r\n        handleClose={closeNotesForm}\r\n      />\r\n\r\n      <ThemeForm\r\n        open={viewThemeForm}\r\n        lessonTheme={theme}\r\n        handleSnack={handleLessonThemeEditSnack}\r\n        id={id}\r\n        handleClose={() => setViewThemeForm(false)}\r\n      />\r\n\r\n      <EditLessonForm\r\n        open={viewEditForm}\r\n        lessonTheme={theme}\r\n        id={id}\r\n        time={time}\r\n        date={date}\r\n        pupil={pupil}\r\n        subject={subject}\r\n        price={price}\r\n        note={note}\r\n        handleClose={() => setViewEditForm(false)}\r\n        handleSnack={handleSnackLessonEdit}\r\n      />\r\n      <Card className=\"lesson__container\">\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          getContentAnchorEl={null}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}>\r\n          <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n            <MenuItem onClick={handleHomework}>Домашняя работа</MenuItem>\r\n            <MenuItem onClick={clickNotesForm}>Заметки</MenuItem>\r\n            <MenuItem onClick={handleClose}>push(disabled)</MenuItem>\r\n            {schedule ? (\r\n              <MenuItem onClick={() => setViewThemeForm(true)}>Редактировать тему</MenuItem>\r\n            ) : (\r\n              <MenuItem onClick={() => setViewEditForm(true)}>Редактировать урок</MenuItem>\r\n            )}\r\n            <MenuItem onClick={handleDelete}>Удалить</MenuItem>\r\n          </MenuList>\r\n        </Menu>\r\n        <CardContent>\r\n          <Box className=\"lesson__header\">\r\n            <Typography gutterBottom variant=\"h5\" className=\"lesson__header-text\">\r\n              {time} {subject}\r\n            </Typography>\r\n            <IconButton aria-label=\"menu\" className=\"lesson__header-more\" onClick={handleClick}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          </Box>\r\n          <Typography variant=\"h5\" color=\"textPrimary\" className=\"lesson__theme\" component=\"p\">\r\n            {theme}\r\n          </Typography>\r\n          <Grid container justify=\"space-between\">\r\n            <Grid item>\r\n              <Typography variant=\"subtitle2\" color=\"textPrimary\" component=\"p\">\r\n                {name}, {address}\r\n              </Typography>\r\n            </Grid>\r\n            <Grid item>\r\n              {!schedule && (\r\n                <Tooltip title=\"Доп. урок вне расписания\" aria-label=\"Доп. урок вне расписания\">\r\n                  <SpeedIcon />\r\n                </Tooltip>\r\n              )}\r\n            </Grid>\r\n          </Grid>\r\n        </CardContent>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nLessonCard.propTypes = {\r\n  time: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  address: PropTypes.string,\r\n  note: PropTypes.string,\r\n  theme: PropTypes.string.isRequired,\r\n  price: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default LessonCard;\r\n","import React from 'react';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nconst LessonFromTemplateInputs = () => {\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField margin=\"normal\" name=\"theme\" label=\"Тема\" autoComplete=\"off\" fullWidth />\r\n      <MyTextField margin=\"normal\" name=\"note\" label=\"Заметки\" autoComplete=\"off\" fullWidth />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default LessonFromTemplateInputs;\r\n","const formInitialValues = {\r\n  theme: '',\r\n  note: '',\r\n};\r\n\r\nexport default formInitialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup\r\n    .string('Введите тему урока')\r\n    .max(200, 'Слишком длинная тема, попробуйте сократить')\r\n    .required('Необходимо указать тему урока'),\r\n  notes: yup\r\n    .string('Для заметок')\r\n    .max(500, 'Заметка не может быть длиннее 500 символов')\r\n});\r\n\r\nexport default validationSchema;\r\n","import { db, auth } from '../../firebase';\r\nimport { updateSchedule } from './schedules';\r\nimport { addLesson } from './lessons';\r\nimport firebase from 'firebase/app';\r\n\r\nconst lessonFromTemplate = (lesson) => async (dispatch) => {\r\n  const batch = db.batch();\r\n\r\n  const lessonRef = db.doc(`/users/${auth.currentUser.uid}/lessons/${lesson.id}`);\r\n  batch.set(lessonRef, lesson);\r\n\r\n  const schRef = db.doc(`/users/${auth.currentUser.uid}/schedules/${lesson.schedule}/`);\r\n  batch.update(schRef, { lessons: firebase.firestore.FieldValue.arrayUnion(lesson.date) });\r\n  try {\r\n    await batch.commit();\r\n\r\n    dispatch(addLesson(lesson));\r\n    const schedule = await db\r\n      .doc(`/users/${auth.currentUser.uid}/schedules/${lesson.schedule}/`)\r\n      .get();\r\n    dispatch(updateSchedule(schedule.data()));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.error(e);\r\n    return Promise.reject('reject');\r\n  }\r\n};\r\n\r\nexport default lessonFromTemplate;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport uniqid from 'uniqid';\r\nimport { formatISO } from 'date-fns'\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport LessonFromTemplateInputs from './LessonFromTemplateInputs';\r\nimport formInitialValues from './formInitialValues';\r\nimport validationSchema from './validationSchema';\r\n\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport lessonFromTemplate from '../../redux/actions/lessonFromTemplate';\r\n\r\nfunction LessonFromTemplateForm({ width, open, handleClose, pupilId, scheduleId, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const schedule = useSelector(({ schedules }) => schedules.items[scheduleId]);\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  async function handleSubmit(values, actions) {\r\n    let test = Object.entries(values).filter(([key, value]) => {\r\n      if (typeof value === 'string') return value.trim();\r\n      return true;\r\n    });\r\n    test = Object.fromEntries(test);\r\n\r\n    const lesson = {\r\n      id: uniqid(),\r\n      date: formatISO(date, {representation: 'date'}),\r\n      time: schedule.time,\r\n      schedule: scheduleId,\r\n      pupil: pupilId,\r\n      subject: schedule.subject,\r\n      price: schedule.price,\r\n      timestamp: Date.now(),\r\n      ...test,\r\n    };\r\n\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n\r\n    await dispatch(lessonFromTemplate(lesson));\r\n    dispatch(fetchScheduledLessons(date));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <LessonFromTemplateInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(LessonFromTemplateForm);\r\n","const initialValues = ({ day, time, subject, price = 0 }) => ({\r\n  day,\r\n  time,\r\n  subject,\r\n  price,\r\n});\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst MAX_LESSON_PAY = 999999;\r\n\r\nconst validationSchema = yup.object().shape({\r\n  day: yup\r\n    .mixed()\r\n    .oneOf(['1', '2', '3', '4', '5', '6', '7'])\r\n    .typeError('День занятия указан неверно')\r\n    .required('Укажите день занятия'),\r\n  time: yup\r\n    .string('Введите время занятия')\r\n    .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Введите время занятия в формате: \"17:00\"')\r\n    .max(5, 'Это поле не может быть длиннее пяти символов')\r\n    .required('Введите время занятия'),\r\n  price: yup\r\n    .number('Укажите стоимость занятия')\r\n    .typeError('Лучше ввести число')\r\n    .min(0, 'Стоимость должна быть положительной')\r\n    .max(MAX_LESSON_PAY, 'Возможно вы ошиблись и занятие стоит не так дорого')\r\n    .required('Укажите стоимость занятия'),\r\n  subject: yup\r\n    .string()\r\n    .max(200, 'Слишком длинная строка, попробуйте сократить')\r\n    .typeError('Предмет должен быть строкой')\r\n    .required('Укажите ваш предмет'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\n\r\nimport { Grid, FormControl, InputLabel, MenuItem } from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\n\r\nimport { MyTextField, MySelect } from '../CustomInputs';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst days = {\r\n  1: 'Понедельник',\r\n  2: 'Вторник',\r\n  3: 'Среда',\r\n  4: 'Четверг',\r\n  5: 'Пятница',\r\n  6: 'Суббота',\r\n  7: 'Воскресенье',\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nfunction AddScheduleInputs() {\r\n  const business = useSelector(({ user }) => user.business);\r\n  \r\n  return (\r\n    <React.Fragment>\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={12} sm={6}>\r\n          <FormControl fullWidth>\r\n            <InputLabel id=\"pupil-form__select-label\">День занятия</InputLabel>\r\n            <MySelect\r\n              labelId=\"pupil-form__select-label\"\r\n              name=\"day\"\r\n              MenuProps={menuProps}\r\n              IconComponent={iconComponent}>\r\n              {Object.keys(days).map((key) => (\r\n                <MenuItem key={key} value={key}>\r\n                  {days[key]}\r\n                </MenuItem>\r\n              ))}\r\n            </MySelect>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            margin=\"none\"\r\n            name=\"time\"\r\n            type=\"time\"\r\n            label=\"Время занятия\"\r\n            inputProps={{\r\n              step: 300, // 5 min\r\n            }}\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n      {business && (\r\n        <MyTextField\r\n          margin=\"normal\"\r\n          name=\"price\"\r\n          type=\"number\"\r\n          label=\"Стоимость занятия\"\r\n          autoComplete=\"off\"\r\n          fullWidth\r\n        />\r\n      )}\r\n      <MyTextField margin=\"normal\" name=\"subject\" label=\"Предмет\" autoComplete=\"off\" fullWidth />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default AddScheduleInputs;\r\n","import React from 'react';\r\nimport AddScheduleInputs from '../addScheduleForm/AddScheduleInputs';\r\n\r\nfunction EditScheduleFormInputs() {\r\n  return <AddScheduleInputs />;\r\n}\r\n\r\nexport default EditScheduleFormInputs;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from '../addScheduleForm/validationSchema';\r\nimport EditScheduleFormInputs from './EditScheduleFormInputs';\r\nimport { updateScheduleAction } from '../../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\n\r\nfunction EditScheduleForm({ open, width, id, handleClose, day, time, subject, price }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  async function handleSubmit(values, actions) {\r\n    actions.setSubmitting(false);\r\n    handleClose();\r\n    await dispatch(\r\n      updateScheduleAction(id, {\r\n        time: values.time,\r\n        day: +values.day,\r\n        subject: values.subject,\r\n        price: +values.price,\r\n      }),\r\n    );\r\n    dispatch(fetchScheduledLessons(date));\r\n  }\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues({ day: `${day}`, time, subject, price })}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <EditScheduleFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(EditScheduleForm);\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\nimport firebase from 'firebase/app';\r\n\r\nexport const fetchPupils = () => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n\r\n    const pupils = await retrievePupils();\r\n\r\n    dispatch(setPupils(pupils));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nasync function retrievePupils() {\r\n  let retrievedPupils = {};\r\n  const pupilsSnapshot = await db.collection(`/users/${auth.currentUser.uid}/pupils/`).get();\r\n  pupilsSnapshot.forEach(\r\n    (pupilDoc) => (retrievedPupils = { ...retrievedPupils, [pupilDoc.id]: pupilDoc.data() }),\r\n  );\r\n\r\n  return retrievedPupils;\r\n}\r\n\r\nexport const postPupil = ({ id, ...data }) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/pupils/${id}/`).set({ id, ...data });\r\n    dispatch(addPupil({ id, ...data }));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nexport const pullScheduleFromPupil = (pupilId, scheduleId) => async (dispatch) => {\r\n  try {\r\n    await db\r\n      .doc(`/users/${auth.currentUser.uid}/pupils/${pupilId}/`)\r\n      .update({ schedulesId: firebase.firestore.FieldValue.arrayRemove(scheduleId) });\r\n    const pupil = await db.doc(`/users/${auth.currentUser.uid}/pupils/${pupilId}/`).get();\r\n    dispatch(updatePupil(pupil.data()));\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nexport const pushScheduleToPupil = (pupilId, scheduleId) => async (dispatch) => {\r\n  try {\r\n    await db\r\n      .doc(`/users/${auth.currentUser.uid}/pupils/${pupilId}/`)\r\n      .update({ schedulesId: firebase.firestore.FieldValue.arrayUnion(scheduleId) });\r\n    const pupil = await db.doc(`/users/${auth.currentUser.uid}/pupils/${pupilId}/`).get();\r\n    dispatch(updatePupil(pupil.data()));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.error(e);\r\n    return Promise.resolve('reject');\r\n  }\r\n};\r\n\r\n// delete all empty fields\r\nexport const updatePupilAction = (id, data) => async (dispatch) => {\r\n  let test = Object.entries(data).map(([key, value]) => {\r\n    if (typeof value === 'string')\r\n      if (value.trim()) return [key, value];\r\n      else return [key, firebase.firestore.FieldValue.delete()];\r\n    if (typeof value === 'number')\r\n      if (value) return [key, value];\r\n      else return [key, firebase.firestore.FieldValue.delete()];\r\n\r\n    return [key, value];\r\n  });\r\n\r\n  test = Object.fromEntries(test);\r\n  test.parents = test.parents\r\n    .filter((parent) => parent.person || parent.contact)\r\n    .map((parent) => ({ person: parent.person, contact: parent.contact }));\r\n\r\n  if (!test.parents.length) test.parents = firebase.firestore.FieldValue.delete();\r\n\r\n  try {\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/pupils/${id}/`).update(test);\r\n    const pupil = await db.doc(`/users/${auth.currentUser.uid}/pupils/${id}/`).get();\r\n    dispatch(updatePupil(pupil.data()));\r\n  } catch (e) {\r\n    console.error(e);\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: true });\r\n  }\r\n};\r\n\r\nexport const deletePupilAction = (id) => async (dispatch) => {\r\n  try {\r\n    dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n    await db.doc(`/users/${auth.currentUser.uid}/pupils/${id}/`).delete();\r\n    dispatch(deletePupil(id));\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n};\r\n\r\nexport const setPupils = (items) => ({\r\n  type: 'SET_PUPILS',\r\n  payload: items,\r\n});\r\n\r\nexport const addPupil = (data) => ({\r\n  type: 'ADD_PUPIL',\r\n  payload: data,\r\n});\r\n\r\nexport const deletePupil = (id) => ({\r\n  type: 'DELETE_PUPIL',\r\n  payload: id,\r\n});\r\n\r\nexport const updatePupil = (pupil) => ({\r\n  type: 'UPDATE_PUPIL',\r\n  payload: pupil,\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { Dialog, DialogTitle, DialogContent, Button } from '@material-ui/core';\r\n\r\nimport LessonFromTemplateForm from '../lessonFromTemplateForm/LessonFromTemplateForm';\r\nimport EditScheduleForm from '../editScheduleForm/EditScheduleForm';\r\nimport { deleteScheduleAction } from '../../redux/actions/schedules';\r\nimport { fetchLessons, deleteLessonsBySmth } from '../../redux/actions/lessons';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport { pullScheduleFromPupil } from '../../redux/actions/pupils';\r\n\r\nfunction LessonTemplateCard({\r\n  time,\r\n  pupil,\r\n  id,\r\n  subject,\r\n  name,\r\n  day,\r\n  address,\r\n  price = 0,\r\n  handleCreateSnack,\r\n  handleDeleteSnack,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [viewDeleteConsentDialog, setViewDeleteConsentDialog] = React.useState(false);\r\n  const [viewForm, setViewForm] = React.useState(false);\r\n  const [viewEditScheduleForm, setViewEditScheduleForm] = React.useState(false);\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n\r\n  const handleCloseForm = () => setViewForm(false);\r\n  const handleOpenForm = () => setViewForm(true);\r\n\r\n  const handleCloseEditScheduleForm = () => setViewEditScheduleForm(false);\r\n\r\n  async function handleDeleteSchedule() {\r\n    await Promise.all([\r\n      dispatch(deleteLessonsBySmth({ field: 'schedule', id })),\r\n      dispatch(deleteScheduleAction(id)),\r\n      dispatch(pullScheduleFromPupil(pupil, id)),\r\n    ]);\r\n    handleDeleteSnack(true);\r\n    dispatch(fetchLessons(date));\r\n    dispatch(fetchScheduledLessons(date));\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <LessonFromTemplateForm\r\n        open={viewForm}\r\n        pupilId={pupil}\r\n        scheduleId={id}\r\n        handleClose={handleCloseForm}\r\n        handleSnack={handleCreateSnack}\r\n      />\r\n      <EditScheduleForm\r\n        open={viewEditScheduleForm}\r\n        handleClose={handleCloseEditScheduleForm}\r\n        id={id}\r\n        time={time}\r\n        subject={subject}\r\n        day={day}\r\n        price={price}\r\n      />\r\n\r\n      <Dialog\r\n        open={viewDeleteConsentDialog}\r\n        onClose={() => setViewDeleteConsentDialog(false)}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        maxWidth=\"sm\">\r\n        <DialogTitle>Удаление шаблона приведет к удалению всех его уроков. Вы уверены?</DialogTitle>\r\n        <DialogContent className=\"lesson-form__dialog-content\">\r\n          <Box className=\"lesson-form__controls\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              style={{ fontWeight: '600' }}\r\n              onClick={() => setViewDeleteConsentDialog(false)}>\r\n              Закрыть\r\n            </Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              style={{ fontWeight: '600', backgroundColor: 'red' }}\r\n              onClick={handleDeleteSchedule}>\r\n              Подтвердить\r\n            </Button>\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Card className=\"lesson__container lesson__container--template\">\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          getContentAnchorEl={null}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}>\r\n          <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n            <MenuItem onClick={handleOpenForm}>Добавить урок из шаблона</MenuItem>\r\n            <MenuItem onClick={() => setViewEditScheduleForm(true)}>Редактировать шаблон</MenuItem>\r\n            <MenuItem onClick={() => setViewDeleteConsentDialog(true)}>\r\n              Удалить этот шаблон с уроками\r\n            </MenuItem>\r\n          </MenuList>\r\n        </Menu>\r\n        <CardContent>\r\n          <Box className=\"lesson__header\">\r\n            <Typography gutterBottom variant=\"h5\" className=\"lesson__header-text\">\r\n              {time} {subject} (шаблон урока)\r\n            </Typography>\r\n            <IconButton aria-label=\"menu\" className=\"lesson__header-more\" onClick={handleClick}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          </Box>\r\n          <Typography variant=\"h5\" color=\"textPrimary\" className=\"lesson__theme\" component=\"p\">\r\n            Введите тему урока, открыв меню справа\r\n          </Typography>\r\n          <Typography variant=\"subtitle2\" color=\"textPrimary\" component=\"p\">\r\n            {name}, {address}\r\n          </Typography>\r\n        </CardContent>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nLessonTemplateCard.propTypes = {\r\n  time: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  subject: PropTypes.string.isRequired,\r\n  address: PropTypes.string,\r\n  pupil: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LessonTemplateCard;\r\n","const tzoffset = new Date().getTimezoneOffset() * 60000;\r\nconst localISOTime = new Date(Date.now() - tzoffset).toISOString().slice(0, 10);\r\n\r\nconst formInitialValues = {\r\n  theme: '',\r\n  pupil: '',\r\n  subject: '',\r\n  note: '',\r\n  date: localISOTime,\r\n  time: '15:00',\r\n  price: 0,\r\n};\r\n\r\nexport default formInitialValues;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport uniqid from 'uniqid';\r\nimport { formatISO } from 'date-fns';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport AddLessonInputs from './AddLessonInputs';\r\nimport formInitialValues from './formInitialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { postLesson } from '../../redux/actions/lessons';\r\n\r\nfunction AddLessonForm({ width, open, handleClose, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n  formInitialValues.date = formatISO(date, { representation: 'date' });\r\n\r\n  function handleSubmit({ price = 0, ...values }, actions) {\r\n    let test = Object.entries(values).filter(([key, value]) => {\r\n      if (typeof value === 'string') return value.trim();\r\n      return true;\r\n    });\r\n    test = Object.fromEntries(test);\r\n\r\n    const lesson = {\r\n      id: uniqid(),\r\n      schedule: null,\r\n      price,\r\n      timestamp: Date.now(),\r\n      ...test,\r\n    };\r\n    handleSnack(true);\r\n    handleClose();\r\n    actions.setSubmitting(false);\r\n    dispatch(postLesson(lesson));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <AddLessonInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddLessonForm);\r\n","import React from 'react';\r\nimport { IconButton, Snackbar, Button } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Grow from '@material-ui/core/Grow';\r\n\r\nfunction SnackPopup({ open, message, onClose }) {\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'center',\r\n      }}\r\n      open={open}\r\n      message={message}\r\n      TransitionComponent={Grow}\r\n      autoHideDuration={3000}\r\n      onClose={onClose}\r\n      action={\r\n        <React.Fragment>\r\n          <Button color=\"secondary\" size=\"small\">\r\n            Отменить\r\n          </Button>\r\n          <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\">\r\n            <CloseIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </React.Fragment>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default React.memo(SnackPopup);\r\n","import React, { useCallback } from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport Box from '@material-ui/core/Box';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport Calendar from '../Calendar';\r\nimport LessonCard from './LessonCard';\r\nimport LessonTemplateCard from './LessonTemplateCard';\r\nimport AddLessonForm from '../addLessonForm/AddLessonForm';\r\nimport SnackPopup from '../SnackPopup';\r\n\r\nfunction Lessons({ anchor, handleCalendarOpen, handleCalendarClose, handleCalendarClick }) {\r\n  const lessons = useSelector(({ lessons }) => lessons.items);\r\n  const lessonsLoaded = useSelector(({ lessons }) => lessons.isLoaded);\r\n\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const pupilsLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n\r\n  const scheduledLessons = useSelector(({ scheduledLessons }) => scheduledLessons.items);\r\n  const scheduledLessonsLoaded = useSelector(({ scheduledLessons }) => scheduledLessons.isLoaded);\r\n\r\n  const isLoaded = lessonsLoaded && pupilsLoaded && scheduledLessonsLoaded;\r\n\r\n  const [viewAddLessonForm, setViewAddLessonForm] = React.useState(false);\r\n  const [snackAddLessonView, setSnackAddLessonView] = React.useState(false);\r\n  const [snackFromTemplateView, setSnackFromTemplateView] = React.useState(false);\r\n  const [snackNotesView, setSnackNotesView] = React.useState(false);\r\n  const [snackDeleteLesson, setSnackDeleteLesson] = React.useState(false);\r\n  const [snackDeleteSchedule, setSnackDeleteSchedule] = React.useState(false);\r\n  const [snackLessonThemeEdit, setSnackLessonThemeEdit] = React.useState(false);\r\n  const [snackLessonEdit, setSnackLessonEdit] = React.useState(false);\r\n\r\n  const calendar = React.useRef(null);\r\n\r\n  const handleAddLessonFormClick = () => setViewAddLessonForm(true);\r\n  const handleCloseAddLessonForm = () => setViewAddLessonForm(false);\r\n\r\n  const handleSnackAddLessonView = React.useCallback(() => setSnackAddLessonView(false), []);\r\n  const handleSnackFromTempalateView = React.useCallback(() => setSnackFromTemplateView(false), []);\r\n  const handleSnackNotesView = React.useCallback(() => setSnackNotesView(false), []);\r\n  const handleSnackDeleteLesson = React.useCallback(() => setSnackDeleteLesson(false), []);\r\n  const handleSnackDeleteSchedule = React.useCallback(() => setSnackDeleteSchedule(false), []);\r\n  const handleSnackLessonThemeEdit = React.useCallback(() => setSnackLessonThemeEdit(false), []);\r\n  const handleSnackLessonEdit = React.useCallback(() => setSnackLessonEdit(false), []);\r\n\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h5\" className=\"lessons__header\">\r\n        Уроки\r\n      </Typography>\r\n\r\n      <Box className=\"lessons__buttons-container\">\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          startIcon={<AddIcon />}\r\n          className=\"lessons__button-text\"\r\n          onClick={handleAddLessonFormClick}>\r\n          Новый урок\r\n        </Button>\r\n        <Hidden mdUp>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={handleCalendarOpen}\r\n            startIcon={<CalendarTodayIcon />}\r\n            className=\"lessons__button-text\">\r\n            Выбрать день\r\n          </Button>\r\n          <Menu\r\n            id=\"simple-menu\"\r\n            anchorEl={anchor}\r\n            keepMounted\r\n            getContentAnchorEl={null}\r\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n            transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n            open={Boolean(anchor)}\r\n            onClose={handleCalendarClose}>\r\n            <Calendar ref={calendar} handleClick={handleCalendarClick} />\r\n          </Menu>\r\n        </Hidden>\r\n      </Box>\r\n\r\n      <AddLessonForm\r\n        open={viewAddLessonForm}\r\n        handleClose={handleCloseAddLessonForm}\r\n        handleSnack={setSnackAddLessonView}\r\n      />\r\n\r\n      <SnackPopup\r\n        open={snackAddLessonView}\r\n        message=\"Урок добавлен\"\r\n        onClose={handleSnackAddLessonView}\r\n      />\r\n      <SnackPopup\r\n        open={snackFromTemplateView}\r\n        message=\"Урок из шаблона добавлен\"\r\n        onClose={handleSnackFromTempalateView}\r\n      />\r\n      <SnackPopup open={snackNotesView} message=\"Заметка изменена\" onClose={handleSnackNotesView} />\r\n      <SnackPopup\r\n        open={snackDeleteLesson}\r\n        message=\"Урок удален\"\r\n        onClose={handleSnackDeleteLesson}\r\n      />\r\n      <SnackPopup\r\n        open={snackDeleteSchedule}\r\n        message=\"Шаблон удален\"\r\n        onClose={handleSnackDeleteSchedule}\r\n      />\r\n      <SnackPopup\r\n        open={snackLessonThemeEdit}\r\n        message=\"Тема изменена\"\r\n        onClose={handleSnackLessonThemeEdit}\r\n      />\r\n      <SnackPopup\r\n        open={snackLessonEdit}\r\n        message=\"Внеплановый урок изменен\"\r\n        onClose={handleSnackLessonEdit}\r\n      />\r\n\r\n      <Container className=\"lessons__items-container\">\r\n        {isLoaded ? (\r\n          <React.Fragment>\r\n            {Object.entries(lessons).map(([key, value]) => (\r\n              <LessonCard\r\n                key={key}\r\n                name={pupils[value.pupil].name}\r\n                address={pupils[value.pupil].address}\r\n                handleSnack={setSnackNotesView}\r\n                handleDeleteSnack={setSnackDeleteLesson}\r\n                handleLessonThemeEditSnack={setSnackLessonThemeEdit}\r\n                handleSnackLessonEdit={setSnackLessonEdit}\r\n                {...value}\r\n              />\r\n            ))}\r\n            {Object.entries(scheduledLessons).map(([key, value]) => {\r\n              return (\r\n                <LessonTemplateCard\r\n                  key={key}\r\n                  pupilId={pupils[value.pupil].id}\r\n                  name={pupils[value.pupil].name}\r\n                  address={pupils[value.pupil].address}\r\n                  handleCreateSnack={setSnackFromTemplateView}\r\n                  handleDeleteSnack={setSnackDeleteSchedule}\r\n                  {...value}\r\n                />\r\n              );\r\n            })}\r\n            {!(Object.keys(lessons).length || Object.keys(scheduledLessons).length) ? (\r\n              <Typography>На текущий день уроков не запланировано</Typography>\r\n            ) : null}\r\n          </React.Fragment>\r\n        ) : (\r\n          Array(4)\r\n            .fill(0)\r\n            .map((_, index) => (\r\n              <Skeleton key={index} variant=\"rect\" className=\"lessons__skeleton\" />\r\n            ))\r\n        )}\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Lessons;\r\n","import React from 'react';\r\n\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nfunction MenuItem({ children, name, to, handleDrawer }) {\r\n  return (\r\n    <ListItem\r\n      button\r\n      className=\"menu__button menu__button--center\"\r\n      component={NavLink}\r\n      to={to}\r\n      onClick={handleDrawer}>\r\n      <ListItemIcon className=\"menu--center\">{children}</ListItemIcon>\r\n      <ListItemText primary={name} />\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nexport default MenuItem;\r\n","import React from 'react';\r\nimport { auth } from '../firebase';\r\nimport firebase from 'firebase/app';\r\n\r\nimport { LoadingScreen } from '../components';\r\n\r\nauth.languageCode = 'ru';\r\nexport const AuthContext = React.createContext();\r\n\r\nfunction AuthProvider({ children }) {\r\n  const [currentUser, setCurrentUser] = React.useState(null);\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [firstLogin, setFirstLogin] = React.useState(false);\r\n  const [userName, setUserName] = React.useState('');\r\n\r\n  React.useEffect(() => {\r\n    currentUser && setUserName(currentUser.displayName);\r\n  }, [currentUser]);\r\n\r\n  const signup = (email, password) => auth.createUserWithEmailAndPassword(email, password);\r\n  const login = (email, password) => auth.signInWithEmailAndPassword(email, password);\r\n  const updateUser = (name) => {\r\n    auth.currentUser.updateProfile({ displayName: name });\r\n    setUserName(name);\r\n  };\r\n  const updateEmail = (email) => auth.currentUser.updateEmail(email);\r\n  const updatePassword = (password) => auth.currentUser.updatePassword(password);\r\n  const signout = () => auth.signOut();\r\n\r\n  const verifyEmail = (user) =>\r\n    user.sendEmailVerification({\r\n      url:\r\n        !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\r\n          ? 'https://localhost:3000/schedule/'\r\n          : 'https://pampush.github.io/tutor/',\r\n      handleCodeInApp: true,\r\n    });\r\n\r\n  const verifyBeforeUpdateEmail = (email) =>\r\n    auth.currentUser.verifyBeforeUpdateEmail(email, {\r\n      url:\r\n        !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\r\n          ? 'https://localhost:3000/schedule/'\r\n          : 'https://pampush.github.io/tutor/',\r\n      handleCodeInApp: true,\r\n    });\r\n\r\n  const reAuth = (password) => {\r\n    const authCredential = firebase.auth.EmailAuthProvider.credential(currentUser.email, password);\r\n    return auth.currentUser.reauthenticateWithCredential(authCredential);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        user.getIdTokenResult().then((res) => {\r\n          // force token refresh on first login\r\n          // https://github.com/firebase/firebase-js-sdk/issues/2529\r\n          if (res.authTime === user.metadata.creationTime) {\r\n            user.getIdToken(true);\r\n            if (document.referrer === 'https://tutor-49686.firebaseapp.com/') setFirstLogin(true);\r\n          }\r\n        });\r\n\r\n        setCurrentUser(user);\r\n        setLoading(false);\r\n      } else {\r\n        setCurrentUser(user);\r\n        setLoading(false);\r\n      }\r\n    });\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const value = {\r\n    currentUser,\r\n    userName,\r\n    signup,\r\n    login,\r\n    verifyEmail,\r\n    updateUser,\r\n    verifyBeforeUpdateEmail,\r\n    signout,\r\n    updateEmail,\r\n    updatePassword,\r\n    firstLogin,\r\n    setFirstLogin,\r\n    reAuth,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading ? children : <LoadingScreen open={loading} />}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport { AuthProvider };\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport { AuthContext } from '../../contexts/AuthContext';\r\n\r\nfunction MenuHeader() {\r\n  //const name = useSelector(({ user }) => user.name);\r\n  const { userName } = React.useContext(AuthContext);\r\n  return (\r\n    <Grid container className=\"menu__header\">\r\n      <Grid item xs={8} className=\"menu__avatar\">\r\n        <AccountCircleIcon />\r\n      </Grid>\r\n      <Grid item xs={4} className=\"menu__button menu__settings\" component={NavLink} to=\"/settings\">\r\n        <IconButton>\r\n          <SettingsIcon />\r\n        </IconButton>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <Typography variant=\"h5\">{userName}</Typography>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default MenuHeader;\r\n","import List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\n\r\nimport React from 'react';\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader';\r\nimport { useSelector } from 'react-redux';\r\n\r\nfunction MenuLgDrawer() {\r\n  const business = useSelector(({ user }) => user.business);\r\n\r\n  return (\r\n    <Drawer variant=\"permanent\" anchor=\"left\">\r\n      <List className={'menu__list'}>\r\n        <ListItem>\r\n          <MenuHeader />\r\n        </ListItem>\r\n\r\n        <Divider />\r\n\r\n        <Box className=\"menu__nav-container\">\r\n          <MenuItem open={false} name=\"Расписание\" to=\"/schedule\">\r\n            <CalendarTodayIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={false} name=\"Ученики\" to=\"/pupils\">\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          {business && (\r\n            <MenuItem open={false} name=\"Финансы\" to=\"finance\">\r\n              <ShowChartIcon className=\"menu--svg\" />\r\n            </MenuItem>\r\n          )}\r\n          <MenuItem open={false} name=\"Домашняя работа\" to=\"/homework\">\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n        </Box>\r\n      </List>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nexport default MenuLgDrawer;\r\n","import React from 'react';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader';\r\nimport { useSelector } from 'react-redux';\r\n\r\nfunction MenuControls({ handleDrawer }) {\r\n  const business = useSelector(({ user }) => user.business);\r\n  return (\r\n    <Box className=\"menu__nav-container\">\r\n      <MenuItem handleDrawer={() => handleDrawer(false)} name=\"Расписание\" to=\"/schedule\">\r\n        <CalendarTodayIcon className=\"menu--svg\" />\r\n      </MenuItem>\r\n      <MenuItem handleDrawer={() => handleDrawer(false)} name=\"Ученики\" to=\"/pupils\">\r\n        <FaceIcon className=\"menu--svg\" />\r\n      </MenuItem>\r\n      {business && (\r\n        <MenuItem handleDrawer={() => handleDrawer(false)} name=\"Финансы\" to=\"/finance\">\r\n          <ShowChartIcon className=\"menu--svg\" />\r\n        </MenuItem>\r\n      )}\r\n      <MenuItem handleDrawer={() => handleDrawer(false)} name=\"Домашняя работа\" to=\"/homework\">\r\n        <FaceIcon className=\"menu--svg\" />\r\n      </MenuItem>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction MenuMdDrawer() {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleDrawer = () => setOpen((prev) => !prev);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Drawer variant=\"permanent\" anchor=\"left\">\r\n        <List className=\"menu__list\">\r\n          <ListItem button className=\"menu--center\" onClick={handleDrawer}>\r\n            <ListItemIcon className=\"menu--center\">\r\n              <MenuIcon className=\"menu--svg\" />\r\n            </ListItemIcon>\r\n          </ListItem>\r\n\r\n          <Divider />\r\n          <MenuControls open={false} handleDrawer={() => {}} />\r\n        </List>\r\n      </Drawer>\r\n      <Drawer variant=\"temporary\" anchor=\"left\" open={open} onClose={handleDrawer}>\r\n        <List className=\"menu__list--opened\">\r\n          <ListItem button onClick={handleDrawer}>\r\n            <ListItemIcon className=\"menu--center\">\r\n              <MenuIcon className=\"menu--svg\" />\r\n            </ListItemIcon>\r\n          </ListItem>\r\n\r\n          <ListItem>\r\n            <MenuHeader />\r\n          </ListItem>\r\n\r\n          <Divider />\r\n          <MenuControls handleDrawer={setOpen} />\r\n        </List>\r\n      </Drawer>\r\n      )\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default MenuMdDrawer;\r\n","import List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\n\r\nimport React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader';\r\n\r\nconst useStyles = makeStyles({\r\n  drawerPaper: {\r\n    position: 'fixed',\r\n    top: 'auto',\r\n  },\r\n});\r\n\r\nfunction MenuSmDrawer() {\r\n  const [open, setOpen] = React.useState(false);\r\n  const business = useSelector(({ user }) => user.business);\r\n\r\n  const handleDrawer = () => setOpen((prev) => !prev);\r\n\r\n  const classes = useStyles();\r\n  return (\r\n    <React.Fragment>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton edge=\"start\" color=\"inherit\" aria-label=\"open drawer\" onClick={handleDrawer}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      <Drawer\r\n        variant=\"temporary\"\r\n        open={open}\r\n        onClose={handleDrawer}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}>\r\n        <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <IconButton\r\n              edge=\"start\"\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              onClick={handleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <List className={'menu__list--opened'}>\r\n          <ListItem>\r\n            <MenuHeader />\r\n          </ListItem>\r\n\r\n          <MenuItem name=\"Расписание\" to=\"/schedule\" handleDrawer={() => setOpen(false)}>\r\n            <CalendarTodayIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem name=\"Ученики\" to=\"/pupils\" handleDrawer={() => setOpen(false)}>\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          {business && (\r\n            <MenuItem name=\"Финансы\" to=\"/finance\" handleDrawer={() => setOpen(false)}>\r\n              <ShowChartIcon className=\"menu--svg\" />\r\n            </MenuItem>\r\n          )}\r\n          <MenuItem name=\"Домашняя работа\" to=\"/homework\" handleDrawer={() => setOpen(false)}>\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n        </List>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default MenuSmDrawer;\r\n","import React from 'react';\r\nimport Hidden from '@material-ui/core/Hidden';\r\n\r\nimport MenuLgDrawer from './MenuLgDrawer';\r\nimport MenuMdDrawer from './MenuMdDrawer';\r\nimport MenuSmDrawer from './MenuSmDrawer';\r\n\r\nconst Menu = () => {\r\n  return (\r\n    <React.Fragment>\r\n      <Hidden smUp>\r\n        <MenuSmDrawer />\r\n      </Hidden>\r\n      <Hidden only={['xs', 'lg', 'xl']}>\r\n        <MenuMdDrawer />\r\n      </Hidden>\r\n      <Hidden mdDown>\r\n        <MenuLgDrawer />\r\n      </Hidden>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","const initialValues = {\r\n  day: '',\r\n  time: '15:00',\r\n  price: 0,\r\n  subject: '',\r\n};\r\n\r\nexport default initialValues;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport uniqid from 'uniqid';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport AddScheduleInputs from './AddScheduleInputs';\r\nimport { postSchedule } from '../../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport { pushScheduleToPupil } from '../../redux/actions/pupils';\r\n\r\nfunction AddScheduleForm({ open, id, handleClose, width, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n  async function handleSubmit({ price = 0, ...values }, actions) {\r\n    const schedule = {\r\n      id: uniqid(),\r\n      day: +values.day,\r\n      lessons: [],\r\n      price,\r\n      pupil: id,\r\n      subject: values.subject,\r\n      time: values.time,\r\n      timestamp: Date.now(),\r\n    };\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n    handleClose();\r\n    await Promise.all[\r\n      dispatch(postSchedule([schedule]), dispatch(pushScheduleToPupil(id, schedule.id)))\r\n    ];\r\n    dispatch(fetchScheduledLessons(date));\r\n  }\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <AddScheduleInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddScheduleForm);\r\n","const initialValues = ({ name, address, parents, grade }) => {\r\n  if (parents.length === 0) parents = [{ person: '', contact: '' }];\r\n  return {\r\n    name,\r\n    address,\r\n    parents,\r\n    grade,\r\n  };\r\n};\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst MAX_LESSON_PAY = 999999;\r\n\r\nconst validationSchema = [\r\n  yup.object().shape({\r\n    name: yup\r\n      .string('Укажите имя ученика')\r\n      .typeError('Имя должно быть строкой')\r\n      .max(100, 'Имя длиннее 100 символов?')\r\n      .required('Необходимо указать имя ученика'),\r\n    grade: yup // number?\r\n      .string('В каком классе ребенок учится?')\r\n      .typeError('Класс должен быть строкой')\r\n      .matches(/^([1-9]?|1[0-9])$/, 'Укажите класс от 1 до 11')\r\n      .max(2, 'Слишком большое значение, возможно вы ошиблись')\r\n      .required('Укажите класс, в котором учится ребенок'),\r\n    address: yup\r\n      .string('Укажите адрес')\r\n      .max(200, 'Попробуйте написать адрес короче')\r\n      .typeError('Адрес должен быть строкой'),\r\n\r\n    parents: yup.array().of(\r\n      yup.object().shape({\r\n        contact: yup\r\n          .string('Укажите телефонный номер')\r\n          .matches(/^[[0-9]+$/, 'Введите номер телефона')\r\n          .typeError('Номер должен быть строкой')\r\n          .max(20, 'Строка должна быть короче'),\r\n\r\n        person: yup\r\n          .string('Укажите информацию о родителе')\r\n          .max(100, 'Cтрока должна быть короче')\r\n          .typeError('Информация о родителе должна быть строкой'),\r\n      }),\r\n    ),\r\n  }),\r\n\r\n  yup.object().shape({\r\n    schedules: yup.array().of(\r\n      yup.object().shape({\r\n        day: yup\r\n          .mixed()\r\n          .oneOf(['1', '2', '3', '4', '5', '6', '7'])\r\n          .typeError('День занятия указан неверно')\r\n          .required('Укажите день занятия'),\r\n        time: yup\r\n          .string('Введите время занятия')\r\n          .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Введите время занятия в формате: \"17:00\"')\r\n          .max(5, 'Это поле не может быть длиннее пяти символов')\r\n          .required('Введите время занятия'),\r\n        price: yup\r\n          .number('Укажите стоимость занятия')\r\n          .typeError('Лучше ввести число')\r\n          .min(0, 'Стоимость должна быть положительной')\r\n          .max(MAX_LESSON_PAY, 'Возможно вы ошиблись и занятие стоит не так дорого')\r\n          .required('Укажите стоимость занятия'),\r\n        subject: yup\r\n          .string()\r\n          .max(300, 'Слишком длинная строка, попробуйте сократить')\r\n          .typeError('Предмет должен быть строкой')\r\n          .required('Укажите ваш предмет'),\r\n      }),\r\n    ),\r\n  }),\r\n];\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { FieldArray, useFormikContext } from 'formik';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nfunction AddPupilInputs() {\r\n  const { values } = useFormikContext();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField\r\n        autoFocus\r\n        margin=\"normal\"\r\n        name=\"name\"\r\n        label=\"Имя*\"\r\n        autoComplete=\"off\"\r\n        fullWidth\r\n      />\r\n      <MyTextField\r\n        margin=\"normal\"\r\n        name=\"grade\"\r\n        label=\"Класс*\"\r\n        type=\"number\"\r\n        InputProps={{\r\n          inputProps: { min: 1, max: 20 },\r\n        }}\r\n        autoComplete=\"off\"\r\n        fullWidth\r\n      />\r\n      <MyTextField margin=\"normal\" name=\"address\" label=\"Адрес\" autoComplete=\"off\" fullWidth />\r\n\r\n      <FieldArray name=\"parents\">\r\n        {({ insert, remove, push }) => (\r\n          <React.Fragment>\r\n            {values.parents.length > 0 &&\r\n              values.parents.map((contact, index) => (\r\n                <React.Fragment key={index}>\r\n                  <MyTextField\r\n                    margin=\"normal\"\r\n                    name={`parents[${index}].person`}\r\n                    label=\"Родитель\"\r\n                    autoComplete=\"off\"\r\n                    fullWidth\r\n                  />\r\n\r\n                  <MyTextField\r\n                    margin=\"normal\"\r\n                    name={`parents[${index}].contact`}\r\n                    label=\"Контакты\"\r\n                    autoComplete=\"off\"\r\n                    InputProps={{\r\n                      startAdornment: <InputAdornment position=\"start\">+7</InputAdornment>,\r\n                    }}\r\n                    fullWidth\r\n                  />\r\n\r\n                  {values.parents.length > 1 && (\r\n                    <Tooltip title=\"Удалить номер\">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\"Удалить номер\"\r\n                        className=\"pupil-form__btn\"\r\n                        color=\"secondary\"\r\n                        onClick={() => remove(index)}>\r\n                        <ClearIcon />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  )}\r\n                </React.Fragment>\r\n              ))}\r\n            {values.parents.length < 5 && (\r\n              <Tooltip title=\"Добавить номер\">\r\n                <IconButton\r\n                  size=\"small\"\r\n                  color=\"secondary\"\r\n                  aria-label=\"Добавить номер\"\r\n                  className=\"pupil-form__btn pupil-form__btn-add-contact\"\r\n                  onClick={() => push({ person: '', contact: '' })}>\r\n                  <AddIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            )}\r\n          </React.Fragment>\r\n        )}\r\n      </FieldArray>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default AddPupilInputs;\r\n","import React from 'react'\r\nimport AddPupilInputs from '../addPupilForm/AddPupilInputs'\r\n\r\nfunction EditPupilFormInputs() {\r\n  return (\r\n    <AddPupilInputs />\r\n  )\r\n}\r\n\r\nexport default EditPupilFormInputs\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from '../addPupilForm/validationSchema';\r\nimport EditPupilFormInputs from './EditPupilFormInputs';\r\nimport { updatePupilAction } from '../../redux/actions/pupils';\r\n\r\nfunction EditPupilForm({\r\n  width,\r\n  open,\r\n  handleClose,\r\n  handleSnack,\r\n  id,\r\n  name,\r\n  address,\r\n  parents,\r\n  grade,\r\n}) {\r\n  const dispatch = useDispatch();\r\n\r\n  function handleSubmit(values, actions) {\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n    dispatch(updatePupilAction(id, values));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues({ name, address, parents, grade })}\r\n          validationSchema={validationSchema[0]}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <EditPupilFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(React.memo(EditPupilForm));\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\r\nimport { Dialog, DialogContent, DialogTitle, Box, Button } from '@material-ui/core';\r\n\r\nimport { deleteLessonsBySmth, fetchLessons } from '../../redux/actions/lessons';\r\nimport { deletePupilAction } from '../../redux/actions/pupils';\r\nimport { deleteSchedulesByPupil, fetchSchedules } from '../../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport AddScheduleForm from '../addScheduleForm/AddScheduleForm';\r\nimport EditPupilForm from '../editPupilForm/EditPupilForm';\r\n\r\nconst days = ['Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота', 'Воскресенье'];\r\n\r\nfunction PupilCard({\r\n  id,\r\n  name,\r\n  schedulesId,\r\n  grade,\r\n  parents = [],\r\n  address = '',\r\n  schedules,\r\n  handleSnack,\r\n  handleViewEditPupilSnack,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [viewAddScheduleForm, setViewAddScheduleForm] = React.useState(false);\r\n  const [viewDeleteConsentDialog, setViewDeleteConsentDialog] = React.useState(false);\r\n  const [viewEditPupilForm, setViewEditPupilForm] = React.useState(false);\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  const [forParentsMemo, setForParentsMemo] = React.useState([]);\r\n  const parentsMemo = parents.length ? parents : forParentsMemo;\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n  const handleCloseEditPupilForm = React.useCallback(() => setViewEditPupilForm(false), []);\r\n\r\n  async function handleDelete() {\r\n    await Promise.all([\r\n      dispatch(deleteLessonsBySmth({ field: 'pupil', id })),\r\n      dispatch(deletePupilAction(id)),\r\n      dispatch(deleteSchedulesByPupil(id)),\r\n    ]);\r\n    dispatch(fetchLessons(date));\r\n    dispatch(fetchSchedules({ preventIsLoaded: true }));\r\n    dispatch(fetchScheduledLessons(date, { preventIsLoaded: true }));\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <AddScheduleForm\r\n        open={viewAddScheduleForm}\r\n        handleSnack={handleSnack}\r\n        handleClose={() => {\r\n          setViewAddScheduleForm(false);\r\n        }}\r\n        id={id}\r\n      />\r\n\r\n      <EditPupilForm\r\n        open={viewEditPupilForm}\r\n        handleClose={handleCloseEditPupilForm}\r\n        handleSnack={handleViewEditPupilSnack}\r\n        id={id}\r\n        name={name}\r\n        grade={grade}\r\n        parents={parentsMemo}\r\n        address={address}\r\n      />\r\n\r\n      <Dialog\r\n        open={viewDeleteConsentDialog}\r\n        onClose={() => setViewDeleteConsentDialog(false)}\r\n        aria-labelledby=\"form-dialog-title\"\r\n        maxWidth=\"sm\">\r\n        <DialogTitle>\r\n          Удаление ученика приведет к удалению всех его уроков и шаблонов. Вы уверены?\r\n        </DialogTitle>\r\n        <DialogContent className=\"lesson-form__dialog-content\">\r\n          <Box className=\"lesson-form__controls\">\r\n            <Button\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              style={{ fontWeight: '600' }}\r\n              onClick={() => setViewDeleteConsentDialog(false)}>\r\n              Закрыть\r\n            </Button>\r\n            <Button\r\n              variant=\"contained\"\r\n              style={{ fontWeight: '600', backgroundColor: 'red' }}\r\n              onClick={handleDelete}>\r\n              Подтвердить\r\n            </Button>\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n\r\n      <Card className=\"pupils__card\">\r\n        <CardHeader\r\n          className=\"pupils__card-header\"\r\n          avatar={\r\n            <Avatar aria-label=\"pupil\" className=\"pupils__card-avatar\">\r\n              R\r\n            </Avatar>\r\n          }\r\n          action={\r\n            <IconButton aria-label=\"Меню\" onClick={handleClick}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          }\r\n          title={name}\r\n          subheader={`Класс: ${grade}`}\r\n        />\r\n\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          getContentAnchorEl={null}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}>\r\n          <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n            <MenuItem onClick={() => setViewAddScheduleForm(true)}>\r\n              Добавить пункт расписания\r\n            </MenuItem>\r\n            <MenuItem onClick={() => setViewEditPupilForm(true)}>Редактировать</MenuItem>\r\n            <MenuItem onClick={() => setViewDeleteConsentDialog(true)}>Удалить</MenuItem>\r\n          </MenuList>\r\n        </Menu>\r\n\r\n        <CardContent className=\"pupils__card-content\">\r\n          <Typography component=\"p\">\r\n            {schedulesId.map((id) => `${days[schedules[id].day - 1]}-${schedules[id].time} `)}\r\n          </Typography>\r\n          {parents.map((parent, i) => (\r\n            <Typography component=\"p\" key={i}>\r\n              {parent.person}: {parent.contact}\r\n            </Typography>\r\n          ))}\r\n          <Typography component=\"p\">{address && `Адрес: ${address}`}</Typography>\r\n        </CardContent>\r\n        <CardActions className=\"pupils__homework\">\r\n          <IconButton color=\"secondary\" aria-label=\"Домашняя работа\">\r\n            <MenuBookIcon aria-label=\"homework\" />\r\n          </IconButton>\r\n        </CardActions>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nPupilCard.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  schedulesId: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n  schedules: PropTypes.object.isRequired,\r\n  grade: PropTypes.number.isRequired,\r\n  parents: PropTypes.PropTypes.arrayOf(PropTypes.object),\r\n  address: PropTypes.string,\r\n};\r\n\r\nexport default PupilCard;\r\n","import React from 'react';\r\nimport { FieldArray, useFormikContext } from 'formik';\r\n\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport { MyTextField, MySelect } from '../CustomInputs';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nconst days = {\r\n  1: 'Понедельник',\r\n  2: 'Вторник',\r\n  3: 'Среда',\r\n  4: 'Четверг',\r\n  5: 'Пятница',\r\n  6: 'Суббота',\r\n  7: 'Воскресенье',\r\n};\r\n\r\nfunction AddScheduleInputs() {\r\n  const business = useSelector(({ user }) => user.business);\r\n  const { values } = useFormikContext();\r\n  return (\r\n    <FieldArray name=\"schedules\">\r\n      {({ insert, remove, push }) => (\r\n        <React.Fragment>\r\n          {values.schedules.length > 0 &&\r\n            values.schedules.map((schedule, index) => (\r\n              <React.Fragment key={index}>\r\n                <Grid container spacing={4}>\r\n                  <Grid item xs={12} sm={6}>\r\n                    <FormControl fullWidth>\r\n                      <InputLabel id=\"pupil-form__select-label\">День занятия*</InputLabel>\r\n                      <MySelect\r\n                        labelId=\"pupil-form__select-label\"\r\n                        name={`schedules[${index}].day`}\r\n                        MenuProps={menuProps}\r\n                        IconComponent={iconComponent}>\r\n                        {Object.keys(days).map((key) => (\r\n                          <MenuItem key={key} value={key}>\r\n                            {days[key]}\r\n                          </MenuItem>\r\n                        ))}\r\n                      </MySelect>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={6}>\r\n                    <MyTextField\r\n                      margin=\"none\"\r\n                      name={`schedules[${index}].time`}\r\n                      type=\"time\"\r\n                      label=\"Время занятия*\"\r\n                      inputProps={{\r\n                        step: 300, // 5 min\r\n                      }}\r\n                      fullWidth\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n                {business && (\r\n                  <MyTextField\r\n                    margin=\"normal\"\r\n                    name={`schedules[${index}].price`}\r\n                    type=\"number\"\r\n                    label=\"Стоимость занятия*\"\r\n                    autoComplete=\"off\"\r\n                    fullWidth\r\n                  />\r\n                )}\r\n                <MyTextField\r\n                  margin=\"normal\"\r\n                  name={`schedules[${index}].subject`}\r\n                  label=\"Предмет*\"\r\n                  autoComplete=\"off\"\r\n                  fullWidth\r\n                />\r\n                {values.schedules.length > 1 && (\r\n                  <Tooltip title=\"Удалить расписание\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      aria-label=\"Удалить расписание\"\r\n                      className=\"pupil-form__btn\"\r\n                      color=\"secondary\"\r\n                      onClick={() => remove(index)}>\r\n                      <ClearIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                )}\r\n              </React.Fragment>\r\n            ))}\r\n          <Tooltip title=\"Добавить расписание\">\r\n            <IconButton\r\n              size=\"small\"\r\n              color=\"secondary\"\r\n              aria-label=\"Добавить расписание\"\r\n              className=\"pupil-form__btn pupil-form__btn-add-contact\"\r\n              onClick={() => push({ day: '', price: 0, subject: '', time: '15:00' })}>\r\n              <AddIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </React.Fragment>\r\n      )}\r\n    </FieldArray>\r\n  );\r\n}\r\n\r\nexport default AddScheduleInputs;\r\n","const formInitialValues = {\r\n  name: '',\r\n  grade: '',\r\n  address: '',\r\n  parents: [{ person: '', contact: '' }],\r\n\r\n  schedules: [\r\n    {\r\n      day: '',\r\n      time: '15:00',\r\n      price: 0,\r\n      subject: '',\r\n    },\r\n  ],\r\n};\r\n\r\nexport default formInitialValues;\r\n","import uniqid from 'uniqid';\r\nimport { addPupil } from './pupils';\r\nimport { addSchedule } from './schedules';\r\nimport { db, auth } from '../../firebase';\r\n\r\nconst formHandler = ({ ...data }) => async (dispatch) => {\r\n  const pupilId = uniqid();\r\n\r\n  let test = Object.entries(data).filter(([key, value]) => {\r\n    if (typeof value === 'string') return value.trim();\r\n    if (typeof value === 'number') return value;\r\n    return true;\r\n  });\r\n\r\n  test = Object.fromEntries(test);\r\n  test.parents = test.parents\r\n    .filter((parent) => parent.person || parent.contact)\r\n    .map((parent) => ({ person: parent.person, contact: parent.contact }));\r\n\r\n  if (!test.parents.length) delete test.parents;\r\n  const { schedules, ...pupil } = test;\r\n\r\n  let resSchedules = schedules.map(({ price = 0, ...schedule }) => ({\r\n    id: uniqid(),\r\n    subject: schedule.subject,\r\n    time: schedule.time,\r\n    price: +price,\r\n    day: +schedule.day,\r\n    pupil: pupilId,\r\n    lessons: [],\r\n    timestamp: Date.now(),\r\n  }));\r\n\r\n  const resPupil = {\r\n    id: pupilId,\r\n    timestamp: Date.now(),\r\n    schedulesId: resSchedules.map((schedule) => schedule.id),\r\n    ...pupil,\r\n  };\r\n\r\n  const batch = db.batch();\r\n\r\n  resSchedules.forEach((schedule) => {\r\n    const schRef = db.doc(`/users/${auth.currentUser.uid}/schedules/${schedule.id}`);\r\n    batch.set(schRef, { ...schedule });\r\n  });\r\n\r\n  const pupilRef = db.doc(`/users/${auth.currentUser.uid}/pupils/${resPupil.id}/`);\r\n  batch.set(pupilRef, { ...resPupil });\r\n\r\n  try {\r\n    await batch.commit();\r\n    resSchedules.forEach((schedule) => dispatch(addSchedule(schedule)));\r\n    dispatch(addPupil(resPupil));\r\n    return Promise.resolve('success');\r\n  } catch (e) {\r\n    console.error(e);\r\n    return Promise.reject('error');\r\n  }\r\n};\r\n\r\nexport default formHandler;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\n\r\nimport AddPupilInputs from './AddPupilInputs';\r\nimport AddScheduleInputs from './AddScheduleInputs';\r\nimport validationSchema from './validationSchema';\r\nimport formInitialValues from './formInitialValues';\r\nimport formHandler from '../../redux/actions/newPupil';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\n\r\nconst steps = ['Информация об ученике', 'Расписание'];\r\nfunction getForm(step) {\r\n  switch (step) {\r\n    case 0:\r\n      return <AddPupilInputs />;\r\n    case 1:\r\n      return <AddScheduleInputs />;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction AddPupilForm({ open, handleClose, width, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const today = useSelector(({ date }) => date.selected);\r\n  const [activeStep, setActiveStep] = React.useState(0);\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n  const isLastStep = activeStep === steps.length - 1;\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  const handleSubmit = (values, actions) => {\r\n    if (isLastStep) {\r\n      handleSnack(true);\r\n      handleClose();\r\n      submitForm(values, actions);\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n      actions.setTouched({});\r\n      actions.setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  async function submitForm(values, actions) {\r\n    actions.setSubmitting(false);\r\n\r\n    await dispatch(formHandler(values));\r\n    dispatch(fetchScheduledLessons(today));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      onExited={() => {\r\n        setActiveStep(0);\r\n      }}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об ученике</DialogTitle>\r\n      <DialogContent className=\"pupil-form__dialog-content\">\r\n        <Stepper activeStep={activeStep}>\r\n          {steps.map((label, index) => {\r\n            return (\r\n              <Step key={label}>\r\n                <StepLabel>{label}</StepLabel>\r\n              </Step>\r\n            );\r\n          })}\r\n        </Stepper>\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={currentValidationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            {getForm(activeStep)}\r\n\r\n            <Box className=\"pupil-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              {activeStep !== 0 && (\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={handleBack}>\r\n                  Назад\r\n                </Button>\r\n              )}\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                {isLastStep ? 'Подтвердить' : 'Далее'}\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddPupilForm);\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\n\r\nimport PupilCard from './PupilCard';\r\nimport AddPupilForm from '../addPupilForm/AddPupilForm';\r\nimport SnackPopup from '../SnackPopup';\r\n\r\nfunction PupilsList() {\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const pupilsLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n  const schedules = useSelector(({ schedules }) => schedules.items);\r\n  const schedulesLoaded = useSelector(({ schedules }) => schedules.isLoaded);\r\n  const [viewAddPupilSnack, setViewAddPupilSnack] = React.useState(false);\r\n  const [viewAddScheduleSnack, setViewAddScheduleSnack] = React.useState(false);\r\n  const [viewEditPupilSnack, setViewEditPupilSnack] = React.useState(false);\r\n\r\n  // React.useEffect(() => {\r\n  //   let timer;\r\n  //   timer = setTimeout(() => {\r\n  //     setViewAddPupilSnack(false);\r\n  //   }, 5000);\r\n  //   return () => {\r\n  //     clearTimeout(timer);\r\n  //   };\r\n  // }, [viewAddPupilSnack]);\r\n\r\n  const isLoaded = pupilsLoaded && schedulesLoaded;\r\n\r\n  const [viewAddPupilForm, setViewAddPupilForm] = React.useState(false);\r\n\r\n  function handleAddLessonClick() {\r\n    setViewAddPupilForm(true);\r\n  }\r\n\r\n  function handleCloseAddLessonForm() {\r\n    setViewAddPupilForm(false);\r\n  }\r\n\r\n  function handleSnack(state) {\r\n    setViewAddPupilSnack(state);\r\n  }\r\n\r\n  const handleViewAddScheduleSnack = React.useCallback(() => setViewAddScheduleSnack(false), []);\r\n  const handleViewAddPupilSnack = React.useCallback(() => setViewAddPupilSnack(false), []);\r\n  const handleViewEditPupilSnack = React.useCallback(() => setViewEditPupilSnack(false), []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <SnackPopup\r\n        open={viewAddScheduleSnack}\r\n        message=\"Шаблон для урока добавлен\"\r\n        onClose={handleViewAddScheduleSnack}\r\n      />\r\n      <SnackPopup\r\n        open={viewAddPupilSnack}\r\n        message=\"Ученик добавлен\"\r\n        onClose={handleViewAddPupilSnack}\r\n      />\r\n      <SnackPopup\r\n        open={viewEditPupilSnack}\r\n        message=\"Информация об ученике изменена\"\r\n        onClose={handleViewEditPupilSnack}\r\n      />\r\n\r\n      <AddPupilForm\r\n        open={viewAddPupilForm}\r\n        handleClose={handleCloseAddLessonForm}\r\n        handleSnack={handleSnack}\r\n      />\r\n\r\n      <div>\r\n        <Box className=\"pupils__header-container\">\r\n          <Typography variant=\"h5\" className=\"pupils__header\">\r\n            Ученики\r\n          </Typography>\r\n\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<AddIcon />}\r\n            className=\"pupils__button-text\"\r\n            onClick={handleAddLessonClick}>\r\n            Новый ученик\r\n          </Button>\r\n        </Box>\r\n\r\n        <Grid container spacing={2} className=\"pupils__card-container\">\r\n          {isLoaded\r\n            ? Object.keys(pupils).map((key) => (\r\n                <Grid key={key} item md={4} sm={6} xs={12}>\r\n                  <PupilCard\r\n                    {...pupils[key]}\r\n                    schedules={schedules}\r\n                    handleSnack={setViewAddScheduleSnack}\r\n                    handleViewEditPupilSnack={setViewEditPupilSnack}\r\n                  />\r\n                </Grid>\r\n              ))\r\n            : new Array(6).fill(0).map((_, i) => (\r\n                <Grid key={i} item md={4} sm={6} xs={12}>\r\n                  <Skeleton key={i} variant=\"rect\" className=\"pupils__skeleton\" />\r\n                </Grid>\r\n              ))}\r\n        </Grid>\r\n        {Object.keys(pupils).length === 0 && <Typography>Ученики отсутствуют</Typography>}\r\n      </div>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default PupilsList;\r\n","const initialValues = {\r\n  firstName: '',\r\n  lastName: '',\r\n  password: '',\r\n  email: '',\r\n  recaptcha: '',\r\n  business: false,\r\n};\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  firstName: yup\r\n    .string('Введите имя')\r\n    .max(100, 'Имя не может быть длиннее 100 символов')\r\n    .required('Необходимо указать имя'),\r\n  lastName: yup\r\n    .string('Введите фамилию')\r\n    .max(100, 'Фамилия не может быть длиннее 100 символов')\r\n    .required('Необходимо указать фамилию'),\r\n  email: yup\r\n    .string('Введите адрес электронной почты')\r\n    .email('Введите адрес электронной почты')\r\n    .max(254, 'Максимальная длина адреса 254 символа')\r\n    .required('Необходимо указать адрес эл. почты'),\r\n  password: yup\r\n    .string('Введите пароль')\r\n    .min(6, 'Минимальная длина пароля 6 символов')\r\n    .max(30, 'Максимальная длина пароля 30 символов')\r\n    .required('Введите пароль'),\r\n  recaptcha: yup\r\n    .mixed()\r\n    .notOneOf([''], 'Выполните проверку Recaptcha')\r\n    .required('Выполните проверку Recaptcha'),\r\n  business: yup.boolean(),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\r\nimport HelpOutlineIcon from '@material-ui/icons/HelpOutline';\r\n\r\nimport { MyTextField, MyCheckBox } from '../../CustomInputs';\r\nimport { Popper, Typography, Paper } from '@material-ui/core';\r\n\r\nfunction SignupInputs() {\r\n  const [viewPassword, setViewPassword] = React.useState(false);\r\n  const handleClickShowPassword = () => setViewPassword((prev) => !prev);\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  function handleBusiness(e) {\r\n    setAnchorEl(anchorEl ? null : e.currentTarget);\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={3} className=\"auth__inputs\">\r\n      <Grid item xs={12} sm={6}>\r\n        <MyTextField\r\n          autoComplete=\"fname\"\r\n          name=\"firstName\"\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          label=\"Имя\"\r\n          autoFocus\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12} sm={6}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          label=\"Фамилия\"\r\n          name=\"lastName\"\r\n          autoComplete=\"lname\"\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          label=\"Email адрес\"\r\n          name=\"email\"\r\n          autoComplete=\"email\"\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          name=\"password\"\r\n          label=\"Пароль\"\r\n          type={viewPassword ? 'text' : 'password'}\r\n          autoComplete=\"current-password\"\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={handleClickShowPassword}>\r\n                  {viewPassword ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <FormControlLabel control={<MyCheckBox name=\"business\" />} label=\"Статус ИП\" />\r\n\r\n        <IconButton onClick={handleBusiness}>\r\n          <HelpOutlineIcon />\r\n        </IconButton>\r\n        <Popper open={anchorEl ? true : false} anchorEl={anchorEl}>\r\n          <Paper elevation={3}>\r\n            <Typography>\r\n              Оставляя поле пустым, вы лишаетесь доступа к ведению финансовой статистики\r\n            </Typography>\r\n          </Paper>\r\n        </Popper>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default SignupInputs;\r\n","import React from 'react';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport Grow from '@material-ui/core/Grow';\r\n\r\nfunction ErrorSnack({ open, message, onClose }) {\r\n  return (\r\n    <Snackbar\r\n      open={open}\r\n      message={\r\n        <React.Fragment>\r\n          <ErrorOutlineIcon />\r\n          <Typography variant=\"body1\">{message}</Typography>\r\n        </React.Fragment>\r\n      }\r\n      TransitionComponent={Grow}\r\n      anchorOrigin={{ horizontal: 'center', vertical: 'top' }}\r\n      autoHideDuration={3000}\r\n      onClose={() => onClose(false)}\r\n      className=\"auth__snackbar\"\r\n    />\r\n  );\r\n}\r\n\r\nexport default ErrorSnack;\r\n","import React from 'react';\r\nimport firebase from 'firebase/app';\r\nimport { useFormikContext } from 'formik';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction Recaptcha() {\r\n  const { errors, setFieldTouched, setFieldValue, touched } = useFormikContext();\r\n  React.useEffect(() => {\r\n    let recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha', {\r\n      size: 'normal',\r\n      callback: (response) => {\r\n        setFieldTouched('recaptcha', true);\r\n        setFieldValue('recaptcha', response);\r\n      },\r\n      'expired-callback': () => {\r\n        setFieldValue('recaptcha', '');\r\n      },\r\n    });\r\n\r\n    recaptchaVerifier.render().then((widgetId) => (recaptchaVerifier = widgetId));\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Box id=\"recaptcha\" mt={2} mb={2} />\r\n      {errors.recaptcha && touched.recaptcha && (\r\n        <Typography color=\"error\">{errors.recaptcha}</Typography>\r\n      )}\r\n      <input type=\"hidden\" name=\"recaptcha\"></input>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Recaptcha;\r\n","import React from 'react';\r\nimport { Snackbar, Typography } from '@material-ui/core';\r\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\r\nimport Grow from '@material-ui/core/Grow';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    backgroundColor: '#4caf50',\r\n  },\r\n});\r\n\r\nfunction EmailSnack({ open, message, onClose }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'center',\r\n      }}\r\n      message={\r\n        <React.Fragment>\r\n          <CheckCircleOutlineIcon />\r\n          <Typography variant=\"body1\">{message}</Typography>\r\n        </React.Fragment>\r\n      }\r\n      ContentProps={{ classes: { root: classes.paper } }}\r\n      open={open}\r\n      TransitionComponent={Grow}\r\n      autoHideDuration={3000}\r\n      onClose={onClose}\r\n    />\r\n  );\r\n}\r\n\r\nexport default EmailSnack;\r\n","import { db } from '../../firebase';\r\n\r\nexport const postUser = ({ id, name, timestamp, business }) => async (dispatch) => {\r\n  await db.doc(`/users/${id}`).set({ id, name, timestamp, business });\r\n};\r\n\r\nexport const fetchUser = (id) => async (dispatch) => {\r\n  dispatch({ type: 'SET_USER_LOADED', payload: false });\r\n  const user = await db.doc(`/users/${id}`).get();\r\n  dispatch(addUser(user.data()));\r\n};\r\n\r\nexport const addUser = (data) => ({\r\n  type: 'SET_USER',\r\n  payload: data,\r\n});\r\n","import React from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nfunction Footer({ width }) {\r\n  return (\r\n    <Box mb={2} mt={4}>\r\n      <Typography variant={isWidthDown('md', width) ? 'body2' : 'body1'} align=\"center\">\r\n        🍪 2021{' '}\r\n        <Link href=\"https://github.com/pampush\" target=\"_blank\">\r\n          github.com/pampush\r\n        </Link>\r\n      </Typography>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default withWidth()(Footer);\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport SignupInputs from './SignupInputs';\r\nimport { AuthContext } from '../../../contexts/AuthContext';\r\nimport ErrorSnack from '../ErrorSnack';\r\nimport Recaptcha from './Recaptcha';\r\nimport EmailSnack from '../EmailSnack';\r\nimport { postUser } from '../../../redux/actions/user';\r\nimport Footer from '../Footer';\r\nimport { Link } from '@material-ui/core';\r\n\r\nfunction Signup() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { signup, verifyEmail, updateUser } = React.useContext(AuthContext);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState('');\r\n  const [viewErrorSnack, setViewErrorSnack] = React.useState(false);\r\n  const [viewEmailVerifySnack, setViewEmailVerifySnack] = React.useState(false);\r\n\r\n  const handleSubmit = async (values, actions) => {\r\n    actions.setSubmitting(false);\r\n    setLoading(true);\r\n\r\n    try {\r\n      const name = values.firstName + ' ' + values.lastName;\r\n      const userCredential = await signup(values.email, values.password);\r\n      await updateUser(name);\r\n      await verifyEmail(userCredential.user);\r\n\r\n      setViewEmailVerifySnack(true);\r\n\r\n      dispatch(\r\n        postUser({\r\n          id: userCredential.user.uid,\r\n          name,\r\n          timestamp: Date.now(),\r\n          business: values.business,\r\n        }),\r\n      );\r\n\r\n      setTimeout(() => history.push('/login'), 3000);\r\n    } catch (e) {\r\n      switch (e.code) {\r\n        case 'auth/email-already-in-use': {\r\n          setError('Почта уже используется');\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n\r\n      setViewErrorSnack(true);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setLoading(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [loading]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <EmailSnack\r\n        open={viewEmailVerifySnack}\r\n        message={\r\n          'Спасибо! Мы отправили вам письмо на указанный email с ссылкой для подтверждения регистрации.'\r\n        }\r\n        onClose={() => setViewEmailVerifySnack(false)}\r\n      />\r\n      <Container component=\"main\" maxWidth=\"sm\" className=\"auth__main\">\r\n        <ErrorSnack open={viewErrorSnack} message={error} onClose={setViewErrorSnack} />\r\n        <CssBaseline />\r\n        <Grid container className=\"auth__container\">\r\n          <Grid\r\n            container\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n            spacing={1}\r\n            className=\"auth__header-container\">\r\n            <Grid item>\r\n              <Avatar className=\"auth__avatar\">\r\n                <LockOutlinedIcon />\r\n              </Avatar>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography component=\"h1\" variant=\"h5\" className=\"auth__header-title\">\r\n                Регистрация\r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Formik\r\n            initialValues={initialValues}\r\n            validationSchema={validationSchema}\r\n            onSubmit={handleSubmit}>\r\n            {({ setFieldValue, errors, touched }) => (\r\n              <Form>\r\n                <SignupInputs />\r\n                <Recaptcha />\r\n                <Box mb={2}>\r\n                  <Typography align=\"justify\">\r\n                    Нажимая на кнопку \"Зарегистрироваться\" вы соглашаетесь с\r\n                    <Link> Условиями использования </Link> и{' '}\r\n                    <Link>Политикой конфиденциальности </Link>\r\n                  </Typography>\r\n                </Box>\r\n                <Button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  className=\"auth__submit\">\r\n                  Зарегистрироваться\r\n                </Button>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n          <Box mt={5}>\r\n            <RouterLink to=\"/login\">Войти в аккаунт</RouterLink>\r\n          </Box>\r\n        </Grid>\r\n        <Footer />\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Signup;\r\n","const initialValues = {\r\n  email: '',\r\n  password: '',\r\n  recaptcha: false\r\n}\r\n\r\nexport default initialValues;","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  email: yup\r\n    .string('Введите адрес электронной почты')\r\n    .email('Введите адрес электронной почты')\r\n    .max(245, 'Максимальная длина адреса 254 символа')\r\n    .required('Необходимо указать адрес эл. почты'),\r\n  password: yup\r\n    .string('Введите пароль')\r\n    .min(6, 'Минимальная длина пароля 6 символов')\r\n    .max(30, 'Максимальная длина пароля 30 символов')\r\n    .required('Введите пароль'),\r\n    \r\n});\r\nexport default validationSchema;\r\n","import React from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\n\r\nimport { MyTextField } from '../../CustomInputs';\r\n\r\nfunction LoginInputs() {\r\n  const [viewPassword, setViewPassword] = React.useState(false);\r\n  const handleClickShowPassword = () => setViewPassword((prev) => !prev);\r\n  return (\r\n      <Grid container spacing={3} className=\"auth__inputs\">\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            label=\"Email адрес\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Пароль\"\r\n            type={viewPassword ? 'text' : 'password'}\r\n            autoComplete=\"current-password\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    aria-label=\"toggle password visibility\"\r\n                    onClick={handleClickShowPassword}>\r\n                    {viewPassword ? <Visibility /> : <VisibilityOff />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n  );\r\n}\r\n\r\nexport default LoginInputs;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useHistory, Link } from 'react-router-dom';\r\n\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport LoginInputs from './LoginInputs';\r\nimport { AuthContext } from '../../../contexts/AuthContext';\r\nimport ErrorSnack from '../ErrorSnack';\r\nimport Footer from '../Footer';\r\n\r\nfunction Login() {\r\n  const history = useHistory();\r\n  const { login } = React.useContext(AuthContext);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState('');\r\n  const [viewErrorSnack, setViewErrorSnack] = React.useState(false);\r\n\r\n  const handleSubmit = async (values, actions) => {\r\n    actions.setSubmitting(false);\r\n    setLoading(true);\r\n    try {\r\n      await login(values.email, values.password);\r\n      history.push('/tutor');\r\n    } catch (e) {\r\n      switch (e.code) {\r\n        case 'auth/user-not-found': {\r\n          setError('Пользователя с таким email не существует');\r\n          break;\r\n        }\r\n        case 'auth/wrong-password': {\r\n          setError('Неверный пароль');\r\n          break;\r\n        }\r\n        case 'auth/too-many-requests': {\r\n          setError('Слишком много попыток войти. Попробуйте снова через пять минут');\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n\r\n      setViewErrorSnack(true);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setLoading(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [loading]);\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"sm\" className=\"auth__main\">\r\n      {error && <ErrorSnack open={viewErrorSnack} message={error} onClose={setViewErrorSnack} />}\r\n      <CssBaseline />\r\n\r\n      <Grid container className=\"auth__container\">\r\n        <Grid\r\n          container\r\n          direction=\"column\"\r\n          alignItems=\"center\"\r\n          spacing={1}\r\n          className=\"auth__header-container\">\r\n          <Grid item>\r\n            <Avatar className=\"auth__avatar\">\r\n              <LockOutlinedIcon />\r\n            </Avatar>\r\n          </Grid>\r\n          <Grid item>\r\n            <Typography component=\"h1\" variant=\"h5\" className=\"auth__header-title\">\r\n              Вход в личный кабинет\r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Formik\r\n          initialValues={initialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          {({ values }) => (\r\n            <Form>\r\n              <LoginInputs />\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                className=\"auth__submit\">\r\n                Вход\r\n              </Button>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n        <Box mt={5}>\r\n          У вас нет учетной записи? <Link to=\"/signup\">Зарегистрироваться</Link>\r\n        </Box>\r\n      </Grid>\r\n      <Footer />\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","var _rect, _rect2, _rect3, _rect4, _rect5, _rect6, _rect7, _rect8, _rect9, _rect10, _rect11, _rect12;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNotfound(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 80,\n    x: 0,\n    y: 0\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 50,\n    x: 60,\n    y: 40\n  })), _rect3 || (_rect3 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 80,\n    y: 10\n  })), _rect4 || (_rect4 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 90,\n    y: 20\n  })), _rect5 || (_rect5 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 110,\n    width: 10,\n    x: 0,\n    y: 0\n  })), _rect6 || (_rect6 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 50,\n    width: 10,\n    x: 60,\n    y: 0\n  })), _rect7 || (_rect7 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 20,\n    width: 10,\n    x: 30,\n    y: 30\n  })), _rect8 || (_rect8 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 110,\n    x: 0,\n    y: 110\n  })), _rect9 || (_rect9 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 30,\n    x: 40,\n    y: 70\n  })), _rect10 || (_rect10 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 30,\n    y: 80\n  })), _rect11 || (_rect11 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 70,\n    y: 80\n  })), _rect12 || (_rect12 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 80,\n    width: 10,\n    x: 100,\n    y: 30\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNotfound);\nexport default __webpack_public_path__ + \"static/media/notfound.8312485b.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport { ReactComponent as NonFoundIcon } from '../assets/img/notfound.svg';\r\n\r\nfunction NotFound() {\r\n  return (\r\n    <Box className=\"notfound__container\">\r\n      <NonFoundIcon className=\"notfound__svg\" />\r\n      <Typography variant=\"h2\" align=\"center\">\r\n        404\r\n      </Typography>\r\n      <Typography variant=\"h3\" align=\"center\">\r\n        Страница не найдена\r\n      </Typography>\r\n\r\n      <Button size=\"large\" variant=\"contained\" color=\"secondary\" component={Link} to=\"/schedule\">\r\n        Домой\r\n      </Button>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    height: '500px',\r\n  },\r\n  container: {\r\n    marginBottom: '20px',\r\n  },\r\n  main: {\r\n    paddingTop: '20px',\r\n  },\r\n  button: {\r\n    backgroundColor: '#ff9800',\r\n    color: '#FFFFFF',\r\n    fontWeight: '600',\r\n    borderRadius: '4px',\r\n  },\r\n});\r\n\r\nfunction Instruction({ open, handleClose }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      className={`instruction__container`}\r\n      classes={{\r\n        paper: classes.paper,\r\n      }}\r\n      maxWidth=\"md\">\r\n      <Box p={5} pt={5}>\r\n        <Typography variant=\"h4\">Знакомство с приложением</Typography>\r\n        <Box mb={5} mt={2}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<AddIcon />}\r\n            className=\"lessons__button-text\"\r\n            disabled>\r\n            Новый урок\r\n          </Button>\r\n          <Typography variant=\"body1\">используется для создания уроков вне расписания</Typography>\r\n        </Box>\r\n        <Box mb={5}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<AddIcon />}\r\n            className=\"pupils__button-text\"\r\n            disabled>\r\n            Новый ученик\r\n          </Button>\r\n          <Typography variant=\"body1\">\r\n            используется для создания ученика и расписания уроков\r\n          </Typography>\r\n        </Box>\r\n        <Box>\r\n          <ListItem\r\n            button\r\n            component={Link}\r\n            to=\"/schedule\"\r\n            className={classes.button}\r\n            onClick={() => handleClose(false)}>\r\n            Далее\r\n          </ListItem>\r\n        </Box>\r\n      </Box>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default Instruction;\r\n","import { addMonths } from 'date-fns';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nimport { Grid, Typography, IconButton } from '@material-ui/core';\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\r\n\r\nconst months = [\r\n  'Январь',\r\n  'Февраль',\r\n  'Март',\r\n  'Апрель',\r\n  'Май',\r\n  'Июнь',\r\n  'Июль',\r\n  'Август',\r\n  'Сентябрь',\r\n  'Октябрь',\r\n  'Ноябрь',\r\n  'Декабрь',\r\n];\r\n\r\nconst useStyles = makeStyles({\r\n  root: {\r\n    marginTop: '20px',\r\n  },\r\n});\r\n\r\nfunction MonthPicker({ initialDate, handleDateChange }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Grid container alignItems=\"center\" className={classes.root}>\r\n      <Grid item>\r\n        <IconButton onClick={() => handleDateChange(addMonths(initialDate, -1))}>\r\n          <NavigateBeforeIcon />\r\n        </IconButton>\r\n      </Grid>\r\n      <Grid item align=\"center\">\r\n        <Typography>{`${months[initialDate.getMonth()]} ${initialDate.getFullYear()}`}</Typography>\r\n      </Grid>\r\n      <Grid item>\r\n        <IconButton onClick={() => handleDateChange(addMonths(initialDate, 1))}>\r\n          <NavigateNextIcon />\r\n        </IconButton>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default MonthPicker;\r\n","import React from 'react';\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    backgroundColor: 'transparent',\r\n    width: '100px',\r\n    height: '100px',\r\n  },\r\n});\r\n\r\nfunction LoadindScreen({ open }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      classes={{\r\n        paper: classes.paper,\r\n      }}\r\n      PaperProps={{ elevation: 0 }}>\r\n      <DialogContent>\r\n        <CircularProgress />\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default LoadindScreen;\r\n","import React from 'react';\r\nimport { Calendar, Lessons, Instruction } from '../components';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { fetchLessons } from '../redux/actions/lessons';\r\nimport { fetchScheduledLessons } from '../redux/actions/scheduledLessons';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\n\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\n\r\n\r\nfunction Schedule() {\r\n  const dispatch = useDispatch();\r\n  const [anchorCalendar, setAnchorEl] = React.useState(null);\r\n  const { firstLogin, setFirstLogin } = React.useContext(AuthContext);\r\n  function handleCalendarOpen(e) {\r\n    setAnchorEl(e.currentTarget);\r\n  }\r\n\r\n  function handleCalendarClose() {\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  function handleCalendarClick(date) {\r\n    dispatch(fetchLessons(date));\r\n    dispatch(fetchScheduledLessons(date));\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {firstLogin && <Instruction open={firstLogin} handleClose={setFirstLogin} />}\r\n      <Container maxWidth=\"xl\" className=\"lessons__container\">\r\n        <Grid container spacing={2}>\r\n          <Hidden only={['xs', 'sm']}>\r\n            <Grid item xs={8}>\r\n              <Lessons\r\n                anchor={anchorCalendar}\r\n                handleClick={handleCalendarOpen}\r\n                handleClose={handleCalendarClose}\r\n                handleCalendarClick={handleCalendarClick}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n\r\n          <Hidden mdUp>\r\n            <Grid item xs={12}>\r\n              <Lessons\r\n                anchor={anchorCalendar}\r\n                handleCalendarOpen={handleCalendarOpen}\r\n                handleCalendarClose={handleCalendarClose}\r\n                handleCalendarClick={handleCalendarClick}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n\r\n          <Hidden smDown>\r\n            <Grid item xs={4} className=\"calendar__container\">\r\n              <Box className=\"calendar--fixed\">\r\n                <Calendar handleClick={handleCalendarClick} />\r\n              </Box>\r\n            </Grid>\r\n          </Hidden>\r\n        </Grid>\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Schedule;\r\n","import React from 'react';\r\n\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport { PupilsList } from '../components';\r\n\r\nfunction Pupils() {\r\n  return (\r\n    <React.Fragment>\r\n      <Container maxWidth=\"xl\" className=\"pupils__container\">\r\n        <PupilsList />\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Pupils;\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\n\r\nexport const fetchPrices = async (date) => {\r\n  const prices = {};\r\n  const lessonsPromises = [];\r\n  try {\r\n    const pupilsSnapshot = await db.collection(`/users/${auth.currentUser.uid}/pupils`).get();\r\n\r\n    pupilsSnapshot.forEach((pupil) => {\r\n      prices[pupil.data().id] = { sum: 0, name: pupil.data().name };\r\n      lessonsPromises.push(\r\n        db\r\n          .collection(`/users/${auth.currentUser.uid}/lessons`)\r\n          .where('pupil', '==', pupil.data().id)\r\n          .where('date', '>=', date + '-00')\r\n          .where('date', '<=', date + '31')\r\n          .get(),\r\n      );\r\n    });\r\n\r\n    const lessonsByPupil = await Promise.all(lessonsPromises);\r\n    lessonsByPupil.forEach((lessonsSnapshot) =>\r\n      lessonsSnapshot.forEach((lessonsSnap) => {\r\n        prices[lessonsSnap.data().pupil].sum =\r\n          prices[lessonsSnap.data().pupil].sum + lessonsSnap.data().price;\r\n      }),\r\n    );\r\n  } catch (e) {\r\n    console.error(e);\r\n  }\r\n  return prices;\r\n};\r\n","import React from 'react';\r\nimport { fetchPrices } from '../redux/actions/finance';\r\nimport { formatISO } from 'date-fns';\r\n\r\nimport { Container } from '@material-ui/core';\r\nimport { MonthPicker } from '../components';\r\n\r\nimport {\r\n  Chart,\r\n  BarElement,\r\n  LinearScale,\r\n  BarController,\r\n  CategoryScale,\r\n  PieController,\r\n  ArcElement,\r\n  Tooltip,\r\n  Legend,\r\n  DoughnutController,\r\n} from 'chart.js';\r\n\r\nChart.register(\r\n  LinearScale,\r\n  Tooltip,\r\n  BarElement,\r\n  BarController,\r\n  CategoryScale,\r\n  PieController,\r\n  ArcElement,\r\n  Legend,\r\n  DoughnutController,\r\n);\r\n\r\nfunction colorGen() {\r\n  const r = Math.floor(Math.random() * 256);\r\n  const g = Math.floor(Math.random() * 256);\r\n  const b = Math.floor(Math.random() * 256);\r\n  return `rgb(${r}, ${g}, ${b})`;\r\n}\r\n\r\nfunction Finance() {\r\n  const canvas = React.useRef(null);\r\n\r\n  const [date, setDate] = React.useState(new Date());\r\n\r\n  const [prices, setPrices] = React.useState({});\r\n\r\n  React.useEffect(() => {\r\n    let mounted = true;\r\n    try {\r\n      fetchPrices(formatISO(date, { representation: 'date' }).slice(0, -3)).then(\r\n        (prices) => mounted && setPrices(prices),\r\n      );\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [date]);\r\n\r\n  React.useEffect(() => {\r\n    if (Object.keys(prices).length === 0) return;\r\n\r\n    const myChart = new Chart(canvas.current, {\r\n      type: 'doughnut',\r\n      data: {\r\n        labels: Object.values(prices).map(({ name }) => name),\r\n        datasets: [\r\n          {\r\n            label: 'first',\r\n            data: Object.values(prices).map(({ sum }) => sum),\r\n            backgroundColor: Object.keys(prices).map(() => colorGen()),\r\n\r\n            hoverOffset: 4,\r\n          },\r\n        ],\r\n      },\r\n      options: {\r\n        plugins: {\r\n          legend: {\r\n            position: 'bottom',\r\n          },\r\n        },\r\n      },\r\n    });\r\n    return () => myChart.destroy();\r\n  }, [prices]);\r\n\r\n  return (\r\n    <Container>\r\n      <MonthPicker initialDate={date} handleDateChange={setDate} />\r\n      {Object.keys(prices).length ? (\r\n        <div className=\"finance__container\">\r\n          <span className=\"finance__center\">\r\n            {Object.values(prices).reduce((accum, next) => ({ sum: accum.sum + next.sum })).sum ||\r\n              'Уроков не найдено'}\r\n          </span>\r\n          <canvas ref={canvas}></canvas>\r\n        </div>\r\n      ) : (\r\n        <div className=\"finance__container\">\r\n          <span>Учеников не найдено</span>\r\n        </div>\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Finance;\r\n","const signoutAction = () => ({\r\n  type: 'USER_SIGNOUT',\r\n});\r\n\r\nexport default signoutAction;\r\n","const initialValues = {\r\n  email: '',\r\n  password: '',\r\n};\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  email: yup\r\n    .string()\r\n    .email('Введите адрес электронной почты')\r\n    .max(254, 'Максимальная длина адреса 254 символа')\r\n    .required('Необходимо указать адрес эл. почты'),\r\n  password: yup\r\n    .string('Введите пароль')\r\n    .min(6, 'Минимальная длина пароля 6 символов')\r\n    .max(30, 'Максимальная длина пароля 30 символов')\r\n    .required('Введите пароль'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { MyTextField } from '../../CustomInputs';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\n\r\nfunction EditEmailFormInputs() {\r\n  const [viewPassword, setViewPassword] = React.useState(false);\r\n\r\n  const handleClickShowPassword = () => setViewPassword((prev) => !prev);\r\n\r\n  return (\r\n    <Grid container spacing={3} className=\"auth__inputs\">\r\n      <Grid item xs={12}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          label=\"Email адрес\"\r\n          name=\"email\"\r\n          autoComplete=\"email\"\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          name=\"password\"\r\n          label=\"Пароль\"\r\n          type={viewPassword ? 'text' : 'password'}\r\n          autoComplete=\"current-password\"\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={handleClickShowPassword}>\r\n                  {viewPassword ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default EditEmailFormInputs;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport EditEmailFormInputs from './EditEmailFormInputs';\r\nimport { AuthContext } from '../../../contexts/AuthContext';\r\n\r\nfunction EditEmailForm({ width, open, handleClose, handleSnack }) {\r\n  const { reAuth, verifyBeforeUpdateEmail } = React.useContext(AuthContext);\r\n  const [loading, setLoading] = React.useState(false);\r\n\r\n  async function handleSubmit(values, actions) {\r\n    setLoading(true);\r\n    handleSnack(true);\r\n    handleClose();\r\n    actions.setSubmitting(false);\r\n    await reAuth(values.password);\r\n    await verifyBeforeUpdateEmail(values.email);\r\n  }\r\n\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-email\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите новый адрес электронной почты</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <EditEmailFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\" disabled={loading}>\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(EditEmailForm);\r\n","import React from 'react';\r\n\r\nimport { Grid, InputAdornment, IconButton } from '@material-ui/core';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\n\r\nimport { MyTextField } from '../../CustomInputs';\r\n\r\nfunction EditPasswordFormInputs() {\r\n  const [viewPassword, setViewPassword] = React.useState(false);\r\n\r\n  const handleClickShowPassword = () => {\r\n    setViewPassword((prev) => !prev);\r\n  };\r\n\r\n  return (\r\n    <Grid container spacing={3} className=\"auth__inputs\">\r\n      <input type=\"text\" autoComplete=\"username\" hidden={true}></input>\r\n      <Grid item xs={12}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          name=\"oldpassword\"\r\n          label=\"Старый пароль\"\r\n          type={viewPassword ? 'text' : 'password'}\r\n          autoComplete=\"current-password\"\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={handleClickShowPassword}>\r\n                  {viewPassword ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          name=\"password\"\r\n          label=\"Новый пароль\"\r\n          type={viewPassword ? 'text' : 'password'}\r\n          autoComplete=\"new-password\"\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={handleClickShowPassword}>\r\n                  {viewPassword ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          name=\"passwordConfirmation\"\r\n          label=\"Повторите пароль\"\r\n          type={viewPassword ? 'text' : 'password'}\r\n          autoComplete=\"new-password\"\r\n          InputProps={{\r\n            endAdornment: (\r\n              <InputAdornment position=\"end\">\r\n                <IconButton\r\n                  aria-label=\"toggle password visibility\"\r\n                  onClick={handleClickShowPassword}>\r\n                  {viewPassword ? <Visibility /> : <VisibilityOff />}\r\n                </IconButton>\r\n              </InputAdornment>\r\n            ),\r\n          }}\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default EditPasswordFormInputs;\r\n","const initialValues = {\r\n  oldpassword: '',\r\n  password: '',\r\n  passwordConfirmation: '',\r\n}\r\n\r\nexport default initialValues;","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  oldpassword: yup\r\n    .string()\r\n    .min(6, 'Минимальная длина пароля 6 символов')\r\n    .max(30, 'Максимальная длина пароля 30 символов')\r\n    .required('Введите пароль'),\r\n  password: yup\r\n    .string()\r\n    .min(6, 'Минимальная длина пароля 6 символов')\r\n    .max(30, 'Максимальная длина пароля 30 символов')\r\n    .required('Введите пароль'),\r\n  passwordConfirmation: yup\r\n    .string()\r\n    .oneOf([yup.ref('password'), null], 'Пароли должны совпадать')\r\n    .min(6, 'Минимальная длина пароля 6 символов')\r\n    .max(30, 'Максимальная длина пароля 30 символов')\r\n    .required('Введите пароль'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport EditPasswordFormInputs from './EditPasswordFormInputs';\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { AuthContext } from '../../../contexts/AuthContext';\r\n\r\nfunction EditPasswordForm({ width, open, handleClose, handleSnack }) {\r\n  const { reAuth, updatePassword } = React.useContext(AuthContext);\r\n\r\n  async function handleSubmit(values, actions) {\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n    handleClose();\r\n\r\n    await reAuth(values.oldpassword);\r\n    updatePassword(values.passwordConfirmation);\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-email\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите новый адрес электронной почты</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <EditPasswordFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(EditPasswordForm);\r\n","import React from 'react';\r\n\r\nimport { Grid } from '@material-ui/core';\r\n\r\nimport { MyTextField } from '../../CustomInputs';\r\n\r\nfunction EditUserFormInputs() {\r\n  return (\r\n    <Grid container spacing={3} className=\"auth__inputs\">\r\n      <Grid item xs={12}>\r\n        <MyTextField\r\n          autoComplete=\"fname\"\r\n          name=\"firstName\"\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          label=\"Имя\"\r\n          autoFocus\r\n        />\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <MyTextField\r\n          variant=\"outlined\"\r\n          fullWidth\r\n          label=\"Фамилия\"\r\n          name=\"lastName\"\r\n          autoComplete=\"lname\"\r\n        />\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default EditUserFormInputs;\r\n","const initialValues = (name) => {\r\n  const [firstName, lastName] = name.split(' ');\r\n  return { firstName, lastName };\r\n};\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  firstName: yup\r\n    .string('Введите имя')\r\n    .max(100, 'Имя не может быть длиннее 100 символов')\r\n    .required('Необходимо указать имя'),\r\n  lastName: yup\r\n    .string('Введите фамилию')\r\n    .max(100, 'Фамилия не может быть длиннее 100 символов')\r\n    .required('Необходимо указать фамилию'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\n\r\nimport { Formik, Form } from 'formik';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport EditUserFormInputs from './EditUserFormInputs';\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { AuthContext } from '../../../contexts/AuthContext';\r\n\r\nfunction EditUserForm({ width, open, handleClose, handleSnack }) {\r\n  const { currentUser, updateUser } = React.useContext(AuthContext);\r\n\r\n  function handleSubmit(values, actions) {\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n    handleClose();\r\n\r\n    const name = values.firstName + ' ' + values.lastName;\r\n    updateUser(name);\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-email\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Измените имя и фамилию</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues(currentUser.displayName)}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <EditUserFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(EditUserForm);\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport EmailIcon from '@material-ui/icons/Email';\r\nimport LockIcon from '@material-ui/icons/Lock';\r\n\r\nimport SnackPopup from '../components/SnackPopup';\r\nimport signoutAction from '../redux/actions/signout';\r\nimport EditEmailForm from '../components/auth/editEmailForm/EditEmailForm';\r\nimport EditPasswordForm from '../components/auth/editPasswordForm/EditPasswordForm';\r\nimport EditUserForm from '../components/auth/editUserForm/EditUserForm';\r\n\r\nfunction Settings() {\r\n  const dispatch = useDispatch();\r\n  const [viewEditEmailForm, setViewEditEmailForm] = React.useState(false);\r\n  const [viewEditPasswordForm, setViewEditPasswordForm] = React.useState(false);\r\n  const [viewEditUserForm, setViewEditUserForm] = React.useState(false);\r\n\r\n  const [viewEditEmailSnack, setViewEditEmailSnack] = React.useState(false);\r\n  const [viewEditPasswordSnack, setViewEditPasswordSnack] = React.useState(false);\r\n  const [viewEditUserSnack, setViewEditUserSnack] = React.useState(false);\r\n\r\n  const { signout, currentUser } = React.useContext(AuthContext);\r\n\r\n  const handleEditEmailForm = React.useCallback(() => setViewEditEmailForm(false), []);\r\n  const handleEditPasswordForm = React.useCallback(() => setViewEditPasswordForm(false), []);\r\n  const handleEditUserForm = React.useCallback(() => setViewEditUserForm(false), []);\r\n  const handleCloseEditEmailSnack = React.useCallback(() => setViewEditEmailSnack(false), []);\r\n  const handleCloseEditPasswordSnack = React.useCallback(() => setViewEditPasswordSnack(false), []);\r\n  const handleCloseEditUserSnack = React.useCallback(() => setViewEditUserSnack(), []);\r\n\r\n  async function handleSignout() {\r\n    await signout();\r\n    dispatch(signoutAction());\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <EditEmailForm\r\n        open={viewEditEmailForm}\r\n        handleClose={handleEditEmailForm}\r\n        handleSnack={setViewEditEmailSnack}\r\n      />\r\n\r\n      <EditPasswordForm\r\n        open={viewEditPasswordForm}\r\n        handleClose={handleEditPasswordForm}\r\n        handleSnack={setViewEditPasswordSnack}\r\n      />\r\n\r\n      <EditUserForm\r\n        open={viewEditUserForm}\r\n        handleClose={handleEditUserForm}\r\n        handleSnack={setViewEditUserSnack}\r\n      />\r\n\r\n      <SnackPopup\r\n        open={viewEditEmailSnack}\r\n        message={'Пожалуйста, проверьте почту и войдите в личный кабинет заново'}\r\n        onClose={handleCloseEditEmailSnack}\r\n      />\r\n\r\n      <SnackPopup\r\n        open={viewEditPasswordSnack}\r\n        message={'Пароль успешно изменен'}\r\n        onClose={handleCloseEditPasswordSnack}\r\n      />\r\n\r\n      <SnackPopup\r\n        open={viewEditUserSnack}\r\n        message={'Пожалуйста, проверьте почту и войдите в личный кабинет заново'}\r\n        onClose={handleCloseEditUserSnack}\r\n      />\r\n\r\n      <List className=\"settings__container\">\r\n        <ListItem>\r\n          <ListItemText>email: {currentUser.email}</ListItemText>\r\n        </ListItem>\r\n        <ListItem button onClick={() => setViewEditUserForm(true)}>\r\n          <ListItemAvatar>\r\n            <Avatar className=\"settings__avatar\">\r\n              <ImageIcon />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary=\"Редактировать профиль\" />\r\n        </ListItem>\r\n        <ListItem button onClick={() => setViewEditPasswordForm(true)}>\r\n          <ListItemAvatar>\r\n            <Avatar className=\"settings__avatar\">\r\n              <LockIcon />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary=\"Изменить пароль\" />\r\n        </ListItem>\r\n        <ListItem button onClick={() => setViewEditEmailForm(true)}>\r\n          <ListItemAvatar>\r\n            <Avatar className=\"settings__avatar\">\r\n              <EmailIcon />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary=\"Изменить email\" />\r\n        </ListItem>\r\n        <ListItem button onClick={handleSignout}>\r\n          <ListItemAvatar>\r\n            <Avatar className=\"settings__avatar\">\r\n              <ExitToAppIcon />\r\n            </Avatar>\r\n          </ListItemAvatar>\r\n          <ListItemText primary=\"Выйти из аккаунта\" />\r\n        </ListItem>\r\n      </List>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Settings;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useParams, NavLink, useLocation } from 'react-router-dom';\r\n\r\nimport {\r\n  Button,\r\n  List,\r\n  ListItem,\r\n  ListItemSecondaryAction,\r\n  ListItemAvatar,\r\n  ListItemText,\r\n  Typography,\r\n  IconButton,\r\n  Avatar,\r\n  Container,\r\n} from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport FolderIcon from '@material-ui/icons/Folder';\r\n\r\nimport { storage } from '../firebase';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\n\r\nfunction Homework() {\r\n  const { id } = useParams();\r\n  const [files, setFiles] = React.useState([]);\r\n\r\n  const lesson = useSelector(({ lessons }) => lessons.items[id]);\r\n  const { currentUser } = React.useContext(AuthContext);\r\n\r\n  React.useEffect(() => {\r\n    const storageRef = storage.ref();\r\n    const metadataPromises = [];\r\n    storageRef\r\n      .child(`${currentUser.uid}/${lesson.pupil}/${lesson.date}`)\r\n      .listAll()\r\n      .then((res) => {\r\n        res.items.forEach((item) => {\r\n          const promise = item.getMetadata();\r\n          metadataPromises.push(promise);\r\n        });\r\n      })\r\n      .then(() => {\r\n        Promise.all(metadataPromises).then((metadataArray) => setFiles(metadataArray));\r\n      });\r\n  }, []);\r\n\r\n  async function handleSubmit(e) {\r\n    const storageRef = storage.ref();\r\n    if (e.currentTarget.files.length) {\r\n      const imagesHomeworkRef = storageRef.child(\r\n        `${currentUser.uid}/${lesson.pupil}/${lesson.date}/${e.currentTarget.files[0].name}`,\r\n      );\r\n      const snapshot = await imagesHomeworkRef.put(e.currentTarget.files[0]);\r\n      setFiles([...files, snapshot.metadata]);\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"homework__container\">\r\n      <Button\r\n        variant=\"contained\"\r\n        color=\"secondary\"\r\n        component=\"label\"\r\n        startIcon={<AddIcon />}\r\n        className=\"lessons__button-text\">\r\n        Загрузить дз\r\n        <input type=\"file\" onChange={handleSubmit} accept=\"\" hidden multiple />\r\n      </Button>\r\n      <Typography variant=\"h5\" className=\"homework__header\">\r\n        {lesson.theme}\r\n      </Typography>\r\n      <Container maxWidth=\"sm\">\r\n        <List>\r\n          {files.map((file, i) => (\r\n            <ListItem key={`${file.name}${i}`}>\r\n              <ListItemAvatar>\r\n                <Avatar>\r\n                  <FolderIcon />\r\n                </Avatar>\r\n              </ListItemAvatar>\r\n              <ListItemText primary={file.name} />\r\n              <ListItemSecondaryAction>\r\n                <IconButton edge=\"end\" aria-label=\"delete\">\r\n                  <DeleteIcon />\r\n                </IconButton>\r\n              </ListItemSecondaryAction>\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Homework;\r\n","/**\r\n * push from content pages if not signed in\r\n */\r\n\r\nimport React from 'react';\r\nimport { Route, Redirect } from 'react-router';\r\n\r\nimport { AuthContext } from './contexts/AuthContext';\r\n\r\nfunction PrivateRoute({ component: Component, ...rest }) {\r\n  const { currentUser } = React.useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return currentUser && currentUser.emailVerified ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect to=\"/login\" />\r\n        );\r\n      }}></Route>\r\n  );\r\n}\r\n\r\nexport default PrivateRoute;\r\n","/**\r\n * push from login/signup if signed in\r\n */\r\n\r\nimport React from 'react';\r\nimport { Route, Redirect } from 'react-router';\r\n\r\nimport { AuthContext } from './contexts/AuthContext';\r\n\r\nfunction PrivateSignedInRoute({ component: Component, ...rest }) {\r\n  const { currentUser } = React.useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return currentUser && currentUser.emailVerified ? (\r\n          <Redirect to=\"/schedule\" />\r\n          ) : (\r\n          <Component {...props} />\r\n        );\r\n      }}></Route>\r\n  );\r\n}\r\n\r\nexport default PrivateSignedInRoute;\r\n","import React from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { auth } from './firebase';\r\n\r\nimport theme from './stylesOverride';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport { ThemeProvider } from '@material-ui/core/styles';\r\nimport StylesProvider from '@material-ui/styles/StylesProvider';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport { Menu, InfoPanel, Signup, Login, NotFound } from './components';\r\nimport Schedule from './pages/Schedule';\r\nimport Pupils from './pages/Pupils';\r\nimport Finance from './pages/Finance';\r\nimport Settings from './pages/Settings';\r\nimport Homework from './pages/Homework';\r\nimport PrivateRoute from './PrivateRoute';\r\nimport PrivateSignedInRoute from './PrivateSignedInRoute';\r\nimport { AuthContext } from './contexts/AuthContext';\r\n\r\nimport { fetchLessons } from './redux/actions/lessons';\r\nimport { fetchPupils } from './redux/actions/pupils';\r\nimport { fetchSchedules } from './redux/actions/schedules';\r\nimport { fetchScheduledLessons } from './redux/actions/scheduledLessons';\r\nimport { fetchUser } from './redux/actions/user';\r\nimport { setDate } from './redux/actions/date';\r\n\r\nfunction Content() {\r\n  const dispatch = useDispatch();\r\n  const { currentUser } = React.useContext(AuthContext);\r\n  const business = useSelector(({ user }) => user.business);\r\n\r\n  React.useEffect(() => {\r\n    dispatch(setDate(new Date()));\r\n    dispatch(fetchLessons(new Date()));\r\n    dispatch(fetchScheduledLessons(new Date()));\r\n    dispatch(fetchPupils());\r\n    dispatch(fetchSchedules());\r\n    dispatch(fetchUser(auth.currentUser.uid));\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Menu />\r\n\r\n      <Box className=\"content\">\r\n        <Container maxWidth=\"xl\">\r\n          <InfoPanel />\r\n          <Switch>\r\n            <Route path=\"/tutor\">\r\n              <Schedule />\r\n            </Route>\r\n            <Route path=\"/schedule\">\r\n              <Schedule />\r\n            </Route>\r\n            <Route path=\"/pupils\">\r\n              <Pupils />\r\n            </Route>\r\n            <Route exact path=\"/homework\">\r\n              <Homework />\r\n            </Route>\r\n            <Route path=\"/homework/:id\">\r\n              <Homework />\r\n            </Route>\r\n            <Route path=\"/finance\">{business && <Finance />}</Route>\r\n            <Route path=\"/settings\">\r\n              <Settings />\r\n            </Route>\r\n            <Route path=\"*\">\r\n              <Redirect to=\"/404\" />\r\n            </Route>\r\n          </Switch>\r\n        </Container>\r\n      </Box>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nfunction App() {\r\n  return (\r\n    <StylesProvider injectFirst>\r\n      <ThemeProvider theme={theme}>\r\n        <CssBaseline />\r\n        <Switch>\r\n          <Route path=\"/404\">\r\n            <NotFound />\r\n          </Route>\r\n          <PrivateSignedInRoute path=\"/signup\" component={Signup}></PrivateSignedInRoute>\r\n          <PrivateSignedInRoute path=\"/login\" component={Login}></PrivateSignedInRoute>\r\n          <PrivateRoute path=\"/:page\" component={Content}></PrivateRoute>\r\n        </Switch>\r\n      </ThemeProvider>\r\n    </StylesProvider>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst lessons = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_LESSONS_BY_DATE':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_LESSONS_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'ADD_LESSON': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_LESSON': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n\r\n    case 'DELETE_LESSON': {\r\n      const newState = { ...state.items };\r\n      delete newState[action.payload];\r\n      return {\r\n        ...state,\r\n        items: newState,\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default lessons;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst pupils = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_PUPILS': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'SET_PUPILS_LOADED': {\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    }\r\n    case 'ADD_PUPIL': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'DELETE_PUPIL': {\r\n      const newState = { ...state.items };\r\n      delete newState[action.payload];\r\n      return {\r\n        ...state,\r\n        items: newState,\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_PUPIL': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default pupils;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst schedules = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_SCHEDULES':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_SCHEDULES_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'ADD_SCHEDULE': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_SCHEDULE': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_LESSONS_FIELD': {\r\n      let newLessons = [...state.items[action.payload.id].lessons];\r\n      if (action.payload.procedure === 'push') newLessons.push(action.payload.date);\r\n      if (action.payload.procedure === 'pop')\r\n        newLessons = newLessons.filter((item) => item !== action.payload.date);\r\n      return {\r\n        ...state,\r\n        items: {\r\n          ...state.items,\r\n          [action.payload.id]: {\r\n            ...state.items[action.payload.id],\r\n            lessons: newLessons,\r\n          },\r\n        },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'DELETE_SCHEDULE': {\r\n      const newState = { ...state.items };\r\n      delete newState[action.payload];\r\n      return {\r\n        items: newState,\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default schedules;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst scheduledLessons = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_SCHEDULED_LESSONS':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_SCHEDULED_LESSONS_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default scheduledLessons;\r\n","const initialState = {\r\n  selected: ' ',\r\n};\r\n\r\nconst date = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_DATE':\r\n      return {\r\n        ...state,\r\n        selected: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default date;\r\n","const initialState = {\r\n  name: '',\r\n  id: '',\r\n  timestamp: '',\r\n  email: '',\r\n  business: false,\r\n  isLoaded: false,\r\n};\r\n\r\nconst user = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_USER_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'SET_USER':\r\n      return { ...action.payload, isLoaded: true };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default user;\r\n","import { combineReducers } from 'redux';\r\n\r\nimport lessons from './lessons';\r\nimport pupils from './pupils';\r\nimport schedules from './schedules';\r\nimport scheduledLessons from './scheduledLessons';\r\nimport date from './date';\r\nimport user from './user';\r\n\r\nconst appReducer = combineReducers({\r\n  user,\r\n  lessons,\r\n  pupils,\r\n  schedules,\r\n  scheduledLessons,\r\n  date,\r\n});\r\n\r\nconst rootReducer = (state, action) => {\r\n  if (action.type === 'USER_SIGNOUT') state = undefined;\r\n  return appReducer(state, action);\r\n};\r\n\r\nexport default rootReducer;\r\n","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { AuthProvider } from './contexts/AuthContext';\n\nimport './sass/styles.sass';\n\nimport store from './redux/store';\n\nReactDOM.render(\n  <Router>\n    <Provider store={store}>\n      <AuthProvider>\n        <App />\n      </AuthProvider>\n    </Provider>\n  </Router>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}
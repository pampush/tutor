{"version":3,"sources":["firebase.js","contexts/AuthContext.jsx","stylesOverride.js","components/InfoPanelCard.jsx","redux/reducers/lessons.js","components/InfoPanel.jsx","components/Calendar.jsx","redux/actions/date.js","redux/actions/lessons.js","components/CustomInputs.jsx","components/notesForm/NotesFormInputs.jsx","components/notesForm/initialValues.js","components/notesForm/validationSchema.js","components/notesForm/NotesForm.jsx","redux/actions/schedules.js","redux/actions/scheduledLessons.js","components/LessonCard.jsx","components/lessonFromTemplateForm/LessonFromTemplateInputs.jsx","components/lessonFromTemplateForm/formInitialValues.js","components/lessonFromTemplateForm/validationSchema.js","redux/actions/combineDispatches.js","components/lessonFromTemplateForm/LessonFromTemplateForm.jsx","components/LessonTemplateCard.jsx","components/addLessonForm/AddLessonInputs.jsx","components/addLessonForm/formInitialValues.js","components/addLessonForm/validationSchema.js","components/addLessonForm/AddLessonForm.jsx","components/SnackPopup.jsx","components/Lessons.jsx","components/Menu/MenuItem.jsx","components/Menu/MenuHeader.jsx","components/Menu/MenuLgDrawer.jsx","components/Menu/MenuSmDrawer.jsx","components/Menu/MenuMdDrawer.jsx","components/Menu.jsx","components/PupilCard.jsx","components/addPupilForm/AddPupilInputs.jsx","components/addPupilForm/AddScheduleInputs.jsx","components/addPupilForm/validationSchema.js","components/addPupilForm/formInitialValues.js","redux/actions/pupils.js","redux/actions/newPupil.js","components/addPupilForm/AddPupilForm.jsx","components/PupilsList.jsx","components/auth/signupForm/initialValues.js","components/auth/signupForm/validationSchema.js","components/auth/signupForm/SignupInputs.jsx","components/auth/ErrorSnack.jsx","components/auth/signupForm/Recaptcha.jsx","redux/actions/user.js","components/auth/signupForm/Signup.jsx","components/auth/loginForm/initialValues.js","components/auth/loginForm/validationSchema.js","components/auth/loginForm/LoginInputs.jsx","components/auth/loginForm/Login.jsx","components/NotFound.jsx","components/Instruction.jsx","pages/Schedule.jsx","pages/Pupils.jsx","pages/Finance.jsx","pages/Settings.jsx","PrivateRoute.jsx","PrivateSignedInRoute.jsx","App.js","redux/reducers/pupils.js","redux/reducers/schedules.js","redux/reducers/scheduledLessons.js","redux/reducers/date.js","redux/reducers/user.js","redux/reducers/index.js","redux/store.js","index.js"],"names":["app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","emailAuthProvider","EmailAuthProvider","languageCode","AuthContext","React","createContext","test","AuthProvider","children","useState","currentUser","setCurrentUser","loading","setLoading","firstLogin","setFirstLogin","useEffect","onAuthStateChanged","user","metadata","lastSignInTime","creationTime","console","log","first","URLSearchParams","document","location","search","substring","get","Boolean","getIdToken","reload","value","signup","email","password","createUserWithEmailAndPassword","login","authCred","credential","signInWithEmailAndPassword","verifyEmail","sendEmailVerification","url","handleCodeInApp","updateUser","name","updateProfile","displayName","signout","signOut","Provider","theme","createMuiTheme","palette","primary","main","blue","secondary","orange","text","typography","body1","fontSize","overrides","MuiDrawer","paper","backgroundColor","MuiButton","label","color","containedSecondary","MuiIconButton","colorSecondary","root","MuiCardContent","paddingBottom","InfoPanelCard","header","date","Card","className","Box","CardContent","Typography","gutterBottom","variant","component","toISOString","slice","initialState","items","isLoaded","lessons","state","action","type","payload","id","newItem","field","newState","days","endingsForm","n","a","b","InfoPanel","numLessons","useSelector","Object","keys","length","selected","Container","maxWidth","Grid","container","spacing","Hidden","xsDown","item","Date","getDay","MuiPickersDay","daySelected","current","MuiCalendar","handleClick","dispatch","useDispatch","utils","DateFnsUtils","locale","ruLocale","ThemeProvider","DatePicker","autoOk","disableToolbar","openTo","onChange","setDate","Calendar","forwardRef","props","ref","useRef","fetchLessons","ISODate","timer","stopwatch","fastRetrieveLessons","query","setLessons","postLesson","lesson","preventIsLoaded","doc","uid","set","addLesson","retrievedLessons","collection","where","orderBy","forEach","lessonDoc","data","deleteLessonAction","updateLesson","fn","before","performance","now","args","apply","result","after","MyTextField","useField","meta","TextField","error","touched","helperText","MySelect","Fragment","Select","NotesFormInputs","margin","autoComplete","fullWidth","initialValues","note","validationSchema","yup","shape","max","withWidth","open","width","handleClose","handleSnack","Dialog","onClose","aria-labelledby","fullScreen","isWidthDown","DialogTitle","DialogContent","onSubmit","values","actions","setSubmitting","update","changeLesson","Button","onClick","retrieveSchedules","schedules","postSchedule","schPromises","map","schedule","Promise","all","addSchedule","setSchedules","updateLessonsField","retrieveSchedulesByDay","today","getISODay","localISODate","includes","fetchScheduledLessons","setScheduledLessons","LessonCard","time","address","subject","anchorEl","setAnchorEl","viewNotesForm","setViewNotesForm","selectedDate","keepMounted","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","MenuList","autoFocus","MenuItem","delete","deleteLesson","FieldValue","arrayRemove","procedure","deleteLessonFromSchedule","IconButton","aria-label","e","currentTarget","LessonFromTemplateInputs","formInitialValues","required","notes","combineDispatches","funcs","pupilId","scheduleId","uniqid","pupil","arrayUnion","addLessonToSchedule","LessonTemplateCard","viewForm","setViewForm","menuProps","iconComponent","AddLessonInputs","pupils","xs","FormControl","InputLabel","labelId","MenuProps","IconComponent","key","inputProps","step","tzoffset","getTimezoneOffset","typeError","matches","SnackPopup","message","Snackbar","size","Lessons","anchor","handleCalendarOpen","handleCalendarClose","handleCalendarClick","lessonsLoaded","pupilsLoaded","scheduledLessons","scheduledLessonsLoaded","viewAddLessonForm","setViewAddLessonForm","snackView","setSnackView","snackThemeView","setSnackThemeView","snackNotesView","setSnackNotesView","calendar","setTimeout","clearTimeout","startIcon","mdUp","entries","Array","fill","_","index","Skeleton","to","ListItem","button","NavLink","ListItemIcon","mdDown","ListItemText","Collapse","in","timeout","unmountOnExit","MenuHeader","MenuDrawer","Drawer","List","classNames","Divider","useStyles","makeStyles","drawerPaper","position","top","MenuDrawerMobile","setOpen","handleDrawer","prev","classes","AppBar","Toolbar","edge","MenuControls","MenuMdDrawer","Menu","smUp","only","PupilCard","schedulesId","grade","parents","contacts","CardHeader","avatar","Avatar","title","subheader","day","join","CardActions","AddPupilInputs","useFormikContext","InputProps","min","insert","remove","push","contact","startAdornment","InputAdornment","Tooltip","1","2","3","4","5","6","7","AddScheduleInputs","price","of","oneOf","positive","retrievePupils","retrievedPupils","pupilDoc","postPupil","addPupil","setPupils","formHandler","year","getFullYear","timestamp","steps","getForm","activeStep","setActiveStep","currentValidationSchema","isLastStep","Stepper","Step","StepLabel","submitForm","setTouched","prevActiveStep","PupilsList","schedulesLoaded","viewAddPupilForm","setViewAddPupilForm","md","sm","i","firstName","lastName","recaptcha","notOneOf","SignupInputs","ErrorSnack","TransitionComponent","Grow","autoHideDuration","Recaptcha","errors","setFieldTouched","setFieldValue","recaptchaVerifier","RecaptchaVerifier","callback","response","render","then","widgetId","postUser","addUser","Signup","history","useHistory","useContext","setError","viewSnack","setViewSnack","handleSubmit","userCredential","code","CssBaseline","direction","alignItems","disabled","mt","LoginInputs","Login","NotFound","height","marginBottom","paddingTop","fontWeight","borderRadius","Instruction","p","pt","mb","Link","Schedule","anchorCalendar","smDown","Pupils","Finance","Settings","ListItemAvatar","PrivateRoute","Component","rest","emailVerified","PrivateSignedInRoute","Content","path","App","StylesProvider","injectFirst","newLessons","filter","rootReducer","combineReducers","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.11ce3947.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\n\r\nconst app = firebase.initializeApp({\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n});\r\n\r\nexport const db = app.firestore();\r\nexport const auth = app.auth();\r\nexport default app;\r\nexport const emailAuthProvider = firebase.auth.EmailAuthProvider;\r\n","import { isEmptyArray } from 'formik';\r\nimport React from 'react';\r\nimport { auth, emailAuthProvider } from '../firebase';\r\n\r\nauth.languageCode = 'ru';\r\nexport const AuthContext = React.createContext({ test: 'success' });\r\n\r\nfunction AuthProvider({ children }) {\r\n  const [currentUser, setCurrentUser] = React.useState(null);\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [firstLogin, setFirstLogin] = React.useState(false);\r\n\r\n  const signup = (email, password) => {\r\n    return auth.createUserWithEmailAndPassword(email, password);\r\n  };\r\n  const login = (email, password) => {\r\n    const authCred = emailAuthProvider.credential(email, password);\r\n    console.log(authCred);\r\n    return auth.signInWithEmailAndPassword(email, password);\r\n  };\r\n  const updateUser = (name) => auth.currentUser.updateProfile({ displayName: name });\r\n  const signout = () => auth.signOut();\r\n  //  const getCredential = (credential) = () => credential. ;\r\n  // somehow this func runs befare currentUser state updating (race condition)\r\n  const verifyEmail = (user) =>\r\n    user.sendEmailVerification({\r\n      url: 'https://pampush.github.io/tutor/?first=true',\r\n      handleCodeInApp: true,\r\n    });\r\n\r\n  React.useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        if (user.metadata.lastSignInTime === user.metadata.creationTime) {\r\n          console.log('equal');\r\n          let params = new URLSearchParams(document.location.search.substring(1));\r\n          let first = params.get('first'); // is the string \"Jonathan\"\r\n          setFirstLogin(Boolean(first));\r\n        }\r\n        console.log('onauth');\r\n        console.log(user.getIdToken());\r\n        //сonsole.log(auth.checkActionCode());\r\n        setCurrentUser(user);\r\n        user.reload();\r\n        setLoading(false);\r\n      } else {\r\n        setCurrentUser(user);\r\n        setLoading(false);\r\n      }\r\n    });\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const value = {\r\n    currentUser,\r\n    signup,\r\n    login,\r\n    verifyEmail,\r\n    updateUser,\r\n    signout,\r\n    firstLogin,\r\n    setFirstLogin,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>{!loading ? children : 'loading'}</AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport { AuthProvider };\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport orange from '@material-ui/core/colors/orange';\r\n/**\r\n * Global material ui styles overrides\r\n */\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: blue[500],\r\n    },\r\n    secondary: {\r\n      main: orange[500],\r\n    },\r\n    text: {\r\n      primary: '#000000',\r\n      secondary: '#9E9E9E',\r\n    },\r\n  },\r\n  typography: {\r\n    body1: { fontSize: '1.3rem' },\r\n  },\r\n\r\n  overrides: {\r\n    MuiDrawer: {\r\n      paper: {\r\n        backgroundColor: '#F5F5F5',\r\n      },\r\n    },\r\n    MuiButton: {\r\n      label: { color: '#ffffff' },\r\n      containedSecondary: {\r\n        '&:hover': {\r\n          backgroundColor: 'rgba(255, 192, 70, 0.5)',\r\n        },\r\n      },\r\n    },\r\n    MuiIconButton: {\r\n      colorSecondary: {\r\n        '&:hover': {\r\n          backgroundColor: 'rgba(255, 192, 70, 0.5)',\r\n        },\r\n      },\r\n      root: {},\r\n    },\r\n    MuiCardContent: {\r\n      root: {\r\n        '&:last-child': { paddingBottom: '16px' },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import React from 'react';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction InfoPanelCard({ children, header, date }) {\r\n  return (\r\n    <Card className=\"info__card\">\r\n      <Box className=\"info__svg-container\">{children}</Box>\r\n      <CardContent className=\"info__content\">\r\n        <Typography gutterBottom variant=\"h5\" component=\"h2\" className=\"info__title\">\r\n          {header}\r\n        </Typography>\r\n        <Typography variant=\"body2\" component=\"p\" className=\"info__subtitle\">\r\n          {date.toISOString().slice(0, 10)}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default InfoPanelCard;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst lessons = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_LESSONS_BY_DATE':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_LESSONS_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'ADD_LESSON': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_LESSON': {\r\n      const newItem = { ...state.items[action.payload.id] };\r\n      newItem[action.payload.field] = action.payload.value;\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: newItem },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n\r\n    case 'DELETE_LESSON': {\r\n      const newState = { ...state.items };\r\n      delete newState[action.payload];\r\n      return {\r\n        ...state,\r\n        items: newState,\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default lessons;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\n\r\nimport InfoPanelCard from './InfoPanelCard';\r\nimport lessons from '../redux/reducers/lessons';\r\n\r\nconst days = ['воскресенье', 'понедельник', 'вторник', 'cреда', 'четверг', 'пятница', 'суббота'];\r\nconst endings = ['урок', 'урока', 'уроков'];\r\n\r\nfunction endingsForm(n) {\r\n  let a = n % 100;\r\n  let b = a % 10;\r\n  if (a > 10 && a < 20) return 'уроков';\r\n  if (b > 1 && b < 5) return 'урока';\r\n  if (b === 1) return 'урок';\r\n  return 'уроков';\r\n}\r\n\r\nfunction InfoPanel() {\r\n  let numLessons = useSelector(({ lessons }) => lessons.items);\r\n  numLessons = Object.keys(numLessons).length;\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  return (\r\n    <Container maxWidth=\"md\" className=\"info__container\">\r\n      <Grid container spacing={2}>\r\n        <Hidden xsDown>\r\n          <Grid item>\r\n            <InfoPanelCard header={days[new Date().getDay()]} date={new Date()}>\r\n              <CalendarTodayIcon />\r\n            </InfoPanelCard>\r\n          </Grid>\r\n          <Grid item>\r\n            <InfoPanelCard header={endingsForm(numLessons)} date={date}>\r\n              {numLessons}\r\n            </InfoPanelCard>\r\n          </Grid>\r\n          <Grid item>\r\n            <InfoPanelCard date={date} />\r\n          </Grid>\r\n        </Hidden>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default InfoPanel;\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport ruLocale from 'date-fns/locale/ru';\r\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport orange from '@material-ui/core/colors/orange';\r\n\r\nimport { setDate } from '../redux/actions/date';\r\n\r\nconst theme = createMuiTheme({\r\n  overrides: {\r\n    MuiPickersDay: {\r\n      daySelected: {\r\n        backgroundColor: orange[500],\r\n        '&:hover': {\r\n          backgroundColor: orange[500],\r\n        },\r\n      },\r\n      current: {\r\n        color: orange[500],\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nfunction MuiCalendar({ handleClick }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  const handleCellClick = (date) => {\r\n    dispatch(setDate(date));\r\n    handleClick(date);\r\n  };\r\n\r\n  return (\r\n    <MuiPickersUtilsProvider utils={DateFnsUtils} locale={ruLocale}>\r\n      <ThemeProvider theme={theme}>\r\n        <DatePicker\r\n          autoOk\r\n          disableToolbar\r\n          variant=\"static\"\r\n          openTo=\"date\"\r\n          value={date}\r\n          onChange={handleCellClick}\r\n        />\r\n      </ThemeProvider>\r\n    </MuiPickersUtilsProvider>\r\n  );\r\n}\r\n\r\nconst Calendar = React.forwardRef((props, ref) => {\r\n  return (\r\n    <MuiCalendar useRef={ref} {...props}>\r\n      {props.children}\r\n    </MuiCalendar>\r\n  );\r\n});\r\n\r\nexport default Calendar;\r\n","export const setDate = (date) => ({\r\n  type: 'SET_DATE',\r\n  payload: date,\r\n});\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\n\r\n/**\r\n * middleware thunk function used for async data fetching and\r\n * dispatching actual event(action) to reducer\r\n * QUERY FORMAT: ['property', '==', 'value']\r\n * @param {date} date\r\n * @returns\r\n */\r\n//TODO: integrate with auth\r\nexport const fetchLessons = (date) => async (dispatch) => {\r\n  // const tzoffset = new Date().getTimezoneOffset() * 60000;\r\n  // const localISOTime = new Date(date.getTime() - tzoffset).toISOString().slice(0, 10);\r\n  const ISODate = date.toISOString().slice(0, 10);\r\n  dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  const timer = stopwatch(fastRetrieveLessons);\r\n  const query = ['date', '==', `${ISODate}`];\r\n  const lessons = await timer(query);\r\n\r\n  dispatch(setLessons(lessons));\r\n};\r\n\r\nexport const postLesson = (lesson, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  if (!preventIsLoaded) dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  await db.doc(`/users/${auth.currentUser.uid}/lessons/${lesson.id}`).set(lesson);\r\n  dispatch(addLesson(lesson));\r\n};\r\n\r\n/**\r\n * retrieve lessons using collectionGroup method\r\n * @param {object} user\r\n * @param {object[]} pupils\r\n * @param {array} query firestore query format array\r\n * @returns {object[]} lesson result array going to be stored in redux store\r\n */\r\nasync function fastRetrieveLessons(query) {\r\n  let retrievedLessons = {};\r\n  const lessonsSnapshot = await db\r\n    .collection(`/users/${auth.currentUser.uid}/lessons`)\r\n    .where(...query)\r\n    .orderBy('time')\r\n    .get();\r\n  lessonsSnapshot.forEach((lessonDoc) => {\r\n    retrievedLessons = { ...retrievedLessons, [lessonDoc.id]: lessonDoc.data() };\r\n  });\r\n  return retrievedLessons;\r\n}\r\n\r\nexport const deleteLesson = (id) => async (dispatch) => {\r\n  dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  await db.doc(`/users/${auth.currentUser.uid}/lessons/${id}`).delete();\r\n\r\n  await dispatch(deleteLessonAction(id));\r\n};\r\n\r\nexport const changeLesson = ({ id, field, value }) => async (dispatch) => {\r\n  dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  await db.doc(`/users/${auth.currentUser.uid}/lessons/${id}`).update({ [field]: value });\r\n  dispatch(updateLesson({ id, field, value }));\r\n};\r\n/**\r\n * @param {object[]} items lessons array\r\n * @returns {object} - send action object to reducer\r\n */\r\nexport const setLessons = (items) => ({\r\n  type: 'SET_LESSONS_BY_DATE',\r\n  payload: items,\r\n});\r\n\r\nexport const addLesson = (item) => ({\r\n  type: 'ADD_LESSON',\r\n  payload: item,\r\n});\r\n\r\nexport const deleteLessonAction = (id) => ({\r\n  type: 'DELETE_LESSON',\r\n  payload: id,\r\n});\r\n\r\nexport const updateLesson = ({ id, field, value }) => ({\r\n  type: 'UPDATE_LESSON',\r\n  payload: { id, field, value },\r\n});\r\n/**\r\n * util func for performance measuring needs\r\n * @param {*} fn\r\n * @returns\r\n */\r\nfunction stopwatch(fn) {\r\n  return async (...args) => {\r\n    const before = performance.now();\r\n    const result = await fn.apply(this, args);\r\n    const after = performance.now();\r\n    console.log(`finished: ${after - before}`);\r\n    return result;\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { useField } from 'formik';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nexport const MyTextField = ({ ...props }) => {\r\n  const [field, meta, helpers] = useField(props.name);\r\n  return (\r\n    <TextField\r\n      {...field}\r\n      {...props}\r\n      error={meta.touched && Boolean(meta.error)}\r\n      helperText={meta.touched && meta.error}\r\n    />\r\n  );\r\n};\r\n\r\nexport const MySelect = ({ ...props }) => {\r\n  const [field, meta] = useField(props);\r\n  return (\r\n    <React.Fragment>\r\n      <Select {...field} {...props} error={meta.touched && Boolean(meta.error)} />\r\n      {meta.touched && meta.error ? (\r\n        <span className=\"lesson-form__select-error\">{meta.error}</span>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import React from 'react';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nfunction NotesFormInputs() {\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField margin=\"normal\" name=\"note\" label=\"Заметки\" autoComplete=\"off\" fullWidth />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default NotesFormInputs;\r\n","const initialValues = (note) => ({\r\n  note,\r\n});\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  note: yup.string('Отредактируйте заметку').max(50, 'Заметка не может быть длиннее 500 символов'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport NotesFormInputs from './NotesFormInputs';\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { changeLesson } from '../../redux/actions/lessons';\r\n\r\nfunction NotesForm({ open, width, handleClose, handleSnack, id, note }) {\r\n  const dispatch = useDispatch();\r\n  function handleSubmit(values, actions) {\r\n    handleSnack(true);\r\n    actions.setSubmitting(false);\r\n\r\n    dispatch(changeLesson({ id, field: 'note', value: values.note }));\r\n  }\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Заметки об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues(note)}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <NotesFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(NotesForm);\r\n","import { db, auth } from '../../firebase';\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\n\r\n\r\nexport const fetchSchedules = () => async (dispatch) => {\r\n  dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n\r\n  const schedules = await retrieveSchedules();\r\n\r\n  dispatch(setSchedules(schedules));\r\n};\r\n\r\nasync function retrieveSchedules(user) {\r\n  let schedules = {};\r\n  const snapshot = await db.collection(`/users/${auth.currentUser.uid}/schedules/`).get();\r\n  snapshot.forEach((doc) => (schedules = { ...schedules, [doc.id]: doc.data() }));\r\n  return schedules;\r\n}\r\n\r\nexport const postSchedule = (schedules) => async (dispatch) => {\r\n  dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n\r\n  const schPromises = schedules.map((schedule) =>\r\n    db.doc(`/users/${auth.currentUser.uid}/schedules/${schedule.id}`).set({ ...schedule }),\r\n  );\r\n  await Promise.all(schPromises);\r\n  dispatch(addSchedule(schedules));\r\n};\r\n\r\nexport const addLessonToSchedule = ({ id, date }, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n  await db\r\n    .doc(`/users/${auth.currentUser.uid}/schedules/${id}/`)\r\n    .update({ lessons: firebase.firestore.FieldValue.arrayUnion(date) });\r\n\r\n  dispatch(updateLessonsField({ procedure: 'push', id, date }));\r\n};\r\n\r\nexport const deleteLessonFromSchedule = ({ date, id }) => async (dispatch) => {\r\n  dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n  await db\r\n    .doc(`/users/${auth.currentUser.uid}/schedules/${id}/`)\r\n    .update({ lessons: firebase.firestore.FieldValue.arrayRemove(date) });\r\n\r\n  dispatch(updateLessonsField({ procedure: 'pop', date, id }));\r\n};\r\n\r\nexport const setSchedules = (items) => ({\r\n  type: 'SET_SCHEDULES',\r\n  payload: items,\r\n});\r\n\r\nexport const addSchedule = (data) => ({\r\n  type: 'ADD_SCHEDULE',\r\n  payload: data,\r\n});\r\n\r\nexport const updateLessonsField = (data) => ({\r\n  type: 'UPDATE_LESSONS_FIELD',\r\n  payload: data,\r\n});\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\nimport { getISODay } from 'date-fns';\r\n\r\nasync function retrieveSchedulesByDay(date) {\r\n  let schedules = {};\r\n  const today = getISODay(date);\r\n  const localISODate = date.toISOString().slice(0, 10);\r\n\r\n  const snapshot = await db\r\n    .collection(`/users/${auth.currentUser.uid}/schedules/`)\r\n    .where('day', '==', today)\r\n    .get();\r\n\r\n  snapshot.forEach((doc) => {\r\n    if (!doc.data().lessons.includes(localISODate))\r\n      schedules = { ...schedules, [doc.id]: doc.data() };\r\n  });\r\n  return schedules;\r\n}\r\n\r\nexport const fetchScheduledLessons = (date, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULED_LESSONS_LOADED', payload: false });\r\n  const schedules = await retrieveSchedulesByDay(date);\r\n\r\n  dispatch(setScheduledLessons(schedules));\r\n};\r\n\r\nexport const setScheduledLessons = (items) => ({\r\n  type: 'SET_SCHEDULED_LESSONS',\r\n  payload: items,\r\n});\r\n\r\nexport const setScheduledLessonsLoaded = (value) => ({\r\n  type: 'SET_SCHEDULED_LESSONS_LOADED',\r\n  payload: value,\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { deleteLesson } from '../redux/actions/lessons';\r\nimport NotesForm from './notesForm/NotesForm';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { deleteLessonFromSchedule } from '../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../redux/actions/scheduledLessons';\r\n\r\nfunction LessonCard({\r\n  id,\r\n  time,\r\n  theme,\r\n  date,\r\n  name,\r\n  address,\r\n  subject,\r\n  note,\r\n  schedule,\r\n  handleSnack,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [viewNotesForm, setViewNotesForm] = React.useState(false);\r\n  const selectedDate = useSelector(({ date }) => date.selected);\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n\r\n  /**\r\n   * How does dispatch actually work?\r\n   * Am I supposed to chain dispatches to make sure async requests queuing in sequence? \r\n   */\r\n  function handleDelete() {\r\n    dispatch(deleteLesson(id));\r\n    if (schedule) dispatch(deleteLessonFromSchedule({ id: schedule, date }));\r\n    dispatch(fetchScheduledLessons(selectedDate));\r\n  }\r\n\r\n  const clickNotesForm = () => setViewNotesForm(true);\r\n  const closeNotesForm = () => setViewNotesForm(false);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <NotesForm\r\n        open={viewNotesForm}\r\n        handleSnack={handleSnack}\r\n        note={note}\r\n        id={id}\r\n        handleClose={closeNotesForm}\r\n      />\r\n\r\n      <Card className=\"lesson__container\">\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          getContentAnchorEl={null}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}>\r\n          <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n            <MenuItem onClick={handleClose}>Домашняя работа</MenuItem>\r\n            <MenuItem onClick={clickNotesForm}>Заметки</MenuItem>\r\n            <MenuItem onClick={handleClose}>push</MenuItem>\r\n            <MenuItem onClick={handleClose}>Редактировать</MenuItem>\r\n            <MenuItem onClick={handleDelete}>Удалить</MenuItem>\r\n          </MenuList>\r\n        </Menu>\r\n        <CardContent>\r\n          <Box className=\"lesson__header\">\r\n            <Typography gutterBottom variant=\"h5\" className=\"lesson__header-text\">\r\n              {time} {subject}\r\n            </Typography>\r\n            <IconButton aria-label=\"menu\" className=\"lesson__header-more\" onClick={handleClick}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          </Box>\r\n          <Typography variant=\"h5\" color=\"textPrimary\" className=\"lesson__theme\" component=\"p\">\r\n            {theme}\r\n          </Typography>\r\n          <Typography variant=\"subtitle2\" color=\"textPrimary\" component=\"p\">\r\n            {name}, {address}\r\n          </Typography>\r\n        </CardContent>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nLessonCard.propTypes = {\r\n  time: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  address: PropTypes.string.isRequired,\r\n  theme: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LessonCard;\r\n","import React from 'react';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nconst LessonFromTemplateInputs = () => {\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField margin=\"normal\" name=\"theme\" label=\"Тема\" autoComplete=\"off\" fullWidth />\r\n      <MyTextField margin=\"normal\" name=\"note\" label=\"Заметки\" autoComplete=\"off\" fullWidth />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default LessonFromTemplateInputs;\r\n","const formInitialValues = {\r\n  theme: '',\r\n  note: '',\r\n};\r\n\r\nexport default formInitialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup\r\n    .string('Введите тему урока')\r\n    .max(200, 'Слишком длинная тема, попробуйте сократить')\r\n    .required('Необходимо указать тему урока'),\r\n  notes: yup\r\n    .string('Для заметок')\r\n    .max(500, 'Заметка не может быть длиннее 500 символов')\r\n});\r\n\r\nexport default validationSchema;\r\n","export const combineDispatches = async (...funcs) => {\r\n  for(const fn of funcs)\r\n    await fn(); \r\n}","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport uniqid from 'uniqid';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport LessonFromTemplateInputs from './LessonFromTemplateInputs';\r\nimport formInitialValues from './formInitialValues';\r\nimport validationSchema from './validationSchema';\r\n\r\nimport { postLesson } from '../../redux/actions/lessons';\r\nimport { addLessonToSchedule } from '../../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport { combineDispatches } from '../../redux/actions/combineDispatches';\r\nimport { setScheduledLessonsLoaded } from '../../redux/actions/scheduledLessons';\r\n\r\nfunction LessonFromTemplateForm({ width, open, handleClose, pupilId, scheduleId, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const schedule = useSelector(({ schedules }) => schedules.items[scheduleId]);\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  function handleSubmit(values, actions) {\r\n    const lesson = {\r\n      id: uniqid(),\r\n      date: date.toISOString().slice(0, 10),\r\n      time: schedule.time,\r\n      schedule: scheduleId,\r\n      pupil: pupilId,\r\n      theme: values.theme,\r\n      subject: schedule.subject,\r\n      note: values.note,\r\n    };\r\n\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n\r\n    /**\r\n     * bicycle for async chained invocations\r\n     * preventIsLoaded prevents isLoaded redux property action call\r\n     */\r\n    combineDispatches(\r\n      () => dispatch(setScheduledLessonsLoaded(false)),\r\n      () => dispatch(postLesson(lesson, { preventIsLoaded: true })),\r\n      () =>\r\n        dispatch(addLessonToSchedule({ date: lesson.date, id: scheduleId }, { preventIsLoaded: true })),\r\n      () => dispatch(fetchScheduledLessons(date, { preventIsLoaded: true })),\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <LessonFromTemplateInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(LessonFromTemplateForm);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nimport LessonFromTemplateForm from './lessonFromTemplateForm/LessonFromTemplateForm';\r\n\r\nfunction LessonTemplateCard({ time, pupilId, scheduleId, subject, name, address, handleSnack }) {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [viewForm, setViewForm] = React.useState(false);\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n\r\n  const handleCloseForm = () => setViewForm(false);\r\n  const handleOpenForm = () => setViewForm(true);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <LessonFromTemplateForm\r\n        open={viewForm}\r\n        pupilId={pupilId}\r\n        scheduleId={scheduleId}\r\n        handleClose={handleCloseForm}\r\n        handleSnack={handleSnack}\r\n      />\r\n\r\n      <Card className=\"lesson__container lesson__container--template\">\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          getContentAnchorEl={null}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}>\r\n          <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n            <MenuItem onClick={handleOpenForm}>Изменить тему</MenuItem>\r\n          </MenuList>\r\n        </Menu>\r\n        <CardContent>\r\n          <Box className=\"lesson__header\">\r\n            <Typography gutterBottom variant=\"h5\" className=\"lesson__header-text\">\r\n              {time} {subject} (шаблон урока)\r\n            </Typography>\r\n            <IconButton aria-label=\"menu\" className=\"lesson__header-more\" onClick={handleClick}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          </Box>\r\n          <Typography variant=\"h5\" color=\"textPrimary\" className=\"lesson__theme\" component=\"p\">\r\n            Введите тему урока, открыв меню справа\r\n          </Typography>\r\n          <Typography variant=\"subtitle2\" color=\"textPrimary\" component=\"p\">\r\n            {name}, {address}\r\n          </Typography>\r\n        </CardContent>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nLessonTemplateCard.propTypes = {\r\n  time: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  address: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LessonTemplateCard;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nimport { MyTextField, MySelect } from '../CustomInputs';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nexport default function AddLessonInputs() {\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField margin=\"normal\" name=\"theme\" label=\"Тема\" autoComplete=\"off\" fullWidth />\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={6}>\r\n          <FormControl fullWidth>\r\n            <InputLabel id=\"lesson-form__select-label\">Ученик</InputLabel>\r\n            <MySelect\r\n              labelId=\"lesson-form__select-label\"\r\n              name=\"pupil\"\r\n              MenuProps={menuProps}\r\n              IconComponent={iconComponent}>\r\n              {Object.keys(pupils).map((key) => (\r\n                <MenuItem key={key} value={pupils[key].id}>\r\n                  {pupils[key].name}\r\n                </MenuItem>\r\n              ))}\r\n            </MySelect>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <MyTextField margin=\"none\" name=\"subject\" label=\"Предмет\" autoComplete=\"off\" fullWidth />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <MyTextField\r\n            margin=\"normal\"\r\n            name=\"date\"\r\n            label=\"Дата\"\r\n            type=\"date\"\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <MyTextField\r\n            margin=\"normal\"\r\n            name=\"time\"\r\n            label=\"Время урока\"\r\n            type=\"time\"\r\n            inputProps={{\r\n              step: 300, // 5 min\r\n            }}\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","const tzoffset = new Date().getTimezoneOffset() * 60000;\r\nconst localISOTime = new Date(Date.now() - tzoffset).toISOString().slice(0, 10);\r\n\r\nconst formInitialValues = {\r\n  theme: '',\r\n  pupil: '',\r\n  subject: '',\r\n  note: '',\r\n  date: localISOTime,\r\n  time: '15:00',\r\n};\r\n\r\nexport default formInitialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup\r\n    .string('Введите тему урока')\r\n    .max(200, 'Слишком длинная тема, попробуйте сократить')\r\n    .required('Необходимо указать тему урока'),\r\n  pupil: yup.mixed().typeError('Такого ученика не существует').required('Укажите ученика'),\r\n  subject: yup\r\n    .string('Укажите предмет')\r\n    .max(100, 'Слишком длинная строка, попробуйте сократить')\r\n    .typeError('Предмет должен быть строкой')\r\n    .required('Укажите ваш предмет'),\r\n  date: yup.string('Укажите дату урока').required('Укажите дату урока'),\r\n  time: yup\r\n    .string('Укажите время занятия')\r\n    .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Введите время занятия в формате: \"17:00\"'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport uniqid from 'uniqid';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport AddLessonInputs from './AddLessonInputs';\r\nimport formInitialValues from './formInitialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { postLesson } from '../../redux/actions/lessons';\r\n\r\nfunction AddLessonForm({ width, open, handleClose, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n  formInitialValues.date = date.toISOString().slice(0, 10);\r\n\r\n  function handleSubmit(values, actions) {\r\n    const lesson = {\r\n      id: uniqid(),\r\n      theme: values.theme,\r\n      date: values.date,\r\n      time: values.time,\r\n      pupil: values.pupil,\r\n      schedule: null,\r\n      subject: values.subject,\r\n    };\r\n    handleSnack(true);\r\n    actions.setSubmitting(false);\r\n    dispatch(postLesson(lesson));\r\n    handleClose();\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <AddLessonInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddLessonForm);\r\n","import React from 'react';\r\nimport { IconButton, Snackbar, Button } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nfunction SnackPopup({ open, message }) {\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'center',\r\n      }}\r\n      open={open}\r\n      message={message}\r\n      action={\r\n        <React.Fragment>\r\n          <Button color=\"secondary\" size=\"small\">\r\n            Отменить\r\n          </Button>\r\n          <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\">\r\n            <CloseIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </React.Fragment>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default SnackPopup;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport Box from '@material-ui/core/Box';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport Calendar from './Calendar';\r\nimport LessonCard from './LessonCard';\r\nimport LessonTemplateCard from './LessonTemplateCard';\r\nimport AddLessonForm from './addLessonForm/AddLessonForm';\r\nimport SnackPopup from './SnackPopup';\r\n\r\nfunction Lessons({ anchor, handleCalendarOpen, handleCalendarClose, handleCalendarClick }) {\r\n  const lessons = useSelector(({ lessons }) => lessons.items);\r\n  const lessonsLoaded = useSelector(({ lessons }) => lessons.isLoaded);\r\n\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const pupilsLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n\r\n  const scheduledLessons = useSelector(({ scheduledLessons }) => scheduledLessons.items);\r\n  const scheduledLessonsLoaded = useSelector(({ scheduledLessons }) => scheduledLessons.isLoaded);\r\n\r\n  const isLoaded = lessonsLoaded && pupilsLoaded && scheduledLessonsLoaded;\r\n\r\n  const [viewAddLessonForm, setViewAddLessonForm] = React.useState(false);\r\n  const [snackView, setSnackView] = React.useState(false);\r\n  const [snackThemeView, setSnackThemeView] = React.useState(false);\r\n  const [snackNotesView, setSnackNotesView] = React.useState(false);\r\n  const calendar = React.useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    let timer;\r\n    timer = setTimeout(() => {\r\n      setSnackView(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [snackView]);\r\n\r\n  React.useEffect(() => {\r\n    let timer;\r\n    timer = setTimeout(() => {\r\n      setSnackThemeView(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [snackThemeView]);\r\n\r\n  React.useEffect(() => {\r\n    let timer;\r\n    timer = setTimeout(() => {\r\n      setSnackNotesView(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [snackNotesView]);\r\n\r\n  const handleAddLessonFormClick = () => setViewAddLessonForm(true);\r\n  const handleCloseAddLessonForm = () => setViewAddLessonForm(false);\r\n\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h5\" className=\"lessons__header\">\r\n        Уроки\r\n      </Typography>\r\n\r\n      <Box className=\"lessons__buttons-container\">\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          startIcon={<AddIcon />}\r\n          className=\"lessons__button-text\"\r\n          onClick={handleAddLessonFormClick}>\r\n          Новый урок\r\n        </Button>\r\n        <Hidden mdUp>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={handleCalendarOpen}\r\n            startIcon={<CalendarTodayIcon />}\r\n            className=\"lessons__button-text\">\r\n            Выбрать день\r\n          </Button>\r\n          <Menu\r\n            id=\"simple-menu\"\r\n            anchorEl={anchor}\r\n            keepMounted\r\n            getContentAnchorEl={null}\r\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n            transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n            open={Boolean(anchor)}\r\n            onClose={handleCalendarClose}>\r\n            <Calendar ref={calendar} handleClick={handleCalendarClick} />\r\n          </Menu>\r\n        </Hidden>\r\n      </Box>\r\n\r\n      {viewAddLessonForm && (\r\n        <AddLessonForm\r\n          open={viewAddLessonForm}\r\n          handleClose={handleCloseAddLessonForm}\r\n          handleSnack={setSnackView}\r\n        />\r\n      )}\r\n\r\n      <SnackPopup open={snackView} message=\"Урок добавлен\" />\r\n      <SnackPopup open={snackThemeView} message=\"Тема изменена\" />\r\n      <SnackPopup open={snackNotesView} message=\"Заметка изменена\" />\r\n\r\n      <Container className=\"lessons__items-container\">\r\n        {isLoaded ? (\r\n          <React.Fragment>\r\n            {Object.entries(lessons).map(([key, value]) => (\r\n              <LessonCard\r\n                key={key}\r\n                name={pupils[value.pupil].name}\r\n                address={pupils[value.pupil].address}\r\n                handleSnack={setSnackNotesView}\r\n                {...value}\r\n              />\r\n            ))}\r\n            {Object.entries(scheduledLessons).map(([key, value]) => {\r\n              return (\r\n                <LessonTemplateCard\r\n                  key={key}\r\n                  time={value.time}\r\n                  scheduleId={value.id}\r\n                  pupilId={pupils[value.pupil].id}\r\n                  name={pupils[value.pupil].name}\r\n                  subject={value.subject}\r\n                  address={pupils[value.pupil].address}\r\n                  handleSnack={setSnackThemeView}\r\n                />\r\n              );\r\n            })}\r\n            {!(Object.keys(lessons).length || Object.keys(scheduledLessons).length) ? (\r\n              <Typography>На текущий день уроков не запланировано</Typography>\r\n            ) : null}\r\n          </React.Fragment>\r\n        ) : (\r\n          Array(4)\r\n            .fill(0)\r\n            .map((_, index) => (\r\n              <Skeleton key={index} variant=\"rect\" className=\"lessons__skeleton\" />\r\n            ))\r\n        )}\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Lessons;\r\n","import React from 'react';\r\n\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Hidden from '@material-ui/core/Hidden';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nfunction MenuItem({ children, name, open, to }) {\r\n  return (\r\n    <ListItem\r\n      button\r\n      className={open ? 'menu__button--drawer' : 'menu__button'}\r\n      component={NavLink}\r\n      to={to}\r\n    >\r\n      <ListItemIcon className=\"menu--center\">{children}</ListItemIcon>\r\n      <Hidden mdDown>\r\n        <ListItemText primary={name} />\r\n      </Hidden>\r\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\r\n        <ListItemText primary={name} />\r\n      </Collapse>\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nexport default MenuItem;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nfunction MenuHeader() {\r\n  const name = useSelector(({ user }) => user.name);\r\n  return (\r\n    <Grid container className=\"menu__header\">\r\n      <Grid item xs={6} className=\"menu__avatar\">\r\n        <AccountCircleIcon />\r\n      </Grid>\r\n      <Grid item xs={6} className=\"menu__settings menu__button\" component={NavLink} to=\"/settings\">\r\n        <IconButton>\r\n          <SettingsIcon />\r\n        </IconButton>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <Typography variant=\"h5\">{name}</Typography>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default MenuHeader;\r\n","\r\nimport classNames from 'classnames';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\n\r\nimport React from 'react';\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader'\r\n\r\nfunction MenuDrawer() {\r\n  return (\r\n    <Drawer variant=\"permanent\" anchor=\"left\">\r\n      <List className={classNames('menu__list')}>\r\n        <ListItem>\r\n          <MenuHeader />\r\n        </ListItem>\r\n\r\n        <Divider />\r\n\r\n        <Box className=\"menu__nav-container\">\r\n          <MenuItem open={false} name=\"Расписание\" to=\"/schedule\">\r\n            <CalendarTodayIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={false} name=\"Ученики\" to=\"/pupils\">\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={false} name=\"Финансы\" to=\"finance\">\r\n            <ShowChartIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n        </Box>\r\n      </List>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nexport default MenuDrawer;\r\n","import List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\n\r\nimport React from 'react';\r\nimport classNames from 'classnames';\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader';\r\n\r\nconst useStyles = makeStyles({\r\n  drawerPaper: {\r\n    position: 'fixed',\r\n    top: 'auto',\r\n  },\r\n});\r\n\r\nfunction MenuDrawerMobile() {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleDrawer = () => setOpen((prev) => !prev);\r\n\r\n  const classes = useStyles();\r\n  return (\r\n    <React.Fragment>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton edge=\"start\" color=\"inherit\" aria-label=\"open drawer\" onClick={handleDrawer}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      <Drawer\r\n        variant=\"temporary\"\r\n        open={open}\r\n        onClose={handleDrawer}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}>\r\n        <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <IconButton\r\n              edge=\"start\"\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              onClick={handleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <List className={classNames('menu__list', { 'menu__list--opened': open })}>\r\n          <ListItem>\r\n            <MenuHeader />\r\n          </ListItem>\r\n\r\n          <MenuItem open={open} name=\"Расписание\" to=\"/schedule\">\r\n            <CalendarTodayIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={open} name=\"Ученики\" to=\"/pupils\">\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={open} name=\"Финансы\" to=\"/finance\">\r\n            <ShowChartIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n        </List>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default MenuDrawerMobile;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader';\r\n\r\nfunction MenuControls({ open }) {\r\n  return (\r\n    <Box className=\"menu__nav-container\">\r\n      <MenuItem open={open} name=\"Расписание\" to=\"/schedule\">\r\n        <CalendarTodayIcon className=\"menu--svg\" />\r\n      </MenuItem>\r\n      <MenuItem open={open} name=\"Ученики\" to=\"/pupils\">\r\n        <FaceIcon className=\"menu--svg\" />\r\n      </MenuItem>\r\n      <MenuItem open={open} name=\"Финансы\" to=\"/finance\">\r\n        <ShowChartIcon className=\"menu--svg\" />\r\n      </MenuItem>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction MenuMdDrawer() {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleDrawer = () => setOpen((prev) => !prev);\r\n\r\n  return (\r\n    <Drawer\r\n      variant={open ? 'temporary' : 'permanent'}\r\n      anchor=\"left\"\r\n      open={open}\r\n      onClose={handleDrawer}>\r\n      <List className={classNames('menu__list', { 'menu__list--opened': open })}>\r\n        <ListItem button className={open ? '' : 'menu--center'} onClick={handleDrawer}>\r\n          <ListItemIcon className=\"menu--center\">\r\n            <MenuIcon className=\"menu--svg\" />\r\n          </ListItemIcon>\r\n        </ListItem>\r\n\r\n        {open && (\r\n          <ListItem>\r\n            <MenuHeader />\r\n          </ListItem>\r\n        )}\r\n\r\n        <Divider />\r\n        <MenuControls open={open} />\r\n      </List>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nexport default MenuMdDrawer;\r\n","import React from 'react';\r\nimport Hidden from '@material-ui/core/Hidden';\r\n\r\nimport MenuDrawer from './Menu/MenuLgDrawer';\r\nimport MenuDrawerMobile from './Menu/MenuSmDrawer';\r\nimport MenuMdDrawer from './Menu/MenuMdDrawer';\r\n\r\n//FIXME: implement clickAwayListener\r\n\r\nconst Menu = () => {\r\n  return (\r\n    <React.Fragment>\r\n      <Hidden smUp>\r\n        <MenuDrawerMobile />\r\n      </Hidden>\r\n      <Hidden only={['xs', 'lg', 'xl']}>\r\n        <MenuMdDrawer />\r\n      </Hidden>\r\n      <Hidden mdDown>\r\n        <MenuDrawer />\r\n      </Hidden>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\r\n\r\nfunction PupilCard({ name, schedulesId, grade, parents, address, contacts, schedules }) {\r\n  return (\r\n    <Card className=\"pupils__card\">\r\n      <CardHeader\r\n        className=\"pupils__card-header\"\r\n        avatar={\r\n          <Avatar aria-label=\"pupil\" className=\"pupils__card-avatar\">\r\n            R\r\n          </Avatar>\r\n        }\r\n        action={\r\n          <IconButton aria-label=\"Меню\">\r\n            <MoreVertIcon />\r\n          </IconButton>\r\n        }\r\n        title={name}\r\n        subheader={`Класс: ${grade}`}\r\n      />\r\n      <CardContent className=\"pupils__card-content\">\r\n        <Typography component=\"p\">\r\n          {schedulesId.map((id) => `${schedules[id].day}-${schedules[id].time} `)}\r\n        </Typography>\r\n        <Typography component=\"p\">{`Родители: ${parents}`}</Typography>\r\n        <Typography component=\"p\">{`Контакты: ${contacts.join(',')}`}</Typography>\r\n        <Typography component=\"p\">{`Адрес: ${address}`}</Typography>\r\n      </CardContent>\r\n      <CardActions className=\"pupils__homework\">\r\n        <IconButton color=\"secondary\" aria-label=\"Домашняя работа\">\r\n          <MenuBookIcon aria-label=\"homework\" />\r\n        </IconButton>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n}\r\n\r\nPupilCard.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  schedulesId: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n  schedules: PropTypes.object.isRequired,\r\n  grade: PropTypes.number.isRequired,\r\n  parents: PropTypes.string.isRequired,\r\n  address: PropTypes.string.isRequired,\r\n  contacts: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n};\r\n\r\nexport default PupilCard;\r\n","import React from 'react';\r\nimport { FieldArray, useFormikContext } from 'formik';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nfunction AddPupilInputs() {\r\n  const { values } = useFormikContext();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField autoFocus margin=\"normal\" name=\"name\" label=\"Имя\" autoComplete=\"off\" fullWidth />\r\n      <MyTextField\r\n        margin=\"normal\"\r\n        name=\"grade\"\r\n        label=\"Класс\"\r\n        type=\"number\"\r\n        InputProps={{\r\n          inputProps: { min: 1, max: 20 },\r\n        }}\r\n        autoComplete=\"off\"\r\n        fullWidth\r\n      />\r\n      <MyTextField margin=\"normal\" name=\"address\" label=\"Адрес\" autoComplete=\"off\" fullWidth />\r\n      <MyTextField margin=\"normal\" name=\"parents\" label=\"Родитель\" autoComplete=\"off\" fullWidth />\r\n\r\n      <FieldArray name=\"contacts\">\r\n        {({ insert, remove, push }) => (\r\n          <React.Fragment>\r\n            {values.contacts.length > 0 &&\r\n              values.contacts.map((contact, index) => (\r\n                <React.Fragment key={index}>\r\n                  <MyTextField\r\n                    margin=\"normal\"\r\n                    name={`contacts[${index}]`}\r\n                    label=\"Контакты\"\r\n                    autoComplete=\"off\"\r\n                    InputProps={{\r\n                      startAdornment: <InputAdornment position=\"start\">+7</InputAdornment>,\r\n                    }}\r\n                    fullWidth\r\n                  />\r\n                  {/*FIXME: iconbutton hover transparency on mobile screen*/}\r\n                  <Tooltip title=\"Удалить номер\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      aria-label=\"Удалить номер\"\r\n                      className=\"pupil-form__btn\"\r\n                      color=\"secondary\"\r\n                      onClick={() => remove(index)}>\r\n                      <ClearIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </React.Fragment>\r\n              ))}\r\n            <Tooltip title=\"Добавить номер\">\r\n              <IconButton\r\n                size=\"small\"\r\n                color=\"secondary\"\r\n                aria-label=\"Добавить номер\"\r\n                className=\"pupil-form__btn pupil-form__btn-add-contact\"\r\n                onClick={() => push('')}>\r\n                <AddIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </React.Fragment>\r\n        )}\r\n      </FieldArray>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default AddPupilInputs;\r\n","import React from 'react';\r\nimport { FieldArray, useField, useFormikContext } from 'formik';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nconst days = {\r\n  1: 'Понедельник',\r\n  2: 'Вторник',\r\n  3: 'Среда',\r\n  4: 'Четверг',\r\n  5: 'Пятница',\r\n  6: 'Суббота',\r\n  7: 'Воскресенье',\r\n};\r\n\r\nfunction MyTextField({ ...props }) {\r\n  const [field, meta, helpers] = useField(props.name);\r\n  return (\r\n    <TextField\r\n      {...field}\r\n      {...props}\r\n      error={meta.touched && Boolean(meta.error)}\r\n      helperText={meta.touched && meta.error}\r\n    />\r\n  );\r\n}\r\n\r\nconst MySelect = ({ ...props }) => {\r\n  const [field, meta] = useField(props);\r\n  return (\r\n    <React.Fragment>\r\n      <Select {...field} {...props} error={meta.touched && Boolean(meta.error)} />\r\n      {meta.touched && meta.error ? (\r\n        <span className=\"pupil-form__select-error\">{meta.error}</span>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nfunction AddScheduleInputs() {\r\n  const { values } = useFormikContext();\r\n\r\n  return (\r\n    <FieldArray name=\"schedules\">\r\n      {({ insert, remove, push }) => (\r\n        <React.Fragment>\r\n          {values.schedules.length > 0 &&\r\n            values.schedules.map((schedule, index) => (\r\n              <React.Fragment key={index}>\r\n                <Grid container spacing={4}>\r\n                  <Grid item xs={6}>\r\n                    <FormControl fullWidth>\r\n                      <InputLabel id=\"pupil-form__select-label\">День занятия</InputLabel>\r\n                      <MySelect\r\n                        labelId=\"pupil-form__select-label\"\r\n                        name={`schedules[${index}].day`}\r\n                        MenuProps={menuProps}\r\n                        IconComponent={iconComponent}>\r\n                        {Object.keys(days).map((key) => (\r\n                          <MenuItem key={key} value={key}>\r\n                            {days[key]}\r\n                          </MenuItem>\r\n                        ))}\r\n                      </MySelect>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid item xs={6}>\r\n                    <MyTextField\r\n                      margin=\"none\"\r\n                      name={`schedules[${index}].time`}\r\n                      type=\"time\"\r\n                      label=\"Время занятия\"\r\n                      inputProps={{\r\n                        step: 300, // 5 min\r\n                      }}\r\n                      fullWidth\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n                <MyTextField\r\n                  margin=\"normal\"\r\n                  name={`schedules[${index}].price`}\r\n                  label=\"Стоимость занятия, 800\"\r\n                  autoComplete=\"off\"\r\n                  fullWidth\r\n                />\r\n                <MyTextField\r\n                  margin=\"normal\"\r\n                  name={`schedules[${index}].subject`}\r\n                  label=\"Предмет\"\r\n                  autoComplete=\"off\"\r\n                  fullWidth\r\n                />\r\n                {values.schedules.length > 1 && (\r\n                  <Tooltip title=\"Удалить номер\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      aria-label=\"Удалить номер\"\r\n                      className=\"pupil-form__btn\"\r\n                      color=\"secondary\"\r\n                      onClick={() => remove(index)}>\r\n                      <ClearIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                )}\r\n              </React.Fragment>\r\n            ))}\r\n          <Tooltip title=\"Добавить номер\">\r\n            <IconButton\r\n              size=\"small\"\r\n              color=\"secondary\"\r\n              aria-label=\"Добавить номер\"\r\n              className=\"pupil-form__btn pupil-form__btn-add-contact\"\r\n              onClick={() => push({ day: '', price: '', subject: '', time: '15:00' })}>\r\n              <AddIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </React.Fragment>\r\n      )}\r\n    </FieldArray>\r\n  );\r\n}\r\n\r\nexport default AddScheduleInputs;\r\n","import * as yup from 'yup';\r\n\r\nconst MAX_LESSON_PAY = 1000000000;\r\n\r\nconst validationSchema = [\r\n  yup.object().shape({\r\n    name: yup\r\n      .string('Укажите имя ученика')\r\n      .typeError('Имя должно быть строкой')\r\n      .max(100, 'Имя длиннее 100 символов?')\r\n      .required('Необходимо указать имя ученика'),\r\n    grade: yup // number?\r\n      .string('В каком классе ребенок учится?')\r\n      .typeError('Класс должен быть строкой')\r\n      .matches(/^([1-9]?|1[0-9])$/, 'Укажите класс от 1 до 11')\r\n      .max(2, 'Слишком большое значение, возможно вы ошиблись')\r\n      .required('Укажите класс, в котором учится ребенок'),\r\n    address: yup\r\n      .string('Укажите адрес')\r\n      .max(200, 'Попробуйте написать адрес короче')\r\n      .typeError('Адрес должен быть строкой'),\r\n    parents: yup\r\n      .string('Укажите информацию о родителе')\r\n      .max(200, 'Cтрока должна быть короче')\r\n      .typeError('Информация о родителе должна быть строкой'),\r\n    contacts: yup.array().of(\r\n      yup\r\n        .string('Укажите телефонный номер')\r\n        .matches(/^[[0-9]+$/, 'Введите номер телефона')\r\n        .typeError('Номер должен быть строкой')\r\n        .max(20, 'Строка должна быть короче'),\r\n    ),\r\n  }),\r\n\r\n  yup.object().shape({\r\n    schedules: yup.array().of(\r\n      yup.object().shape({\r\n        day: yup\r\n          .mixed()\r\n          .oneOf(['1', '2', '3', '4', '5', '6', '7'])\r\n          .typeError('День занятия указан неверно')\r\n          .required('Укажите день занятия'),\r\n        time: yup\r\n          .string('Введите время занятия')\r\n          .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Введите время занятия в формате: \"17:00\"')\r\n          .max(5, 'Это поле не может быть длиннее пяти символов')\r\n          .required('Введите время занятия'),\r\n        price: yup\r\n          .number('Укажите стоимость занятия')\r\n          .typeError('Лучше ввести число')\r\n          .positive('Cтоимость должна быть положительной')\r\n          .max(MAX_LESSON_PAY, 'Возможно вы ошиблись и занятие стоит не так дорого')\r\n          .required('Укажите стоимость занятия'),\r\n        subject: yup\r\n          .string()\r\n          .max(100, 'Слишком длинная строка, попробуйте сократить')\r\n          .typeError('Предмет должен быть строкой')\r\n          .required('Укажите ваш предмет'),\r\n      }),\r\n    ),\r\n  }),\r\n];\r\n\r\nexport default validationSchema;\r\n","const formInitialValues = {\r\n  name: '',\r\n  grade: '',\r\n  address: '',\r\n  parents: '',\r\n  contacts: [''],\r\n  \r\n  schedules: [{\r\n    day: '',\r\n    time: '15:00',\r\n    price: '',\r\n    subject: ''\r\n  }],\r\n};\r\n\r\nexport default formInitialValues;\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\n\r\nexport const fetchPupils = () => async (dispatch) => {\r\n  dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n\r\n  const pupils = await retrievePupils();\r\n\r\n  dispatch(setPupils(pupils));\r\n};\r\n\r\nasync function retrievePupils() {\r\n  let retrievedPupils = {};\r\n  const pupilsSnapshot = await db.collection(`/users/${auth.currentUser.uid}/pupils/`).get();\r\n  pupilsSnapshot.forEach(\r\n    (pupilDoc) => (retrievedPupils = { ...retrievedPupils, [pupilDoc.id]: pupilDoc.data() }),\r\n  );\r\n  return retrievedPupils;\r\n}\r\n\r\nexport const postPupil = ({ id, ...data }) => async (dispatch) => {\r\n  dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n  await db.doc(`/users/${auth.currentUser.uid}/pupils/${id}/`).set({ id, ...data });\r\n  dispatch(addPupil({ id, ...data }));\r\n};\r\n\r\nexport const setPupils = (items) => ({\r\n  type: 'SET_PUPILS',\r\n  payload: items,\r\n});\r\n\r\nexport const addPupil = (data) => ({\r\n  type: 'ADD_PUPIL',\r\n  payload: data,\r\n});\r\n","import uniqid from 'uniqid';\r\nimport { postPupil } from './pupils';\r\nimport { postSchedule } from './schedules';\r\n\r\nconst formHandler = ({ ...data }) => async (dispatch) => {\r\n  const pupilId = uniqid();\r\n\r\n  const schedules = data.schedules.map((schedule) => ({\r\n    id: uniqid(),\r\n    subject: schedule.subject,\r\n    time: schedule.time,\r\n    price: +schedule.price,\r\n    day: +schedule.day,\r\n    year: new Date().getFullYear(),\r\n    pupil: pupilId,\r\n    lessons: [],\r\n    timestamp: Date.now(),\r\n  }));\r\n\r\n  const pupil = {\r\n    id: pupilId,\r\n    name: data.name,\r\n    address: data.address,\r\n    grade: data.grade,\r\n    parents: data.parents,\r\n    contacts: data.contacts,\r\n    schedulesId: schedules.map((schedule) => schedule.id),\r\n    timestamp: Date.now(),\r\n  };\r\n\r\n  await dispatch(postSchedule(schedules));\r\n  await dispatch(postPupil(pupil));\r\n};\r\n\r\nexport default formHandler;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\n\r\nimport AddPupilInputs from './AddPupilInputs';\r\nimport AddScheduleInputs from './AddScheduleInputs';\r\nimport validationSchema from './validationSchema';\r\nimport formInitialValues from './formInitialValues';\r\nimport formHandler from '../../redux/actions/newPupil';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport { combineDispatches } from '../../redux/actions/combineDispatches';\r\n\r\nconst steps = ['Информация об ученике', 'Расписание'];\r\nfunction getForm(step) {\r\n  switch (step) {\r\n    case 0:\r\n      return <AddPupilInputs />;\r\n    case 1:\r\n      return <AddScheduleInputs />;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction AddPupilForm({ open, handleClose, width, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const [activeStep, setActiveStep] = React.useState(0);\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n  const isLastStep = activeStep === steps.length - 1;\r\n\r\n  const today = useSelector(({ date }) => date.selected);\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  const handleSubmit = (values, actions) => {\r\n    if (isLastStep) {\r\n      submitForm(values, actions);\r\n      handleSnack(true);\r\n      handleClose();\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n      actions.setTouched({});\r\n      actions.setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  function submitForm(values, actions) {\r\n    actions.setSubmitting(false);\r\n    setActiveStep(activeStep + 1);\r\n    combineDispatches(\r\n      () => dispatch(formHandler(values)),\r\n      () => dispatch(fetchScheduledLessons(today)),\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об ученике</DialogTitle>\r\n      <DialogContent className=\"pupil-form__dialog-content\">\r\n        <Stepper activeStep={activeStep}>\r\n          {steps.map((label, index) => {\r\n            const stepProps = {};\r\n            const labelProps = {};\r\n\r\n            return (\r\n              <Step key={label} {...stepProps}>\r\n                <StepLabel {...labelProps}>{label}</StepLabel>\r\n              </Step>\r\n            );\r\n          })}\r\n        </Stepper>\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={currentValidationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            {getForm(activeStep)}\r\n\r\n            <Box className=\"pupil-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              {activeStep !== 0 && (\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={handleBack}>\r\n                  Назад\r\n                </Button>\r\n              )}\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                {isLastStep ? 'Подтвердить' : 'Далее'}\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddPupilForm);\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\n\r\nimport PupilCard from './PupilCard';\r\nimport AddPupilForm from './addPupilForm/AddPupilForm';\r\nimport SnackPopup from './SnackPopup';\r\n\r\nfunction PupilsList() {\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const pupilsLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n  const schedules = useSelector(({ schedules }) => schedules.items);\r\n  const schedulesLoaded = useSelector(({ schedules }) => schedules.isLoaded);\r\n  const [snackView, setSnackView] = React.useState(false);\r\n\r\n  /**\r\n   * prevent React state update on unmounted component!\r\n   */\r\n  React.useEffect(() => {\r\n    let timer;\r\n    timer = setTimeout(() => {\r\n      setSnackView(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [snackView]);\r\n\r\n  const isLoaded = pupilsLoaded && schedulesLoaded;\r\n\r\n  const [viewAddPupilForm, setViewAddPupilForm] = React.useState(false);\r\n\r\n  function handleAddLessonClick() {\r\n    setViewAddPupilForm(true);\r\n  }\r\n\r\n  function handleCloseAddLessonForm() {\r\n    setViewAddPupilForm(false);\r\n  }\r\n\r\n  function handleSnack(state) {\r\n    setSnackView(state);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Box className=\"pupils__header-container\">\r\n        <Typography variant=\"h5\" className=\"pupils__header\">\r\n          Ученики\r\n        </Typography>\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          startIcon={<AddIcon />}\r\n          className=\"pupils__button-text\"\r\n          onClick={handleAddLessonClick}>\r\n          Новый ученик\r\n        </Button>\r\n      </Box>\r\n\r\n      {viewAddPupilForm && (\r\n        <AddPupilForm\r\n          open={viewAddPupilForm}\r\n          handleClose={handleCloseAddLessonForm}\r\n          handleSnack={handleSnack}\r\n        />\r\n      )}\r\n\r\n      <SnackPopup open={snackView} message=\"Ученик добавлен\"/>\r\n\r\n      <Grid container spacing={2} className=\"pupils__card-container\">\r\n        {isLoaded\r\n          ? Object.keys(pupils).map((key) => (\r\n              <Grid key={key} item md={4} sm={6} xs={12}>\r\n                <PupilCard {...pupils[key]} schedules={schedules} />\r\n              </Grid>\r\n            ))\r\n          : new Array(6).fill(0).map((_, i) => (\r\n              <Grid key={i} item md={4} sm={6} xs={12}>\r\n                <Skeleton key={i} variant=\"rect\" className=\"pupils__skeleton\" />\r\n              </Grid>\r\n            ))}\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PupilsList;\r\n","const initialValues = {\r\n  firstName: '',\r\n  lastName: '',\r\n  password: '',\r\n  email: '',\r\n  recaptcha: '',\r\n};\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  firstName: yup\r\n    .string('Введите имя')\r\n    .max(100, 'Имя не может быть длиннее 100 символов')\r\n    .required('Необходимо указать имя'),\r\n  lastName: yup\r\n    .string('Введите фамилию')\r\n    .max(100, 'Фамилия не может быть длиннее 100 символов')\r\n    .required('Необходимо указать фамилию'),\r\n  email: yup\r\n    .string('Введите адрес электронной почты')\r\n    .email('Введите адрес электронной почты')\r\n    .required('Необходимо указать адрес эл. почты'),\r\n  password: yup\r\n    .string('Введите пароль')\r\n    .min(6, 'Минимальная длина пароля 6 символов')\r\n    .max(30, 'Максимальная длина пароля 30 символов')\r\n    .required('Введите пароль'),\r\n  recaptcha: yup\r\n    .mixed()\r\n    .notOneOf([''], 'Выполните проверку Recaptcha')\r\n    .required('Выполните проверку Recaptcha'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport { MyTextField } from '../../CustomInputs';\r\n\r\nfunction SignupInputs() {\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container spacing={3} className=\"signup__inputs\">\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            autoComplete=\"fname\"\r\n            name=\"firstName\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            label=\"Имя\"\r\n            autoFocus\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            label=\"Фамилия\"\r\n            name=\"lastName\"\r\n            autoComplete=\"lname\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            label=\"Email адрес\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Пароль\"\r\n            type=\"password\"\r\n            autoComplete=\"current-password\"\r\n          />\r\n        </Grid>\r\n        {/* <Grid item xs={12}>\r\n          <FormControlLabel\r\n            control={<Checkbox value=\"allowExtraEmails\" color=\"primary\" />}\r\n            label=\"I want to receive inspiration, marketing promotions and updates via email.\"\r\n          />\r\n        </Grid> */}\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default SignupInputs;\r\n","import React from 'react';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport Grow from '@material-ui/core/Grow';\r\n\r\nfunction ErrorSnack({ open, message, onClose }) {\r\n  return (\r\n    <Snackbar\r\n      open={open}\r\n      message={\r\n        <React.Fragment>\r\n          <ErrorOutlineIcon />\r\n          <Typography variant=\"body1\">{message}</Typography>\r\n        </React.Fragment>\r\n      }\r\n      TransitionComponent={Grow}\r\n      anchorOrigin={{ horizontal: 'center', vertical: 'top' }}\r\n      autoHideDuration={2000}\r\n      onClose={() => onClose(false)}\r\n      className=\"signup__snackbar\"\r\n    />\r\n  );\r\n}\r\n\r\nexport default ErrorSnack;\r\n","import React from 'react';\r\nimport firebase from 'firebase/app';\r\nimport { useFormikContext } from 'formik';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nfunction Recaptcha() {\r\n  const { errors, setFieldTouched, setFieldValue, touched } = useFormikContext();\r\n  React.useEffect(() => {\r\n    let recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha', {\r\n      size: 'normal',\r\n      callback: (response) => {\r\n        setFieldTouched('recaptcha', true);\r\n        setFieldValue('recaptcha', response);\r\n      },\r\n      'expired-callback': () => {\r\n        setFieldValue('recaptcha', '');\r\n      },\r\n    });\r\n\r\n    recaptchaVerifier.render().then((widgetId) => (recaptchaVerifier = widgetId));\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <div id=\"recaptcha\"></div>\r\n      {errors.recaptcha && touched.recaptcha && (\r\n        <Typography color=\"error\">{errors.recaptcha}</Typography>\r\n      )}\r\n      <input type=\"hidden\" name=\"recaptcha\"></input>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Recaptcha;\r\n","import { db } from '../../firebase';\r\n\r\nexport const postUser = ({ id, name, timestamp, email }) => async (dispatch) => {\r\n  await db.doc(`/users/${id}`).set({ id, name, timestamp, email });\r\n  //dispatch(addUser({ id, name, timestamp }));\r\n};\r\n\r\nexport const fetchUser = (id) => async (dispatch) => {\r\n  const user = await db.doc(`/users/${id}`).get();\r\n  dispatch(addUser(user.data()));\r\n};\r\n\r\nexport const addUser = (data) => ({\r\n  type: 'SET_USER',\r\n  payload: data,\r\n});\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useHistory } from 'react-router';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport SignupInputs from './SignupInputs';\r\nimport { AuthContext } from '../../../contexts/AuthContext';\r\nimport ErrorSnack from '../ErrorSnack';\r\nimport Recaptcha from './Recaptcha';\r\n\r\nimport { postUser } from '../../../redux/actions/user';\r\n//import signup from '../../../redux/actions/signup';\r\n\r\nfunction Signup() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { signup, verifyEmail, updateUser } = React.useContext(AuthContext);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState('');\r\n  const [viewSnack, setViewSnack] = React.useState(false);\r\n\r\n  const handleSubmit = async (values, actions) => {\r\n    actions.setSubmitting(false);\r\n    setLoading(true);\r\n    try {\r\n      const name = values.firstName + ' ' + values.lastName;\r\n      const userCredential = await signup(values.email, values.password);\r\n      await updateUser(name);\r\n      await verifyEmail(userCredential.user);\r\n\r\n      // FIXME: don't know how to handle async func with dynamic\r\n      // currentUser state so decided to use global auth variable\r\n      dispatch(postUser({ id: userCredential.user.uid, name, timestamp: Date.now(), email: userCredential.user.email }));\r\n      history.push('/login');\r\n    } catch (e) {\r\n      console.log(e);\r\n      switch (e.code) {\r\n        case 'auth/email-already-in-use': {\r\n          setError('Почта уже используется');\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n      setViewSnack(true);\r\n    }\r\n    //dispatch(signup(values.email, values.password));\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setLoading(false);\r\n    }, 3000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [loading]);\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"sm\" className=\"signup__main\">\r\n      {error && <ErrorSnack open={viewSnack} message={error} onClose={setViewSnack} />}\r\n      <CssBaseline />\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        alignItems=\"center\"\r\n        spacing={1}\r\n        className=\"signup__header-container\">\r\n        <Grid item>\r\n          <Avatar className=\"signup__avatar\">\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography component=\"h1\" variant=\"h5\" className=\"signup__header-title\">\r\n            Регистрация\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Formik\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={handleSubmit}>\r\n        {({ setFieldValue, errors, touched }) => (\r\n          <Form>\r\n            <SignupInputs />\r\n            <Recaptcha />\r\n            <Button\r\n              type=\"submit\"\r\n              disabled={loading}\r\n              fullWidth\r\n              variant=\"contained\"\r\n              color=\"secondary\"\r\n              className=\"signup__submit\">\r\n              Зарегистрироваться\r\n            </Button>\r\n          </Form>\r\n        )}\r\n      </Formik>\r\n      <Box mt={5}>copyrigth</Box>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Signup;\r\n","const initialValues = {\r\n  email: '',\r\n  password: '',\r\n  recaptcha: false\r\n}\r\n\r\nexport default initialValues;","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  email: yup\r\n    .string('Введите адрес электронной почты')\r\n    .email('Введите адрес электронной почты')\r\n    .required('Необходимо указать адрес эл. почты'),\r\n  password: yup\r\n    .string('Введите пароль')\r\n    .min(6, 'Минимальная длина пароля 6 символов')\r\n    .max(30, 'Максимальная длина пароля 30 символов')\r\n    .required('Введите пароль'),\r\n    \r\n});\r\nexport default validationSchema;\r\n","import React from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\nimport { MyTextField } from '../../CustomInputs';\r\n\r\nfunction LoginInputs() {\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container spacing={3} className=\"signup__inputs\">\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            label=\"Email адрес\"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"Пароль\"\r\n            type=\"password\"\r\n            autoComplete=\"current-password\"\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default LoginInputs;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory, Link } from 'react-router-dom';\r\n\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport LoginInputs from './LoginInputs';\r\nimport { AuthContext } from '../../../contexts/AuthContext';\r\nimport { fetchUser } from '../../../redux/actions/user';\r\nimport ErrorSnack from '../ErrorSnack';\r\n\r\nfunction Login() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { login, setFirstLogin } = React.useContext(AuthContext);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState('');\r\n  const [viewSnack, setViewSnack] = React.useState(false);\r\n\r\n  const handleSubmit = async (values, actions) => {\r\n    actions.setSubmitting(false);\r\n    setLoading(true);\r\n    try {\r\n      await login(values.email, values.password);\r\n\r\n      //dispatch(fetchUser(userCredential.user.uid));\r\n      history.push('/tutor');\r\n    } catch (e) {\r\n      console.log(e);\r\n      switch (e.code) {\r\n        case 'auth/user-not-found': {\r\n          setError('Неправильная почта');\r\n          break;\r\n        }\r\n        case 'auth/wrong-password': {\r\n          setError('Неправильный пароль');\r\n          break;\r\n        }\r\n        case 'auth/too-many-requests': {\r\n          setError('Слишком много попыток войти. Попробуйте снова через пять минут');\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n      setViewSnack(true);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setLoading(false);\r\n    }, 3000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [loading]);\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"sm\" className=\"signup__main\">\r\n      {error && <ErrorSnack open={viewSnack} message={error} onClose={setViewSnack} />}\r\n      <CssBaseline />\r\n      <Grid\r\n        container\r\n        direction=\"column\"\r\n        alignItems=\"center\"\r\n        spacing={1}\r\n        className=\"signup__header-container\">\r\n        <Grid item>\r\n          <Avatar className=\"signup__avatar\">\r\n            <LockOutlinedIcon />\r\n          </Avatar>\r\n        </Grid>\r\n        <Grid item>\r\n          <Typography component=\"h1\" variant=\"h5\" className=\"signup__header-title\">\r\n            Вход в личный кабинет\r\n          </Typography>\r\n        </Grid>\r\n      </Grid>\r\n\r\n      <Formik\r\n        initialValues={initialValues}\r\n        validationSchema={validationSchema}\r\n        onSubmit={handleSubmit}>\r\n        <Form>\r\n          <LoginInputs />\r\n\r\n          <Button\r\n            type=\"submit\"\r\n            disabled={loading}\r\n            fullWidth\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            className=\"signup__submit\">\r\n            Вход\r\n          </Button>\r\n        </Form>\r\n      </Formik>\r\n      <Box mt={5}>\r\n        У вас нет учетной записи? <Link to=\"/signup\">Зарегистрироваться</Link>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","import React from 'react';\r\n\r\nfunction NotFound() {\r\n  return <div>404</div>;\r\n}\r\n\r\nexport default NotFound;\r\n\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    height: '500px',\r\n  },\r\n  container: {\r\n    marginBottom: '20px',\r\n  },\r\n  main: {\r\n    paddingTop: '20px',\r\n  },\r\n  button: {\r\n    backgroundColor: '#ff9800',\r\n    color: '#FFFFFF',\r\n    fontWeight: '600',\r\n    borderRadius: '4px',\r\n  },\r\n});\r\n\r\nfunction Instruction({ open, handleClose }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      className={`instruction__container`}\r\n      classes={{\r\n        paper: classes.paper,\r\n      }}\r\n      maxWidth=\"md\">\r\n      <Box p={5} pt={5}>\r\n        <Box mb={5}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<AddIcon />}\r\n            className=\"lessons__button-text\"\r\n            disabled>\r\n            Новый урок\r\n          </Button>\r\n          <Typography variant=\"body1\">используется для создания уроков вне расписания</Typography>\r\n        </Box>\r\n        <Box mb={5}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<AddIcon />}\r\n            className=\"pupils__button-text\"\r\n            disabled>\r\n            Новый ученик\r\n          </Button>\r\n          <Typography variant=\"body1\">\r\n            используется для создания ученика и расписания уроков\r\n          </Typography>\r\n        </Box>\r\n        <Box>\r\n          <ListItem\r\n            button\r\n            component={Link}\r\n            to=\"/schedule\"\r\n            className={classes.button}\r\n            onClick={() => handleClose(false)}>\r\n            Далее\r\n          </ListItem>\r\n        </Box>\r\n      </Box>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default Instruction;\r\n","import React from 'react';\r\nimport { Calendar, Lessons, Instruction } from '../components';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { fetchLessons } from '../redux/actions/lessons';\r\nimport { fetchScheduledLessons } from '../redux/actions/scheduledLessons';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\n\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\n\r\n\r\nfunction Schedule() {\r\n  const dispatch = useDispatch();\r\n  const [anchorCalendar, setAnchorEl] = React.useState(null);\r\n  const { firstLogin, setFirstLogin } = React.useContext(AuthContext);\r\n  function handleCalendarOpen(e) {\r\n    setAnchorEl(e.currentTarget);\r\n  }\r\n\r\n  function handleCalendarClose() {\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  function handleCalendarClick(date) {\r\n    dispatch(fetchLessons(date));\r\n    dispatch(fetchScheduledLessons(date));\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {firstLogin && <Instruction open={firstLogin} handleClose={setFirstLogin} />}\r\n      <Container maxWidth=\"xl\" className=\"lessons__container\">\r\n        <Grid container spacing={2}>\r\n          <Hidden only={['xs', 'sm']}>\r\n            <Grid item xs={8}>\r\n              <Lessons\r\n                anchor={anchorCalendar}\r\n                handleClick={handleCalendarOpen}\r\n                handleClose={handleCalendarClose}\r\n                handleCalendarClick={handleCalendarClick}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n\r\n          <Hidden mdUp>\r\n            <Grid item xs={12}>\r\n              <Lessons\r\n                anchor={anchorCalendar}\r\n                handleCalendarOpen={handleCalendarOpen}\r\n                handleCalendarClose={handleCalendarClose}\r\n                handleCalendarClick={handleCalendarClick}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n\r\n          <Hidden smDown>\r\n            <Grid item xs={4} className=\"calendar__container\">\r\n              <Box className=\"calendar--fixed\">\r\n                <Calendar handleClick={handleCalendarClick} />\r\n              </Box>\r\n            </Grid>\r\n          </Hidden>\r\n        </Grid>\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Schedule;\r\n","import React from 'react';\r\n\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport { PupilsList } from '../components';\r\n\r\nfunction Pupils() {\r\n  return (\r\n    <React.Fragment>\r\n      <Container maxWidth=\"xl\" className=\"pupils__container\">\r\n        <PupilsList />\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Pupils;\r\n","import React from 'react';\r\n\r\nfunction Finance() {\r\n  return <div>Finance</div>;\r\n}\r\n\r\nexport default Finance;\r\n\r\n","import React from 'react';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport WorkIcon from '@material-ui/icons/Work';\r\nimport BeachAccessIcon from '@material-ui/icons/BeachAccess';\r\n\r\nimport { AuthContext } from '../contexts/AuthContext';\r\n\r\nfunction Settings() {\r\n  const { signout } = React.useContext(AuthContext);\r\n  return (\r\n    <List className=\"settings__container\">\r\n      <ListItem button>\r\n        <ListItemAvatar>\r\n          <Avatar>\r\n            <ImageIcon />\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText primary=\"Редактировать профиль\" />\r\n      </ListItem>\r\n      <ListItem button>\r\n        <ListItemAvatar>\r\n          <Avatar>\r\n            <WorkIcon />\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText primary=\"Изменить пароль\" />\r\n      </ListItem>\r\n      <ListItem button>\r\n        <ListItemAvatar>\r\n          <Avatar>\r\n            <BeachAccessIcon />\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText primary=\"Изменить email\" />\r\n      </ListItem>\r\n      <ListItem button onClick={signout}>\r\n        <ListItemAvatar>\r\n          <Avatar>\r\n            <BeachAccessIcon />\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText primary=\"Выйти из аккаунта\" />\r\n      </ListItem>\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default Settings;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router';\r\n\r\nimport { AuthContext } from './contexts/AuthContext';\r\n\r\nfunction PrivateRoute({ component: Component, ...rest }) {\r\n  const { currentUser } = React.useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return currentUser && currentUser.emailVerified ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect to=\"/login\" />\r\n        );\r\n      }}></Route>\r\n  );\r\n}\r\n\r\nexport default PrivateRoute;\r\n","import React from 'react';\r\nimport { Route, Redirect } from 'react-router';\r\n\r\nimport { AuthContext } from './contexts/AuthContext';\r\n\r\nfunction PrivateSignedInRoute({ component: Component, ...rest }) {\r\n  const { currentUser } = React.useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return currentUser && currentUser.emailVerified ? (\r\n          <Redirect to=\"/schedule\" />\r\n          ) : (\r\n          <Component {...props} />\r\n        );\r\n      }}></Route>\r\n  );\r\n}\r\n\r\nexport default PrivateSignedInRoute;\r\n","import React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { auth } from './firebase';\nimport { AuthProvider } from './contexts/AuthContext';\n\nimport theme from './stylesOverride';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport StylesProvider from '@material-ui/styles/StylesProvider';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\n\nimport { Menu, InfoPanel, Signup, Login, NotFound } from './components';\nimport Schedule from './pages/Schedule';\nimport Pupils from './pages/Pupils';\nimport Finance from './pages/Finance';\nimport Settings from './pages/Settings';\nimport PrivateRoute from './PrivateRoute';\nimport PrivateSignedInRoute from './PrivateSignedInRoute';\n\nimport { fetchLessons } from './redux/actions/lessons';\nimport { fetchPupils } from './redux/actions/pupils';\nimport { fetchSchedules } from './redux/actions/schedules';\nimport { fetchScheduledLessons } from './redux/actions/scheduledLessons';\nimport { fetchUser } from './redux/actions/user';\n\nfunction Content() {\n  const dispatch = useDispatch();\n\n  React.useEffect(() => {\n    dispatch(fetchLessons(new Date()));\n    dispatch(fetchScheduledLessons(new Date()));\n    dispatch(fetchPupils());\n    dispatch(fetchSchedules());\n    dispatch(fetchUser(auth.currentUser.uid));\n  }, []);\n\n  return (\n    <React.Fragment>\n      <Menu />\n      <Box className=\"content\">\n        <Container maxWidth=\"xl\">\n          <InfoPanel />\n          <Switch>\n            <Route path=\"/tutor\">\n              <Schedule />\n            </Route>\n            <Route path=\"/schedule\">\n              <Schedule />\n            </Route>\n            <Route path=\"/pupils\">\n              <Pupils />\n            </Route>\n            <Route path=\"/finance\">\n              <Finance />\n            </Route>\n            <Route path=\"/settings\">\n              <Settings />\n            </Route>\n            <Route path=\"*\">\n              <Redirect to=\"/404\" />\n            </Route>\n          </Switch>\n        </Container>\n      </Box>\n    </React.Fragment>\n  );\n}\n\nfunction App() {\n  return (\n    <AuthProvider>\n      <StylesProvider injectFirst>\n        <ThemeProvider theme={theme}>\n          <CssBaseline />\n          <Switch>\n            <Route path=\"/404\">\n              <NotFound />\n            </Route>\n            <PrivateSignedInRoute path=\"/signup\" component={Signup}></PrivateSignedInRoute>\n            <PrivateSignedInRoute path=\"/login\" component={Login}></PrivateSignedInRoute>\n            <PrivateRoute path=\"/:page\" component={Content}></PrivateRoute>\n          </Switch>\n        </ThemeProvider>\n      </StylesProvider>\n    </AuthProvider>\n  );\n}\n\nexport default App;\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst pupils = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_PUPILS': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'SET_PUPILS_LOADED': {\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    }\r\n    case 'ADD_PUPIL': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default pupils;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst schedules = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_SCHEDULES':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_SCHEDULES_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'ADD_SCHEDULE': {\r\n      let schedules = {};\r\n      action.payload.forEach(\r\n        (item) =>\r\n          (schedules = {\r\n            ...schedules,\r\n            [item.id]: item,\r\n          }),\r\n      );\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, ...schedules },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_LESSONS_FIELD': {\r\n      let newLessons = [...state.items[action.payload.id].lessons];\r\n      if (action.payload.procedure === 'push') newLessons.push(action.payload.date);\r\n      if (action.payload.procedure === 'pop')\r\n        newLessons = newLessons.filter((item) => item !== action.payload.date);\r\n      return {\r\n        ...state,\r\n        items: {\r\n          ...state.items,\r\n          [action.payload.id]: {\r\n            ...state.items[action.payload.id],\r\n            lessons: newLessons,\r\n          },\r\n        },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default schedules;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst scheduledLessons = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_SCHEDULED_LESSONS':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_SCHEDULED_LESSONS_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default scheduledLessons;\r\n","const initialState = {\r\n  selected: new Date(),\r\n};\r\n\r\nconst date = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_DATE':\r\n      return {\r\n        ...state,\r\n        selected: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default date;\r\n","const initialState = {\r\n  name: '',\r\n  id: '',\r\n  timestamp: '',\r\n  email: '',\r\n};\r\n\r\nconst user = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_USER':\r\n      return action.payload;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default user;\r\n","import { combineReducers } from 'redux';\r\n\r\nimport lessons from './lessons';\r\nimport pupils from './pupils';\r\nimport schedules from './schedules';\r\nimport scheduledLessons from './scheduledLessons';\r\nimport date from './date';\r\nimport user from './user';\r\n\r\nconst rootReducer = combineReducers({\r\n  user,\r\n  lessons,\r\n  pupils,\r\n  schedules,\r\n  scheduledLessons,\r\n  date,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\n\nimport './sass/styles.sass';\n\nimport store from './redux/store';\n\nReactDOM.render(\n  <Router>\n      <Provider store={store}>\n        <App />\n      </Provider>\n  </Router>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}
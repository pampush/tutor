{"version":3,"sources":["stylesOverride.js","components/InfoPanelCard.jsx","redux/reducers/lessons.js","components/InfoPanel.jsx","components/Calendar.jsx","redux/actions/date.js","firebase.js","redux/actions/lessons.js","redux/actions/schedules.js","components/LessonCard.jsx","components/themeChangeForm/ThemeChangeInputs.jsx","components/themeChangeForm/formInitialValues.js","components/themeChangeForm/validationSchema.js","redux/actions/scheduledLessons.js","redux/actions/combineDispatches.js","components/themeChangeForm/ThemeChangeForm.jsx","components/LessonTemplateCard.jsx","components/addLessonForm/AddLessonInputs.jsx","components/addLessonForm/formInitialValues.js","components/addLessonForm/validationSchema.js","components/addLessonForm/AddLessonForm.jsx","components/SnackPopup.jsx","components/Lessons.jsx","components/Menu/MenuItem.jsx","components/Menu/MenuLgDrawer.jsx","components/Menu/MenuSmDrawer.jsx","components/Menu/MenuMdDrawer.jsx","components/Menu.jsx","components/PupilCard.jsx","components/addPupilForm/AddPupilInputs.jsx","components/addPupilForm/AddScheduleInputs.jsx","components/addPupilForm/validationSchema.js","components/addPupilForm/formInitialValues.js","redux/actions/pupils.js","redux/actions/newPupil.js","components/addPupilForm/AddPupilForm.jsx","components/PupilsList.jsx","pages/Schedule.jsx","pages/Pupils.jsx","pages/Finance.jsx","App.js","redux/reducers/pupils.js","redux/reducers/schedules.js","redux/reducers/scheduledLessons.js","redux/reducers/date.js","redux/reducers/index.js","redux/store.js","index.js"],"names":["theme","createMuiTheme","palette","primary","main","blue","secondary","orange","text","typography","body1","fontSize","overrides","MuiDrawer","paper","backgroundColor","MuiButton","label","color","containedSecondary","MuiIconButton","colorSecondary","root","MuiCardContent","paddingBottom","InfoPanelCard","children","header","subheader","Card","className","Box","CardContent","Typography","gutterBottom","variant","component","Date","toISOString","slice","initialState","items","isLoaded","lessons","state","action","type","payload","id","newState","days","endingsForm","n","a","b","InfoPanel","numLessons","useSelector","Object","keys","length","Container","maxWidth","Grid","container","spacing","Hidden","xsDown","item","getDay","icon","MuiPickersDay","daySelected","current","MuiCalendar","handleClick","dispatch","useDispatch","date","selected","utils","DateFnsUtils","locale","ruLocale","ThemeProvider","DatePicker","autoOk","disableToolbar","openTo","value","onChange","setDate","Calendar","React","forwardRef","props","ref","useRef","app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","fetchLessons","ISODate","doc","get","user","timer","stopwatch","fastRetrieveLessons","query","setLessons","postLesson","lesson","preventIsLoaded","set","addLesson","retrievedLessons","collection","where","orderBy","forEach","lessonDoc","data","deleteLessonAction","fn","before","performance","now","args","apply","result","after","console","log","retrieveSchedules","schedules","postSchedule","schPromises","map","schedule","Promise","all","addSchedule","updDbSchedule","update","FieldValue","arrayUnion","updSchedule","setSchedules","LessonCard","time","name","address","subject","useState","anchorEl","setAnchorEl","handleClose","keepMounted","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","open","Boolean","onClose","MenuList","autoFocus","MenuItem","onClick","delete","deleteLesson","IconButton","aria-label","e","currentTarget","MyTextField","useField","field","meta","TextField","error","touched","helperText","ThemeChangeInputs","margin","autoComplete","fullWidth","formInitialValues","validationSchema","yup","shape","max","required","retrieveSchedulesByDay","today","getISODay","localISODate","includes","fetchScheduledLessons","setScheduledLessons","combineDispatches","funcs","withWidth","width","pupilId","scheduleId","handleSnack","Dialog","aria-labelledby","fullScreen","isWidthDown","DialogTitle","DialogContent","initialValues","onSubmit","values","actions","uniqid","pupil","setSubmitting","Button","LessonTemplateCard","viewForm","setViewForm","Fragment","menuProps","MySelect","Select","iconComponent","AddLessonInputs","pupils","xs","FormControl","InputLabel","labelId","MenuProps","IconComponent","key","inputProps","step","tzoffset","getTimezoneOffset","typeError","matches","SnackPopup","message","Snackbar","size","Lessons","anchor","handleCalendarOpen","handleCalendarClose","handleCalendarClick","lessonsLoaded","pupilsLoaded","scheduledLessons","scheduledLessonsLoaded","viewAddLessonForm","setViewAddLessonForm","snackView","setSnackView","snackThemeView","setSnackThemeView","calendar","useEffect","setTimeout","clearTimeout","startIcon","mdUp","entries","Array","fill","_","index","Skeleton","ListItem","button","NavLink","to","activeStyle","ListItemIcon","mdDown","ListItemText","Collapse","in","timeout","unmountOnExit","MenuDrawer","Drawer","List","classNames","Divider","useStyles","makeStyles","drawerPaper","position","top","MenuDrawerMobile","setOpen","handleDrawerOpen","prev","classes","AppBar","Toolbar","edge","MenuMdDrawer","Menu","smUp","only","PupilCard","schedulesId","grade","parents","contacts","CardHeader","avatar","Avatar","title","day","join","CardActions","AddPupilInputs","useFormikContext","InputProps","min","insert","remove","push","contact","startAdornment","InputAdornment","Tooltip","1","2","3","4","5","6","7","AddScheduleInputs","price","of","oneOf","positive","retrievePupils","retrievedPupils","pupilDoc","postPupil","addPupil","setPupils","formHandler","year","getFullYear","timestamp","steps","getForm","activeStep","setActiveStep","currentValidationSchema","isLastStep","Stepper","Step","StepLabel","submitForm","setTouched","prevActiveStep","PupilsList","schedulesLoaded","viewAddPupilForm","setViewAddPupilForm","md","sm","i","Schedule","anchorCalendar","smDown","Pupils","Finance","App","StylesProvider","injectFirst","CssBaseline","exact","path","newLessons","rootReducer","combineReducers","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9d754dae.chunk.js","sourcesContent":["import { createMuiTheme } from '@material-ui/core/styles';\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport orange from '@material-ui/core/colors/orange';\r\n/**\r\n * Global material ui styles overrides\r\n */\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: blue[500],\r\n    },\r\n    secondary: {\r\n      main: orange[500],\r\n    },\r\n    text: {\r\n      primary: '#000000',\r\n      secondary: '#9E9E9E',\r\n    },\r\n  },\r\n  typography: {\r\n    body1: { fontSize: '1.3rem' },\r\n  },\r\n\r\n  overrides: {\r\n    MuiDrawer: {\r\n      paper: {\r\n        backgroundColor: '#F5F5F5',\r\n      },\r\n    },\r\n    MuiButton: {\r\n      label: { color: '#ffffff' },\r\n      containedSecondary: {\r\n        '&:hover': {\r\n          backgroundColor: 'rgba(255, 192, 70, 0.5)',\r\n        },\r\n      },\r\n    },\r\n    MuiIconButton: {\r\n      colorSecondary: {\r\n        '&:hover': {\r\n          backgroundColor: 'rgba(255, 192, 70, 0.5)',\r\n        },\r\n      },\r\n      root: {},\r\n    },\r\n    MuiCardContent: {\r\n      root: {\r\n        '&:last-child': { paddingBottom: '16px' },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import React from 'react';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction InfoPanelCard({ children, header, subheader }) {\r\n  return (\r\n    <Card className=\"info__card\">\r\n      <Box className=\"info__svg-container\">{children}</Box>\r\n      <CardContent className=\"info__content\">\r\n        <Typography gutterBottom variant=\"h5\" component=\"h2\" className=\"info__title\">\r\n          {header}\r\n        </Typography>\r\n        <Typography variant=\"body2\" component=\"p\" className=\"info__subtitle\">\r\n          {new Date().toISOString().slice(0, 10)}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default InfoPanelCard;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst lessons = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_LESSONS_BY_DATE':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_LESSONS_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'ADD_LESSON': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'DELETE_LESSON': {\r\n      const newState = { ...state.items };\r\n      delete newState[action.payload];\r\n      return {\r\n        ...state,\r\n        items: newState,\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default lessons;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\n\r\nimport InfoPanelCard from './InfoPanelCard';\r\nimport lessons from '../redux/reducers/lessons';\r\n\r\nconst days = ['Воскресенье', 'Понедельник', 'Вторник', 'Среда', 'Четверг', 'Пятница', 'Суббота'];\r\nconst endings = ['урок', 'урока', 'уроков'];\r\n\r\nfunction endingsForm(n) {\r\n  let a = n % 100;\r\n  let b = a % 10;\r\n  if (a > 10 && a < 20) return 'уроков';\r\n  if (b > 1 && b < 5) return 'урока';\r\n  if (b === 1) return 'урок';\r\n  return 'уроков';\r\n}\r\n\r\nfunction InfoPanel() {\r\n  let numLessons = useSelector(({ lessons }) => lessons.items);\r\n  numLessons = Object.keys(numLessons).length;\r\n  return (\r\n    <Container maxWidth=\"md\" className=\"info__container\">\r\n      <Grid container spacing={2}>\r\n        <Hidden xsDown>\r\n          <Grid item>\r\n            <InfoPanelCard header={days[new Date().getDay()]}>\r\n              <CalendarTodayIcon />\r\n            </InfoPanelCard>\r\n          </Grid>\r\n          <Grid item>\r\n            <InfoPanelCard header={endingsForm(numLessons)}>{numLessons}</InfoPanelCard>\r\n          </Grid>\r\n          <Grid item>\r\n            <InfoPanelCard icon={null} />\r\n          </Grid>\r\n        </Hidden>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default InfoPanel;\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport ruLocale from 'date-fns/locale/ru';\r\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport orange from '@material-ui/core/colors/orange';\r\n\r\nimport { setDate } from '../redux/actions/date';\r\n\r\nconst theme = createMuiTheme({\r\n  overrides: {\r\n    MuiPickersDay: {\r\n      daySelected: {\r\n        backgroundColor: orange[500],\r\n        '&:hover': {\r\n          backgroundColor: orange[500],\r\n        },\r\n      },\r\n      current: {\r\n        color: orange[500],\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nfunction MuiCalendar({ handleClick }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  const handleCellClick = (date) => {\r\n    dispatch(setDate(date));\r\n    handleClick(date);\r\n  };\r\n\r\n  return (\r\n    <MuiPickersUtilsProvider utils={DateFnsUtils} locale={ruLocale}>\r\n      <ThemeProvider theme={theme}>\r\n        <DatePicker\r\n          autoOk\r\n          disableToolbar\r\n          variant=\"static\"\r\n          openTo=\"date\"\r\n          value={date}\r\n          onChange={handleCellClick}\r\n        />\r\n      </ThemeProvider>\r\n    </MuiPickersUtilsProvider>\r\n  );\r\n}\r\n\r\nconst Calendar = React.forwardRef((props, ref) => {\r\n  return (\r\n    <MuiCalendar useRef={ref} {...props}>\r\n      {props.children}\r\n    </MuiCalendar>\r\n  );\r\n});\r\n\r\nexport default Calendar;\r\n","export const setDate = (date) => ({\r\n  type: 'SET_DATE',\r\n  payload: date,\r\n});\r\n","import firebase from 'firebase/app';  \r\nimport 'firebase/firestore';\r\n\r\nconst app = firebase.initializeApp({\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n});\r\n\r\nexport const db = app.firestore();\r\nexport default app;\r\n","import { db } from '../../firebase';\r\n\r\n/**\r\n * middleware thunk function used for async data fetching and\r\n * dispatching actual event(action) to reducer\r\n * QUERY FORMAT: ['property', '==', 'value']\r\n * @param {date} date\r\n * @returns\r\n */\r\n//TODO: integrate with auth\r\nexport const fetchLessons = (date) => async (dispatch) => {\r\n  // const tzoffset = new Date().getTimezoneOffset() * 60000;\r\n  // const localISOTime = new Date(date.getTime() - tzoffset).toISOString().slice(0, 10);\r\n  const ISODate = date.toISOString().slice(0, 10);\r\n  dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  const user = await db.doc('/users/Uyv2wLqViEmqMjoWvjz3/').get();\r\n  const timer = stopwatch(fastRetrieveLessons);\r\n  const query = ['date', '==', `${ISODate}`];\r\n  const lessons = await timer(user, query);\r\n\r\n  dispatch(setLessons(lessons));\r\n};\r\n\r\nexport const postLesson = (lesson, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  if (!preventIsLoaded) dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  const user = await db.doc('/users/Uyv2wLqViEmqMjoWvjz3/').get();\r\n  await db.doc(`/users/${user.id}/lessons/${lesson.id}`).set(lesson);\r\n  dispatch(addLesson(lesson));\r\n};\r\n\r\n/**\r\n * retrieve lessons using collectionGroup method\r\n * @param {object} user\r\n * @param {object[]} pupils\r\n * @param {array} query firestore query format array\r\n * @returns {object[]} lesson result array going to be stored in redux store\r\n */\r\nasync function fastRetrieveLessons(user, query) {\r\n  let retrievedLessons = {};\r\n  const lessonsSnapshot = await db\r\n    .collection(`/users/${user.id}/lessons`)\r\n    .where(...query)\r\n    .orderBy('time')\r\n    .get();\r\n  lessonsSnapshot.forEach((lessonDoc) => {\r\n    retrievedLessons = { ...retrievedLessons, [lessonDoc.id]: lessonDoc.data() };\r\n  });\r\n  return retrievedLessons;\r\n}\r\n\r\nexport const deleteLesson = (id) => async (dispatch) => {\r\n  dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  const user = await db.doc('/users/Uyv2wLqViEmqMjoWvjz3/').get();\r\n  await db.doc(`/users/${user.id}/lessons/${id}`).delete();\r\n\r\n  await dispatch(deleteLessonAction(id));\r\n};\r\n\r\n/**\r\n * @param {object[]} items lessons array\r\n * @returns {object} - send action object to reducer\r\n */\r\nexport const setLessons = (items) => ({\r\n  type: 'SET_LESSONS_BY_DATE',\r\n  payload: items,\r\n});\r\n\r\nexport const addLesson = (item) => ({\r\n  type: 'ADD_LESSON',\r\n  payload: item,\r\n});\r\n\r\nexport const deleteLessonAction = (id) => ({\r\n  type: 'DELETE_LESSON',\r\n  payload: id,\r\n});\r\n/**\r\n * util func for performance measuring needs\r\n * @param {*} fn\r\n * @returns\r\n */\r\nfunction stopwatch(fn) {\r\n  return async (...args) => {\r\n    const before = performance.now();\r\n    const result = await fn.apply(this, args);\r\n    const after = performance.now();\r\n    console.log(`finished: ${after - before}`);\r\n    return result;\r\n  };\r\n}\r\n","import { db } from '../../firebase';\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\n\r\nexport const fetchSchedules = () => async (dispatch) => {\r\n  dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n\r\n  const user = await db.doc('/users/Uyv2wLqViEmqMjoWvjz3/').get();\r\n  const schedules = await retrieveSchedules(user);\r\n\r\n  dispatch(setSchedules(schedules));\r\n};\r\n\r\nasync function retrieveSchedules(user) {\r\n  let schedules = {};\r\n  const snapshot = await db.collection(`/users/${user.id}/schedules/`).get();\r\n  snapshot.forEach((doc) => (schedules = { ...schedules, [doc.id]: doc.data() }));\r\n  return schedules;\r\n}\r\n\r\nexport const postSchedule = (schedules) => async (dispatch) => {\r\n  dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n  const user = await db.doc('/users/Uyv2wLqViEmqMjoWvjz3/').get();\r\n  const schPromises = schedules.map((schedule) =>\r\n    db.doc(`/users/${user.id}/schedules/${schedule.id}`).set({ ...schedule }),\r\n  );\r\n  await Promise.all(schPromises);\r\n  dispatch(addSchedule(schedules));\r\n};\r\n\r\nexport const updDbSchedule = ({ id, date }, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n  await db\r\n    .doc(`/users/Uyv2wLqViEmqMjoWvjz3/schedules/${id}/`)\r\n    .update({ lessons: firebase.firestore.FieldValue.arrayUnion(date) });\r\n\r\n  dispatch(updSchedule({ id, date }));\r\n};\r\n\r\nexport const deleteLessonFromSchedule = (lesson, schedule) => async (dispatch) => {\r\n  await db\r\n    .doc(`/users/Uyv2wLqViEmqMjoWvjz3/schedules/${schedule}/`)\r\n    .update({ lessons: firebase.firestore.FieldValue.arrayRemove(lesson) });\r\n  \r\n  dispatch(updSchedule({}))\r\n}\r\n\r\nexport const setSchedules = (items) => ({\r\n  type: 'SET_SCHEDULES',\r\n  payload: items,\r\n});\r\n\r\nexport const addSchedule = (data) => ({\r\n  type: 'ADD_SCHEDULE',\r\n  payload: data,\r\n});\r\n\r\nexport const updSchedule = (data) => ({\r\n  type: 'UPD_SCHEDULE',\r\n  payload: data,\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { deleteLesson } from '../redux/actions/lessons';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { updDbSchedule } from '../redux/actions/schedules';\r\n\r\nfunction LessonCard({ id, time, theme, name, address, subject, schedule }) {\r\n  const dispatch = useDispatch();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n\r\n  function handleClick(e) {\r\n    setAnchorEl(e.currentTarget);\r\n  }\r\n\r\n  function handleClose() {\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  function handleDelete() {\r\n    dispatch(deleteLesson(id));\r\n    if (schedule) dispatch(updDbSchedule());\r\n  }\r\n\r\n  return (\r\n    <Card className=\"lesson__container\">\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        getContentAnchorEl={null}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n        transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}>\r\n        <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n          <MenuItem onClick={handleClose}>Домашняя работа</MenuItem>\r\n          <MenuItem onClick={handleClose}>Заметки</MenuItem>\r\n          <MenuItem onClick={handleClose}>push</MenuItem>\r\n          <MenuItem onClick={handleClose}>Редактировать</MenuItem>\r\n          <MenuItem onClick={handleDelete}>Удалить</MenuItem>\r\n        </MenuList>\r\n      </Menu>\r\n      <CardContent>\r\n        <Box className=\"lesson__header\">\r\n          <Typography gutterBottom variant=\"h5\" className=\"lesson__header-text\">\r\n            {time} {subject}\r\n          </Typography>\r\n          <IconButton aria-label=\"menu\" className=\"lesson__header-more\" onClick={handleClick}>\r\n            <MoreVertIcon />\r\n          </IconButton>\r\n        </Box>\r\n        <Typography variant=\"h5\" color=\"textPrimary\" className=\"lesson__theme\" component=\"p\">\r\n          {theme}\r\n        </Typography>\r\n        <Typography variant=\"subtitle2\" color=\"textPrimary\" component=\"p\">\r\n          {name}, {address}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nLessonCard.propTypes = {\r\n  time: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  address: PropTypes.string.isRequired,\r\n  theme: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LessonCard;\r\n","import React from 'react';\r\nimport { useField } from 'formik';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\n\r\nconst MyTextField = ({ ...props }) => {\r\n  const [field, meta] = useField(props.name);\r\n\r\n  return (\r\n    <TextField\r\n      {...field}\r\n      {...props}\r\n      error={meta.touched && Boolean(meta.error)}\r\n      helperText={meta.touched && meta.error}\r\n    />\r\n  );\r\n};\r\n\r\nconst ThemeChangeInputs = () => {\r\n  return <MyTextField margin=\"normal\" name=\"theme\" label=\"Тема\" autoComplete=\"off\" fullWidth />;\r\n};\r\n\r\nexport default ThemeChangeInputs;\r\n","const formInitialValues = {\r\n  theme: '',\r\n};\r\n\r\nexport default formInitialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup\r\n    .string('Введите тему урока')\r\n    .max(200, 'Слишком длинная тема, попробуйте сократить')\r\n    .required('Необходимо указать тему урока'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import { db } from '../../firebase';\r\nimport { getISODay } from 'date-fns';\r\n\r\nasync function retrieveSchedulesByDay(user, date) {\r\n  let schedules = {};\r\n  const today = getISODay(date);\r\n  const localISODate = date.toISOString().slice(0, 10);\r\n  //TODO:\r\n  const snapshot = await db\r\n    .collection(`/users/${user.id}/schedules/`)\r\n    .where('day', '==', today)\r\n    .get();\r\n\r\n  snapshot.forEach((doc) => {\r\n    if (!doc.data().lessons.includes(localISODate))\r\n      schedules = { ...schedules, [doc.id]: doc.data() };\r\n  });\r\n  return schedules;\r\n}\r\n\r\nexport const fetchScheduledLessons = (date, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULED_LESSONS_LOADED', payload: false });\r\n  const user = await db.doc('/users/Uyv2wLqViEmqMjoWvjz3/').get();\r\n\r\n  const schedules = await retrieveSchedulesByDay(user, date);\r\n  await dispatch(setScheduledLessons(schedules));\r\n};\r\n\r\nexport const setScheduledLessons = (items) => ({\r\n  type: 'SET_SCHEDULED_LESSONS',\r\n  payload: items,\r\n});\r\n\r\nexport const setScheduledLessonsLoaded = (value) => ({\r\n  type: 'SET_SCHEDULED_LESSONS_LOADED',\r\n  payload: value,\r\n});\r\n","export const combineDispatches = async (...funcs) => {\r\n  for(const fn of funcs)\r\n    await fn(); \r\n}","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport uniqid from 'uniqid';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport ThemeChangeInputs from './ThemeChangeInputs';\r\nimport formInitialValues from './formInitialValues';\r\nimport validationSchema from './validationSchema';\r\n\r\nimport { postLesson } from '../../redux/actions/lessons';\r\nimport { updDbSchedule } from '../../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport { combineDispatches } from '../../redux/actions/combineDispatches';\r\nimport { setScheduledLessonsLoaded } from '../../redux/actions/scheduledLessons';\r\n\r\nfunction ThemeChangeForm({ width, open, handleClose, pupilId, scheduleId, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const schedule = useSelector(({ schedules }) => schedules.items[scheduleId]);\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  function handleSubmit(values, actions) {\r\n    const lesson = {\r\n      id: uniqid(),\r\n      date: date.toISOString().slice(0, 10),\r\n      time: schedule.time,\r\n      schedule: scheduleId,\r\n      pupil: pupilId,\r\n      theme: values.theme,\r\n      subject: schedule.subject,\r\n    };\r\n\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n\r\n    /**\r\n     * bicycle for async chained invocations\r\n     * preventIsLoaded prevents isLoaded redux property action call\r\n     */\r\n    combineDispatches(\r\n      () => dispatch(setScheduledLessonsLoaded(false)),\r\n      () => dispatch(postLesson(lesson, { preventIsLoaded: true })),\r\n      () =>\r\n        dispatch(updDbSchedule({ date: lesson.date, id: scheduleId }, { preventIsLoaded: true })),\r\n      () => dispatch(fetchScheduledLessons(date, { preventIsLoaded: true })),\r\n    );\r\n\r\n    //dispatch(postLesson(lesson));\r\n    //dispatch(updDbSchedule({ date: lesson.date, id: scheduleId }));\r\n    //dispatch(fetchScheduledLessons(date));\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <ThemeChangeInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(ThemeChangeForm);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nimport ThemeChangeForm from './themeChangeForm/ThemeChangeForm';\r\n\r\nfunction LessonTemplateCard({ time, pupilId, scheduleId, subject, name, address, handleSnack }) {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [viewForm, setViewForm] = React.useState(false);\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n\r\n  const handleCloseForm = () => setViewForm(false);\r\n  const handleOpenForm = () => setViewForm(true);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {viewForm && (\r\n        <ThemeChangeForm\r\n          open={viewForm}\r\n          pupilId={pupilId}\r\n          scheduleId={scheduleId}\r\n          handleClose={handleCloseForm}\r\n          handleSnack={handleSnack}\r\n        />\r\n      )}\r\n      <Card className=\"lesson__container lesson__container--template\">\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          getContentAnchorEl={null}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}>\r\n          <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n            <MenuItem onClick={handleOpenForm}>Изменить тему</MenuItem>\r\n          </MenuList>\r\n        </Menu>\r\n        <CardContent>\r\n          <Box className=\"lesson__header\">\r\n            <Typography gutterBottom variant=\"h5\" className=\"lesson__header-text\">\r\n              {time} {subject} (шаблон урока)\r\n            </Typography>\r\n            <IconButton aria-label=\"menu\" className=\"lesson__header-more\" onClick={handleClick}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          </Box>\r\n          <Typography variant=\"h5\" color=\"textPrimary\" className=\"lesson__theme\" component=\"p\">\r\n            Введите тему урока, открыв меню справа\r\n          </Typography>\r\n          <Typography variant=\"subtitle2\" color=\"textPrimary\" component=\"p\">\r\n            {name}, {address}\r\n          </Typography>\r\n        </CardContent>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nLessonTemplateCard.propTypes = {\r\n  time: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  address: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LessonTemplateCard;\r\n","import React from 'react';\r\nimport { useField } from 'formik';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst MyTextField = ({ ...props }) => {\r\n  const [field, meta, helpers] = useField(props.name);\r\n\r\n  return (\r\n    <TextField\r\n      {...field}\r\n      {...props}\r\n      error={meta.touched && Boolean(meta.error)}\r\n      helperText={meta.touched && meta.error}\r\n    />\r\n  );\r\n};\r\n\r\nconst MySelect = ({ ...props }) => {\r\n  const [field, meta] = useField(props);\r\n  return (\r\n    <React.Fragment>\r\n      <Select {...field} {...props} error={meta.touched && Boolean(meta.error)} />\r\n      {meta.touched && meta.error ? (\r\n        <span className=\"lesson-form__select-error\">{meta.error}</span>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nexport default function AddLessonInputs() {\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField margin=\"normal\" name=\"theme\" label=\"Тема\" autoComplete=\"off\" fullWidth />\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={6}>\r\n          <FormControl fullWidth>\r\n            <InputLabel id=\"lesson-form__select-label\">Ученик</InputLabel>\r\n            <MySelect\r\n              labelId=\"lesson-form__select-label\"\r\n              name=\"pupil\"\r\n              MenuProps={menuProps}\r\n              IconComponent={iconComponent}>\r\n              {Object.keys(pupils).map((key) => (\r\n                <MenuItem key={key} value={pupils[key].id}>\r\n                  {pupils[key].name}\r\n                </MenuItem>\r\n              ))}\r\n            </MySelect>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <MyTextField margin=\"none\" name=\"subject\" label=\"Предмет\" autoComplete=\"off\" fullWidth />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <MyTextField\r\n            margin=\"normal\"\r\n            name=\"date\"\r\n            label=\"Дата\"\r\n            type=\"date\"\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <MyTextField\r\n            margin=\"normal\"\r\n            name=\"time\"\r\n            label=\"Время урока\"\r\n            type=\"time\"\r\n            inputProps={{\r\n              step: 300, // 5 min\r\n            }}\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","const tzoffset = new Date().getTimezoneOffset() * 60000;\r\nconst localISOTime = new Date(Date.now() - tzoffset).toISOString().slice(0, 10);\r\n\r\n\r\nconst formInitialValues = {\r\n  theme: '',\r\n  pupil: '',\r\n  subject: '',\r\n  date: localISOTime,\r\n  time: '15:00',\r\n};\r\n\r\nexport default formInitialValues;","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup\r\n    .string('Введите тему урока')\r\n    .max(200, 'Слишком длинная тема, попробуйте сократить')\r\n    .required('Необходимо указать тему урока'),\r\n  pupil: yup.mixed().typeError('Такого ученика не существует').required('Укажите ученика'),\r\n  subject: yup\r\n    .string('Укажите предмет')\r\n    .max(100, 'Слишком длинная строка, попробуйте сократить')\r\n    .typeError('Предмет должен быть строкой')\r\n    .required('Укажите ваш предмет'),\r\n  date: yup.string('Укажите дату урока').required('Укажите дату урока'),\r\n  time: yup\r\n    .string('Укажите время занятия')\r\n    .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Введите время занятия в формате: \"17:00\"'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport uniqid from 'uniqid';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport AddLessonInputs from './AddLessonInputs';\r\nimport formInitialValues from './formInitialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { postLesson } from '../../redux/actions/lessons';\r\n\r\nfunction AddLessonForm({ width, open, handleClose, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n  formInitialValues.date = date.toISOString().slice(0, 10);\r\n\r\n  function handleSubmit(values, actions) {\r\n    const lesson = {\r\n      id: uniqid(),\r\n      theme: values.theme,\r\n      date: values.date,\r\n      time: values.time,\r\n      pupil: values.pupil,\r\n      schedule: null,\r\n      subject: values.subject,\r\n    };\r\n    handleSnack(true);\r\n    actions.setSubmitting(false);\r\n    dispatch(postLesson(lesson));\r\n    handleClose();\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об уроке</DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <AddLessonInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                Подтвердить\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddLessonForm);\r\n","import React from 'react';\r\nimport { IconButton, Snackbar, Button } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\n\r\nfunction SnackPopup({ open, message }) {\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'center',\r\n      }}\r\n      open={open}\r\n      message={message}\r\n      action={\r\n        <React.Fragment>\r\n          <Button color=\"secondary\" size=\"small\">\r\n            Отменить\r\n          </Button>\r\n          <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\">\r\n            <CloseIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </React.Fragment>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default SnackPopup;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport Box from '@material-ui/core/Box';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport Calendar from './Calendar';\r\nimport LessonCard from './LessonCard';\r\nimport LessonTemplateCard from './LessonTemplateCard';\r\nimport AddLessonForm from './addLessonForm/AddLessonForm';\r\nimport SnackPopup from './SnackPopup';\r\n\r\nfunction Lessons({ anchor, handleCalendarOpen, handleCalendarClose, handleCalendarClick }) {\r\n  const lessons = useSelector(({ lessons }) => lessons.items);\r\n  const lessonsLoaded = useSelector(({ lessons }) => lessons.isLoaded);\r\n\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const pupilsLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n\r\n  const scheduledLessons = useSelector(({ scheduledLessons }) => scheduledLessons.items);\r\n  const scheduledLessonsLoaded = useSelector(({ scheduledLessons }) => scheduledLessons.isLoaded);\r\n\r\n  const isLoaded = lessonsLoaded && pupilsLoaded && scheduledLessonsLoaded;\r\n\r\n  const [viewAddLessonForm, setViewAddLessonForm] = React.useState(false);\r\n  const [viewThemeChangeForm, setViewThemeChangeForm] = React.useState(false);\r\n  const [snackView, setSnackView] = React.useState(false);\r\n  const [snackThemeView, setSnackThemeView] = React.useState(false);\r\n  const calendar = React.useRef(null);\r\n\r\n  React.useEffect(() => {\r\n    let timer;\r\n    timer = setTimeout(() => {\r\n      setSnackView(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [snackView]);\r\n\r\n  React.useEffect(() => {\r\n    let timer;\r\n    timer = setTimeout(() => {\r\n      setSnackThemeView(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [snackThemeView]);\r\n\r\n  const handleAddLessonFormClick = () => setViewAddLessonForm(true);\r\n  const handleCloseAddLessonForm = () => setViewAddLessonForm(false);\r\n\r\n  const handleThemeChange = () => setViewThemeChangeForm(true);\r\n  const handleCloseThemeChangeForm = () => setViewThemeChangeForm(false);\r\n\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h5\" className=\"lessons__header\">\r\n        Уроки\r\n      </Typography>\r\n\r\n      <Box className=\"lessons__buttons-container\">\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          startIcon={<AddIcon />}\r\n          className=\"lessons__button-text\"\r\n          onClick={handleAddLessonFormClick}>\r\n          Новый урок\r\n        </Button>\r\n        <Hidden mdUp>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={handleCalendarOpen}\r\n            startIcon={<CalendarTodayIcon />}\r\n            className=\"lessons__button-text\">\r\n            Выбрать день\r\n          </Button>\r\n          <Menu\r\n            id=\"simple-menu\"\r\n            anchorEl={anchor}\r\n            keepMounted\r\n            getContentAnchorEl={null}\r\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n            transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n            open={Boolean(anchor)}\r\n            onClose={handleCalendarClose}>\r\n            <Calendar ref={calendar} handleClick={handleCalendarClick} />\r\n          </Menu>\r\n        </Hidden>\r\n      </Box>\r\n\r\n      {viewAddLessonForm && (\r\n        <AddLessonForm\r\n          open={viewAddLessonForm}\r\n          handleClose={handleCloseAddLessonForm}\r\n          handleSnack={setSnackView}\r\n        />\r\n      )}\r\n\r\n      <SnackPopup open={snackView} message=\"Урок добавлен\" />\r\n      <SnackPopup open={snackThemeView} message=\"Тема измененена\" />\r\n\r\n      <Container className=\"lessons__items-container\">\r\n        {isLoaded ? (\r\n          <React.Fragment>\r\n            {Object.entries(lessons).map(([key, value]) => (\r\n              <LessonCard\r\n                key={key}\r\n                id= {key}\r\n                time={value.time}\r\n                theme={value.theme}\r\n                subject={value.subject}\r\n                schedule={value.schedule}\r\n                name={pupils[value.pupil].name}\r\n                address={pupils[value.pupil].address}\r\n              />\r\n            ))}\r\n            {Object.entries(scheduledLessons).map(([key, value]) => {\r\n              return (\r\n                <LessonTemplateCard\r\n                  key={key}\r\n                  time={value.time}\r\n                  scheduleId={value.id}\r\n                  pupilId={pupils[value.pupil].id}\r\n                  name={pupils[value.pupil].name}\r\n                  subject={value.subject}\r\n                  address={pupils[value.pupil].address}\r\n                  handleSnack={setSnackThemeView}\r\n                />\r\n              );\r\n            })}\r\n            {!(Object.keys(lessons).length || Object.keys(scheduledLessons).length) ? (\r\n              <Typography>На текущий день уроков не запланировано</Typography>\r\n            ) : null}\r\n          </React.Fragment>\r\n        ) : (\r\n          Array(4)\r\n            .fill(0)\r\n            .map((_, index) => (\r\n              <Skeleton key={index} variant=\"rect\" className=\"lessons__skeleton\" />\r\n            ))\r\n        )}\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Lessons;\r\n","import React from 'react';\r\n\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Collapse from '@material-ui/core/Collapse';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport Hidden from '@material-ui/core/Hidden';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nfunction MenuItem(props) {\r\n  return (\r\n    <ListItem\r\n      button\r\n      className=\"menu__button\"\r\n      component={NavLink}\r\n      to={props.to}\r\n      activeStyle={{\r\n        \r\n      }}>\r\n      <ListItemIcon className=\"menu--center\">{props.children}</ListItemIcon>\r\n      <Hidden mdDown>\r\n        <ListItemText primary={props.name} />\r\n      </Hidden>\r\n      <Collapse in={props.open} timeout=\"auto\" unmountOnExit>\r\n        <ListItemText primary={props.name} />\r\n      </Collapse>\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nexport default MenuItem;\r\n","import classNames from 'classnames';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport React from 'react';\r\nimport MenuItem from './MenuItem';\r\n\r\nfunction MenuDrawer() {\r\n  return (\r\n    <Drawer variant=\"permanent\" anchor=\"left\">\r\n      <List className={classNames('menu__list')}>\r\n        <ListItem>\r\n          <Grid container className=\"menu__header\">\r\n            <Grid item xs={6} className=\"menu__avatar\">\r\n              <AccountCircleIcon />\r\n            </Grid>\r\n            <Grid item xs={6} className=\"menu__settings\">\r\n              <IconButton>\r\n                <SettingsIcon />\r\n              </IconButton>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <Typography variant=\"h5\">Евгений Робертович Поганин</Typography>\r\n            </Grid>\r\n          </Grid>\r\n        </ListItem>\r\n\r\n        <Divider />\r\n\r\n        <Box className=\"menu__nav-container\">\r\n          <MenuItem open={false} name=\"Расписание\" to=\"/schedule\">\r\n            <CalendarTodayIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={false} name=\"Ученики\" to=\"/pupils\">\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={false} name=\"Финансы\" to=\"finance\">\r\n            <ShowChartIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n        </Box>\r\n      </List>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nexport default MenuDrawer;\r\n","import List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\n\r\nimport React from 'react';\r\nimport classNames from 'classnames';\r\nimport MenuItem from './MenuItem';\r\n\r\nconst useStyles = makeStyles({\r\n  drawerPaper: {\r\n    position: 'fixed',\r\n    top: 'auto',\r\n  },\r\n});\r\n\r\nfunction MenuDrawerMobile() {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  function handleDrawerOpen() {\r\n    setOpen((prev) => !prev);\r\n  }\r\n\r\n  const classes = useStyles();\r\n  return (\r\n    <React.Fragment>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton\r\n            edge=\"start\"\r\n            color=\"inherit\"\r\n            aria-label=\"open drawer\"\r\n            onClick={handleDrawerOpen}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      <Drawer\r\n        variant=\"persistent\"\r\n        open={open}\r\n        onClose={handleDrawerOpen}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}>\r\n        <List className={classNames('menu__list', { 'menu__list--opened': open })}>\r\n          <ListItem>\r\n            <Grid container className=\"menu__header\">\r\n              <Grid item xs={6} className=\"menu__avatar\">\r\n                <AccountCircleIcon />\r\n              </Grid>\r\n              <Grid item xs={6} className=\"menu__settings\">\r\n                <IconButton>\r\n                  <SettingsIcon />\r\n                </IconButton>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <Typography variant=\"h5\">Евгений Робертович Поганин</Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </ListItem>\r\n\r\n          <MenuItem open={open} name=\"Расписание\" to=\"/schedule\">\r\n            <CalendarTodayIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={open} name=\"Ученики\" to=\"/pupils\">\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={open} name=\"Финансы\" to=\"/finance\">\r\n            <ShowChartIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n        </List>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default MenuDrawerMobile;\r\n","import React from 'react';\r\nimport classNames from 'classnames';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport MenuItem from './MenuItem';\r\n\r\nfunction MenuMdDrawer() {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  function handleDrawerOpen() {\r\n    setOpen((prev) => !prev);\r\n  }\r\n\r\n  return (\r\n    <Drawer variant=\"permanent\" anchor=\"left\" open={open}>\r\n      <List className={classNames('menu__list', { 'menu__list--opened': open })}>\r\n        <ListItem button className=\"menu--center\" onClick={handleDrawerOpen}>\r\n          <ListItemIcon className=\"menu--center\">\r\n            <MenuIcon className=\"menu--svg\" />\r\n          </ListItemIcon>\r\n        </ListItem>\r\n\r\n        {open && (\r\n          <ListItem>\r\n            <Grid container className=\"menu__header\">\r\n              <Grid item xs={6} className=\"menu__avatar\">\r\n                <AccountCircleIcon />\r\n              </Grid>\r\n              <Grid item xs={6} className=\"menu__settings\">\r\n                <IconButton>\r\n                  <SettingsIcon />\r\n                </IconButton>\r\n              </Grid>\r\n              <Grid item xs={12}>\r\n                <Typography variant=\"h5\">Евгений Робертович Поганин</Typography>\r\n              </Grid>\r\n            </Grid>\r\n          </ListItem>\r\n        )}\r\n\r\n        <Divider />\r\n        <Box className=\"menu__nav-container\">\r\n          <MenuItem open={open} name=\"Расписание\" to=\"/schedule\">\r\n            <CalendarTodayIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={open} name=\"Ученики\" to=\"/pupils\">\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={open} name=\"Финансы\" to=\"/finance\">\r\n            <ShowChartIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n        </Box>\r\n      </List>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nexport default MenuMdDrawer;\r\n","import React from 'react';\r\nimport Hidden from '@material-ui/core/Hidden';\r\n\r\nimport MenuDrawer from './Menu/MenuLgDrawer';\r\nimport MenuDrawerMobile from './Menu/MenuSmDrawer';\r\nimport MenuMdDrawer from './Menu/MenuMdDrawer';\r\n\r\n//FIXME: implement clickAwayListener\r\n\r\nconst Menu = () => {\r\n  return (\r\n    <React.Fragment>\r\n      <Hidden smUp>\r\n        <MenuDrawerMobile />\r\n      </Hidden>\r\n      <Hidden only={['xs', 'lg', 'xl']}>\r\n        <MenuMdDrawer />\r\n      </Hidden>\r\n      <Hidden mdDown>\r\n        <MenuDrawer />\r\n      </Hidden>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\r\n\r\nfunction PupilCard({ name, schedulesId, grade, parents, address, contacts, schedules }) {\r\n  return (\r\n    <Card className=\"pupils__card\">\r\n      <CardHeader\r\n        className=\"pupils__card-header\"\r\n        avatar={\r\n          <Avatar aria-label=\"pupil\" className=\"pupils__card-avatar\">\r\n            R\r\n          </Avatar>\r\n        }\r\n        action={\r\n          <IconButton aria-label=\"Меню\">\r\n            <MoreVertIcon />\r\n          </IconButton>\r\n        }\r\n        title={name}\r\n        subheader={`Класс: ${grade}`}\r\n      />\r\n      <CardContent className=\"pupils__card-content\">\r\n        <Typography component=\"p\">\r\n          {schedulesId.map((id) => `${schedules[id].day}-${schedules[id].time} `)}\r\n        </Typography>\r\n        <Typography component=\"p\">{`Родители: ${parents}`}</Typography>\r\n        <Typography component=\"p\">{`Контакты: ${contacts.join(',')}`}</Typography>\r\n        <Typography component=\"p\">{`Адрес: ${address}`}</Typography>\r\n      </CardContent>\r\n      <CardActions className=\"pupils__homework\">\r\n        <IconButton color=\"secondary\" aria-label=\"Домашняя работа\">\r\n          <MenuBookIcon aria-label=\"homework\" />\r\n        </IconButton>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n}\r\n\r\nPupilCard.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  schedulesId: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n  schedules: PropTypes.object.isRequired,\r\n  grade: PropTypes.number.isRequired,\r\n  parents: PropTypes.string.isRequired,\r\n  address: PropTypes.string.isRequired,\r\n  contacts: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n};\r\n\r\nexport default PupilCard;\r\n","import React from 'react';\r\nimport { useField, FieldArray, useFormikContext } from 'formik';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nfunction MyTextField({ ...props }) {\r\n  const [field, meta, helpers] = useField(props.name);\r\n  return (\r\n    <TextField\r\n      {...field}\r\n      {...props}\r\n      error={meta.touched && Boolean(meta.error)}\r\n      helperText={meta.touched && meta.error}\r\n    />\r\n  );\r\n}\r\n\r\nfunction AddPupilInputs() {\r\n  const { values } = useFormikContext();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField autoFocus margin=\"normal\" name=\"name\" label=\"Имя\" autoComplete=\"off\" fullWidth />\r\n      <MyTextField\r\n        margin=\"normal\"\r\n        name=\"grade\"\r\n        label=\"Класс\"\r\n        type=\"number\"\r\n        InputProps={{\r\n          inputProps: { min: 1, max: 20 },\r\n        }}\r\n        autoComplete=\"off\"\r\n        fullWidth\r\n      />\r\n      <MyTextField margin=\"normal\" name=\"address\" label=\"Адрес\" autoComplete=\"off\" fullWidth />\r\n      <MyTextField margin=\"normal\" name=\"parents\" label=\"Родитель\" autoComplete=\"off\" fullWidth />\r\n\r\n      <FieldArray name=\"contacts\">\r\n        {({ insert, remove, push }) => (\r\n          <React.Fragment>\r\n            {values.contacts.length > 0 &&\r\n              values.contacts.map((contact, index) => (\r\n                <React.Fragment key={index}>\r\n                  <MyTextField\r\n                    margin=\"normal\"\r\n                    name={`contacts[${index}]`}\r\n                    label=\"Контакты\"\r\n                    autoComplete=\"off\"\r\n                    InputProps={{\r\n                      startAdornment: <InputAdornment position=\"start\">+7</InputAdornment>,\r\n                    }}\r\n                    fullWidth\r\n                  />\r\n                  {/*FIXME: iconbutton hover transparency on mobile screen*/}\r\n                  <Tooltip title=\"Удалить номер\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      aria-label=\"Удалить номер\"\r\n                      className=\"pupil-form__btn\"\r\n                      color=\"secondary\"\r\n                      onClick={() => remove(index)}>\r\n                      <ClearIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                </React.Fragment>\r\n              ))}\r\n            <Tooltip title=\"Добавить номер\">\r\n              <IconButton\r\n                size=\"small\"\r\n                color=\"secondary\"\r\n                aria-label=\"Добавить номер\"\r\n                className=\"pupil-form__btn pupil-form__btn-add-contact\"\r\n                onClick={() => push('')}>\r\n                <AddIcon />\r\n              </IconButton>\r\n            </Tooltip>\r\n          </React.Fragment>\r\n        )}\r\n      </FieldArray>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default AddPupilInputs;\r\n","import React from 'react';\r\nimport { FieldArray, useField, useFormikContext } from 'formik';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nconst days = {\r\n  1: 'Понедельник',\r\n  2: 'Вторник',\r\n  3: 'Среда',\r\n  4: 'Четверг',\r\n  5: 'Пятница',\r\n  6: 'Суббота',\r\n  7: 'Воскресенье',\r\n};\r\n\r\nfunction MyTextField({ ...props }) {\r\n  const [field, meta, helpers] = useField(props.name);\r\n  return (\r\n    <TextField\r\n      {...field}\r\n      {...props}\r\n      error={meta.touched && Boolean(meta.error)}\r\n      helperText={meta.touched && meta.error}\r\n    />\r\n  );\r\n}\r\n\r\nconst MySelect = ({ ...props }) => {\r\n  const [field, meta] = useField(props);\r\n  return (\r\n    <React.Fragment>\r\n      <Select {...field} {...props} error={meta.touched && Boolean(meta.error)} />\r\n      {meta.touched && meta.error ? (\r\n        <span className=\"pupil-form__select-error\">{meta.error}</span>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nfunction AddScheduleInputs() {\r\n  const { values } = useFormikContext();\r\n\r\n  return (\r\n    <FieldArray name=\"schedules\">\r\n      {({ insert, remove, push }) => (\r\n        <React.Fragment>\r\n          {values.schedules.length > 0 &&\r\n            values.schedules.map((schedule, index) => (\r\n              <React.Fragment key={index}>\r\n                <Grid container spacing={4}>\r\n                  <Grid item xs={6}>\r\n                    <FormControl fullWidth>\r\n                      <InputLabel id=\"pupil-form__select-label\">День занятия</InputLabel>\r\n                      <MySelect\r\n                        labelId=\"pupil-form__select-label\"\r\n                        name={`schedules[${index}].day`}\r\n                        MenuProps={menuProps}\r\n                        IconComponent={iconComponent}>\r\n                        {Object.keys(days).map((key) => (\r\n                          <MenuItem key={key} value={key}>\r\n                            {days[key]}\r\n                          </MenuItem>\r\n                        ))}\r\n                      </MySelect>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid item xs={6}>\r\n                    <MyTextField\r\n                      margin=\"none\"\r\n                      name={`schedules[${index}].time`}\r\n                      type=\"time\"\r\n                      label=\"Время занятия\"\r\n                      inputProps={{\r\n                        step: 300, // 5 min\r\n                      }}\r\n                      fullWidth\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n                <MyTextField\r\n                  margin=\"normal\"\r\n                  name={`schedules[${index}].price`}\r\n                  label=\"Стоимость занятия, 800\"\r\n                  autoComplete=\"off\"\r\n                  fullWidth\r\n                />\r\n                <MyTextField\r\n                  margin=\"normal\"\r\n                  name={`schedules[${index}].subject`}\r\n                  label=\"Предмет\"\r\n                  autoComplete=\"off\"\r\n                  fullWidth\r\n                />\r\n                {values.schedules.length > 1 && (\r\n                  <Tooltip title=\"Удалить номер\">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      aria-label=\"Удалить номер\"\r\n                      className=\"pupil-form__btn\"\r\n                      color=\"secondary\"\r\n                      onClick={() => remove(index)}>\r\n                      <ClearIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                )}\r\n              </React.Fragment>\r\n            ))}\r\n          <Tooltip title=\"Добавить номер\">\r\n            <IconButton\r\n              size=\"small\"\r\n              color=\"secondary\"\r\n              aria-label=\"Добавить номер\"\r\n              className=\"pupil-form__btn pupil-form__btn-add-contact\"\r\n              onClick={() => push({ day: '', price: '', subject: '', time: '15:00' })}>\r\n              <AddIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </React.Fragment>\r\n      )}\r\n    </FieldArray>\r\n  );\r\n}\r\n\r\nexport default AddScheduleInputs;\r\n","import * as yup from 'yup';\r\n\r\nconst MAX_LESSON_PAY = 1000000000;\r\n\r\nconst validationSchema = [\r\n  yup.object().shape({\r\n    name: yup\r\n      .string('Укажите имя ученика')\r\n      .typeError('Имя должно быть строкой')\r\n      .max(100, 'Имя длиннее 100 символов?')\r\n      .required('Необходимо указать имя ученика'),\r\n    grade: yup // number?\r\n      .string('В каком классе ребенок учится?')\r\n      .typeError('Класс должен быть строкой')\r\n      .matches(/^([1-9]?|1[0-9])$/, 'Укажите класс от 1 до 11')\r\n      .max(2, 'Слишком большое значение, возможно вы ошиблись')\r\n      .required('Укажите класс, в котором учится ребенок'),\r\n    address: yup\r\n      .string('Укажите адрес')\r\n      .max(200, 'Попробуйте написать адрес короче')\r\n      .typeError('Адрес должен быть строкой'),\r\n    parents: yup\r\n      .string('Укажите информацию о родителе')\r\n      .max(200, 'Cтрока должна быть короче')\r\n      .typeError('Информация о родителе должна быть строкой'),\r\n    contacts: yup.array().of(\r\n      yup\r\n        .string('Укажите телефонный номер')\r\n        .matches(/^[[0-9]+$/, 'Введите номер телефона')\r\n        .typeError('Номер должен быть строкой')\r\n        .max(20, 'Строка должна быть короче'),\r\n    ),\r\n  }),\r\n\r\n  yup.object().shape({\r\n    schedules: yup.array().of(\r\n      yup.object().shape({\r\n        day: yup\r\n          .mixed()\r\n          .oneOf(['1', '2', '3', '4', '5', '6', '7'])\r\n          .typeError('День занятия указан неверно')\r\n          .required('Укажите день занятия'),\r\n        time: yup\r\n          .string('Введите время занятия')\r\n          .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, 'Введите время занятия в формате: \"17:00\"')\r\n          .max(5, 'Это поле не может быть длиннее пяти символов')\r\n          .required('Введите время занятия'),\r\n        price: yup\r\n          .number('Укажите стоимость занятия')\r\n          .typeError('Лучше ввести число')\r\n          .positive('Cтоимость должна быть положительной')\r\n          .max(MAX_LESSON_PAY, 'Возможно вы ошиблись и занятие стоит не так дорого')\r\n          .required('Укажите стоимость занятия'),\r\n        subject: yup\r\n          .string()\r\n          .max(100, 'Слишком длинная строка, попробуйте сократить')\r\n          .typeError('Предмет должен быть строкой')\r\n          .required('Укажите ваш предмет'),\r\n      }),\r\n    ),\r\n  }),\r\n];\r\n\r\nexport default validationSchema;\r\n","const formInitialValues = {\r\n  name: '',\r\n  grade: '',\r\n  address: '',\r\n  parents: '',\r\n  contacts: [''],\r\n  \r\n  schedules: [{\r\n    day: '',\r\n    time: '15:00',\r\n    price: '',\r\n    subject: ''\r\n  }],\r\n};\r\n\r\nexport default formInitialValues;\r\n","import { db } from '../../firebase';\r\n\r\nexport const fetchPupils = (date) => async (dispatch) => {\r\n  dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n\r\n  const user = await db.doc('/users/Uyv2wLqViEmqMjoWvjz3/').get();\r\n  const pupils = await retrievePupils(user);\r\n\r\n  dispatch(setPupils(pupils));\r\n};\r\n\r\nasync function retrievePupils(user) {\r\n  let retrievedPupils = {};\r\n  const pupilsSnapshot = await db.collection(`/users/${user.id}/pupils/`).get();\r\n  pupilsSnapshot.forEach(\r\n    (pupilDoc) => (retrievedPupils = { ...retrievedPupils, [pupilDoc.id]: pupilDoc.data() }),\r\n  );\r\n  return retrievedPupils;\r\n}\r\n\r\nexport const postPupil = ({ id, ...data }) => async (dispatch) => {\r\n  dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n  const user = await db.doc('/users/Uyv2wLqViEmqMjoWvjz3/').get();\r\n  await db.doc(`/users/${user.id}/pupils/${id}`).set({ id, ...data });\r\n  dispatch(addPupil({id, ...data}))\r\n};\r\n\r\nexport const setPupils = (items) => ({\r\n  type: 'SET_PUPILS',\r\n  payload: items,\r\n});\r\n\r\nexport const addPupil = (data) => ({\r\n  type: 'ADD_PUPIL',\r\n  payload: data,\r\n});\r\n","import uniqid from 'uniqid';\r\nimport { postPupil } from './pupils';\r\nimport { postSchedule } from './schedules';\r\n\r\nconst formHandler = ({ ...data }) => async (dispatch) => {\r\n  const pupilId = uniqid();\r\n\r\n  const schedules = data.schedules.map((schedule) => ({\r\n    id: uniqid(),\r\n    subject: schedule.subject,\r\n    time: schedule.time,\r\n    price: +schedule.price,\r\n    day: +schedule.day,\r\n    year: new Date().getFullYear(),\r\n    pupil: pupilId,\r\n    lessons: [],\r\n    timestamp: Date.now(),\r\n  }));\r\n\r\n  const pupil = {\r\n    id: pupilId,\r\n    name: data.name,\r\n    address: data.address,\r\n    grade: data.grade,\r\n    parents: data.parents,\r\n    contacts: data.contacts,\r\n    schedulesId: schedules.map((schedule) => schedule.id),\r\n    timestamp: Date.now(),\r\n  };\r\n\r\n  await dispatch(postSchedule(schedules));\r\n  await dispatch(postPupil(pupil));\r\n};\r\n\r\nexport default formHandler;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\n\r\nimport AddPupilInputs from './AddPupilInputs';\r\nimport AddScheduleInputs from './AddScheduleInputs';\r\nimport validationSchema from './validationSchema';\r\nimport formInitialValues from './formInitialValues';\r\nimport formHandler from '../../redux/actions/newPupil';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport { combineDispatches } from '../../redux/actions/combineDispatches';\r\n\r\nconst steps = ['Информация об ученике', 'Расписание'];\r\nfunction getForm(step) {\r\n  switch (step) {\r\n    case 0:\r\n      return <AddPupilInputs />;\r\n    case 1:\r\n      return <AddScheduleInputs />;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction AddPupilForm({ open, handleClose, width, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const [activeStep, setActiveStep] = React.useState(0);\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n  const isLastStep = activeStep === steps.length - 1;\r\n\r\n  const today = useSelector(({ date }) => date.selected);\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  const handleSubmit = (values, actions) => {\r\n    if (isLastStep) {\r\n      submitForm(values, actions);\r\n      handleSnack(true);\r\n      handleClose();\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n      actions.setTouched({});\r\n      actions.setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  function submitForm(values, actions) {\r\n    actions.setSubmitting(false);\r\n    setActiveStep(activeStep + 1);\r\n    combineDispatches(\r\n      () => dispatch(formHandler(values)),\r\n      () => dispatch(fetchScheduledLessons(today)),\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>Введите информацию об ученике</DialogTitle>\r\n      <DialogContent className=\"pupil-form__dialog-content\">\r\n        <Stepper activeStep={activeStep}>\r\n          {steps.map((label, index) => {\r\n            const stepProps = {};\r\n            const labelProps = {};\r\n\r\n            return (\r\n              <Step key={label} {...stepProps}>\r\n                <StepLabel {...labelProps}>{label}</StepLabel>\r\n              </Step>\r\n            );\r\n          })}\r\n        </Stepper>\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={currentValidationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            {getForm(activeStep)}\r\n\r\n            <Box className=\"pupil-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                Закрыть\r\n              </Button>\r\n              {activeStep !== 0 && (\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={handleBack}>\r\n                  Назад\r\n                </Button>\r\n              )}\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                {isLastStep ? 'Подтвердить' : 'Далее'}\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddPupilForm);\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\n\r\nimport PupilCard from './PupilCard';\r\nimport AddPupilForm from './addPupilForm/AddPupilForm';\r\nimport SnackPopup from './SnackPopup';\r\n\r\nfunction PupilsList() {\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const pupilsLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n  const schedules = useSelector(({ schedules }) => schedules.items);\r\n  const schedulesLoaded = useSelector(({ schedules }) => schedules.isLoaded);\r\n  const [snackView, setSnackView] = React.useState(false);\r\n\r\n  /**\r\n   * prevent React state update on unmounted component!\r\n   */\r\n  React.useEffect(() => {\r\n    let timer;\r\n    timer = setTimeout(() => {\r\n      setSnackView(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [snackView]);\r\n\r\n  const isLoaded = pupilsLoaded && schedulesLoaded;\r\n\r\n  const [viewAddPupilForm, setViewAddPupilForm] = React.useState(false);\r\n\r\n  function handleAddLessonClick() {\r\n    setViewAddPupilForm(true);\r\n  }\r\n\r\n  function handleCloseAddLessonForm() {\r\n    setViewAddPupilForm(false);\r\n  }\r\n\r\n  function handleSnack(state) {\r\n    setSnackView(state);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Box className=\"pupils__header-container\">\r\n        <Typography variant=\"h5\" className=\"pupils__header\">\r\n          Ученики\r\n        </Typography>\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          startIcon={<AddIcon />}\r\n          className=\"pupils__button-text\"\r\n          onClick={handleAddLessonClick}>\r\n          Новый ученик\r\n        </Button>\r\n      </Box>\r\n\r\n      {viewAddPupilForm && (\r\n        <AddPupilForm\r\n          open={viewAddPupilForm}\r\n          handleClose={handleCloseAddLessonForm}\r\n          handleSnack={handleSnack}\r\n        />\r\n      )}\r\n\r\n      <SnackPopup open={snackView} message=\"Ученик добавлен\"/>\r\n\r\n      <Grid container spacing={2} className=\"pupils__card-container\">\r\n        {isLoaded\r\n          ? Object.keys(pupils).map((key) => (\r\n              <Grid key={key} item md={4} sm={6} xs={12}>\r\n                <PupilCard {...pupils[key]} schedules={schedules} />\r\n              </Grid>\r\n            ))\r\n          : new Array(6).fill(0).map((_, i) => (\r\n              <Grid key={i} item md={4} sm={6} xs={12}>\r\n                <Skeleton key={i} variant=\"rect\" className=\"pupils__skeleton\" />\r\n              </Grid>\r\n            ))}\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PupilsList;\r\n","import React from 'react';\r\nimport { Calendar, Lessons } from '../components';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { fetchLessons } from '../redux/actions/lessons';\r\nimport { fetchScheduledLessons } from '../redux/actions/scheduledLessons';\r\n\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction Schedule() {\r\n  const dispatch = useDispatch();\r\n  const [anchorCalendar, setAnchorEl] = React.useState(null);\r\n\r\n  function handleCalendarOpen(e) {\r\n    setAnchorEl(e.currentTarget);\r\n  }\r\n\r\n  function handleCalendarClose() {\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  function handleCalendarClick(date) {\r\n    dispatch(fetchLessons(date));\r\n    dispatch(fetchScheduledLessons(date));\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Container maxWidth=\"xl\" className=\"lessons__container\">\r\n        <Grid container spacing={2}>\r\n          <Hidden only={['xs', 'sm']}>\r\n            <Grid item xs={8}>\r\n              <Lessons\r\n                anchor={anchorCalendar}\r\n                handleClick={handleCalendarOpen}\r\n                handleClose={handleCalendarClose}\r\n                handleCalendarClick={handleCalendarClick}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n\r\n          <Hidden mdUp>\r\n            <Grid item xs={12}>\r\n              <Lessons\r\n                anchor={anchorCalendar}\r\n                handleCalendarOpen={handleCalendarOpen}\r\n                handleCalendarClose={handleCalendarClose}\r\n                handleCalendarClick={handleCalendarClick}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n\r\n          <Hidden smDown>\r\n            <Grid item xs={4} className=\"calendar__container\">\r\n              <Box className=\"calendar--fixed\">\r\n                <Calendar handleClick={handleCalendarClick} />\r\n              </Box>\r\n            </Grid>\r\n          </Hidden>\r\n        </Grid>\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Schedule;\r\n","import React from 'react';\r\n\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport { PupilsList } from '../components';\r\n\r\nfunction Pupils() {\r\n  return (\r\n    <React.Fragment>\r\n      <Container maxWidth=\"xl\" className=\"pupils__container\">\r\n        <PupilsList />\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Pupils;\r\n","import React from 'react';\r\n\r\nfunction Finance() {\r\n  return <div>Finance</div>;\r\n}\r\n\r\nexport default Finance;\r\n\r\n","import CssBaseline from '@material-ui/core/CssBaseline';\nimport { StylesProvider, ThemeProvider } from '@material-ui/core/styles';\nimport theme from './stylesOverride';\n\nimport { Menu, InfoPanel } from './components';\nimport Box from '@material-ui/core/Box';\nimport Container from '@material-ui/core/Container';\n\nimport React from 'react';\nimport Schedule from './pages/Schedule';\nimport Pupils from './pages/Pupils';\nimport Finance from './pages/Finance';\nimport { Switch, Route } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\n\nimport { fetchLessons } from './redux/actions/lessons';\nimport { fetchPupils } from './redux/actions/pupils';\nimport { fetchSchedules } from './redux/actions/schedules';\nimport { fetchScheduledLessons } from './redux/actions/scheduledLessons';\n\nfunction App() {\n  const dispatch = useDispatch();\n\n  React.useEffect(() => {\n    dispatch(fetchLessons(new Date()));\n    dispatch(fetchScheduledLessons(new Date()));\n    dispatch(fetchPupils());\n    dispatch(fetchSchedules());\n  }, []);\n\n  return (\n    <StylesProvider injectFirst>\n      <ThemeProvider theme={theme}>\n        <div className=\"App\">\n          <CssBaseline />\n          <Menu />\n          <Box className=\"content\">\n            <Container maxWidth=\"xl\">\n              <InfoPanel />\n              <Switch>\n                <Route exact path=\"/tutor\">\n                  <Schedule />\n                </Route>\n                <Route path=\"/schedule\">\n                  <Schedule />\n                </Route>\n                <Route path=\"/pupils\">\n                  <Pupils />\n                </Route>\n                <Route path=\"/finance\">\n                  <Finance />\n                </Route>\n              </Switch>\n            </Container>\n          </Box>\n        </div>\n      </ThemeProvider>\n    </StylesProvider>\n  );\n}\n\nexport default App;\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst pupils = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_PUPILS': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'SET_PUPILS_LOADED': {\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    }\r\n    case 'ADD_PUPIL': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default pupils;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst schedules = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_SCHEDULES':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_SCHEDULES_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'ADD_SCHEDULE': {\r\n      let schedules = {};\r\n      action.payload.forEach(\r\n        (item) =>\r\n          (schedules = {\r\n            ...schedules,\r\n            [item.id]: item,\r\n          }),\r\n      );\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, ...schedules },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPD_SCHEDULE': {\r\n      const newLessons = [...state.items[action.payload.id].lessons];\r\n      newLessons.push(action.payload.date);\r\n      return {\r\n        ...state,\r\n        items: {\r\n          ...state.items,\r\n          [action.payload.id]: {\r\n            ...state.items[action.payload.id],\r\n            lessons: newLessons,\r\n          },\r\n        },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default schedules;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst scheduledLessons = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_SCHEDULED_LESSONS':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_SCHEDULED_LESSONS_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default scheduledLessons;\r\n","const initialState = {\r\n  selected: new Date(),\r\n};\r\n\r\nconst date = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_DATE':\r\n      return {\r\n        ...state,\r\n        selected: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default date;\r\n","import { combineReducers } from 'redux';\r\n\r\nimport lessons from './lessons';\r\nimport pupils from './pupils';\r\nimport schedules from './schedules';\r\nimport scheduledLessons from './scheduledLessons';\r\nimport date from './date'\r\n\r\nconst rootReducer = combineReducers({\r\n  lessons,\r\n  pupils,\r\n  schedules,\r\n  scheduledLessons,\r\n  date,\r\n});\r\n\r\nexport default rootReducer;\r\n","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\n\nimport './sass/styles.sass';\n\nimport store from './redux/store';\n\nReactDOM.render(\n  <Router>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </Router>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}
{"version":3,"sources":["firebase.js","stylesOverride.js","components/InfoPanelCard.jsx","redux/reducers/lessons.js","components/InfoPanel.jsx","redux/actions/date.js","components/Calendar.jsx","redux/actions/lessons.js","components/CustomInputs.jsx","components/notesForm/NotesFormInputs.jsx","components/notesForm/initialValues.js","components/notesForm/validationSchema.js","components/notesForm/NotesForm.jsx","redux/actions/schedules.js","redux/actions/scheduledLessons.js","components/LessonCard.jsx","components/lessonFromTemplateForm/LessonFromTemplateInputs.jsx","components/lessonFromTemplateForm/formInitialValues.js","components/lessonFromTemplateForm/validationSchema.js","redux/actions/combineDispatches.js","components/lessonFromTemplateForm/LessonFromTemplateForm.jsx","components/LessonTemplateCard.jsx","components/addLessonForm/AddLessonInputs.jsx","components/addLessonForm/formInitialValues.js","components/addLessonForm/validationSchema.js","components/addLessonForm/AddLessonForm.jsx","components/SnackPopup.jsx","components/Lessons.jsx","components/Menu/MenuItem.jsx","components/Menu/MenuHeader.jsx","components/Menu/MenuLgDrawer.jsx","components/Menu/MenuSmDrawer.jsx","components/Menu/MenuMdDrawer.jsx","components/Menu.jsx","redux/actions/pupils.js","components/PupilCard.jsx","components/addPupilForm/AddPupilInputs.jsx","components/addPupilForm/AddScheduleInputs.jsx","components/addPupilForm/validationSchema.js","components/addPupilForm/formInitialValues.js","redux/actions/newPupil.js","components/addPupilForm/AddPupilForm.jsx","components/PupilsList.jsx","components/auth/signupForm/initialValues.js","components/auth/signupForm/validationSchema.js","components/auth/signupForm/SignupInputs.jsx","contexts/AuthContext.jsx","components/auth/ErrorSnack.jsx","components/auth/signupForm/Recaptcha.jsx","components/auth/EmailSnack.jsx","redux/actions/user.js","components/auth/Footer.jsx","components/auth/signupForm/Signup.jsx","components/auth/loginForm/initialValues.js","components/auth/loginForm/validationSchema.js","components/auth/loginForm/LoginInputs.jsx","components/auth/loginForm/Login.jsx","assets/img/notfound.svg","components/NotFound.jsx","components/Instruction.jsx","pages/Schedule.jsx","pages/Pupils.jsx","redux/actions/finance.js","pages/Finance.jsx","redux/actions/signout.js","pages/Settings.jsx","PrivateRoute.jsx","PrivateSignedInRoute.jsx","App.js","redux/reducers/pupils.js","redux/reducers/schedules.js","redux/reducers/scheduledLessons.js","redux/reducers/date.js","redux/reducers/user.js","redux/reducers/index.js","redux/store.js","index.js"],"names":["app","firebase","initializeApp","apiKey","process","authDomain","projectId","storageBucket","messagingSenderId","appId","db","firestore","auth","EmailAuthProvider","theme","createMuiTheme","palette","primary","main","blue","secondary","orange","text","typography","body1","fontSize","overrides","MuiDrawer","paper","backgroundColor","MuiButton","label","color","containedSecondary","MuiIconButton","colorSecondary","root","MuiCardContent","paddingBottom","InfoPanelCard","children","header","date","Card","className","Box","CardContent","Typography","gutterBottom","variant","component","toISOString","slice","initialState","items","isLoaded","lessons","state","action","type","payload","id","newItem","field","value","newState","days","endingsForm","n","a","b","InfoPanel","numLessons","useSelector","Object","keys","length","selected","Container","maxWidth","Grid","container","spacing","Hidden","xsDown","item","Date","getDay","setDate","MuiPickersDay","daySelected","current","MuiCalendar","handleClick","dispatch","useDispatch","utils","DateFnsUtils","locale","ruLocale","ThemeProvider","DatePicker","autoOk","disableToolbar","openTo","onChange","Calendar","React","forwardRef","props","ref","useRef","fetchLessons","ISODate","timer","stopwatch","fastRetrieveLessons","query","setLessons","postLesson","lesson","preventIsLoaded","doc","currentUser","uid","set","addLesson","retrievedLessons","collection","where","orderBy","get","forEach","lessonDoc","data","deleteLessonsByPupil","lessonsPromises","lessonsSnap","push","delete","Promise","all","changeLesson","update","updateLesson","deleteLessonAction","fn","before","performance","now","args","apply","result","after","console","log","MyTextField","useField","name","meta","TextField","error","touched","Boolean","helperText","MySelect","Fragment","Select","NotesFormInputs","margin","autoComplete","multiline","fullWidth","initialValues","note","validationSchema","yup","shape","max","useStyles","makeStyles","width","withWidth","open","handleClose","handleSnack","classes","values","actions","setSubmitting","Dialog","onClose","aria-labelledby","fullScreen","isWidthDown","DialogTitle","DialogContent","onSubmit","Button","onClick","fetchSchedules","retrieveSchedules","schedules","setSchedules","postSchedule","schPromises","map","schedule","addSchedule","deleteSchedulesByPupil","schedulesPromises","schedulesSnap","updateLessonsField","retrieveSchedulesByDay","today","getISODay","localISODate","includes","fetchScheduledLessons","setScheduledLessons","LessonCard","time","price","address","subject","handleDeleteSnack","useState","anchorEl","setAnchorEl","viewNotesForm","setViewNotesForm","selectedDate","keepMounted","getContentAnchorEl","anchorOrigin","vertical","horizontal","transformOrigin","MenuList","autoFocus","MenuItem","deleteLesson","FieldValue","arrayRemove","procedure","deleteLessonFromSchedule","IconButton","aria-label","e","currentTarget","LessonFromTemplateInputs","formInitialValues","required","notes","combineDispatches","funcs","pupilId","scheduleId","uniqid","pupil","timestamp","arrayUnion","addLessonToSchedule","LessonTemplateCard","viewForm","setViewForm","menuProps","iconComponent","AddLessonInputs","pupils","xs","FormControl","InputLabel","labelId","MenuProps","IconComponent","key","sm","inputProps","step","rowsMax","tzoffset","getTimezoneOffset","typeError","matches","min","SnackPopup","message","Snackbar","TransitionComponent","Grow","autoHideDuration","size","Lessons","anchor","handleCalendarOpen","handleCalendarClose","handleCalendarClick","lessonsLoaded","pupilsLoaded","scheduledLessons","scheduledLessonsLoaded","viewAddLessonForm","setViewAddLessonForm","snackAddLessonView","setSnackAddLessonView","snackFromTemplateView","setSnackFromTemplateView","snackNotesView","setSnackNotesView","snackDeleteLesson","setSnackDeleteLesson","calendar","startIcon","mdUp","entries","Array","fill","_","index","Skeleton","to","handleDrawer","ListItem","button","NavLink","ListItemIcon","ListItemText","MenuHeader","user","MenuDrawer","Drawer","List","Divider","drawerPaper","position","top","MenuDrawerMobile","setOpen","prev","AppBar","Toolbar","edge","MenuControls","MenuMdDrawer","Menu","smUp","only","mdDown","retrievePupils","retrievedPupils","pupilDoc","postPupil","addPupil","deletePupilAction","deletePupil","setPupils","PupilCard","schedulesId","grade","parents","contacts","CardHeader","avatar","Avatar","title","subheader","day","join","CardActions","AddPupilInputs","useFormikContext","InputProps","insert","remove","contact","startAdornment","InputAdornment","Tooltip","1","2","3","4","5","6","7","AddScheduleInputs","of","oneOf","formHandler","year","getFullYear","steps","getForm","activeStep","setActiveStep","currentValidationSchema","isLastStep","Stepper","Step","StepLabel","submitForm","setTouched","prevActiveStep","PupilsList","schedulesLoaded","snackView","setSnackView","useEffect","setTimeout","clearTimeout","viewAddPupilForm","setViewAddPupilForm","md","i","firstName","lastName","password","email","recaptcha","notOneOf","SignupInputs","viewPassword","setViewPassword","endAdornment","languageCode","AuthContext","createContext","test","AuthProvider","setCurrentUser","loading","setLoading","firstLogin","setFirstLogin","onAuthStateChanged","getIdTokenResult","then","res","authTime","metadata","creationTime","document","referrer","getIdToken","signup","createUserWithEmailAndPassword","login","signInWithEmailAndPassword","verifyEmail","sendEmailVerification","url","handleCodeInApp","updateUser","updateProfile","displayName","signout","signOut","Provider","CircularProgress","ErrorSnack","Recaptcha","errors","setFieldTouched","setFieldValue","recaptchaVerifier","RecaptchaVerifier","callback","response","render","widgetId","mt","mb","EmailSnack","ContentProps","postUser","addUser","align","Link","href","target","Signup","history","useHistory","useContext","setError","viewSnack","setViewSnack","viewEmailVerifySnack","setViewEmailVerifySnack","handleSubmit","userCredential","code","CssBaseline","direction","alignItems","disabled","LoginInputs","Login","_rect","_rect2","_rect3","_rect4","_rect5","_rect6","_rect7","_rect8","_rect9","_rect10","_rect11","_rect12","_extends","assign","arguments","source","prototype","hasOwnProperty","call","this","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgNotfound","_ref","svgRef","titleId","xmlns","height","x","y","ForwardRef","NotFound","class","marginBottom","paddingTop","fontWeight","borderRadius","Instruction","p","pt","Schedule","anchorCalendar","smDown","Pupils","fetchPrices","prices","sum","lessonsSnapshot","Chart","register","LinearScale","BarElement","BarController","CategoryScale","PieController","ArcElement","Legend","DoughnutController","Finance","canvas","getMonth","setPrices","mounted","myChart","labels","datasets","r","Math","floor","random","g","colorGen","hoverOffset","options","plugins","legend","destroy","reduce","accum","next","signoutAction","Settings","ListItemAvatar","PrivateRoute","Component","rest","emailVerified","PrivateSignedInRoute","Content","path","App","StylesProvider","injectFirst","newLessons","filter","appReducer","combineReducers","rootReducer","undefined","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunk","ReactDOM","getElementById"],"mappings":"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","file":"static/js/main.0cf46ec3.chunk.js","sourcesContent":["import firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\nimport 'firebase/auth';\r\n\r\nconst app = firebase.initializeApp({\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n});\r\n\r\nexport const db = app.firestore();\r\nexport const auth = app.auth();\r\nexport default app;\r\nexport const emailAuthProvider = firebase.auth.EmailAuthProvider;\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\nimport blue from '@material-ui/core/colors/blue';\r\nimport orange from '@material-ui/core/colors/orange';\r\n/**\r\n * Global material ui styles overrides\r\n */\r\nconst theme = createMuiTheme({\r\n  palette: {\r\n    primary: {\r\n      main: blue[500],\r\n    },\r\n    secondary: {\r\n      main: orange[500],\r\n    },\r\n    text: {\r\n      primary: '#000000',\r\n      secondary: '#9E9E9E',\r\n    },\r\n  },\r\n  typography: {\r\n    body1: { fontSize: '1.3rem' },\r\n  },\r\n\r\n  overrides: {\r\n    MuiDrawer: {\r\n      paper: {\r\n        backgroundColor: '#F5F5F5',\r\n      },\r\n    },\r\n    MuiButton: {\r\n      label: { color: '#ffffff' },\r\n      containedSecondary: {\r\n        '&:hover': {\r\n          backgroundColor: 'rgba(255, 192, 70, 0.5)',\r\n        },\r\n      },\r\n    },\r\n    MuiIconButton: {\r\n      colorSecondary: {\r\n        '&:hover': {\r\n          backgroundColor: 'rgba(255, 192, 70, 0.5)',\r\n          '@media (hover:none)': {\r\n            backgroundColor: orange[500],\r\n          },\r\n        },\r\n      },\r\n      root: {},\r\n    },\r\n    MuiCardContent: {\r\n      root: {\r\n        '&:last-child': { paddingBottom: '16px' },\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nexport default theme;\r\n","import React from 'react';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction InfoPanelCard({ children, header, date }) {\r\n  return (\r\n    <Card className=\"info__card\">\r\n      <Box className=\"info__svg-container\">{children}</Box>\r\n      <CardContent className=\"info__content\">\r\n        <Typography gutterBottom variant=\"h5\" component=\"h2\" className=\"info__title\">\r\n          {header}\r\n        </Typography>\r\n        <Typography variant=\"body2\" component=\"p\" className=\"info__subtitle\">\r\n          {date.toISOString().slice(0, 10)}\r\n        </Typography>\r\n      </CardContent>\r\n    </Card>\r\n  );\r\n}\r\n\r\nexport default InfoPanelCard;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst lessons = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_LESSONS_BY_DATE':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_LESSONS_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'ADD_LESSON': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_LESSON': {\r\n      const newItem = { ...state.items[action.payload.id] };\r\n      newItem[action.payload.field] = action.payload.value;\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: newItem },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n\r\n    case 'DELETE_LESSON': {\r\n      const newState = { ...state.items };\r\n      delete newState[action.payload];\r\n      return {\r\n        ...state,\r\n        items: newState,\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default lessons;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\n\r\nimport InfoPanelCard from './InfoPanelCard';\r\nimport lessons from '../redux/reducers/lessons';\r\n\r\nconst days = ['', '', '', 'c', '', '', ''];\r\nconst endings = ['', '', ''];\r\n\r\nfunction endingsForm(n) {\r\n  let a = n % 100;\r\n  let b = a % 10;\r\n  if (a > 10 && a < 20) return '';\r\n  if (b > 1 && b < 5) return '';\r\n  if (b === 1) return '';\r\n  return '';\r\n}\r\n\r\nfunction InfoPanel() {\r\n  let numLessons = useSelector(({ lessons }) => lessons.items);\r\n  numLessons = Object.keys(numLessons).length;\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  return (\r\n    <Container maxWidth=\"md\" className=\"info__container\">\r\n      <Grid container spacing={2}>\r\n        <Hidden xsDown>\r\n          <Grid item>\r\n            <InfoPanelCard header={days[new Date().getDay()]} date={new Date()}>\r\n              <CalendarTodayIcon />\r\n            </InfoPanelCard>\r\n          </Grid>\r\n          <Grid item>\r\n            <InfoPanelCard header={endingsForm(numLessons)} date={date}>\r\n              {numLessons}\r\n            </InfoPanelCard>\r\n          </Grid>\r\n          <Grid item>\r\n            <InfoPanelCard date={date} />\r\n          </Grid>\r\n        </Hidden>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default InfoPanel;\r\n","export const setDate = (date) => ({\r\n  type: 'SET_DATE',\r\n  payload: date,\r\n});\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport ruLocale from 'date-fns/locale/ru';\r\nimport { DatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\r\nimport { createMuiTheme, ThemeProvider } from '@material-ui/core/styles';\r\nimport orange from '@material-ui/core/colors/orange';\r\n\r\nimport { setDate } from '../redux/actions/date';\r\n\r\nconst theme = createMuiTheme({\r\n  overrides: {\r\n    MuiPickersDay: {\r\n      daySelected: {\r\n        backgroundColor: orange[500],\r\n        '&:hover': {\r\n          backgroundColor: orange[500],\r\n        },\r\n      },\r\n      current: {\r\n        color: orange[500],\r\n      },\r\n    },\r\n  },\r\n});\r\n\r\nfunction MuiCalendar({ handleClick }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  const handleCellClick = (date) => {\r\n    dispatch(setDate(date));\r\n    handleClick(date);\r\n  };\r\n\r\n  return (\r\n    <MuiPickersUtilsProvider utils={DateFnsUtils} locale={ruLocale}>\r\n      <ThemeProvider theme={theme}>\r\n        <DatePicker\r\n          autoOk\r\n          disableToolbar\r\n          variant=\"static\"\r\n          openTo=\"date\"\r\n          value={date}\r\n          onChange={handleCellClick}\r\n        />\r\n      </ThemeProvider>\r\n    </MuiPickersUtilsProvider>\r\n  );\r\n}\r\n\r\nconst Calendar = React.forwardRef((props, ref) => {\r\n  return (\r\n    <MuiCalendar useRef={ref} {...props}>\r\n      {props.children}\r\n    </MuiCalendar>\r\n  );\r\n});\r\n\r\nexport default Calendar;\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\n\r\n/**\r\n * middleware thunk function used for async data fetching and\r\n * dispatching actual event(action) to reducer\r\n * QUERY FORMAT: ['property', '==', 'value']\r\n * @param {date} date\r\n * @returns\r\n */\r\n//TODO: integrate with auth\r\nexport const fetchLessons = (date) => async (dispatch) => {\r\n  // const tzoffset = new Date().getTimezoneOffset() * 60000;\r\n  // const localISOTime = new Date(date.getTime() - tzoffset).toISOString().slice(0, 10);\r\n  const ISODate = date.toISOString().slice(0, 10);\r\n  dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  const timer = stopwatch(fastRetrieveLessons);\r\n  const query = ['date', '==', `${ISODate}`];\r\n  const lessons = await timer(query);\r\n\r\n  dispatch(setLessons(lessons));\r\n};\r\n\r\nexport const postLesson = (lesson, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  if (!preventIsLoaded) dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  await db.doc(`/users/${auth.currentUser.uid}/lessons/${lesson.id}`).set(lesson);\r\n  dispatch(addLesson(lesson));\r\n};\r\n\r\n/**\r\n * retrieve lessons using collectionGroup method\r\n * @param {object} user\r\n * @param {object[]} pupils\r\n * @param {array} query firestore query format array\r\n * @returns {object[]} lesson result array going to be stored in redux store\r\n */\r\nasync function fastRetrieveLessons(query) {\r\n  let retrievedLessons = {};\r\n  const lessonsSnapshot = await db\r\n    .collection(`/users/${auth.currentUser.uid}/lessons`)\r\n    .where(...query)\r\n    .orderBy('time')\r\n    .get();\r\n  lessonsSnapshot.forEach((lessonDoc) => {\r\n    retrievedLessons = { ...retrievedLessons, [lessonDoc.id]: lessonDoc.data() };\r\n  });\r\n  return retrievedLessons;\r\n}\r\n\r\nexport const deleteLesson = (id) => async (dispatch) => {\r\n  dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  await db.doc(`/users/${auth.currentUser.uid}/lessons/${id}`).delete();\r\n\r\n  dispatch(deleteLessonAction(id));\r\n};\r\n\r\nexport const deleteLessonsByPupil = (id) => async (dispatch) => {\r\n  const lessonsPromises = [];\r\n  const lessonsSnapshot = await db\r\n    .collection(`/users/${auth.currentUser.uid}/lessons/`)\r\n    .where('pupil', '==', id)\r\n    .get();\r\n\r\n  lessonsSnapshot.forEach((lessonsSnap) =>\r\n    lessonsPromises.push(\r\n      db.doc(`/users/${auth.currentUser.uid}/lessons/${lessonsSnap.data().id}`).delete(),\r\n    ),\r\n  );\r\n\r\n  await Promise.all(lessonsPromises);\r\n};\r\n\r\nexport const changeLesson = ({ id, field, value }) => async (dispatch) => {\r\n  dispatch({ type: 'SET_LESSONS_LOADED', payload: false });\r\n  await db.doc(`/users/${auth.currentUser.uid}/lessons/${id}`).update({ [field]: value });\r\n  dispatch(updateLesson({ id, field, value }));\r\n};\r\n/**\r\n * @param {object[]} items lessons array\r\n * @returns {object} - send action object to reducer\r\n */\r\nexport const setLessons = (items) => ({\r\n  type: 'SET_LESSONS_BY_DATE',\r\n  payload: items,\r\n});\r\n\r\nexport const addLesson = (item) => ({\r\n  type: 'ADD_LESSON',\r\n  payload: item,\r\n});\r\n\r\nexport const deleteLessonAction = (id) => ({\r\n  type: 'DELETE_LESSON',\r\n  payload: id,\r\n});\r\n\r\nexport const updateLesson = ({ id, field, value }) => ({\r\n  type: 'UPDATE_LESSON',\r\n  payload: { id, field, value },\r\n});\r\n/**\r\n * util func for performance measuring needs\r\n * @param {*} fn\r\n * @returns\r\n */\r\nfunction stopwatch(fn) {\r\n  return async (...args) => {\r\n    const before = performance.now();\r\n    const result = await fn.apply(this, args);\r\n    const after = performance.now();\r\n    console.log(`finished: ${after - before}`);\r\n    return result;\r\n  };\r\n}\r\n","import React from 'react';\r\nimport { useField } from 'formik';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\n\r\nexport const MyTextField = ({ ...props }) => {\r\n  const [field, meta, helpers] = useField(props.name);\r\n  return (\r\n    <TextField\r\n      {...field}\r\n      {...props}\r\n      error={meta.touched && Boolean(meta.error)}\r\n      helperText={meta.touched && meta.error}\r\n    />\r\n  );\r\n};\r\n\r\nexport const MySelect = ({ ...props }) => {\r\n  const [field, meta] = useField(props);\r\n  return (\r\n    <React.Fragment>\r\n      <Select {...field} {...props} error={meta.touched && Boolean(meta.error)} />\r\n      {meta.touched && meta.error ? (\r\n        <span className=\"lesson-form__select-error\">{meta.error}</span>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n};\r\n","import React from 'react';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nfunction NotesFormInputs() {\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField\r\n        margin=\"normal\"\r\n        name=\"note\"\r\n        label=\"\"\r\n        autoComplete=\"off\"\r\n        multiline\r\n        fullWidth\r\n      />\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default NotesFormInputs;\r\n","const initialValues = (note) => ({\r\n  note,\r\n});\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  note: yup.string(' ').max(500, '     500 '),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nimport NotesFormInputs from './NotesFormInputs';\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { changeLesson } from '../../redux/actions/lessons';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    width: '400px',\r\n  },\r\n});\r\n\r\nfunction NotesForm({ open, width, handleClose, handleSnack, id, note }) {\r\n  const dispatch = useDispatch();\r\n  const classes = useStyles();\r\n  async function handleSubmit(values, actions) {\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n    dispatch(changeLesson({ id, field: 'note', value: values.note }));\r\n  }\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      classes={{ paper: classes.paper }}\r\n      maxWidth=\"md\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>  </DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={initialValues(note)}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <NotesFormInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                \r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                \r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(NotesForm);\r\n","import { db, auth } from '../../firebase';\r\nimport firebase from 'firebase/app';\r\nimport 'firebase/firestore';\r\n\r\nexport const fetchSchedules = ({ preventIsLoaded } = {}) => async (dispatch) => {\r\n  if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n\r\n  const schedules = await retrieveSchedules();\r\n\r\n  dispatch(setSchedules(schedules));\r\n};\r\n\r\nasync function retrieveSchedules() {\r\n  let schedules = {};\r\n  const snapshot = await db.collection(`/users/${auth.currentUser.uid}/schedules/`).get();\r\n  snapshot.forEach((doc) => (schedules = { ...schedules, [doc.id]: doc.data() }));\r\n  return schedules;\r\n}\r\n\r\nexport const postSchedule = (schedules) => async (dispatch) => {\r\n  dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n\r\n  const schPromises = schedules.map((schedule) =>\r\n    db.doc(`/users/${auth.currentUser.uid}/schedules/${schedule.id}`).set({ ...schedule }),\r\n  );\r\n  await Promise.all(schPromises);\r\n  dispatch(addSchedule(schedules));\r\n};\r\n\r\nexport const addLessonToSchedule = ({ id, date }, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n  await db\r\n    .doc(`/users/${auth.currentUser.uid}/schedules/${id}/`)\r\n    .update({ lessons: firebase.firestore.FieldValue.arrayUnion(date) });\r\n\r\n  dispatch(updateLessonsField({ procedure: 'push', id, date }));\r\n};\r\n\r\nexport const deleteLessonFromSchedule = ({ date, id }) => async (dispatch) => {\r\n  dispatch({ type: 'SET_SCHEDULES_LOADED', payload: false });\r\n  await db\r\n    .doc(`/users/${auth.currentUser.uid}/schedules/${id}/`)\r\n    .update({ lessons: firebase.firestore.FieldValue.arrayRemove(date) });\r\n\r\n  dispatch(updateLessonsField({ procedure: 'pop', date, id }));\r\n};\r\n\r\nexport const deleteSchedulesByPupil = (id) => async (dispatch) => {\r\n  const schedulesPromises = [];\r\n  const schedulesSnapshot = await db\r\n    .collection(`/users/${auth.currentUser.uid}/schedules/`)\r\n    .where('pupil', '==', id)\r\n    .get();\r\n\r\n  schedulesSnapshot.forEach((schedulesSnap) =>\r\n    schedulesPromises.push(\r\n      db.doc(`/users/${auth.currentUser.uid}/schedules/${schedulesSnap.data().id}`).delete(),\r\n    ),\r\n  );\r\n\r\n  await Promise.all(schedulesPromises);\r\n};\r\n\r\nexport const setSchedules = (items) => ({\r\n  type: 'SET_SCHEDULES',\r\n  payload: items,\r\n});\r\n\r\nexport const addSchedule = (data) => ({\r\n  type: 'ADD_SCHEDULE',\r\n  payload: data,\r\n});\r\n\r\nexport const updateLessonsField = (data) => ({\r\n  type: 'UPDATE_LESSONS_FIELD',\r\n  payload: data,\r\n});\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\nimport { getISODay } from 'date-fns';\r\n\r\nasync function retrieveSchedulesByDay(date) {\r\n  let schedules = {};\r\n  const today = getISODay(date);\r\n  const localISODate = date.toISOString().slice(0, 10);\r\n\r\n  const snapshot = await db\r\n    .collection(`/users/${auth.currentUser.uid}/schedules/`)\r\n    .where('day', '==', today)\r\n    .get();\r\n\r\n  snapshot.forEach((doc) => {\r\n    if (!doc.data().lessons.includes(localISODate))\r\n      schedules = { ...schedules, [doc.id]: doc.data() };\r\n  });\r\n  return schedules;\r\n}\r\n\r\nexport const fetchScheduledLessons = (date, { preventIsLoaded } = {}) => async (dispatch) => {\r\n  if (!preventIsLoaded) dispatch({ type: 'SET_SCHEDULED_LESSONS_LOADED', payload: false });\r\n  const schedules = await retrieveSchedulesByDay(date);\r\n\r\n  dispatch(setScheduledLessons(schedules));\r\n};\r\n\r\nexport const setScheduledLessons = (items) => ({\r\n  type: 'SET_SCHEDULED_LESSONS',\r\n  payload: items,\r\n});\r\n\r\nexport const setScheduledLessonsLoaded = (value) => ({\r\n  type: 'SET_SCHEDULED_LESSONS_LOADED',\r\n  payload: value,\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport { deleteLesson } from '../redux/actions/lessons';\r\nimport NotesForm from './notesForm/NotesForm';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\n\r\nimport { deleteLessonFromSchedule } from '../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../redux/actions/scheduledLessons';\r\n\r\nfunction LessonCard({\r\n  id,\r\n  time,\r\n  theme,\r\n  date,\r\n  name,\r\n  price,\r\n  address,\r\n  subject,\r\n  note,\r\n  schedule,\r\n  handleSnack,\r\n  handleDeleteSnack,\r\n}) {\r\n  const dispatch = useDispatch();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [viewNotesForm, setViewNotesForm] = React.useState(false);\r\n  const selectedDate = useSelector(({ date }) => date.selected);\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n\r\n  /**\r\n   * How does dispatch actually work?\r\n   * Am I supposed to chain dispatches to make sure async requests queuing in sequence?\r\n   */\r\n  function handleDelete() {\r\n    dispatch(deleteLesson(id));\r\n    handleDeleteSnack(true);\r\n    if (schedule) dispatch(deleteLessonFromSchedule({ id: schedule, date }));\r\n    dispatch(fetchScheduledLessons(selectedDate));\r\n  }\r\n\r\n  const clickNotesForm = () => setViewNotesForm(true);\r\n  const closeNotesForm = () => setViewNotesForm(false);\r\n\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <NotesForm\r\n        open={viewNotesForm}\r\n        handleSnack={handleSnack}\r\n        note={note}\r\n        id={id}\r\n        handleClose={closeNotesForm}\r\n      />\r\n\r\n      <Card className=\"lesson__container\">\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          getContentAnchorEl={null}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}>\r\n          <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n            <MenuItem onClick={handleClose}> (disabled)</MenuItem>\r\n            <MenuItem onClick={clickNotesForm}></MenuItem>\r\n            <MenuItem onClick={handleClose}>push(disabled)</MenuItem>\r\n            <MenuItem onClick={handleClose}>(disabled)</MenuItem>\r\n            <MenuItem onClick={handleDelete}></MenuItem>\r\n          </MenuList>\r\n        </Menu>\r\n        <CardContent>\r\n          <Box className=\"lesson__header\">\r\n            <Typography gutterBottom variant=\"h5\" className=\"lesson__header-text\">\r\n              {time} {subject}\r\n            </Typography>\r\n            <IconButton aria-label=\"menu\" className=\"lesson__header-more\" onClick={handleClick}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          </Box>\r\n          <Typography variant=\"h5\" color=\"textPrimary\" className=\"lesson__theme\" component=\"p\">\r\n            {theme}\r\n          </Typography>\r\n          <Typography variant=\"subtitle2\" color=\"textPrimary\" component=\"p\">\r\n            {name}, {address}, {`: ${price}`}\r\n          </Typography>\r\n        </CardContent>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nLessonCard.propTypes = {\r\n  time: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  address: PropTypes.string.isRequired,\r\n  theme: PropTypes.string.isRequired,\r\n  price: PropTypes.number.isRequired,\r\n};\r\n\r\nexport default LessonCard;\r\n","import React from 'react';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nconst LessonFromTemplateInputs = () => {\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField margin=\"normal\" name=\"theme\" label=\"\" autoComplete=\"off\" fullWidth />\r\n      <MyTextField margin=\"normal\" name=\"note\" label=\"\" autoComplete=\"off\" fullWidth />\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default LessonFromTemplateInputs;\r\n","const formInitialValues = {\r\n  theme: '',\r\n  note: '',\r\n};\r\n\r\nexport default formInitialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup\r\n    .string('  ')\r\n    .max(200, '  ,  ')\r\n    .required('   '),\r\n  notes: yup\r\n    .string(' ')\r\n    .max(500, '     500 ')\r\n});\r\n\r\nexport default validationSchema;\r\n","export const combineDispatches = async (...funcs) => {\r\n  for(const fn of funcs)\r\n    await fn(); \r\n}","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport uniqid from 'uniqid';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport LessonFromTemplateInputs from './LessonFromTemplateInputs';\r\nimport formInitialValues from './formInitialValues';\r\nimport validationSchema from './validationSchema';\r\n\r\nimport { postLesson } from '../../redux/actions/lessons';\r\nimport { addLessonToSchedule } from '../../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport { combineDispatches } from '../../redux/actions/combineDispatches';\r\nimport { setScheduledLessonsLoaded } from '../../redux/actions/scheduledLessons';\r\n\r\nfunction LessonFromTemplateForm({ width, open, handleClose, pupilId, scheduleId, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n\r\n  const schedule = useSelector(({ schedules }) => schedules.items[scheduleId]);\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  function handleSubmit(values, actions) {\r\n    const lesson = {\r\n      id: uniqid(),\r\n      date: date.toISOString().slice(0, 10),\r\n      time: schedule.time,\r\n      schedule: scheduleId,\r\n      pupil: pupilId,\r\n      theme: values.theme,\r\n      subject: schedule.subject,\r\n      note: values.note,\r\n      price: schedule.price,\r\n      timestamp: Date.now(),\r\n    };\r\n\r\n    actions.setSubmitting(false);\r\n    handleSnack(true);\r\n\r\n    /**\r\n     * bicycle for async chained invocations\r\n     * preventIsLoaded prevents isLoaded redux property action call\r\n     */\r\n    combineDispatches(\r\n      () => dispatch(setScheduledLessonsLoaded(false)),\r\n      () => dispatch(postLesson(lesson, { preventIsLoaded: true })),\r\n      () =>\r\n        dispatch(\r\n          addLessonToSchedule({ date: lesson.date, id: scheduleId }, { preventIsLoaded: true }),\r\n        ),\r\n      () => dispatch(fetchScheduledLessons(date, { preventIsLoaded: true })),\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>   </DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <LessonFromTemplateInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                \r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                \r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(LessonFromTemplateForm);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport Box from '@material-ui/core/Box';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\n\r\nimport LessonFromTemplateForm from './lessonFromTemplateForm/LessonFromTemplateForm';\r\n\r\nfunction LessonTemplateCard({ time, pupilId, scheduleId, subject, name, address, handleSnack }) {\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const [viewForm, setViewForm] = React.useState(false);\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n\r\n  const handleCloseForm = () => setViewForm(false);\r\n  const handleOpenForm = () => setViewForm(true);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <LessonFromTemplateForm\r\n        open={viewForm}\r\n        pupilId={pupilId}\r\n        scheduleId={scheduleId}\r\n        handleClose={handleCloseForm}\r\n        handleSnack={handleSnack}\r\n      />\r\n\r\n      <Card className=\"lesson__container lesson__container--template\">\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          keepMounted\r\n          getContentAnchorEl={null}\r\n          anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n          transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}>\r\n          <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n            <MenuItem onClick={handleOpenForm}>   </MenuItem>\r\n          </MenuList>\r\n        </Menu>\r\n        <CardContent>\r\n          <Box className=\"lesson__header\">\r\n            <Typography gutterBottom variant=\"h5\" className=\"lesson__header-text\">\r\n              {time} {subject} ( )\r\n            </Typography>\r\n            <IconButton aria-label=\"menu\" className=\"lesson__header-more\" onClick={handleClick}>\r\n              <MoreVertIcon />\r\n            </IconButton>\r\n          </Box>\r\n          <Typography variant=\"h5\" color=\"textPrimary\" className=\"lesson__theme\" component=\"p\">\r\n              ,   \r\n          </Typography>\r\n          <Typography variant=\"subtitle2\" color=\"textPrimary\" component=\"p\">\r\n            {name}, {address}\r\n          </Typography>\r\n        </CardContent>\r\n      </Card>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nLessonTemplateCard.propTypes = {\r\n  time: PropTypes.string.isRequired,\r\n  name: PropTypes.string.isRequired,\r\n  address: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default LessonTemplateCard;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\n\r\nimport { MyTextField, MySelect } from '../CustomInputs';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nexport default function AddLessonInputs() {\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField margin=\"normal\" name=\"theme\" label=\"\" autoComplete=\"off\" fullWidth />\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={6}>\r\n          <FormControl fullWidth>\r\n            <InputLabel id=\"lesson-form__select-label\"></InputLabel>\r\n            <MySelect\r\n              labelId=\"lesson-form__select-label\"\r\n              name=\"pupil\"\r\n              MenuProps={menuProps}\r\n              IconComponent={iconComponent}>\r\n              {Object.keys(pupils).map((key) => (\r\n                <MenuItem key={key} value={pupils[key].id}>\r\n                  {pupils[key].name}\r\n                </MenuItem>\r\n              ))}\r\n            </MySelect>\r\n          </FormControl>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n          <MyTextField margin=\"none\" name=\"subject\" label=\"\" autoComplete=\"off\" fullWidth />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            margin=\"normal\"\r\n            name=\"date\"\r\n            label=\"\"\r\n            type=\"date\"\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            margin=\"normal\"\r\n            name=\"time\"\r\n            label=\" \"\r\n            type=\"time\"\r\n            inputProps={{\r\n              step: 300, // 5 min\r\n            }}\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            margin=\"none\"\r\n            type=\"number\"\r\n            name=\"price\"\r\n            label=\" \"\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            margin=\"none\"\r\n            multiline={true}\r\n            rowsMax={10}\r\n            name=\"note\"\r\n            label=\"\"\r\n            autoComplete=\"off\"\r\n            fullWidth\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n","const tzoffset = new Date().getTimezoneOffset() * 60000;\r\nconst localISOTime = new Date(Date.now() - tzoffset).toISOString().slice(0, 10);\r\n\r\nconst formInitialValues = {\r\n  theme: '',\r\n  pupil: '',\r\n  subject: '',\r\n  note: '',\r\n  date: localISOTime,\r\n  time: '15:00',\r\n  price: '',\r\n};\r\n\r\nexport default formInitialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst MAX_LESSON_PAY = 999999;\r\n\r\nconst validationSchema = yup.object().shape({\r\n  theme: yup\r\n    .string('  ')\r\n    .max(200, '  ,  ')\r\n    .required('   '),\r\n  pupil: yup.mixed().typeError('   ').required(' '),\r\n  note: yup.string('').max(500, '     500 '),\r\n  subject: yup\r\n    .string(' ')\r\n    .max(100, '  ,  ')\r\n    .typeError('   ')\r\n    .required('  '),\r\n  date: yup.string('  ').required('  '),\r\n  time: yup\r\n    .string('  ')\r\n    .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, '    : \"17:00\"'),\r\n  price: yup\r\n    .number('  ')\r\n    .typeError('  ')\r\n    .min(0, 'C   ')\r\n    .max(MAX_LESSON_PAY, '        ')\r\n    .required('  '),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport uniqid from 'uniqid';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport AddLessonInputs from './AddLessonInputs';\r\nimport formInitialValues from './formInitialValues';\r\nimport validationSchema from './validationSchema';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { postLesson } from '../../redux/actions/lessons';\r\n\r\nfunction AddLessonForm({ width, open, handleClose, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const date = useSelector(({ date }) => date.selected);\r\n  formInitialValues.date = date.toISOString().slice(0, 10);\r\n\r\n  function handleSubmit(values, actions) {\r\n    const lesson = {\r\n      id: uniqid(),\r\n      theme: values.theme,\r\n      date: values.date,\r\n      time: values.time,\r\n      pupil: values.pupil,\r\n      schedule: null,\r\n      subject: values.subject,\r\n      note: values.note,\r\n      price: +values.price,\r\n      timestamp: Date.now(),\r\n    };\r\n    handleSnack(true);\r\n    actions.setSubmitting(false);\r\n    dispatch(postLesson(lesson));\r\n    handleClose();\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>   </DialogTitle>\r\n      <DialogContent className=\"lesson-form__dialog-content\">\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            <AddLessonInputs />\r\n            <Box className=\"lesson-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                \r\n              </Button>\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                \r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddLessonForm);\r\n","import React from 'react';\r\nimport { IconButton, Snackbar, Button } from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport Grow from '@material-ui/core/Grow';\r\n\r\nfunction SnackPopup({ open, message, onClose }) {\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'center',\r\n      }}\r\n      open={open}\r\n      message={message}\r\n      TransitionComponent={Grow}\r\n      autoHideDuration={3000}\r\n      onClose={onClose}\r\n      action={\r\n        <React.Fragment>\r\n          <Button color=\"secondary\" size=\"small\">\r\n            \r\n          </Button>\r\n          <IconButton size=\"small\" aria-label=\"close\" color=\"inherit\">\r\n            <CloseIcon fontSize=\"small\" />\r\n          </IconButton>\r\n        </React.Fragment>\r\n      }\r\n    />\r\n  );\r\n}\r\n\r\nexport default SnackPopup;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport Box from '@material-ui/core/Box';\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport Calendar from './Calendar';\r\nimport LessonCard from './LessonCard';\r\nimport LessonTemplateCard from './LessonTemplateCard';\r\nimport AddLessonForm from './addLessonForm/AddLessonForm';\r\nimport SnackPopup from './SnackPopup';\r\n\r\nfunction Lessons({ anchor, handleCalendarOpen, handleCalendarClose, handleCalendarClick }) {\r\n  const lessons = useSelector(({ lessons }) => lessons.items);\r\n  const lessonsLoaded = useSelector(({ lessons }) => lessons.isLoaded);\r\n\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const pupilsLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n\r\n  const scheduledLessons = useSelector(({ scheduledLessons }) => scheduledLessons.items);\r\n  const scheduledLessonsLoaded = useSelector(({ scheduledLessons }) => scheduledLessons.isLoaded);\r\n\r\n  const isLoaded = lessonsLoaded && pupilsLoaded && scheduledLessonsLoaded;\r\n\r\n  const [viewAddLessonForm, setViewAddLessonForm] = React.useState(false);\r\n  const [snackAddLessonView, setSnackAddLessonView] = React.useState(false);\r\n  const [snackFromTemplateView, setSnackFromTemplateView] = React.useState(false);\r\n  const [snackNotesView, setSnackNotesView] = React.useState(false);\r\n  const [snackDeleteLesson, setSnackDeleteLesson] = React.useState(false);\r\n\r\n  const calendar = React.useRef(null);\r\n\r\n  // React.useEffect(() => {\r\n  //   let timer;\r\n  //   timer = setTimeout(() => {\r\n  //     setSnackNotesView(false);\r\n  //   }, 5000);\r\n  //   return () => {\r\n  //     clearTimeout(timer);\r\n  //   };\r\n  // }, [snackNotesView]);\r\n\r\n  const handleAddLessonFormClick = () => setViewAddLessonForm(true);\r\n  const handleCloseAddLessonForm = () => setViewAddLessonForm(false);\r\n\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h5\" className=\"lessons__header\">\r\n        \r\n      </Typography>\r\n\r\n      <Box className=\"lessons__buttons-container\">\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          startIcon={<AddIcon />}\r\n          className=\"lessons__button-text\"\r\n          onClick={handleAddLessonFormClick}>\r\n           \r\n        </Button>\r\n        <Hidden mdUp>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            onClick={handleCalendarOpen}\r\n            startIcon={<CalendarTodayIcon />}\r\n            className=\"lessons__button-text\">\r\n             \r\n          </Button>\r\n          <Menu\r\n            id=\"simple-menu\"\r\n            anchorEl={anchor}\r\n            keepMounted\r\n            getContentAnchorEl={null}\r\n            anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n            transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n            open={Boolean(anchor)}\r\n            onClose={handleCalendarClose}>\r\n            <Calendar ref={calendar} handleClick={handleCalendarClick} />\r\n          </Menu>\r\n        </Hidden>\r\n      </Box>\r\n\r\n      <AddLessonForm\r\n        open={viewAddLessonForm}\r\n        handleClose={handleCloseAddLessonForm}\r\n        handleSnack={setSnackAddLessonView}\r\n      />\r\n\r\n      <SnackPopup\r\n        open={snackAddLessonView}\r\n        message=\" \"\r\n        onClose={() => setSnackAddLessonView(false)}\r\n      />\r\n      <SnackPopup\r\n        open={snackFromTemplateView}\r\n        message=\"   \"\r\n        onClose={() => setSnackFromTemplateView(false)}\r\n      />\r\n      <SnackPopup\r\n        open={snackNotesView}\r\n        message=\" \"\r\n        onClose={() => setSnackNotesView(false)}\r\n      />\r\n      <SnackPopup\r\n        open={snackDeleteLesson}\r\n        message=\" \"\r\n        onClose={() => setSnackDeleteLesson(false)}\r\n      />\r\n\r\n      <Container className=\"lessons__items-container\">\r\n        {isLoaded ? (\r\n          <React.Fragment>\r\n            {Object.entries(lessons).map(([key, value]) => (\r\n              <LessonCard\r\n                key={key}\r\n                name={pupils[value.pupil].name}\r\n                address={pupils[value.pupil].address}\r\n                handleSnack={setSnackNotesView}\r\n                handleDeleteSnack={setSnackDeleteLesson}\r\n                {...value}\r\n              />\r\n            ))}\r\n            {Object.entries(scheduledLessons).map(([key, value]) => {\r\n              return (\r\n                <LessonTemplateCard\r\n                  key={key}\r\n                  time={value.time}\r\n                  scheduleId={value.id}\r\n                  pupilId={pupils[value.pupil].id}\r\n                  name={pupils[value.pupil].name}\r\n                  subject={value.subject}\r\n                  address={pupils[value.pupil].address}\r\n                  handleSnack={setSnackFromTemplateView}\r\n                />\r\n              );\r\n            })}\r\n            {!(Object.keys(lessons).length || Object.keys(scheduledLessons).length) ? (\r\n              <Typography>     </Typography>\r\n            ) : null}\r\n          </React.Fragment>\r\n        ) : (\r\n          Array(4)\r\n            .fill(0)\r\n            .map((_, index) => (\r\n              <Skeleton key={index} variant=\"rect\" className=\"lessons__skeleton\" />\r\n            ))\r\n        )}\r\n      </Container>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Lessons;\r\n","import React from 'react';\r\n\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\n\r\nimport { NavLink } from 'react-router-dom';\r\n\r\nfunction MenuItem({ children, name, to, handleDrawer }) {\r\n  return (\r\n    <ListItem\r\n      button\r\n      className=\"menu__button menu__button--center\"\r\n      component={NavLink}\r\n      to={to}\r\n      onClick={handleDrawer}>\r\n      <ListItemIcon className=\"menu--center\">{children}</ListItemIcon>\r\n      <ListItemText primary={name} />\r\n    </ListItem>\r\n  );\r\n}\r\n\r\nexport default MenuItem;\r\n","import React from 'react';\r\nimport { NavLink } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\r\nimport SettingsIcon from '@material-ui/icons/Settings';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nfunction MenuHeader() {\r\n  const name = useSelector(({ user }) => user.name);\r\n  return (\r\n    <Grid container className=\"menu__header\">\r\n      <Grid item xs={8} className=\"menu__avatar\">\r\n        <AccountCircleIcon />\r\n      </Grid>\r\n      <Grid item xs={4} className=\"menu__button menu__settings\" component={NavLink} to=\"/settings\">\r\n        <IconButton>\r\n          <SettingsIcon />\r\n        </IconButton>\r\n      </Grid>\r\n      <Grid item xs={12}>\r\n        <Typography variant=\"h5\">{name}</Typography>\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n\r\nexport default MenuHeader;\r\n","import List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\n\r\nimport React from 'react';\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader';\r\n\r\nfunction MenuDrawer() {\r\n  return (\r\n    <Drawer variant=\"permanent\" anchor=\"left\">\r\n      <List className={'menu__list'}>\r\n        <ListItem>\r\n          <MenuHeader />\r\n        </ListItem>\r\n\r\n        <Divider />\r\n\r\n        <Box className=\"menu__nav-container\">\r\n          <MenuItem open={false} name=\"\" to=\"/schedule\">\r\n            <CalendarTodayIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={false} name=\"\" to=\"/pupils\">\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem open={false} name=\"\" to=\"finance\">\r\n            <ShowChartIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n        </Box>\r\n      </List>\r\n    </Drawer>\r\n  );\r\n}\r\n\r\nexport default MenuDrawer;\r\n","import List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\n\r\nimport React from 'react';\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader';\r\n\r\nconst useStyles = makeStyles({\r\n  drawerPaper: {\r\n    position: 'fixed',\r\n    top: 'auto',\r\n  },\r\n});\r\n\r\nfunction MenuDrawerMobile() {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleDrawer = () => setOpen((prev) => !prev);\r\n\r\n  const classes = useStyles();\r\n  return (\r\n    <React.Fragment>\r\n      <AppBar position=\"static\">\r\n        <Toolbar>\r\n          <IconButton edge=\"start\" color=\"inherit\" aria-label=\"open drawer\" onClick={handleDrawer}>\r\n            <MenuIcon />\r\n          </IconButton>\r\n        </Toolbar>\r\n      </AppBar>\r\n\r\n      <Drawer\r\n        variant=\"temporary\"\r\n        open={open}\r\n        onClose={handleDrawer}\r\n        classes={{\r\n          paper: classes.drawerPaper,\r\n        }}>\r\n        <AppBar position=\"static\">\r\n          <Toolbar>\r\n            <IconButton\r\n              edge=\"start\"\r\n              color=\"inherit\"\r\n              aria-label=\"open drawer\"\r\n              onClick={handleDrawer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n          </Toolbar>\r\n        </AppBar>\r\n        <List className={'menu__list--opened'}>\r\n          <ListItem>\r\n            <MenuHeader />\r\n          </ListItem>\r\n\r\n          <MenuItem name=\"\" to=\"/schedule\" handleDrawer={() => setOpen(false)}>\r\n            <CalendarTodayIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem name=\"\" to=\"/pupils\" handleDrawer={() => setOpen(false)}>\r\n            <FaceIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n          <MenuItem name=\"\" to=\"/finance\" handleDrawer={() => setOpen(false)}>\r\n            <ShowChartIcon className=\"menu--svg\" />\r\n          </MenuItem>\r\n        </List>\r\n      </Drawer>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default MenuDrawerMobile;\r\n","import React from 'react';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport Drawer from '@material-ui/core/Drawer';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nimport CalendarTodayIcon from '@material-ui/icons/CalendarToday';\r\nimport FaceIcon from '@material-ui/icons/Face';\r\nimport ShowChartIcon from '@material-ui/icons/ShowChart';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\n\r\nimport MenuItem from './MenuItem';\r\nimport MenuHeader from './MenuHeader';\r\n\r\nfunction MenuControls({ handleDrawer }) {\r\n  return (\r\n    <Box className=\"menu__nav-container\">\r\n      <MenuItem handleDrawer={() => handleDrawer(false)} name=\"\" to=\"/schedule\">\r\n        <CalendarTodayIcon className=\"menu--svg\" />\r\n      </MenuItem>\r\n      <MenuItem handleDrawer={() => handleDrawer(false)} name=\"\" to=\"/pupils\">\r\n        <FaceIcon className=\"menu--svg\" />\r\n      </MenuItem>\r\n      <MenuItem handleDrawer={() => handleDrawer(false)} name=\"\" to=\"/finance\">\r\n        <ShowChartIcon className=\"menu--svg\" />\r\n      </MenuItem>\r\n    </Box>\r\n  );\r\n}\r\n\r\nfunction MenuMdDrawer() {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleDrawer = () => setOpen((prev) => !prev);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Drawer variant=\"permanent\" anchor=\"left\">\r\n        <List className=\"menu__list\">\r\n          <ListItem button className=\"menu--center\" onClick={handleDrawer}>\r\n            <ListItemIcon className=\"menu--center\">\r\n              <MenuIcon className=\"menu--svg\" />\r\n            </ListItemIcon>\r\n          </ListItem>\r\n\r\n          <Divider />\r\n          <MenuControls open={false} handleDrawer={() => {}} />\r\n        </List>\r\n      </Drawer>\r\n      <Drawer variant=\"temporary\" anchor=\"left\" open={open} onClose={handleDrawer}>\r\n        <List className=\"menu__list--opened\">\r\n          <ListItem button onClick={handleDrawer}>\r\n            <ListItemIcon className=\"menu--center\">\r\n              <MenuIcon className=\"menu--svg\" />\r\n            </ListItemIcon>\r\n          </ListItem>\r\n\r\n          <ListItem>\r\n            <MenuHeader />\r\n          </ListItem>\r\n\r\n          <Divider />\r\n          <MenuControls handleDrawer={setOpen} />\r\n        </List>\r\n      </Drawer>\r\n      )\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default MenuMdDrawer;\r\n","import React from 'react';\r\nimport Hidden from '@material-ui/core/Hidden';\r\n\r\nimport MenuDrawer from './Menu/MenuLgDrawer';\r\nimport MenuDrawerMobile from './Menu/MenuSmDrawer';\r\nimport MenuMdDrawer from './Menu/MenuMdDrawer';\r\n\r\n//FIXME: implement clickAwayListener\r\n\r\nconst Menu = () => {\r\n  return (\r\n    <React.Fragment>\r\n      <Hidden smUp>\r\n        <MenuDrawerMobile />\r\n      </Hidden>\r\n      <Hidden only={['xs', 'lg', 'xl']}>\r\n        <MenuMdDrawer />\r\n      </Hidden>\r\n      <Hidden mdDown>\r\n        <MenuDrawer />\r\n      </Hidden>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default Menu;\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\n\r\nexport const fetchPupils = () => async (dispatch) => {\r\n  dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n\r\n  const pupils = await retrievePupils();\r\n\r\n  dispatch(setPupils(pupils));\r\n};\r\n\r\nasync function retrievePupils() {\r\n  let retrievedPupils = {};\r\n  const pupilsSnapshot = await db.collection(`/users/${auth.currentUser.uid}/pupils/`).get();\r\n  pupilsSnapshot.forEach(\r\n    (pupilDoc) => (retrievedPupils = { ...retrievedPupils, [pupilDoc.id]: pupilDoc.data() }),\r\n  );\r\n  return retrievedPupils;\r\n}\r\n\r\nexport const postPupil = ({ id, ...data }) => async (dispatch) => {\r\n  dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n  await db.doc(`/users/${auth.currentUser.uid}/pupils/${id}/`).set({ id, ...data });\r\n  dispatch(addPupil({ id, ...data }));\r\n};\r\n\r\nexport const deletePupilAction = (id) => async (dispatch) => {\r\n  dispatch({ type: 'SET_PUPILS_LOADED', payload: false });\r\n  await db.doc(`/users/${auth.currentUser.uid}/pupils/${id}/`).delete();\r\n  dispatch(deletePupil(id));\r\n};\r\n\r\nexport const setPupils = (items) => ({\r\n  type: 'SET_PUPILS',\r\n  payload: items,\r\n});\r\n\r\nexport const addPupil = (data) => ({\r\n  type: 'ADD_PUPIL',\r\n  payload: data,\r\n});\r\n\r\nexport const deletePupil = (id) => ({\r\n  type: 'DELETE_PUPIL',\r\n  payload: id,\r\n});\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Card from '@material-ui/core/Card';\r\nimport CardHeader from '@material-ui/core/CardHeader';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardContent from '@material-ui/core/CardContent';\r\nimport CardActions from '@material-ui/core/CardActions';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuList from '@material-ui/core/MenuList';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\r\nimport MenuBookIcon from '@material-ui/icons/MenuBook';\r\n\r\nimport { deleteLessonsByPupil, fetchLessons } from '../redux/actions/lessons';\r\nimport { deletePupilAction } from '../redux/actions/pupils';\r\nimport { deleteSchedulesByPupil, fetchSchedules } from '../redux/actions/schedules';\r\nimport { fetchScheduledLessons } from '../redux/actions/scheduledLessons';\r\n\r\nconst days = ['', '', '', '', '', '', ''];\r\n\r\nfunction PupilCard({ id, name, schedulesId, grade, parents, address, contacts, schedules }) {\r\n  const dispatch = useDispatch();\r\n  const [anchorEl, setAnchorEl] = React.useState(null);\r\n  const date = useSelector(({ date }) => date.selected);\r\n\r\n  const handleClick = (e) => setAnchorEl(e.currentTarget);\r\n  const handleClose = () => setAnchorEl(null);\r\n\r\n  async function handleDelete() {\r\n    console.log(id);\r\n    await Promise.all([\r\n      dispatch(deleteLessonsByPupil(id)),\r\n      dispatch(deletePupilAction(id)),\r\n      dispatch(deleteSchedulesByPupil(id)),\r\n    ]);\r\n    dispatch(fetchLessons(date));\r\n    dispatch(fetchSchedules({ preventIsLoaded: true }));\r\n    dispatch(fetchScheduledLessons(date, { preventIsLoaded: true }));\r\n  }\r\n\r\n  return (\r\n    <Card className=\"pupils__card\">\r\n      <CardHeader\r\n        className=\"pupils__card-header\"\r\n        avatar={\r\n          <Avatar aria-label=\"pupil\" className=\"pupils__card-avatar\">\r\n            R\r\n          </Avatar>\r\n        }\r\n        action={\r\n          <IconButton aria-label=\"\" onClick={handleClick}>\r\n            <MoreVertIcon />\r\n          </IconButton>\r\n        }\r\n        title={name}\r\n        subheader={`: ${grade}`}\r\n      />\r\n\r\n      <Menu\r\n        id=\"simple-menu\"\r\n        anchorEl={anchorEl}\r\n        keepMounted\r\n        getContentAnchorEl={null}\r\n        anchorOrigin={{ vertical: 'bottom', horizontal: 'center' }}\r\n        transformOrigin={{ vertical: 'top', horizontal: 'center' }}\r\n        open={Boolean(anchorEl)}\r\n        onClose={handleClose}>\r\n        <MenuList autoFocus={true} className=\"lesson__menu-container\">\r\n          <MenuItem onClick={handleClose}>(disabled)</MenuItem>\r\n          <MenuItem onClick={handleDelete}></MenuItem>\r\n        </MenuList>\r\n      </Menu>\r\n\r\n      <CardContent className=\"pupils__card-content\">\r\n        <Typography component=\"p\">\r\n          {schedulesId.map((id) => `${days[schedules[id].day - 1]}-${schedules[id].time} `)}\r\n        </Typography>\r\n        <Typography component=\"p\">{`: ${parents}`}</Typography>\r\n        <Typography component=\"p\">{`: ${contacts.join(',')}`}</Typography>\r\n        <Typography component=\"p\">{`: ${address}`}</Typography>\r\n      </CardContent>\r\n      <CardActions className=\"pupils__homework\">\r\n        <IconButton color=\"secondary\" aria-label=\" \">\r\n          <MenuBookIcon aria-label=\"homework\" />\r\n        </IconButton>\r\n      </CardActions>\r\n    </Card>\r\n  );\r\n}\r\n\r\nPupilCard.propTypes = {\r\n  name: PropTypes.string.isRequired,\r\n  schedulesId: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n  schedules: PropTypes.object.isRequired,\r\n  grade: PropTypes.number.isRequired,\r\n  parents: PropTypes.string.isRequired,\r\n  address: PropTypes.string.isRequired,\r\n  contacts: PropTypes.arrayOf(PropTypes.string).isRequired,\r\n};\r\n\r\nexport default PupilCard;\r\n","import React from 'react';\r\nimport { FieldArray, useFormikContext } from 'formik';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nimport { MyTextField } from '../CustomInputs';\r\n\r\nfunction AddPupilInputs() {\r\n  const { values } = useFormikContext();\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <MyTextField autoFocus margin=\"normal\" name=\"name\" label=\"\" autoComplete=\"off\" fullWidth />\r\n      <MyTextField\r\n        margin=\"normal\"\r\n        name=\"grade\"\r\n        label=\"\"\r\n        type=\"number\"\r\n        InputProps={{\r\n          inputProps: { min: 1, max: 20 },\r\n        }}\r\n        autoComplete=\"off\"\r\n        fullWidth\r\n      />\r\n      <MyTextField margin=\"normal\" name=\"address\" label=\"\" autoComplete=\"off\" fullWidth />\r\n      <MyTextField margin=\"normal\" name=\"parents\" label=\"\" autoComplete=\"off\" fullWidth />\r\n\r\n      <FieldArray name=\"contacts\">\r\n        {({ insert, remove, push }) => (\r\n          <React.Fragment>\r\n            {values.contacts.length > 0 &&\r\n              values.contacts.map((contact, index) => (\r\n                <React.Fragment key={index}>\r\n                  <MyTextField\r\n                    margin=\"normal\"\r\n                    name={`contacts[${index}]`}\r\n                    label=\"\"\r\n                    autoComplete=\"off\"\r\n                    InputProps={{\r\n                      startAdornment: <InputAdornment position=\"start\">+7</InputAdornment>,\r\n                    }}\r\n                    fullWidth\r\n                  />\r\n                  {values.contacts.length > 1 && (\r\n                    <Tooltip title=\" \">\r\n                      <IconButton\r\n                        size=\"small\"\r\n                        aria-label=\" \"\r\n                        className=\"pupil-form__btn\"\r\n                        color=\"secondary\"\r\n                        onClick={() => remove(index)}>\r\n                        <ClearIcon />\r\n                      </IconButton>\r\n                    </Tooltip>\r\n                  )}\r\n                </React.Fragment>\r\n              ))}\r\n            {values.contacts.length < 5 && (\r\n              <Tooltip title=\" \">\r\n                <IconButton\r\n                  size=\"small\"\r\n                  color=\"secondary\"\r\n                  aria-label=\" \"\r\n                  className=\"pupil-form__btn pupil-form__btn-add-contact\"\r\n                  onClick={() => push('')}>\r\n                  <AddIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            )}\r\n          </React.Fragment>\r\n        )}\r\n      </FieldArray>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default AddPupilInputs;\r\n","import React from 'react';\r\nimport { FieldArray, useField, useFormikContext } from 'formik';\r\n\r\nimport TextField from '@material-ui/core/TextField';\r\nimport Select from '@material-ui/core/Select';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport ClearIcon from '@material-ui/icons/Clear';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Tooltip from '@material-ui/core/Tooltip';\r\n\r\nconst menuProps = {\r\n  anchorOrigin: {\r\n    vertical: 'bottom',\r\n    horizontal: 'left',\r\n  },\r\n  transformOrigin: {\r\n    vertical: 'top',\r\n    horizontal: 'left',\r\n  },\r\n  getContentAnchorEl: null,\r\n};\r\n\r\nconst iconComponent = (props) => <ExpandMoreIcon {...props} />;\r\n\r\nconst days = {\r\n  1: '',\r\n  2: '',\r\n  3: '',\r\n  4: '',\r\n  5: '',\r\n  6: '',\r\n  7: '',\r\n};\r\n\r\nfunction MyTextField({ ...props }) {\r\n  const [field, meta, helpers] = useField(props.name);\r\n  return (\r\n    <TextField\r\n      {...field}\r\n      {...props}\r\n      error={meta.touched && Boolean(meta.error)}\r\n      helperText={meta.touched && meta.error}\r\n    />\r\n  );\r\n}\r\n\r\nconst MySelect = ({ ...props }) => {\r\n  const [field, meta] = useField(props);\r\n  return (\r\n    <React.Fragment>\r\n      <Select {...field} {...props} error={meta.touched && Boolean(meta.error)} />\r\n      {meta.touched && meta.error ? (\r\n        <span className=\"pupil-form__select-error\">{meta.error}</span>\r\n      ) : null}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nfunction AddScheduleInputs() {\r\n  const { values } = useFormikContext();\r\n\r\n  return (\r\n    <FieldArray name=\"schedules\">\r\n      {({ insert, remove, push }) => (\r\n        <React.Fragment>\r\n          {values.schedules.length > 0 &&\r\n            values.schedules.map((schedule, index) => (\r\n              <React.Fragment key={index}>\r\n                <Grid container spacing={4}>\r\n                  <Grid item xs={12} sm={6}>\r\n                    <FormControl fullWidth>\r\n                      <InputLabel id=\"pupil-form__select-label\"> </InputLabel>\r\n                      <MySelect\r\n                        labelId=\"pupil-form__select-label\"\r\n                        name={`schedules[${index}].day`}\r\n                        MenuProps={menuProps}\r\n                        IconComponent={iconComponent}>\r\n                        {Object.keys(days).map((key) => (\r\n                          <MenuItem key={key} value={key}>\r\n                            {days[key]}\r\n                          </MenuItem>\r\n                        ))}\r\n                      </MySelect>\r\n                    </FormControl>\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={6}>\r\n                    <MyTextField\r\n                      margin=\"none\"\r\n                      name={`schedules[${index}].time`}\r\n                      type=\"time\"\r\n                      label=\" \"\r\n                      inputProps={{\r\n                        step: 300, // 5 min\r\n                      }}\r\n                      fullWidth\r\n                    />\r\n                  </Grid>\r\n                </Grid>\r\n                <MyTextField\r\n                  margin=\"normal\"\r\n                  name={`schedules[${index}].price`}\r\n                  type=\"number\"\r\n                  label=\" \"\r\n                  autoComplete=\"off\"\r\n                  fullWidth\r\n                />\r\n                <MyTextField\r\n                  margin=\"normal\"\r\n                  name={`schedules[${index}].subject`}\r\n                  label=\"\"\r\n                  autoComplete=\"off\"\r\n                  fullWidth\r\n                />\r\n                {values.schedules.length > 1 && (\r\n                  <Tooltip title=\" \">\r\n                    <IconButton\r\n                      size=\"small\"\r\n                      aria-label=\" \"\r\n                      className=\"pupil-form__btn\"\r\n                      color=\"secondary\"\r\n                      onClick={() => remove(index)}>\r\n                      <ClearIcon />\r\n                    </IconButton>\r\n                  </Tooltip>\r\n                )}\r\n              </React.Fragment>\r\n            ))}\r\n          <Tooltip title=\" \">\r\n            <IconButton\r\n              size=\"small\"\r\n              color=\"secondary\"\r\n              aria-label=\" \"\r\n              className=\"pupil-form__btn pupil-form__btn-add-contact\"\r\n              onClick={() => push({ day: '', price: '', subject: '', time: '15:00' })}>\r\n              <AddIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </React.Fragment>\r\n      )}\r\n    </FieldArray>\r\n  );\r\n}\r\n\r\nexport default AddScheduleInputs;\r\n","import * as yup from 'yup';\r\n\r\nconst MAX_LESSON_PAY = 999999;\r\n\r\nconst validationSchema = [\r\n  yup.object().shape({\r\n    name: yup\r\n      .string('  ')\r\n      .typeError('   ')\r\n      .max(100, '  100 ?')\r\n      .required('   '),\r\n    grade: yup // number?\r\n      .string('    ?')\r\n      .typeError('   ')\r\n      .matches(/^([1-9]?|1[0-9])$/, '   1  11')\r\n      .max(2, '  ,   ')\r\n      .required(' ,    '),\r\n    address: yup\r\n      .string(' ')\r\n      .max(200, '   ')\r\n      .typeError('   '),\r\n    parents: yup\r\n      .string('   ')\r\n      .max(100, 'C   ')\r\n      .typeError('     '),\r\n    contacts: yup.array().of(\r\n      yup\r\n        .string('  ')\r\n        .matches(/^[[0-9]+$/, '  ')\r\n        .typeError('   ')\r\n        .max(20, '   '),\r\n    ),\r\n  }),\r\n\r\n  yup.object().shape({\r\n    schedules: yup.array().of(\r\n      yup.object().shape({\r\n        day: yup\r\n          .mixed()\r\n          .oneOf(['1', '2', '3', '4', '5', '6', '7'])\r\n          .typeError('   ')\r\n          .required('  '),\r\n        time: yup\r\n          .string('  ')\r\n          .matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/, '    : \"17:00\"')\r\n          .max(5, '       ')\r\n          .required('  '),\r\n        price: yup\r\n          .number('  ')\r\n          .typeError('  ')\r\n          .min(0, '   ')\r\n          .max(MAX_LESSON_PAY, '        ')\r\n          .required('  '),\r\n        subject: yup\r\n          .string()\r\n          .max(200, '  ,  ')\r\n          .typeError('   ')\r\n          .required('  '),\r\n      }),\r\n    ),\r\n  }),\r\n];\r\n\r\nexport default validationSchema;\r\n","const formInitialValues = {\r\n  name: '',\r\n  grade: '',\r\n  address: '',\r\n  parents: '',\r\n  contacts: [''],\r\n  \r\n  schedules: [{\r\n    day: '',\r\n    time: '15:00',\r\n    price: '',\r\n    subject: ''\r\n  }],\r\n};\r\n\r\nexport default formInitialValues;\r\n","import uniqid from 'uniqid';\r\nimport { postPupil } from './pupils';\r\nimport { postSchedule } from './schedules';\r\n\r\nconst formHandler = ({ ...data }) => async (dispatch) => {\r\n  const pupilId = uniqid();\r\n\r\n  const schedules = data.schedules.map((schedule) => ({\r\n    id: uniqid(),\r\n    subject: schedule.subject,\r\n    time: schedule.time,\r\n    price: +schedule.price,\r\n    day: +schedule.day,\r\n    year: new Date().getFullYear(),\r\n    pupil: pupilId,\r\n    lessons: [],\r\n    timestamp: Date.now(),\r\n  }));\r\n\r\n  const pupil = {\r\n    id: pupilId,\r\n    name: data.name,\r\n    address: data.address,\r\n    grade: +data.grade,\r\n    parents: data.parents,\r\n    contacts: data.contacts,\r\n    schedulesId: schedules.map((schedule) => schedule.id),\r\n    timestamp: Date.now(),\r\n  };\r\n\r\n  await dispatch(postSchedule(schedules));\r\n  await dispatch(postPupil(pupil));\r\n};\r\n\r\nexport default formHandler;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Box from '@material-ui/core/Box';\r\nimport Stepper from '@material-ui/core/Stepper';\r\nimport Step from '@material-ui/core/Step';\r\nimport StepLabel from '@material-ui/core/StepLabel';\r\n\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\n\r\nimport AddPupilInputs from './AddPupilInputs';\r\nimport AddScheduleInputs from './AddScheduleInputs';\r\nimport validationSchema from './validationSchema';\r\nimport formInitialValues from './formInitialValues';\r\nimport formHandler from '../../redux/actions/newPupil';\r\nimport { fetchScheduledLessons } from '../../redux/actions/scheduledLessons';\r\nimport { combineDispatches } from '../../redux/actions/combineDispatches';\r\n\r\nconst steps = ['  ', ''];\r\nfunction getForm(step) {\r\n  switch (step) {\r\n    case 0:\r\n      return <AddPupilInputs />;\r\n    case 1:\r\n      return <AddScheduleInputs />;\r\n    default:\r\n      return null;\r\n  }\r\n}\r\n\r\nfunction AddPupilForm({ open, handleClose, width, handleSnack }) {\r\n  const dispatch = useDispatch();\r\n  const [activeStep, setActiveStep] = React.useState(0);\r\n  const currentValidationSchema = validationSchema[activeStep];\r\n  const isLastStep = activeStep === steps.length - 1;\r\n\r\n  const today = useSelector(({ date }) => date.selected);\r\n\r\n  const handleBack = () => {\r\n    setActiveStep((prevActiveStep) => prevActiveStep - 1);\r\n  };\r\n\r\n  const handleSubmit = (values, actions) => {\r\n    if (isLastStep) {\r\n      submitForm(values, actions);\r\n      handleSnack(true);\r\n      handleClose();\r\n    } else {\r\n      setActiveStep(activeStep + 1);\r\n      actions.setTouched({});\r\n      actions.setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  function submitForm(values, actions) {\r\n    actions.setSubmitting(false);\r\n    setActiveStep(activeStep + 1);\r\n    combineDispatches(\r\n      () => dispatch(formHandler(values)),\r\n      () => dispatch(fetchScheduledLessons(today)),\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={handleClose}\r\n      aria-labelledby=\"form-dialog-title\"\r\n      className=\"pupil-form__dialog\"\r\n      maxWidth=\"sm\"\r\n      fullScreen={isWidthDown('sm', width) ? true : false}>\r\n      <DialogTitle>   </DialogTitle>\r\n      <DialogContent className=\"pupil-form__dialog-content\">\r\n        <Stepper activeStep={activeStep}>\r\n          {steps.map((label, index) => {\r\n            const stepProps = {};\r\n            const labelProps = {};\r\n\r\n            return (\r\n              <Step key={label} {...stepProps}>\r\n                <StepLabel {...labelProps}>{label}</StepLabel>\r\n              </Step>\r\n            );\r\n          })}\r\n        </Stepper>\r\n        <Formik\r\n          initialValues={formInitialValues}\r\n          validationSchema={currentValidationSchema}\r\n          onSubmit={handleSubmit}>\r\n          <Form>\r\n            {getForm(activeStep)}\r\n\r\n            <Box className=\"pupil-form__controls\">\r\n              <Button variant=\"contained\" color=\"secondary\" onClick={handleClose}>\r\n                \r\n              </Button>\r\n              {activeStep !== 0 && (\r\n                <Button variant=\"contained\" color=\"secondary\" onClick={handleBack}>\r\n                  \r\n                </Button>\r\n              )}\r\n              <Button variant=\"contained\" color=\"secondary\" type=\"submit\">\r\n                {isLastStep ? '' : ''}\r\n              </Button>\r\n            </Box>\r\n          </Form>\r\n        </Formik>\r\n      </DialogContent>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default withWidth()(AddPupilForm);\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport Skeleton from '@material-ui/lab/Skeleton';\r\n\r\nimport PupilCard from './PupilCard';\r\nimport AddPupilForm from './addPupilForm/AddPupilForm';\r\nimport SnackPopup from './SnackPopup';\r\n\r\nfunction PupilsList() {\r\n  const pupils = useSelector(({ pupils }) => pupils.items);\r\n  const pupilsLoaded = useSelector(({ pupils }) => pupils.isLoaded);\r\n  const schedules = useSelector(({ schedules }) => schedules.items);\r\n  const schedulesLoaded = useSelector(({ schedules }) => schedules.isLoaded);\r\n  const [snackView, setSnackView] = React.useState(false);\r\n\r\n  /**\r\n   * prevent React state update on unmounted component!\r\n   */\r\n  React.useEffect(() => {\r\n    let timer;\r\n    timer = setTimeout(() => {\r\n      setSnackView(false);\r\n    }, 5000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [snackView]);\r\n\r\n  const isLoaded = pupilsLoaded && schedulesLoaded;\r\n\r\n  const [viewAddPupilForm, setViewAddPupilForm] = React.useState(false);\r\n\r\n  function handleAddLessonClick() {\r\n    setViewAddPupilForm(true);\r\n  }\r\n\r\n  function handleCloseAddLessonForm() {\r\n    setViewAddPupilForm(false);\r\n  }\r\n\r\n  function handleSnack(state) {\r\n    setSnackView(state);\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Box className=\"pupils__header-container\">\r\n        <Typography variant=\"h5\" className=\"pupils__header\">\r\n          \r\n        </Typography>\r\n\r\n        <Button\r\n          variant=\"contained\"\r\n          color=\"secondary\"\r\n          startIcon={<AddIcon />}\r\n          className=\"pupils__button-text\"\r\n          onClick={handleAddLessonClick}>\r\n           \r\n        </Button>\r\n      </Box>\r\n\r\n      <AddPupilForm\r\n        open={viewAddPupilForm}\r\n        handleClose={handleCloseAddLessonForm}\r\n        handleSnack={handleSnack}\r\n      />\r\n\r\n      <SnackPopup open={snackView} message=\" \" />\r\n\r\n      <Grid container spacing={2} className=\"pupils__card-container\">\r\n        {isLoaded\r\n          ? Object.keys(pupils).map((key) => (\r\n              <Grid key={key} item md={4} sm={6} xs={12}>\r\n                <PupilCard {...pupils[key]} schedules={schedules} />\r\n              </Grid>\r\n            ))\r\n          : new Array(6).fill(0).map((_, i) => (\r\n              <Grid key={i} item md={4} sm={6} xs={12}>\r\n                <Skeleton key={i} variant=\"rect\" className=\"pupils__skeleton\" />\r\n              </Grid>\r\n            ))}\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PupilsList;\r\n","const initialValues = {\r\n  firstName: '',\r\n  lastName: '',\r\n  password: '',\r\n  email: '',\r\n  recaptcha: '',\r\n};\r\n\r\nexport default initialValues;\r\n","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  firstName: yup\r\n    .string(' ')\r\n    .max(100, '     100 ')\r\n    .required('  '),\r\n  lastName: yup\r\n    .string(' ')\r\n    .max(100, '     100 ')\r\n    .required('  '),\r\n  email: yup\r\n    .string('   ')\r\n    .email('   ')\r\n    .required('   . '),\r\n  password: yup\r\n    .string(' ')\r\n    .min(6, '   6 ')\r\n    .max(30, '   30 ')\r\n    .required(' '),\r\n  recaptcha: yup\r\n    .mixed()\r\n    .notOneOf([''], '  Recaptcha')\r\n    .required('  Recaptcha'),\r\n});\r\n\r\nexport default validationSchema;\r\n","import React from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\n\r\nimport { MyTextField } from '../../CustomInputs';\r\n\r\nfunction SignupInputs() {\r\n  const [viewPassword, setViewPassword] = React.useState(false);\r\n  const handleClickShowPassword = () => setViewPassword((prev) => !prev);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container spacing={3} className=\"auth__inputs\">\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            autoComplete=\"fname\"\r\n            name=\"firstName\"\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            label=\"\"\r\n            autoFocus\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12} sm={6}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            label=\"\"\r\n            name=\"lastName\"\r\n            autoComplete=\"lname\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            label=\"Email \"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"\"\r\n            type={viewPassword ? 'text' : 'password'}\r\n            autoComplete=\"current-password\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    aria-label=\"toggle password visibility\"\r\n                    onClick={handleClickShowPassword}>\r\n                    {viewPassword ? <Visibility /> : <VisibilityOff />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default SignupInputs;\r\n","import React from 'react';\r\nimport { auth } from '../firebase';\r\n\r\nimport { CircularProgress } from '@material-ui/core';\r\n\r\nauth.languageCode = 'ru';\r\nexport const AuthContext = React.createContext({ test: 'success' });\r\n\r\nfunction AuthProvider({ children }) {\r\n  const [currentUser, setCurrentUser] = React.useState(null);\r\n  const [loading, setLoading] = React.useState(true);\r\n  const [firstLogin, setFirstLogin] = React.useState(false);\r\n\r\n  const signup = (email, password) => {\r\n    return auth.createUserWithEmailAndPassword(email, password);\r\n  };\r\n  const login = (email, password) => {\r\n    return auth.signInWithEmailAndPassword(email, password);\r\n  };\r\n  const updateUser = (name) => auth.currentUser.updateProfile({ displayName: name });\r\n  const signout = () => auth.signOut();\r\n  //  const getCredential = (credential) = () => credential. ;\r\n  // somehow this func runs befare currentUser state updating (race condition)\r\n  const verifyEmail = (user) =>\r\n    user.sendEmailVerification({\r\n      url:\r\n        !process.env.NODE_ENV || process.env.NODE_ENV === 'development'\r\n          ? 'https://localhost:3000/schedule/'\r\n          : 'https://pampush.github.io/tutor/',\r\n      handleCodeInApp: true,\r\n    });\r\n\r\n  React.useEffect(() => {\r\n    const unsubscribe = auth.onAuthStateChanged((user) => {\r\n      if (user) {\r\n        user.getIdTokenResult().then((res) => {\r\n          if (res.authTime === user.metadata.creationTime)\r\n            if (document.referrer === 'https://tutor-49686.firebaseapp.com/') setFirstLogin(true);\r\n        });\r\n        /**\r\n         * force token refresh\r\n         * https://github.com/firebase/firebase-js-sdk/issues/2529\r\n         */\r\n        user.getIdToken(true);\r\n        setCurrentUser(user);\r\n        setLoading(false);\r\n      } else {\r\n        setCurrentUser(user);\r\n        setLoading(false);\r\n      }\r\n    });\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  const value = {\r\n    currentUser,\r\n    signup,\r\n    login,\r\n    verifyEmail,\r\n    updateUser,\r\n    signout,\r\n    firstLogin,\r\n    setFirstLogin,\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading ? children : <CircularProgress />}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport { AuthProvider };\r\n","import React from 'react';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport ErrorOutlineIcon from '@material-ui/icons/ErrorOutline';\r\nimport Grow from '@material-ui/core/Grow';\r\n\r\nfunction ErrorSnack({ open, message, onClose }) {\r\n  return (\r\n    <Snackbar\r\n      open={open}\r\n      message={\r\n        <React.Fragment>\r\n          <ErrorOutlineIcon />\r\n          <Typography variant=\"body1\">{message}</Typography>\r\n        </React.Fragment>\r\n      }\r\n      TransitionComponent={Grow}\r\n      anchorOrigin={{ horizontal: 'center', vertical: 'top' }}\r\n      autoHideDuration={3000}\r\n      onClose={() => onClose(false)}\r\n      className=\"auth__snackbar\"\r\n    />\r\n  );\r\n}\r\n\r\nexport default ErrorSnack;\r\n","import React from 'react';\r\nimport firebase from 'firebase/app';\r\nimport { useFormikContext } from 'formik';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nfunction Recaptcha() {\r\n  const { errors, setFieldTouched, setFieldValue, touched } = useFormikContext();\r\n  React.useEffect(() => {\r\n    let recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha', {\r\n      size: 'normal',\r\n      callback: (response) => {\r\n        setFieldTouched('recaptcha', true);\r\n        setFieldValue('recaptcha', response);\r\n      },\r\n      'expired-callback': () => {\r\n        setFieldValue('recaptcha', '');\r\n      },\r\n    });\r\n\r\n    recaptchaVerifier.render().then((widgetId) => (recaptchaVerifier = widgetId));\r\n  }, []);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Box id=\"recaptcha\" mt={2} mb={2} />\r\n      {errors.recaptcha && touched.recaptcha && (\r\n        <Typography color=\"error\">{errors.recaptcha}</Typography>\r\n      )}\r\n      <input type=\"hidden\" name=\"recaptcha\"></input>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Recaptcha;\r\n","import React from 'react';\r\nimport { Snackbar, Typography } from '@material-ui/core';\r\nimport CheckCircleOutlineIcon from '@material-ui/icons/CheckCircleOutline';\r\nimport Grow from '@material-ui/core/Grow';\r\nimport { makeStyles } from '@material-ui/styles';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    backgroundColor: '#4caf50',\r\n  },\r\n});\r\n\r\nfunction EmailSnack({ open, message, onClose }) {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Snackbar\r\n      anchorOrigin={{\r\n        vertical: 'bottom',\r\n        horizontal: 'center',\r\n      }}\r\n      message={\r\n        <React.Fragment>\r\n          <CheckCircleOutlineIcon />\r\n          <Typography variant=\"body1\">{message}</Typography>\r\n        </React.Fragment>\r\n      }\r\n      ContentProps={{ classes: { root: classes.paper } }}\r\n      open={open}\r\n      TransitionComponent={Grow}\r\n      autoHideDuration={3000}\r\n      onClose={onClose}\r\n    />\r\n  );\r\n}\r\n\r\nexport default EmailSnack;\r\n","import { db } from '../../firebase';\r\n\r\nexport const postUser = ({ id, name, timestamp, email }) => async (dispatch) => {\r\n  await db.doc(`/users/${id}`).set({ id, name, timestamp, email });\r\n  //dispatch(addUser({ id, name, timestamp }));\r\n};\r\n\r\nexport const fetchUser = (id) => async (dispatch) => {\r\n  const user = await db.doc(`/users/${id}`).get();\r\n  dispatch(addUser(user.data()));\r\n};\r\n\r\nexport const addUser = (data) => ({\r\n  type: 'SET_USER',\r\n  payload: data,\r\n});\r\n","import React from 'react';\r\nimport Link from '@material-ui/core/Link';\r\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\r\n\r\nimport Box from '@material-ui/core/Box';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\nfunction Footer({ width }) {\r\n  return (\r\n    <Box mb={2} mt={4}>\r\n      <Typography variant={isWidthDown('md', width) ? 'body2' : 'body1'} align=\"center\">\r\n         2021{' '}\r\n        <Link href=\"https://github.com/pampush\" target=\"_blank\">\r\n          github.com/pampush\r\n        </Link>\r\n      </Typography>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default withWidth()(Footer);\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Link as RouterLink } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport SignupInputs from './SignupInputs';\r\nimport { AuthContext } from '../../../contexts/AuthContext';\r\nimport ErrorSnack from '../ErrorSnack';\r\nimport Recaptcha from './Recaptcha';\r\nimport EmailSnack from '../EmailSnack';\r\nimport { postUser } from '../../../redux/actions/user';\r\nimport Footer from '../Footer';\r\n\r\nfunction Signup() {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n  const { signup, verifyEmail, updateUser } = React.useContext(AuthContext);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState('');\r\n  const [viewSnack, setViewSnack] = React.useState(false);\r\n  const [viewEmailVerifySnack, setViewEmailVerifySnack] = React.useState(false);\r\n\r\n  const handleSubmit = async (values, actions) => {\r\n    actions.setSubmitting(false);\r\n    setLoading(true);\r\n    try {\r\n      const name = values.firstName + ' ' + values.lastName;\r\n      const userCredential = await signup(values.email, values.password);\r\n      await updateUser(name);\r\n      await verifyEmail(userCredential.user);\r\n\r\n      setViewEmailVerifySnack(true);\r\n      dispatch(\r\n        postUser({\r\n          id: userCredential.user.uid,\r\n          name,\r\n          timestamp: Date.now(),\r\n          email: userCredential.user.email,\r\n        }),\r\n      );\r\n\r\n      setTimeout(() => history.push('/login'), 3000);\r\n    } catch (e) {\r\n      switch (e.code) {\r\n        case 'auth/email-already-in-use': {\r\n          setError('  ');\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n      setViewSnack(true);\r\n    }\r\n    //dispatch(signup(values.email, values.password));\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setLoading(false);\r\n    }, 3000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [loading]);\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <EmailSnack\r\n        open={viewEmailVerifySnack}\r\n        message={\r\n          '!       email     .'\r\n        }\r\n        onClose={() => setViewEmailVerifySnack(false)}\r\n      />\r\n      <Container component=\"main\" maxWidth=\"sm\" className=\"auth__main\">\r\n        {error && <ErrorSnack open={viewSnack} message={error} onClose={setViewSnack} />}\r\n        <CssBaseline />\r\n        <Grid container className=\"auth__container\">\r\n          <Grid\r\n            container\r\n            direction=\"column\"\r\n            alignItems=\"center\"\r\n            spacing={1}\r\n            className=\"auth__header-container\">\r\n            <Grid item>\r\n              <Avatar className=\"auth__avatar\">\r\n                <LockOutlinedIcon />\r\n              </Avatar>\r\n            </Grid>\r\n            <Grid item>\r\n              <Typography component=\"h1\" variant=\"h5\" className=\"auth__header-title\">\r\n                \r\n              </Typography>\r\n            </Grid>\r\n          </Grid>\r\n\r\n          <Formik\r\n            initialValues={initialValues}\r\n            validationSchema={validationSchema}\r\n            onSubmit={handleSubmit}>\r\n            {({ setFieldValue, errors, touched }) => (\r\n              <Form>\r\n                <SignupInputs />\r\n                <Recaptcha />\r\n                <Button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  fullWidth\r\n                  variant=\"contained\"\r\n                  color=\"secondary\"\r\n                  className=\"auth__submit\">\r\n                  \r\n                </Button>\r\n              </Form>\r\n            )}\r\n          </Formik>\r\n          <Box mt={5}>\r\n            <RouterLink to=\"/login\">  </RouterLink>\r\n          </Box>\r\n        </Grid>\r\n        <Footer />\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Signup;\r\n","const initialValues = {\r\n  email: '',\r\n  password: '',\r\n  recaptcha: false\r\n}\r\n\r\nexport default initialValues;","import * as yup from 'yup';\r\n\r\nconst validationSchema = yup.object().shape({\r\n  email: yup\r\n    .string('   ')\r\n    .email('   ')\r\n    .required('   . '),\r\n  password: yup\r\n    .string(' ')\r\n    .min(6, '   6 ')\r\n    .max(30, '   30 ')\r\n    .required(' '),\r\n    \r\n});\r\nexport default validationSchema;\r\n","import React from 'react';\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport Visibility from '@material-ui/icons/Visibility';\r\nimport VisibilityOff from '@material-ui/icons/VisibilityOff';\r\n\r\nimport { MyTextField } from '../../CustomInputs';\r\n\r\nfunction LoginInputs() {\r\n  const [viewPassword, setViewPassword] = React.useState(false);\r\n  const handleClickShowPassword = () => setViewPassword((prev) => !prev);\r\n  return (\r\n    <React.Fragment>\r\n      <Grid container spacing={3} className=\"auth__inputs\">\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            label=\"Email \"\r\n            name=\"email\"\r\n            autoComplete=\"email\"\r\n          />\r\n        </Grid>\r\n        <Grid item xs={12}>\r\n          <MyTextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            name=\"password\"\r\n            label=\"\"\r\n            type={viewPassword ? 'text' : 'password'}\r\n            autoComplete=\"current-password\"\r\n            InputProps={{\r\n              endAdornment: (\r\n                <InputAdornment position=\"end\">\r\n                  <IconButton\r\n                    aria-label=\"toggle password visibility\"\r\n                    onClick={handleClickShowPassword}>\r\n                    {viewPassword ? <Visibility /> : <VisibilityOff />}\r\n                  </IconButton>\r\n                </InputAdornment>\r\n              ),\r\n            }}\r\n          />\r\n        </Grid>\r\n      </Grid>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default LoginInputs;\r\n","import React from 'react';\r\nimport { Formik, Form } from 'formik';\r\nimport { useHistory, Link } from 'react-router-dom';\r\n\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport Button from '@material-ui/core/Button';\r\nimport CssBaseline from '@material-ui/core/CssBaseline';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Box from '@material-ui/core/Box';\r\nimport LockOutlinedIcon from '@material-ui/icons/LockOutlined';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport initialValues from './initialValues';\r\nimport validationSchema from './validationSchema';\r\nimport LoginInputs from './LoginInputs';\r\nimport { AuthContext } from '../../../contexts/AuthContext';\r\nimport ErrorSnack from '../ErrorSnack';\r\nimport Footer from '../Footer';\r\n\r\nfunction Login() {\r\n  const history = useHistory();\r\n  const { login } = React.useContext(AuthContext);\r\n  const [loading, setLoading] = React.useState(false);\r\n  const [error, setError] = React.useState('');\r\n  const [viewSnack, setViewSnack] = React.useState(false);\r\n\r\n  const handleSubmit = async (values, actions) => {\r\n    actions.setSubmitting(false);\r\n    setLoading(true);\r\n    try {\r\n      await login(values.email, values.password);\r\n      history.push('/tutor');\r\n    } catch (e) {\r\n      switch (e.code) {\r\n        case 'auth/user-not-found': {\r\n          setError('   email  ');\r\n          break;\r\n        }\r\n        case 'auth/wrong-password': {\r\n          setError(' ');\r\n          break;\r\n        }\r\n        case 'auth/too-many-requests': {\r\n          setError('   .     ');\r\n          break;\r\n        }\r\n        default:\r\n          break;\r\n      }\r\n      setViewSnack(true);\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setLoading(false);\r\n    }, 3000);\r\n    return () => {\r\n      clearTimeout(timer);\r\n    };\r\n  }, [loading]);\r\n\r\n  return (\r\n    <Container component=\"main\" maxWidth=\"sm\" className=\"auth__main\">\r\n      {error && <ErrorSnack open={viewSnack} message={error} onClose={setViewSnack} />}\r\n      <CssBaseline />\r\n\r\n      <Grid container className=\"auth__container\">\r\n        <Grid\r\n          container\r\n          direction=\"column\"\r\n          alignItems=\"center\"\r\n          spacing={1}\r\n          className=\"auth__header-container\">\r\n          <Grid item>\r\n            <Avatar className=\"auth__avatar\">\r\n              <LockOutlinedIcon />\r\n            </Avatar>\r\n          </Grid>\r\n          <Grid item>\r\n            <Typography component=\"h1\" variant=\"h5\" className=\"auth__header-title\">\r\n                 \r\n            </Typography>\r\n          </Grid>\r\n        </Grid>\r\n\r\n        <Formik\r\n          initialValues={initialValues}\r\n          validationSchema={validationSchema}\r\n          onSubmit={handleSubmit}>\r\n          {({ values }) => (\r\n            <Form>\r\n              <LoginInputs />\r\n\r\n              <Button\r\n                type=\"submit\"\r\n                disabled={loading}\r\n                fullWidth\r\n                variant=\"contained\"\r\n                color=\"secondary\"\r\n                className=\"auth__submit\">\r\n                \r\n              </Button>\r\n            </Form>\r\n          )}\r\n        </Formik>\r\n        <Box mt={5}>\r\n              ? <Link to=\"/signup\"></Link>\r\n        </Box>\r\n      </Grid>\r\n      <Footer />\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Login;\r\n","var _rect, _rect2, _rect3, _rect4, _rect5, _rect6, _rect7, _rect8, _rect9, _rect10, _rect11, _rect12;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgNotfound(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _rect || (_rect = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 80,\n    x: 0,\n    y: 0\n  })), _rect2 || (_rect2 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 50,\n    x: 60,\n    y: 40\n  })), _rect3 || (_rect3 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 80,\n    y: 10\n  })), _rect4 || (_rect4 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 90,\n    y: 20\n  })), _rect5 || (_rect5 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 110,\n    width: 10,\n    x: 0,\n    y: 0\n  })), _rect6 || (_rect6 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 50,\n    width: 10,\n    x: 60,\n    y: 0\n  })), _rect7 || (_rect7 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 20,\n    width: 10,\n    x: 30,\n    y: 30\n  })), _rect8 || (_rect8 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 110,\n    x: 0,\n    y: 110\n  })), _rect9 || (_rect9 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 30,\n    x: 40,\n    y: 70\n  })), _rect10 || (_rect10 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 30,\n    y: 80\n  })), _rect11 || (_rect11 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 10,\n    width: 10,\n    x: 70,\n    y: 80\n  })), _rect12 || (_rect12 = /*#__PURE__*/React.createElement(\"rect\", {\n    height: 80,\n    width: 10,\n    x: 100,\n    y: 30\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgNotfound);\nexport default __webpack_public_path__ + \"static/media/notfound.8312485b.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\nimport Button from '@material-ui/core/Button';\r\nimport { ReactComponent as NonFoundIcon } from '../assets/img/notfound.svg';\r\n\r\nfunction NotFound() {\r\n  return (\r\n    <Box class=\"notfound__container\">\r\n      <NonFoundIcon class=\"notfound__svg\" />\r\n      <Typography variant=\"h2\" align=\"center\">\r\n        404\r\n      </Typography>\r\n      <Typography variant=\"h3\" align=\"center\">\r\n          \r\n      </Typography>\r\n\r\n      <Button size=\"large\" variant=\"contained\" color=\"secondary\" component={Link} to=\"/schedule\">\r\n        \r\n      </Button>\r\n    </Box>\r\n  );\r\n}\r\n\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport Button from '@material-ui/core/Button';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport { makeStyles } from '@material-ui/styles';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Box from '@material-ui/core/Box';\r\n\r\nconst useStyles = makeStyles({\r\n  paper: {\r\n    height: '500px',\r\n  },\r\n  container: {\r\n    marginBottom: '20px',\r\n  },\r\n  main: {\r\n    paddingTop: '20px',\r\n  },\r\n  button: {\r\n    backgroundColor: '#ff9800',\r\n    color: '#FFFFFF',\r\n    fontWeight: '600',\r\n    borderRadius: '4px',\r\n  },\r\n});\r\n\r\nfunction Instruction({ open, handleClose }) {\r\n  const classes = useStyles();\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      className={`instruction__container`}\r\n      classes={{\r\n        paper: classes.paper,\r\n      }}\r\n      maxWidth=\"md\">\r\n      <Box p={5} pt={5}>\r\n        <Typography variant=\"h4\">  </Typography>\r\n        <Box mb={5} mt={2}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<AddIcon />}\r\n            className=\"lessons__button-text\"\r\n            disabled>\r\n             \r\n          </Button>\r\n          <Typography variant=\"body1\">     </Typography>\r\n        </Box>\r\n        <Box mb={5}>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"secondary\"\r\n            startIcon={<AddIcon />}\r\n            className=\"pupils__button-text\"\r\n            disabled>\r\n             \r\n          </Button>\r\n          <Typography variant=\"body1\">\r\n                  \r\n          </Typography>\r\n        </Box>\r\n        <Box>\r\n          <ListItem\r\n            button\r\n            component={Link}\r\n            to=\"/schedule\"\r\n            className={classes.button}\r\n            onClick={() => handleClose(false)}>\r\n            \r\n          </ListItem>\r\n        </Box>\r\n      </Box>\r\n    </Dialog>\r\n  );\r\n}\r\n\r\nexport default Instruction;\r\n","import React from 'react';\r\nimport { Calendar, Lessons, Instruction } from '../components';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nimport { fetchLessons } from '../redux/actions/lessons';\r\nimport { fetchScheduledLessons } from '../redux/actions/scheduledLessons';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\n\r\nimport Hidden from '@material-ui/core/Hidden';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\nimport Box from '@material-ui/core/Box';\r\n\r\n\r\nfunction Schedule() {\r\n  const dispatch = useDispatch();\r\n  const [anchorCalendar, setAnchorEl] = React.useState(null);\r\n  const { firstLogin, setFirstLogin } = React.useContext(AuthContext);\r\n  function handleCalendarOpen(e) {\r\n    setAnchorEl(e.currentTarget);\r\n  }\r\n\r\n  function handleCalendarClose() {\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  function handleCalendarClick(date) {\r\n    dispatch(fetchLessons(date));\r\n    dispatch(fetchScheduledLessons(date));\r\n    setAnchorEl(null);\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {firstLogin && <Instruction open={firstLogin} handleClose={setFirstLogin} />}\r\n      <Container maxWidth=\"xl\" className=\"lessons__container\">\r\n        <Grid container spacing={2}>\r\n          <Hidden only={['xs', 'sm']}>\r\n            <Grid item xs={8}>\r\n              <Lessons\r\n                anchor={anchorCalendar}\r\n                handleClick={handleCalendarOpen}\r\n                handleClose={handleCalendarClose}\r\n                handleCalendarClick={handleCalendarClick}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n\r\n          <Hidden mdUp>\r\n            <Grid item xs={12}>\r\n              <Lessons\r\n                anchor={anchorCalendar}\r\n                handleCalendarOpen={handleCalendarOpen}\r\n                handleCalendarClose={handleCalendarClose}\r\n                handleCalendarClick={handleCalendarClick}\r\n              />\r\n            </Grid>\r\n          </Hidden>\r\n\r\n          <Hidden smDown>\r\n            <Grid item xs={4} className=\"calendar__container\">\r\n              <Box className=\"calendar--fixed\">\r\n                <Calendar handleClick={handleCalendarClick} />\r\n              </Box>\r\n            </Grid>\r\n          </Hidden>\r\n        </Grid>\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Schedule;\r\n","import React from 'react';\r\n\r\nimport Container from '@material-ui/core/Container';\r\n\r\nimport { PupilsList } from '../components';\r\n\r\nfunction Pupils() {\r\n  return (\r\n    <React.Fragment>\r\n      <Container maxWidth=\"xl\" className=\"pupils__container\">\r\n        <PupilsList />\r\n      </Container>\r\n    </React.Fragment>\r\n  );\r\n}\r\n\r\nexport default Pupils;\r\n","import { db } from '../../firebase';\r\nimport { auth } from '../../firebase';\r\n\r\nexport const fetchPrices = async (date) => {\r\n  const prices = {};\r\n  const lessonsPromises = [];\r\n  const pupilsSnapshot = await db.collection(`/users/${auth.currentUser.uid}/pupils`).get();\r\n\r\n  pupilsSnapshot.forEach((pupil) => {\r\n    prices[pupil.data().id] = { sum: 0, name: pupil.data().name };\r\n    lessonsPromises.push(\r\n      db\r\n        .collection(`/users/${auth.currentUser.uid}/lessons`)\r\n        .where('pupil', '==', pupil.data().id)\r\n        .where('date', '>=', date + '-00')\r\n        .where('date', '<=', date + '31')\r\n        .get(),\r\n    );\r\n  });\r\n\r\n  const lessonsByPupil = await Promise.all(lessonsPromises);\r\n  lessonsByPupil.forEach((lessonsSnapshot) =>\r\n    lessonsSnapshot.forEach((lessonsSnap) => {\r\n      prices[lessonsSnap.data().pupil].sum =\r\n        prices[lessonsSnap.data().pupil].sum + lessonsSnap.data().price;\r\n    }),\r\n  );\r\n\r\n  return prices;\r\n  //lessonsSnapshot.forEach(lesson => )\r\n};\r\n","import React from 'react';\r\nimport { fetchPrices } from '../redux/actions/finance';\r\nimport { Container, TextField } from '@material-ui/core';\r\n\r\nimport {\r\n  Chart,\r\n  BarElement,\r\n  LinearScale,\r\n  BarController,\r\n  CategoryScale,\r\n  PieController,\r\n  ArcElement,\r\n  Tooltip,\r\n  Legend,\r\n  DoughnutController,\r\n} from 'chart.js';\r\n\r\nChart.register(\r\n  LinearScale,\r\n  Tooltip,\r\n  BarElement,\r\n  BarController,\r\n  CategoryScale,\r\n  PieController,\r\n  ArcElement,\r\n  Legend,\r\n  DoughnutController,\r\n);\r\n\r\nfunction colorGen() {\r\n  const r = Math.floor(Math.random() * 256);\r\n  const g = Math.floor(Math.random() * 256);\r\n  const b = Math.floor(Math.random() * 256);\r\n  return `rgb(${r}, ${g}, ${b})`;\r\n}\r\n\r\nfunction Finance() {\r\n  const canvas = React.useRef(null);\r\n\r\n  const [date, setDate] = React.useState(\r\n    `${new Date().getFullYear()}-${('0' + (new Date().getMonth() + 1)).slice(-2)}`,\r\n  );\r\n\r\n  const [prices, setPrices] = React.useState(null);\r\n\r\n  React.useEffect(() => {\r\n    let mounted = true;\r\n\r\n    try {\r\n      fetchPrices(date).then((prices) => mounted && setPrices(prices));\r\n    } catch (e) {\r\n      console.log(e);\r\n    }\r\n\r\n    return () => {\r\n      mounted = false;\r\n    };\r\n  }, [date]);\r\n\r\n  React.useEffect(() => {\r\n    if (!prices) return;\r\n    console.log(prices);\r\n    const myChart = new Chart(canvas.current, {\r\n      type: 'doughnut',\r\n      data: {\r\n        labels: Object.values(prices).map(({ name }) => name),\r\n        datasets: [\r\n          {\r\n            label: 'first',\r\n            data: Object.values(prices).map(({ sum }) => sum),\r\n            backgroundColor: Object.keys(prices).map(() => colorGen()),\r\n\r\n            hoverOffset: 4,\r\n          },\r\n        ],\r\n      },\r\n      options: {\r\n        plugins: {\r\n          legend: {\r\n            position: 'bottom',\r\n          },\r\n        },\r\n      },\r\n    });\r\n    return () => myChart.destroy();\r\n  }, [prices]);\r\n\r\n  return (\r\n    <Container>\r\n      <TextField\r\n        value={date}\r\n        onChange={(e) => setDate(e.target.value)}\r\n        margin=\"normal\"\r\n        name=\"month\"\r\n        label=\"\"\r\n        type=\"month\"\r\n        autoComplete=\"off\"\r\n      />\r\n      {prices && Object.keys(prices).length ? (\r\n        <div className=\"finance__container\">\r\n          <span className=\"finance__center\">\r\n            {Object.values(prices).reduce((accum, next) => ({ sum: accum.sum + next.sum })).sum ||\r\n              '  '}\r\n          </span>\r\n          <canvas ref={canvas}></canvas>\r\n        </div>\r\n      ) : (\r\n        '  '\r\n      )}\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default Finance;\r\n","const signoutAction = () => ({\r\n  type: 'USER_SIGNOUT',\r\n});\r\n\r\nexport default signoutAction;\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { AuthContext } from '../contexts/AuthContext';\r\n\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\r\nimport Avatar from '@material-ui/core/Avatar';\r\nimport ImageIcon from '@material-ui/icons/Image';\r\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\r\nimport EmailIcon from '@material-ui/icons/Email';\r\nimport LockIcon from '@material-ui/icons/Lock';\r\n\r\nimport signoutAction from '../redux/actions/signout';\r\n\r\nfunction Settings() {\r\n  const dispatch = useDispatch();\r\n  const { signout } = React.useContext(AuthContext);\r\n\r\n  async function handleSignout() {\r\n    await signout();\r\n    dispatch(signoutAction());\r\n  }\r\n\r\n  return (\r\n    <List className=\"settings__container\">\r\n      <ListItem button>\r\n        <ListItemAvatar>\r\n          <Avatar className=\"settings__avatar\">\r\n            <ImageIcon />\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText primary=\" (disabled)\" />\r\n      </ListItem>\r\n      <ListItem button>\r\n        <ListItemAvatar>\r\n          <Avatar className=\"settings__avatar\">\r\n            <LockIcon />\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText primary=\" (disabled)\" />\r\n      </ListItem>\r\n      <ListItem button>\r\n        <ListItemAvatar>\r\n          <Avatar className=\"settings__avatar\">\r\n            <EmailIcon />\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText primary=\" email(disabled)\" />\r\n      </ListItem>\r\n      <ListItem button onClick={handleSignout}>\r\n        <ListItemAvatar>\r\n          <Avatar className=\"settings__avatar\">\r\n            <ExitToAppIcon />\r\n          </Avatar>\r\n        </ListItemAvatar>\r\n        <ListItemText primary=\"  \" />\r\n      </ListItem>\r\n    </List>\r\n  );\r\n}\r\n\r\nexport default Settings;\r\n","/**\r\n * push from content pages if not signed in\r\n */\r\n\r\nimport React from 'react';\r\nimport { Route, Redirect } from 'react-router';\r\n\r\nimport { AuthContext } from './contexts/AuthContext';\r\n\r\nfunction PrivateRoute({ component: Component, ...rest }) {\r\n  const { currentUser } = React.useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return currentUser && currentUser.emailVerified ? (\r\n          <Component {...props} />\r\n        ) : (\r\n          <Redirect to=\"/login\" />\r\n        );\r\n      }}></Route>\r\n  );\r\n}\r\n\r\nexport default PrivateRoute;\r\n","/**\r\n * push from login/signup if signed in\r\n */\r\n\r\nimport React from 'react';\r\nimport { Route, Redirect } from 'react-router';\r\n\r\nimport { AuthContext } from './contexts/AuthContext';\r\n\r\nfunction PrivateSignedInRoute({ component: Component, ...rest }) {\r\n  const { currentUser } = React.useContext(AuthContext);\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(props) => {\r\n        return currentUser && currentUser.emailVerified ? (\r\n          <Redirect to=\"/schedule\" />\r\n          ) : (\r\n          <Component {...props} />\r\n        );\r\n      }}></Route>\r\n  );\r\n}\r\n\r\nexport default PrivateSignedInRoute;\r\n","import React from 'react';\nimport { Switch, Route, Redirect } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { auth } from './firebase';\n\nimport theme from './stylesOverride';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport { ThemeProvider } from '@material-ui/core/styles';\nimport StylesProvider from '@material-ui/styles/StylesProvider';\nimport Container from '@material-ui/core/Container';\nimport Box from '@material-ui/core/Box';\n\nimport { Menu, InfoPanel, Signup, Login, NotFound } from './components';\nimport Schedule from './pages/Schedule';\nimport Pupils from './pages/Pupils';\nimport Finance from './pages/Finance';\nimport Settings from './pages/Settings';\nimport PrivateRoute from './PrivateRoute';\nimport PrivateSignedInRoute from './PrivateSignedInRoute';\n\nimport { fetchLessons } from './redux/actions/lessons';\nimport { fetchPupils } from './redux/actions/pupils';\nimport { fetchSchedules } from './redux/actions/schedules';\nimport { fetchScheduledLessons } from './redux/actions/scheduledLessons';\nimport { fetchUser } from './redux/actions/user';\nimport { setDate } from './redux/actions/date';\n\nfunction Content() {\n  const dispatch = useDispatch();\n\n  React.useEffect(() => {\n    dispatch(setDate(new Date()));\n    dispatch(fetchLessons(new Date()));\n    dispatch(fetchScheduledLessons(new Date()));\n    dispatch(fetchPupils());\n    dispatch(fetchSchedules());\n    dispatch(fetchUser(auth.currentUser.uid));\n  }, []);\n\n  return (\n    <React.Fragment>\n      <Menu />\n      <Box className=\"content\">\n        <Container maxWidth=\"xl\">\n          <InfoPanel />\n          <Switch>\n            <Route path=\"/tutor\">\n              <Schedule />\n            </Route>\n            <Route path=\"/schedule\">\n              <Schedule />\n            </Route>\n            <Route path=\"/pupils\">\n              <Pupils />\n            </Route>\n            <Route path=\"/finance\">\n              <Finance />\n            </Route>\n            <Route path=\"/settings\">\n              <Settings />\n            </Route>\n            <Route path=\"*\">\n              <Redirect to=\"/404\" />\n            </Route>\n          </Switch>\n        </Container>\n      </Box>\n    </React.Fragment>\n  );\n}\n\nfunction App() {\n  return (\n    <StylesProvider injectFirst>\n      <ThemeProvider theme={theme}>\n        <CssBaseline />\n        <Switch>\n          <Route path=\"/404\">\n            <NotFound />\n          </Route>\n          <PrivateSignedInRoute path=\"/signup\" component={Signup}></PrivateSignedInRoute>\n          <PrivateSignedInRoute path=\"/login\" component={Login}></PrivateSignedInRoute>\n          <PrivateRoute path=\"/:page\" component={Content}></PrivateRoute>\n        </Switch>\n      </ThemeProvider>\n    </StylesProvider>\n  );\n}\n\nexport default App;\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst pupils = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_PUPILS': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'SET_PUPILS_LOADED': {\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    }\r\n    case 'ADD_PUPIL': {\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, [action.payload.id]: action.payload },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'DELETE_PUPIL': {\r\n      const newState = { ...state.items };\r\n      delete newState[action.payload];\r\n      return {\r\n        ...state,\r\n        items: newState,\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default pupils;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst schedules = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_SCHEDULES':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_SCHEDULES_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    case 'ADD_SCHEDULE': {\r\n      let schedules = {};\r\n      action.payload.forEach(\r\n        (item) =>\r\n          (schedules = {\r\n            ...schedules,\r\n            [item.id]: item,\r\n          }),\r\n      );\r\n      return {\r\n        ...state,\r\n        items: { ...state.items, ...schedules },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    case 'UPDATE_LESSONS_FIELD': {\r\n      let newLessons = [...state.items[action.payload.id].lessons];\r\n      if (action.payload.procedure === 'push') newLessons.push(action.payload.date);\r\n      if (action.payload.procedure === 'pop')\r\n        newLessons = newLessons.filter((item) => item !== action.payload.date);\r\n      return {\r\n        ...state,\r\n        items: {\r\n          ...state.items,\r\n          [action.payload.id]: {\r\n            ...state.items[action.payload.id],\r\n            lessons: newLessons,\r\n          },\r\n        },\r\n        isLoaded: true,\r\n      };\r\n    }\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default schedules;\r\n","const initialState = {\r\n  items: {},\r\n  isLoaded: false,\r\n};\r\n\r\nconst scheduledLessons = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_SCHEDULED_LESSONS':\r\n      return {\r\n        ...state,\r\n        items: { ...action.payload },\r\n        isLoaded: true,\r\n      };\r\n    case 'SET_SCHEDULED_LESSONS_LOADED':\r\n      return {\r\n        ...state,\r\n        isLoaded: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default scheduledLessons;\r\n","const initialState = {\r\n  selected: '',\r\n};\r\n\r\nconst date = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_DATE':\r\n      return {\r\n        ...state,\r\n        selected: action.payload,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default date;\r\n","const initialState = {\r\n  name: '',\r\n  id: '',\r\n  timestamp: '',\r\n  email: '',\r\n};\r\n\r\nconst user = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case 'SET_USER':\r\n      return action.payload;\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default user;\r\n","import { combineReducers } from 'redux';\r\n\r\nimport lessons from './lessons';\r\nimport pupils from './pupils';\r\nimport schedules from './schedules';\r\nimport scheduledLessons from './scheduledLessons';\r\nimport date from './date';\r\nimport user from './user';\r\n\r\nconst appReducer = combineReducers({\r\n  user,\r\n  lessons,\r\n  pupils,\r\n  schedules,\r\n  scheduledLessons,\r\n  date,\r\n});\r\n\r\nconst rootReducer = (state, action) => {\r\n  if (action.type === 'USER_SIGNOUT') state = undefined;\r\n  return appReducer(state, action);\r\n};\r\n\r\nexport default rootReducer;\r\n","import { createStore, compose, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport rootReducer from './reducers';\r\n\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(rootReducer, composeEnhancers(applyMiddleware(thunk)));\r\n\r\nexport default store;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { AuthProvider } from './contexts/AuthContext';\n\nimport './sass/styles.sass';\n\nimport store from './redux/store';\n\nReactDOM.render(\n  <Router>\n    <Provider store={store}>\n      <AuthProvider>\n        <App />\n      </AuthProvider>\n    </Provider>\n  </Router>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}